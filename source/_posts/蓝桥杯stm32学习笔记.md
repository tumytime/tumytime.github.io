---
title: 蓝桥杯stm32学习笔记(一)：相关元件/配置
date: 2024-02-27 20:31:15
tags: [嵌入式 ,stm32,蓝桥杯]
categories: 嵌入式
swiperImg: https://tumytime.github.io/picx-images-hosting/20240205/Screenshot_20240205_223525.11l7h2o44fzk.webp
bgImg: https://tumytime.github.io/picx-images-hosting/20240205/9f2685b1e4401ff98ae648edd1cb8866.39vtcqu2gu60.webp
top: true
---

{% folding, 碎碎念 %}
离蓝桥杯还有45天，我的32总共才学了四五天/(ㄒoㄒ)/~~
虽然考核作业做完了但是都是现学现弄的，不能做到独立系统地完成
最近事情好多，这几天赶紧先学一遍
2.27-3.1
{% image https://tumytime.github.io/picx-images-hosting/image.4n7g52t9ay.webp %}
{% endfolding %}
{% note info, 开发板芯片：stm32g4rbt6;HAL库开发 %}

# 产品手册
{% folding open, 产品手册 %}
这个电子书有bug。。。如果有人想看的话直接点一下这个封面。或者往下翻一点，有一个乱跑的灰色和蓝色的书籍图标，点开是电子书
<input type="hidden" id="input_pop_1709042415128" value='<iframe id="iframe_pop_1709042415128"  src="https://book.baige.me/view/cwU" style="width:100%;height:100%;background:#eee" frameborder=0 seamless="seamless"  allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>'><a href="#" style="position: relative;display:inline-block;"  onclick="document.querySelector('body').style.overflow='hidden';document.querySelector('#pop_1709042415128').style.display='block';var value=document.getElementById('input_pop_1709042415128').value; var div = document.createElement('div'); div.innerHTML=value;div.setAttribute('style','width:100%;height:100%');document.querySelector('#pop_1709042415128').appendChild(div)" title="CT117E-M4产品手册"><img style='width: 100%;height:100%;object-fit:contain;padding: 80px;' src='https://book-png-1251142715.cos.ap-shanghai.myqcloud.com/427c4137-291d-40fc-b5ae-d816aeca6931/cover.jpg' style='height: 100%;width: 100%;object-fit: contain;' /><div onmouseout='this.style.background="rgba(85, 134, 224 ,.8)"' onmouseover='this.style.background="rgba(46, 109, 224, .8)"' style='position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(85, 134 ,224, .8)'><svg xmlns='https://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' t='1632813159349' class='icon' viewBox='0 0 1024 1024' version='1.1' p-id='2458' width='200' height='200'><path d='M924.2624 142.1824h-255.42656c-48.4096 0-93.9008 17.88416-128.19456 50.47808-11.6736 11.06944-20.79744 23.83872-28.70272 37.0944-7.9104-13.25568-17.02912-25.9072-28.8256-37.0944-34.304-32.59392-79.79008-50.47296-128.19968-50.47296H99.7376c-13.49632 0-24.44288 10.33216-24.44288 23.22944V807.3728c0 12.89216 10.94656 23.22944 24.448 23.22944h229.75488c9.61024 0 19.34336 0.73216 29.07136 2.54976 9.85088 1.83296 19.21536 4.38272 28.09344 7.79264l116.4032 43.05408c0.24064 0.11776 0.4864 0 0.72704 0.11776 2.67776 0.85504 5.35552 1.4592 8.15104 1.4592 2.80064 0 5.46816-0.48128 8.15104-1.4592 0.11776-0.11776 0.4864-0.11776 0.60928-0.11776l111.77472-41.35424a203.5456 203.5456 0 0 1 32.96256-9.00096 197.7344 197.7344 0 0 1 34.048-3.04128h224.77312c13.50656 0 24.45312-10.46016 24.45312-23.22944V165.29408c0-12.7744-10.94656-23.10656-24.45312-23.10656zM367.4368 787.43552a220.9792 220.9792 0 0 0-37.94944-3.28704H124.06272V188.5184h230.97344c35.38944 0 68.72064 13.13792 93.7728 37.09952 25.05728 23.83872 38.92224 55.45984 38.92224 89.27744v513.39776l-83.31776-30.77632a232.15616 232.15616 0 0 0-36.97152-10.09152z m532.49536-3.28704h-200.33024c-14.592 0-29.18912 1.21344-43.04896 3.77344-14.11072 2.67264-28.22144 6.44096-41.6 11.43296l-78.57152 28.94848V314.7776c0-33.6896 13.74208-65.4336 38.79936-89.27744 25.05216-23.83872 58.38336-37.0944 93.7728-37.0944h231.09632v595.7376h-0.11776z' p-id='2459' fill='#dbdbdb'></path></svg></div></a><div id="pop_1709042415128" style="display: none; position: fixed;width: 100%; height: 100%; padding: 20px; background: rgba(0, 0, 0, 0.6);box-sizing: border-box; top: 0; left: 0; z-index: 99999; "><a href="#" title="关闭" onclick="document.querySelector('body').style.overflow='auto';document.querySelector('#pop_1709042415128').style.display='none';var rm=document.getElementById('iframe_pop_1709042415128');rm.parentNode.parentNode.parentNode.removeChild(rm.parentNode);" style="top:0;right:0;position:absolute;width:32px;height:32px;"><span style="position: absolute;cursor: pointer; background-color: #000;border: 2px solid #fff;width: 24px;height: 24px;border-radius: 12px;top: 5px;padding-bottom:4px;right: 5px;color:white;line-height:24px;box-shadow: 0 0 3px #000;text-align: center;display: flex;justify-content: center;align-items: center;">x</span></a></div>
{% endfolding %}

## 晶振
{% folding open, 晶振 %}

{% image https://tumytime.github.io/picx-images-hosting/image.lt4che7r.webp %}
这个单片机内部晶振是24MHz
```
晶振（Crystal Oscillator）在单片机（Microcontroller）中起着非常重要的作用，
主要包括以下几个方面：

1. **提供时钟信号**：晶振在单片机中作为一个时钟源，为微处理器提供稳定的时钟信
号，控制着单片机内部各个模块的运行节奏。时钟信号的频率决定了单片机的运行速度和
性能。

2. **保持精确的时钟速率**：晶振的振荡频率十分稳定，并具有较高的准确性，可提供
微处理器所需的精确时钟速率，确保程序运行的稳定性和准确性。

3. **同步外部设备**：通过晶振提供的时钟信号，单片机可以与外部设备进行数据交换
和通信，保证数据传输的准确性和稳定性。

4. **实现定时与计数**：晶振可以用于实现定时器和计数器功能，例如在单片机中实现
延时控制、PWM输出等功能。

5. **协助实现串行通信**：晶振通常与串行通信模块（如UART、SPI、I2C）结合使用，
提供准确的时钟信号来同步数据传输。

总的来说，晶振在单片机中扮演着提供稳定时钟信号、确保程序稳定性和准确性、实现计
时计数等关键作用。在单片机设计和应用中，选择适合的晶振频率和类型是非常重要
```

```
晶振在单片机中通常被用作外部时钟（External Clock）。外部时钟是由外部晶振提供
的时钟信号，通过单片机引脚连接到晶振的输入端。单片机根据外部晶振提供的信号来同
步其内部的操作，确保各个部件按照规定的频率和时序进行工作。

相比之下，内部时钟（Internal Clock）是由单片机内部的时钟发生器产生的时钟信号。
在一些单片机中，内部时钟可以被选择为系统时钟，但通常外部晶振更常用，因为它提供了
更高的时钟稳定性和精度。

因此，晶振在单片机中通常是作为外部时钟使用的，用来提供稳定的时钟信号以同步单片机
的各个部件。
```
{% endfolding %}


## 信号发生器
{% folding open, 信号发生器 %}
里面有555定时器
```
信号发生器可以通过它的输出引脚来产生各种类型的信号。这些信号可以是正弦波、方波、
脉冲波等不同波形的信号，也可以是具有不同幅度、频率和相位的信号。通过调节信号发生
器的设置，可以控制所输出信号的特性，将其接入电路的输入端，从而测试、校准电路的性
能或进行各种实验。因此，信号发生器在实际工程中常被用来驱动电路、模拟不同信号条件
下的工作状态，并对电路进行性能评估和确认。
```
```
在电路设计和测试中，信号发生器扮演着非常重要的角色，其作用包括但不限于以下几个方
面：

1. **信号源测试与校准**：用信号发生器来测试电路的输入和输出响应，以验证电路的性
能和正确性。信号发生器可以提供各种类型的标准信号，用于与待测试的电路进行比较，确
保电路正常工作。

2. **频率响应测试**：信号发生器可以生成不同频率的信号，用于测试电路的频率响应特
性。通过改变信号发生器的频率，可以检验电路在不同频率下的表现，找出频率响应范围和
特性。

3. **幅度测量**：通过调节信号发生器的输出幅度，可以模拟不同幅度的输入信号，以测
试电路在不同输入幅度下的响应。

4. **相位测试**：信号发生器可以生成具有可调节相位的信号，用于测试电路的相位特性。
相位测试对于时序要求严格的电路设计非常重要。

5. **脉冲测试**：信号发生器可以生成脉冲信号，用于测试电路对脉冲信号的响应速度和
稳定性，验证电路在脉冲信号条件下的工作状态。

6. **调制和解调**：信号发生器可以生成各种调制信号（如调幅、调频、调相信号），用
于测试和验证调制解调器等通讯设备的性能。

总的来说，信号发生器在电路中的作用是提供标准化的各种类型信号，帮助工程师进行电路
设计、测试和调试工作，确保电路正常工作并符合设计要求。信号发生器是电子工程师和技
术人员在实验室和工程现场中必不可少的工具之一。
```
{% endfolding %}


## 模拟输出
{% folding open, 模拟输出 %}
板子上的两个可调电阻（R37和R38）
{% pbg info, 另外两个可调电阻呢？ %}
```
单片机的模拟输出通常是通过数字到模拟转换器（DAC，Digital-to-Analog Converter）
实现的。DAC将单片机内部的数字信号转换为模拟信号，从而可以控制外部模拟设备或传感器。

一般来说，单片机的模拟输出具有以下特点：

1. **精度和分辨率**：DAC的精度和分辨率决定模拟输出信号的质量和精度。高精度的DAC
能够输出更准确的模拟信号。

2. **输出范围**：DAC的输出范围决定了模拟信号可以达到的最大和最小电压值。一些DAC
具有可编程的输出范围，使用户能够灵活控制输出信号的范围。

3. **输出稳定性**：DAC的输出应具有稳定性，以确保模拟信号的稳定性和准确性。因此，
DAC应具有良好的温度稳定性和供电稳定性。

4. **输出驱动能力**：DAC的输出驱动能力决定了其能够驱动的负载的大小。较高的输出驱
动能力意味着DAC可以连接到较大电阻或容性负载而不影响输出信号的质量。

在单片机应用中，模拟输出通常用于控制电压或电流，以输出需要的模拟信号。通过DAC转换
数字信号为模拟信号，单片机可以与模拟电路或传感器进行有效的通信和控制。
```
```
单片机的模拟输出通常是通过数字到模拟转换器（DAC，Digital-to-Analog Converter）
实现的。DAC将单片机内部的数字信号转换为模拟信号，从而可以控制外部模拟设备或传感器。
```
```
在开发板上通常会配备可调电阻（也称为电位器），用于调节模拟输出信号的电压水平。结
合可调电阻，单片机的模拟输出可以更加灵活地进行调节和控制，以适应不同的应用需求。

通过调节可调电阻的阻值，可以改变模拟输出电路中的电阻值，从而影响模拟输出信号的电
压水平。这种方式可以实现对模拟输出信号的精细调节，使得单片机可以输出各种不同范围
和精度的模拟信号。
```
{% endfolding %}

## LED指示灯
{% folding open, LED指示灯 %}
{% pbg info, led引脚和lcd屏一些引脚共用（PC8-15），所以加了锁存器 %}
```
当LED引脚和LCD屏引脚共用同一个引脚时，可能会出现信号冲突的问题。为了解决这个问题，
可以使用锁存器（Latch）来进行信号切换和时序控制。锁存器是一种逻辑电路元件，可以存
储输入信号的状态，并在时钟信号下将其输出。

在这种情况下，LED引脚和LCD引脚可以通过锁存器分时共享同一个引脚。当需要控制LED时，
将LED信号输入锁存器并锁定状态，此时锁存器会将LED信号保持在输出端口。当需要控制LCD
屏时，将LCD信号输入锁存器并锁定状态，锁存器会将LCD信号保持在输出端口。这样就实现了
LED引脚和LCD引脚在同一个引脚上的分时共享。

通过引入锁存器，可以有效地控制LED和LCD信号的输出时序，避免信号冲突和干扰。这种设计
能够提高系统的稳定性和灵活性，同时减少硬件设计的复杂度。在实际电路设计中，锁存器通
常被用于控制信号的时序和切换，确保不同信号之间的正常传输和处理。
```
{% endfolding %}

## 按键
{% folding open, 按键 %}

{% image https://tumytime.github.io/picx-images-hosting/image.45f32xi2l.webp %}

{% pbg info, 按前高电平，按后接地->低电平 %}
{% endfolding %}
### VCC和VDD
{% folding open, VCC和VDD %}
在单片机中，VDD和VCC都是指供电电压，但在不同的情况下，它们有着不同的含义和应用。

一、VCC
VCC（Voltage at the Common Collector）是指芯片的电源电压，通常是5V或3.3V，
用于为芯片提供工作电压。

这里有必要先强调下电源电压。

电源电压是指电源输出的电压，它是为电路中的各个元器件和子系统(比如单片机)提供
供电电压的电源电压。

电源电压通常由电源模块提供，它可以是交流电、直流电或者其他形式的电源信号。

比如说这个BUCK电源电路，输出的VCC 3.3V就属于电源电压。

VCC通常连接到芯片的正极电源，也就是芯片的电源输入端。

二、VDD
VDD（Voltage Drain-to-Drain）是指MOSFET场效应管的漏极电压，也成为供电电压。

供电电压通常是由电源电压提供，一般是指电路中某个元器件或子系统所需要的电压，它
是该元器件或子系统正常工作所必需的电压。

比如说单片机里面有很多模块，比如GPIO、定时器、USART、ADC等等，这些模块都是属
于单片机的子系统。

VDD通常连接到芯片的电源引脚，然后给内部各个模块供电，它是单片机电源电压的一种
定义方式。

比如我们单片机的供电电压引脚就是用VDD表示。

这个VDD是可以直接接到电源电压VCC 3.3V的。

总的来说，VCC和VDD都是单片机中的电源电压，一般来说不用太刻意去区分，一般设计硬
件的时候也没这么讲究。

最重要的是，在设计单片机电路时，需要仔细理解芯片手册中对供电电压的需求说明，以保
证正确的供电和工作。
{% endfolding %}


## I2C总线

{% folding open, I2C总线 %}

{% link 阅读原文, https://zhuanlan.zhihu.com/p/282949543, https://pic1.zhimg.com/70/v2-cebf666f5a59f3a5ce835dbf63ebe934_1440w.avis?source=172ae18b&biz_tag=Post %}

{% image https://tumytime.github.io/picx-images-hosting/image.3nrcswwn45.webp %}

{% folding open, U2(EEPROM) %}
EEPROM是可擦除可编程只读存储器（Electrically Erasable Programmable Read-Only Memory）的缩写，是一种用于存储数据的非易失性存储器。在单片机中，EEPROM通常被用来存储需要长期保留的数据，例如配置参数、校准数据、用户设置等。以下是关于EEPROM的一些详细解释：

1. **可擦除性**：EEPROM可以通过电气方式进行擦除，而无需额外的设备或光源。这意味着存储在EEPROM中的数据可以被擦除并重新写入，而不会损坏芯片。

2. **可编程性**：EEPROM允许将数据写入其中，并且可以通过单片机或其他设备来编程。这使得用户可以随时更新或更改存储在EEPROM中的数据。

3. **只读特性**：尽管EEPROM是可编程存储器，但在正常操作期间，存储在其中的数据是只读的，即在不经过明确的擦除和编程操作时，数据是持久的。

4. **非易失性**：与随机存储器（RAM）不同，EEPROM是非易失性存储器，这意味着即使在断电情况下，数据也会被保留。因此，EEPROM常被用来保存需要长期存储的关键数据。

5. **寿命**：EEPROM存储器可以被擦除和写入的次数通常受限，每个存储单元的擦除和写入次数有一定的寿命。因此，在使用EEPROM时需要注意避免频繁擦除和写入操作，以延长其使用寿命。

总的来说，EEPROM在单片机和其他嵌入式系统中被广泛应用，用于保存需要长期保留的数据。它提供了一种高度可靠、耐用且非易失的数据存储解决方案。希望这些解释对您有帮助。如果您有任何其他问题，欢迎继续提问。
{% endfolding %}

{% folding open, U3(数字电位器) %}

1. **数字电位器**：
   - 数字电位器是一种电阻器，它通过数字信号来控制电阻值，实现对电路中某些元件的调节和控制。
   - 数字电位器通常由多个电阻单元组成，通过切换这些电阻单元，可以调节整体的电阻值。
   - 单片机可以使用数字电位器来模拟可变电阻的功能，例如用于调节模拟信号的增益、亮度控制、音量控制等。

2. **使用I2C总线控制数字电位器**：
   - 在单片机系统中，可以通过I2C总线来与数字电位器通信，发送相应的命令以调节电位器的电阻值。
   - 通过向数字电位器发送控制命令，单片机可以实现对电路中数字电位器的远程控制。
   - 通过这种方式，单片机可以实现对电路中各种参数的动态调节，使系统更加灵活和智能化。

{% endfolding %}

{% endfolding %}




