<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>videocaptureçš„bug</title>
      <link href="/2024/06/16/videocapture%E7%9A%84bug/"/>
      <url>/2024/06/16/videocapture%E7%9A%84bug/</url>
      
        <content type="html"><![CDATA[<pre><code>&lt;html lang=&quot;zh-CN&quot;&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;  &lt;body class=&quot;nodata &quot; style=&quot;&quot;&gt;         &lt;main style=&quot;width:100%&quot;&gt;      &lt;div class=&quot;blog-content-box&quot;&gt;         &lt;div class=&quot;article-title-box&quot;&gt;            &lt;h1 class=&quot;title-article&quot; id=&quot;articleContentId&quot;&gt;opencvè¯»å–æ‘„åƒå¤´ä¸æ˜¯å®æ—¶çš„å¤„ç†æ–¹æ³•&lt;/h1&gt;        &lt;/div&gt;&lt;div id=&quot;article_content&quot; class=&quot;article_content clearfix&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css&quot;&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-044f2cf1dc.css&quot;&gt;                     &lt;div id=&quot;content_views&quot; class=&quot;markdown_views prism-atom-one-dark&quot;&gt;                &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;display: none;&quot;&gt;                    &lt;path stroke-linecap=&quot;round&quot; d=&quot;M5,0 0,2.5 5,5z&quot; id=&quot;raphael-marker-block&quot; style=&quot;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);&quot;&gt;&lt;/path&gt;                &lt;/svg&gt;                &lt;pre data-index=&quot;0&quot; class=&quot;set-code-show prettyprint&quot;&gt;&lt;code class=&quot;prism language-python has-numbering&quot; onclick=&quot;mdcp.copyCode(event)&quot; style=&quot;position: unset;&quot;&gt;cap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cv2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;VideoCapture&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;</code></pre><p>cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span></p><div class="hljs-button {2}" data-title="å¤åˆ¶"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> <h2><a name="t0"></a><a id="___5"></a>è¯»å–çš„ä¸æ˜¯å®æ—¶çš„ç”»é¢ ï¼Œå­˜åœ¨å»¶è¿Ÿ æ€ä¹ˆå¤„ç†</h2> <blockquote>  <p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯<a href="https://so.csdn.net/so/search?q=OpenCV%E5%BA%93&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=OpenCV%E5%BA%93&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;OpenCVåº“\&quot;}&quot;}" data-tit="OpenCVåº“" data-pretit="opencvåº“">OpenCVåº“</a>ï¼Œä½ å¯ä»¥é€šè¿‡å°†ç¼“å†²åŒºå¤§å°è®¾ç½®ä¸ºæ›´å°çš„å€¼æ¥å‡å°å»¶è¿Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å†²åŒºå¤§å°æ˜¯16ï¼Œä½†å¯ä»¥é€šè¿‡åœ¨cv2.VideoCapture()ä¸­ä¼ é€’å‚æ•°æ¥æ›´æ”¹ã€‚ä¾‹å¦‚ï¼š</p> </blockquote> <pre data-index="1" class="set-code-show prettyprint"><code class="prism language-python has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>cap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_BUFFERSIZE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><div class="hljs-button &#123;2&#125;" data-title="å¤åˆ¶"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> <blockquote>  <p>è¿™å°†æŠŠç¼“å†²åŒºå¤§å°å‡å°åˆ°1ï¼Œä»è€Œå‡å°å»¶è¿Ÿã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å°†ç¼“å†²åŒºå¤§å°è®¾ç½®å¾—å¤ªå°ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ç”»é¢å¡é¡¿æˆ–ä¸¢å¸§çš„é—®é¢˜ã€‚</p> </blockquote> <p>å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¼‚æ­¥å¤„ç†æ¥å®ç°æ›´å¿«çš„ç”»é¢æ›´æ–°ã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è¯»å–æ‘„åƒå¤´çš„å¸§ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹ä¸­è¿›è¡Œå¤„ç†å’Œæ˜¾ç¤ºã€‚è¿™å°†ä½¿ä½ èƒ½å¤Ÿæ›´å¿«åœ°å¤„ç†å¸§å¹¶å‡å°‘å»¶è¿Ÿã€‚ä½†æ˜¯ï¼Œè¿™éœ€è¦æ›´å¤šçš„ç¼–ç¨‹å’Œè®¡ç®—èµ„æºï¼Œå¹¶å¯èƒ½ä¼šå¢åŠ ä»£ç çš„å¤æ‚æ€§ã€‚</p> <h2><a name="t1"></a><a id="OpenCV_19"></a>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å¤šçº¿ç¨‹å¤„ç†OpenCVè§†é¢‘å¸§çš„ä¾‹å­ï¼š</h2> <pre data-index="2" class="prettyprint set-code-show"><code class="prism language-python has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">import</span> cv2<span class="token keyword">import</span> threading<span class="token keyword">class</span> <span class="token class-name">VideoCapture</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> src<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span>src<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>cap<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_BUFFERSIZE<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>grabbed<span class="token punctuation">,</span> self<span class="token punctuation">.</span>frame <span class="token operator">=</span> self<span class="token punctuation">.</span>cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>started <span class="token operator">=</span> <span class="token boolean">False</span>        self<span class="token punctuation">.</span>read_lock <span class="token operator">=</span> threading<span class="token punctuation">.</span>Lock<span class="token punctuation">(</span><span class="token punctuation">)</span><pre><code>&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;started&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;VideoCapture already started&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;started &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;thread &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; threading&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Thread&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; args&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;thread&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; self&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;started&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;        grabbed&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read_lock&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;            self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grabbed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; grabbed            self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; frame&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read_lock&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;        grabbed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grabbed        frame &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frame    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; grabbed&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; frame&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;started &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;thread&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;__exit__&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exc_type&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exc_value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; traceback&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    self&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;release&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;</code></pre><p><span class="token keyword">if</span> <strong>name</strong> <span class="token operator">&#x3D;&#x3D;</span> <span class="token string">â€˜<strong>main</strong>â€˜</span><span class="token punctuation">:</span><br>    cap <span class="token operator">&#x3D;</span> VideoCapture<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span><br>        grabbed<span class="token punctuation">,</span> frame <span class="token operator">&#x3D;</span> cap<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token keyword">if</span> <span class="token keyword">not</span> grabbed<span class="token punctuation">:</span><br>            <span class="token keyword">break</span><br>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">â€˜frameâ€™</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><br>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0xFF</span> <span class="token operator">&#x3D;&#x3D;</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">â€˜qâ€™</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">break</span><br>    cap<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span><br>    cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span></p><div class="hljs-button {2}" data-title="å¤åˆ¶"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li><li style="color: rgb(153, 153, 153);">27</li><li style="color: rgb(153, 153, 153);">28</li><li style="color: rgb(153, 153, 153);">29</li><li style="color: rgb(153, 153, 153);">30</li><li style="color: rgb(153, 153, 153);">31</li><li style="color: rgb(153, 153, 153);">32</li><li style="color: rgb(153, 153, 153);">33</li><li style="color: rgb(153, 153, 153);">34</li><li style="color: rgb(153, 153, 153);">35</li><li style="color: rgb(153, 153, 153);">36</li><li style="color: rgb(153, 153, 153);">37</li><li style="color: rgb(153, 153, 153);">38</li><li style="color: rgb(153, 153, 153);">39</li><li style="color: rgb(153, 153, 153);">40</li><li style="color: rgb(153, 153, 153);">41</li><li style="color: rgb(153, 153, 153);">42</li><li style="color: rgb(153, 153, 153);">43</li><li style="color: rgb(153, 153, 153);">44</li><li style="color: rgb(153, 153, 153);">45</li><li style="color: rgb(153, 153, 153);">46</li><li style="color: rgb(153, 153, 153);">47</li><li style="color: rgb(153, 153, 153);">48</li><li style="color: rgb(153, 153, 153);">49</li><li style="color: rgb(153, 153, 153);">50</li></ul></pre> <blockquote>  <p>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº†ä¸€ä¸ª<a href="https://so.csdn.net/so/search?q=VideoCapture&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=VideoCapture&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;VideoCapture\&quot;}&quot;}" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=VideoCapture&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;VideoCapture\&quot;}&quot;}" data-tit="VideoCapture" data-pretit="videocapture">VideoCapture</a>ç±»ï¼Œè¯¥ç±»åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ä¸æ–­è¯»å–æ‘„åƒå¤´å¸§ï¼Œå¹¶å°†å®ƒä»¬ä¿å­˜åœ¨ä¸€ä¸ªå…±äº«çš„grabbedå’Œframeå˜é‡ä¸­ã€‚åœ¨ä¸»ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨start()æ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼Œç„¶åä¸æ–­è¯»å–å¸§å¹¶åœ¨çª—å£ä¸­æ˜¾ç¤ºå®ƒä»¬ï¼Œç›´åˆ°ç”¨æˆ·æŒ‰ä¸‹â€™qâ€™é”®é€€å‡ºã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨stop()æ–¹æ³•æ¥åœæ­¢çº¿ç¨‹å¹¶é‡Šæ”¾èµ„æºã€‚</p> </blockquote> <p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªä¾‹å­ä»…ä»…æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ¡†æ¶ï¼Œä½ å¯èƒ½éœ€è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹å’Œæ‰©å±•ä»¥é€‚åº”ä½ çš„å…·ä½“åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå¦ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†å¸§ï¼Œç„¶åæ˜¾ç¤ºå¤„ç†åçš„ç»“æœï¼Œä»¥æ­¤æ¥å‡å°‘å»¶è¿Ÿã€‚</p>                </div><div data-report-view="{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;spm&quot;:&quot;1001.2101.3001.6548&quot;,&quot;dest&quot;:&quot;https://blog.csdn.net/qq_26696715/article/details/129686980&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}"><div></div></div>                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-f23dff6052.css" rel="stylesheet">                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-c216769e99.css" rel="stylesheet">        </div>            </div>             <pre><code>          &lt;/main&gt;        &lt;/body&gt;   &lt;/html&gt;        </code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C++å¤šçº¿ç¨‹</title>
      <link href="/2024/06/03/C-%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
      <url>/2024/06/03/C-%E5%A4%9A%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>ä¸Šæ¬¡æ›´æ–°blogè¿˜æ˜¯ç”Ÿæ—¥4.29ï¼Œè¿™ä¸€ä¸ªæœˆçœŸæ˜¯å¿™é¼ äº†ï¼Œç°åœ¨æœ‰äº†ä¸€ä¸ªæ–°ä»»åŠ¡-å¤šçº¿ç¨‹ï¼Œæä¸€ä¸‹(ä¸åŠ å¤šçº¿ç¨‹çš„è¯æˆ‘çš„è½¦è½¦ä¼šå˜æˆèœ—ç‰›ğŸŒçš„ã€‚ã€‚ã€‚ã€‚)</p></div><h2 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h2><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>å½“æˆ‘ä»¬è°ˆè®ºå¤šçº¿ç¨‹æ—¶ï¼Œå¯ä»¥æƒ³è±¡æˆä¸€ä¸ªäººåŒæ—¶åœ¨åšå¤šä¸ªäº‹æƒ…ï¼Œå°±åƒä¸€ä¸ªäººæ—¢å¯ä»¥åŒæ—¶åƒé¥­åˆå¯ä»¥åŒæ—¶å†™ä½œä¸šä¸€æ ·ã€‚åœ¨C++ä¸­ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯ä»¥è®©æˆ‘ä»¬çš„ç¨‹åºåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæé«˜ç¨‹åºçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç†è§£å¤šçº¿ç¨‹ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªå¨æˆ¿ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå¨å¸ˆåœ¨ç…®é¢æ¡ï¼Œä¸€ä¸ªå¨å¸ˆåœ¨ç‚’èœï¼Œè¿˜æœ‰ä¸€ä¸ªæœåŠ¡å‘˜åœ¨ç«¯èœã€‚è¿™å°±ç›¸å½“äºä¸€ä¸ªæœ‰å¤šä¸ªçº¿ç¨‹çš„ç¨‹åºï¼Œæ¯ä¸ªçº¿ç¨‹è´Ÿè´£ä¸åŒçš„ä»»åŠ¡ã€‚</p><p>åœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>&lt;thread&gt;</code> å¤´æ–‡ä»¶æ¥åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­åŒ…å«æˆ‘ä»¬å¸Œæœ›çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>std::thread</code> ç±»æ¥åˆ›å»ºçº¿ç¨‹å¹¶æŒ‡å®šè¦æ‰§è¡Œçš„å‡½æ•°ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä½œä¸ºçº¿ç¨‹çš„å…¥å£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello from thread!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå¹¶æŒ‡å®šè¦æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line">    <span class="function">std::thread <span class="title">t1</span><span class="params">(printMessage)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œè‡ªå·±çš„ä»»åŠ¡</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello from main thread!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç­‰å¾…çº¿ç¨‹ t1 æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">    t1.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å‡½æ•° <code>printMessage</code>ï¼Œå¹¶åœ¨ä¸»å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çº¿ç¨‹ <code>t1</code>ï¼Œè®©å®ƒæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚åŒæ—¶ï¼Œä¸»å‡½æ•°ä¹Ÿä¼šç»§ç»­æ‰§è¡Œï¼Œè¾“å‡º â€œHello from main thread!â€ã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨ <code>join()</code> å‡½æ•°ç­‰å¾…çº¿ç¨‹ <code>t1</code> çš„æ‰§è¡Œå®Œæˆã€‚</p><p>è¿™æ ·ï¼Œå°±å®ç°äº†ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹ç¨‹åºã€‚é€šè¿‡åˆç†åœ°ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´é«˜æ•ˆåœ°åˆ©ç”¨è®¡ç®—æœºçš„èµ„æºï¼ŒåŠ å¿«ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚å½“ç„¶ï¼Œåœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€äº’æ–¥è®¿é—®ç­‰é—®é¢˜ï¼Œä»¥ä¿è¯ç¨‹åºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p><h3 id="std-thread-t1-printMessage-ä»£è¡¨ç€çº¿ç¨‹å¼€å§‹æ‰§è¡Œå—"><a href="#std-thread-t1-printMessage-ä»£è¡¨ç€çº¿ç¨‹å¼€å§‹æ‰§è¡Œå—" class="headerlink" title="std::thread t1(printMessage);ä»£è¡¨ç€çº¿ç¨‹å¼€å§‹æ‰§è¡Œå—"></a>std::thread t1(printMessage);ä»£è¡¨ç€çº¿ç¨‹å¼€å§‹æ‰§è¡Œå—</h3><p>æ˜¯çš„ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ª <code>std::thread</code> å¯¹è±¡å¹¶ä¼ å…¥è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œçº¿ç¨‹å°±ä¼šå¼€å§‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚åœ¨ä½ çš„ä¾‹å­ä¸­ï¼Œ<code>std::thread t1(printMessage);</code>è¿™ä¸€è¡Œä»£ç å°±ä»£è¡¨ç€çº¿ç¨‹å¼€å§‹æ‰§è¡Œ <code>printMessage</code> å‡½æ•°ã€‚è¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ‰§è¡Œ <code>printMessage</code> å‡½æ•°ä¸­çš„ä»£ç ï¼ŒåŒæ—¶ä¸»çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚</p><p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçº¿ç¨‹çš„å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œ <code>printMessage</code> å‡½æ•°ä¸­çš„ä»£ç ï¼Œè€Œæ˜¯åœ¨<code>std::thread</code> å¯¹è±¡è¢«åˆ›å»ºä¹‹åæ‰ä¼šæ‰§è¡Œã€‚å¦‚æœç«‹å³è°ƒç”¨ <code>join()</code> å‡½æ•°ï¼Œä¸»çº¿ç¨‹ä¼šç­‰å¾…æ–°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚è¿™ç§æ–¹å¼ä¿è¯äº†çº¿ç¨‹çš„åŒæ­¥æ‰§è¡Œã€‚</p><p>å› æ­¤ï¼Œåœ¨ä¸Šé¢æä¾›çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œ<code>std::thread t1(printMessage);</code>è¿™ä¸€è¡Œä»£ç ä¼šä½¿å¾—æ–°çº¿ç¨‹å¼€å§‹æ‰§è¡Œ <code>printMessage</code> å‡½æ•°ï¼Œè€Œä¸»çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œç´§éšå…¶åçš„ä»£ç ï¼Œç›´åˆ°é‡åˆ° <code>t1.join();</code>ã€‚</p><p>åœ¨C++ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨std::threadæ¥åˆ›å»ºçº¿ç¨‹ï¼Œçº¿ç¨‹çš„å¯åŠ¨ç¡®å®ä¸ä¼šç«‹å³æ‰§è¡Œçº¿ç¨‹å‡½æ•°ä¸­çš„ä»£ç ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªstd::threadå¯¹è±¡ï¼ŒæŒ‡å®šè¦æ‰§è¡Œçš„çº¿ç¨‹å‡½æ•°ï¼Œå¹¶è°ƒç”¨è¯¥std::threadå¯¹è±¡çš„æ„é€ å‡½æ•°æ—¶ï¼Œçº¿ç¨‹å¯¹è±¡å°±ä¼šè¢«åˆ›å»ºï¼Œä½†çº¿ç¨‹å‡½æ•°çš„ä»£ç å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œã€‚å®é™…ä¸Šçº¿ç¨‹çš„å®é™…æ‰§è¡Œæ—¶æœºå–å†³äºæ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨ï¼Œåœ¨åˆé€‚çš„æ—¶æœºä¼šå¼€å§‹æ‰§è¡Œçº¿ç¨‹å‡½æ•°ã€‚</p><p>å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­ç«‹å³è°ƒç”¨æ–°çº¿ç¨‹çš„join()å‡½æ•°ï¼Œä¸»çº¿ç¨‹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ–°çº¿ç¨‹çš„æ‰§è¡Œå®Œæˆã€‚è¿™ç§æ–¹å¼ç¡®ä¿äº†çº¿ç¨‹çš„åŒæ­¥æ‰§è¡Œï¼Œå³ä¸»çº¿ç¨‹ä¼šç­‰å¾…æ–°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹å’Œæ–°çº¿ç¨‹æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œä¸»çº¿ç¨‹èµ·åˆ°äº†ç­‰å¾…å’Œåè°ƒçš„ä½œç”¨ã€‚</p><p>æ€»ç»“ï¼šé€šè¿‡è°ƒç”¨join()å‡½æ•°å®ç°çº¿ç¨‹åŒæ­¥æ‰§è¡Œçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼Œå…ˆåˆ›å»ºæ–°çš„çº¿ç¨‹å¯¹è±¡ï¼Œç„¶åè°ƒç”¨join()å‡½æ•°ä½¿å¾—ä¸»çº¿ç¨‹ç­‰å¾…æ–°çº¿ç¨‹çš„æ‰§è¡Œå®Œæˆï¼Œå¾…æ–°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¸»çº¿ç¨‹æ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚è¿™ç§æ–¹å¼ä¿è¯äº†çº¿ç¨‹çš„åŒæ­¥æ‰§è¡Œï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦æ–°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰èƒ½ç»§ç»­ä¸»çº¿ç¨‹æ“ä½œçš„åœºæ™¯ã€‚</p><h2 id="è¿›é˜¶å®ä¾‹-äº’æ–¥é”"><a href="#è¿›é˜¶å®ä¾‹-äº’æ–¥é”" class="headerlink" title="è¿›é˜¶å®ä¾‹(äº’æ–¥é”)"></a>è¿›é˜¶å®ä¾‹(äº’æ–¥é”)</h2><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„å¤šçº¿ç¨‹ä¾‹å­ï¼Œè€ƒè™‘ä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰ä¸€ä¸ªç”Ÿäº§è€…çº¿ç¨‹è´Ÿè´£ç”Ÿäº§æ•°æ®ï¼Œç„¶åå°†æ•°æ®å‘é€ç»™ä¸€ä¸ªç¼“å†²åŒºï¼ŒåŒæ—¶ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®è¿›è¡Œæ¶ˆè´¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::queue&lt;<span class="type">int</span>&gt; buffer;</span><br><span class="line">std::mutex mtx;</span><br><span class="line">std::condition_variable cv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">producer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        std::this_thread::<span class="built_in">sleep_for</span>(std::chrono::<span class="built_in">milliseconds</span>(<span class="number">500</span>)); <span class="comment">// æ¨¡æ‹Ÿç”Ÿäº§æ•°æ®çš„è€—æ—¶æ“ä½œ</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="function">std::lock_guard&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">            buffer.<span class="built_in">push</span>(i);</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Produced: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">        cv.<span class="built_in">notify_one</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">        cv.<span class="built_in">wait</span>(lock, []&#123; <span class="keyword">return</span> !buffer.<span class="built_in">empty</span>(); &#125;);</span><br><span class="line">        <span class="type">int</span> data = buffer.<span class="built_in">front</span>();</span><br><span class="line">        buffer.<span class="built_in">pop</span>();</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Consumed: &quot;</span> &lt;&lt; data &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">producerThread</span><span class="params">(producer)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">consumerThread</span><span class="params">(consumer)</span></span>;</span><br><span class="line"></span><br><span class="line">    producerThread.<span class="built_in">join</span>();</span><br><span class="line">    consumerThread.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªäº’æ–¥é”ï¼ˆstd::mutexï¼‰æ¥ä¿æŠ¤å…±äº«çš„æ•°æ®ç»“æ„ï¼ˆé˜Ÿåˆ—bufferï¼‰ï¼Œç”Ÿäº§è€…çº¿ç¨‹å¾€é˜Ÿåˆ—ä¸­å†™å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®ã€‚é€šè¿‡æ¡ä»¶å˜é‡ï¼ˆstd::condition_variableï¼‰å®ç°äº†ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¹‹é—´çš„åŒæ­¥ã€‚</p><p>ç”Ÿäº§è€…ä¸æ–­åœ°åœ¨é˜Ÿåˆ—ä¸­æ’å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…åˆ™ç­‰å¾…é˜Ÿåˆ—ä¸­æœ‰æ•°æ®åè¿›è¡Œæ¶ˆè´¹ã€‚å½“é˜Ÿåˆ—ä¸­æœ‰æ•°æ®æ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’ï¼Œæ¶ˆè´¹æ•°æ®å¹¶è¾“å‡ºï¼Œç›´è‡³ç”Ÿäº§è€…ç”Ÿäº§å®Œæ‰€æœ‰æ•°æ®ã€‚æ•´ä¸ªè¿‡ç¨‹åˆ©ç”¨äº’æ–¥é”å’Œæ¡ä»¶å˜é‡å®ç°äº†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ“ä½œï¼Œç¡®ä¿äº†æ•°æ®çš„æ­£ç¡®ç”Ÿäº§å’Œæ¶ˆè´¹ã€‚</p><ol><li><p><strong>å‰ä¸‰è¡Œæ„æ€</strong></p><p> è¿™ä¸‰è¡Œä»£ç å£°æ˜äº†ä¸€ä¸ªæ•´å‹é˜Ÿåˆ— <code>buffer</code>ï¼Œä¸€ä¸ªäº’æ–¥é” <code>mtx</code> å’Œä¸€ä¸ªæ¡ä»¶å˜é‡ <code>cv</code>ã€‚ </p><ul><li><p><code>std::queue&lt;int&gt; buffer;</code>ï¼šè¿™è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªSTLé˜Ÿåˆ—ï¼Œå…¶ä¸­å­˜å‚¨æ•´å‹æ•°æ®ã€‚åœ¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œ<code>buffer</code>ç”¨äºå­˜å‚¨ç”Ÿäº§è€…ç”Ÿæˆçš„æ•°æ®ï¼Œåœ¨ç”Ÿäº§è€…çº¿ç¨‹å°†æ•°æ®å†™å…¥é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®è¿›è¡Œæ¶ˆè´¹ã€‚</p></li><li><p><code>std::mutex mtx;</code>ï¼šè¿™è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªäº’æ–¥é”ï¼Œç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯¹å…±äº«æ•°æ®ç»“æ„è¿›è¡Œè®¿é—®æ§åˆ¶ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œ<code>mtx</code> ç”¨äºä¿æŠ¤é˜Ÿåˆ— <code>buffer</code>ï¼Œç¡®ä¿åœ¨ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®é˜Ÿåˆ—ã€‚</p></li><li><p><code>std::condition_variable cv;</code>ï¼šè¿™è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªæ¡ä»¶å˜é‡ï¼Œç”¨äºçº¿ç¨‹é—´çš„åŒæ­¥ã€‚åœ¨æ­¤ä¾‹ä¸­ï¼Œ<code>cv</code> ç”¨äºé€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹æœ‰æ–°çš„æ•°æ®å¯ç”¨äºæ¶ˆè´¹ã€‚æ¶ˆè´¹è€…çº¿ç¨‹ä¼šé€šè¿‡ <code>wait()</code> æ¥ç­‰å¾…ç”Ÿäº§è€…é€šçŸ¥ï¼Œä¸€æ—¦æœ‰æ•°æ®å¯ç”¨ï¼Œå®ƒä¼šè¢« <code>notify_one()</code> é€šçŸ¥å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</p></li></ul><p> è¿™äº›æœºåˆ¶å…±åŒæ„æˆäº†ä¸€ä¸ªç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®çš„å®‰å…¨è®¿é—®å’ŒåŒæ­¥å¤„ç†ã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆç¡®ä¿åœ¨ä»»ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®é˜Ÿåˆ—</strong><br> åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¦‚æœä¸å¯¹å…±äº«æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚é˜Ÿåˆ—ï¼‰è¿›è¡Œä¿æŠ¤ï¼Œå°±å¯èƒ½å¯¼è‡´æ•°æ®ç«äº‰ï¼ˆData Raceï¼‰çš„é—®é¢˜ã€‚æ•°æ®ç«äº‰æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«æ•°æ®ï¼Œå…¶ä¸­è‡³å°‘ä¸€ä¸ªçº¿ç¨‹å¯¹æ•°æ®è¿›è¡Œå†™æ“ä½œï¼Œè€Œå…¶ä»–çº¿ç¨‹è¿›è¡Œè¯»æˆ–å†™æ“ä½œï¼Œä»è€Œå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚å¯¹äºé˜Ÿåˆ—è¿™æ ·çš„æ•°æ®ç»“æ„ï¼Œå¦‚æœæ²¡æœ‰äº’æ–¥è®¿é—®ï¼Œä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li><p>ä¸ç¡®å®šæ€§ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹é˜Ÿåˆ—è¿›è¡Œæ“ä½œï¼Œå¯èƒ½é€ æˆé˜Ÿåˆ—ä¸­æ•°æ®çš„ä¹±åºæˆ–ä¸¢å¤±ï¼Œå¯¼è‡´ç¨‹åºé€»è¾‘é”™è¯¯ã€‚</p></li><li><p>æ•°æ®æŸåï¼šå½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä¿®æ”¹é˜Ÿåˆ—ä¸­çš„æ•°æ®æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶è¯»å–æˆ–ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œé€ æˆæ„å¤–çš„æ•°æ®æŸåã€‚</p></li><li><p>æ­»é”ï¼šå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å°è¯•å¯¹é˜Ÿåˆ—è¿›è¡Œè¯»å†™æ“ä½œè€Œæ²¡æœ‰æ°å½“çš„åŒæ­¥æœºåˆ¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ­»é”æƒ…å†µï¼Œä½¿å¾—ç¨‹åºæ— æ³•ç»§ç»­æ‰§è¡Œã€‚</p></li></ul><p> å› æ­¤ï¼Œé€šè¿‡ä½¿ç”¨äº’æ–¥é”ï¼ˆ<code>mutex</code>ï¼‰æ¥ä¿æŠ¤é˜Ÿåˆ—ï¼Œåœ¨ä»»ä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®é˜Ÿåˆ—ï¼Œå¯ä»¥ç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ•°æ®çš„å®‰å…¨è®¿é—®ï¼Œé¿å…æ•°æ®ç«äº‰å’Œå¯èƒ½å¯¼è‡´çš„é—®é¢˜ã€‚</p></li><li><p><strong>ä»€ä¹ˆæ˜¯æ­»é”</strong><br> æ­»é”ï¼ˆDeadlockï¼‰æ˜¯æŒ‡åœ¨å¹¶å‘ç³»ç»Ÿä¸­ï¼Œä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰å› äº‰å¤ºå…±äº«èµ„æºè€Œè¿›å…¥ä¸€ç§äº’ç›¸ç­‰å¾…çš„çŠ¶æ€ï¼Œå¯¼è‡´å®ƒä»¬éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œä¸‹å»çš„æƒ…å†µã€‚åœ¨æ­»é”æƒ…å†µä¸‹ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…å…¶ä»–è¿›ç¨‹é‡Šæ”¾èµ„æºï¼Œè€ŒåŒæ—¶åˆä¸æ„¿æ„ä¸»åŠ¨é‡Šæ”¾è‡ªå·±å½“å‰å·²ç»å æœ‰çš„èµ„æºï¼Œä»è€Œå½¢æˆäº†ä¸€ç§åƒµå±€ã€‚æ­»é”æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å¸¸è§çš„å¹¶å‘é—®é¢˜ï¼Œéœ€è¦é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°æ¥é¿å…å’Œè§£å†³æ­»é”é—®é¢˜ã€‚</p></li><li><p><strong>std::this_thread::sleep_for(std::chrono::milliseconds(500)); &#x2F;&#x2F; æ¨¡æ‹Ÿç”Ÿäº§æ•°æ®çš„è€—æ—¶æ“ä½œ</strong></p><p> è¿™è¡Œä»£ç æ˜¯ä½¿ç”¨C++æ ‡å‡†åº“æä¾›çš„çº¿ç¨‹åº“<code>&lt;thread&gt;</code>ä¸­çš„<code>std::this_thread::sleep_for</code>å‡½æ•°ï¼Œç”¨æ¥æ¨¡æ‹Ÿåœ¨ç”Ÿäº§æ•°æ®è¿‡ç¨‹ä¸­çš„è€—æ—¶æ“ä½œã€‚è®©æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šä¸€ä¸‹è¿™è¡Œä»£ç çš„ä½œç”¨ï¼š</p><ul><li><p><code>std::this_thread::sleep_for</code>ï¼šè¿™æ˜¯C++æ ‡å‡†åº“ä¸­ç”¨äºçº¿ç¨‹æ“ä½œçš„é™æ€æˆå‘˜å‡½æ•°ï¼Œå…è®¸å½“å‰çº¿ç¨‹ä¼‘çœ ä¸€æ®µæ—¶é—´ã€‚å› ä¸ºæ˜¯<code>this_thread</code>æ‰€ä»¥æ˜¯å½“å‰çº¿ç¨‹ã€‚</p></li><li><p><code>std::chrono::milliseconds(500)</code>ï¼šè¿™é‡Œä½¿ç”¨<code>std::chrono::milliseconds</code>æ¥åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºæ—¶é—´é—´éš”çš„å¯¹è±¡ï¼Œå‚æ•°ä¸º500ï¼Œè¡¨ç¤º500æ¯«ç§’ï¼ˆå³0.5ç§’ï¼‰çš„æ—¶é—´é—´éš”ã€‚<code>std::chrono</code>æ˜¯C++æ ‡å‡†åº“æä¾›çš„æ—¥æœŸå’Œæ—¶é—´åº“ï¼Œç”¨äºå¤„ç†æ—¶é—´ç›¸å…³çš„æ“ä½œã€‚</p></li><li><p><code>// æ¨¡æ‹Ÿç”Ÿäº§æ•°æ®çš„è€—æ—¶æ“ä½œ</code>ï¼šè¿™æ˜¯ä¸€è¡Œæ³¨é‡Šï¼Œè¯´æ˜äº†è¿™è¡Œä»£ç çš„ç›®çš„ï¼Œå³æ¨¡æ‹Ÿåœ¨ç”Ÿäº§æ•°æ®è¿‡ç¨‹ä¸­çš„è€—æ—¶æ“ä½œã€‚é€šå¸¸åœ¨ç”Ÿäº§æ•°æ®æˆ–å…¶ä»–éœ€è¦ç­‰å¾…çš„æ“ä½œä¸­ï¼Œä¸ºäº†æ¨¡æ‹ŸçœŸå®åœºæ™¯çš„å»¶è¿Ÿï¼Œä¼šä½¿ç”¨ç±»ä¼¼çš„ä¼‘çœ æ“ä½œæ¥å»¶è¿Ÿçº¿ç¨‹çš„æ‰§è¡Œã€‚</p></li></ul><p> å› æ­¤ï¼Œè¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹ä¼‘çœ 500æ¯«ç§’ï¼Œæ¨¡æ‹Ÿç”Ÿäº§æ•°æ®è¿‡ç¨‹ä¸­çš„è€—æ—¶æ“ä½œï¼Œä»¥ä¾¿æ›´å¥½åœ°æµ‹è¯•å’Œç†è§£ç¨‹åºçš„è¡Œä¸ºã€‚</p></li><li><p><strong>std::lock_guard &lt; std::mutex &gt; lock(mtx);</strong></p><p> <code>std::lock_guard&lt;std::mutex&gt; lock(mtx);</code>æ˜¯C++ä¸­ä½¿ç”¨RAIIæœºåˆ¶æ¥ç®¡ç†äº’æ–¥é”ï¼ˆ<code>std::mutex</code>ï¼‰çš„å…¸å‹è¯­æ³•æ ¼å¼ã€‚è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ª<code>lock_guard</code>å¯¹è±¡å¹¶ç”¨å…¶æ„é€ å‡½æ•°é”ä½ä¸€ä¸ª<code>std::mutex</code>å¯¹è±¡<code>mtx</code>ã€‚</p><p> å…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li><code>std::lock_guard</code>æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œç”¨äºç®¡ç†é”å¯¹è±¡ï¼ˆäº’æ–¥é”ï¼‰ã€‚å®ƒä¼šåœ¨æ„é€ æ—¶é”ä½ç»™å®šçš„äº’æ–¥é”ï¼Œåœ¨ææ„æ—¶è§£é”äº’æ–¥é”ï¼Œå®ç°äº†RAIIæœºåˆ¶ã€‚</li><li><code>&lt;std::mutex&gt;</code>æ˜¯æ¨¡æ¿å‚æ•°ï¼Œè¡¨ç¤º<code>std::lock_guard</code>å°†è¦ç®¡ç†çš„äº’æ–¥é”çš„ç±»å‹æ˜¯<code>std::mutex</code>ã€‚</li><li><code>lock</code>æ˜¯<code>std::lock_guard</code>å¯¹è±¡çš„åç§°ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å‘½åã€‚</li><li><code>(mtx)</code>è¡¨ç¤ºç”¨<code>mtx</code>ï¼ˆä¸€ä¸ªåä¸º<code>mtx</code>çš„<code>std::mutex</code>å¯¹è±¡ï¼‰æ¥åˆå§‹åŒ–<code>lock_guard</code>å¯¹è±¡ï¼Œå³åœ¨æ„é€ <code>lock_guard</code>å¯¹è±¡æ—¶é”ä½<code>mtx</code>ã€‚</li></ul><p> <code>std::lock_guard</code>æ˜¯C++æ ‡å‡†åº“æä¾›çš„ä¸€ä¸ªRAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰é£æ ¼çš„äº’æ–¥é‡å°è£…ç±»ï¼Œé€šè¿‡å®ƒå¯ä»¥åœ¨ä¸€ä¸ªä½œç”¨åŸŸä¸­ä¿æŒäº’æ–¥é”çš„æŒæœ‰çŠ¶æ€ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>std::lock_guard&lt;std::mutex&gt; lock(mtx);</code>çš„ä½œç”¨æ˜¯ä½¿ç”¨äº’æ–¥é‡<code>mtx</code>å¯¹ä¸´ç•ŒåŒºè¿›è¡ŒåŠ é”ï¼Œç¡®ä¿å¯¹å…±äº«æ•°æ®ç»“æ„<code>buffer</code>çš„è®¿é—®æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è®©æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šå…¶ä½œç”¨ï¼š</p><ul><li><p><strong>RAIIæœºåˆ¶</strong>ï¼šRAIIï¼ˆResource Acquisition Is Initializationï¼‰æ˜¯ä¸€ç§C++ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒé€šè¿‡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†èµ„æºçš„è·å–å’Œé‡Šæ”¾ï¼Œç¡®ä¿èµ„æºåœ¨å¯¹è±¡æ„é€ æ—¶è¢«æ­£ç¡®è·å–ï¼Œè€Œåœ¨å¯¹è±¡ææ„æ—¶è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚è¿™ç§æœºåˆ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å±€éƒ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ§åˆ¶èµ„æºçš„è·å–å’Œé‡Šæ”¾ï¼Œä»è€Œç¡®ä¿èµ„æºçš„æ­£ç¡®ç®¡ç†ï¼Œæé«˜ä»£ç çš„å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>  ä¸‹é¢æ˜¯RAIIæœºåˆ¶çš„å·¥ä½œåŸç†å’Œä¼˜åŠ¿ï¼š</p><ol><li><p><strong>èµ„æºè·å–å³åˆå§‹åŒ–</strong>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼ŒåŒæ—¶è·å–æ‰€éœ€çš„èµ„æºï¼Œä¾‹å¦‚å†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€äº’æ–¥é”ç­‰ï¼Œè¿™æ ·èµ„æºçš„è·å–å’Œåˆå§‹åŒ–æ˜¯ç»Ÿä¸€çš„æ“ä½œã€‚</p></li><li><p><strong>èµ„æºçš„è‡ªåŠ¨é‡Šæ”¾</strong>ï¼šå½“å¯¹è±¡ç¦»å¼€å…¶ä½œç”¨åŸŸæ—¶ï¼ˆæ¯”å¦‚å‡½æ•°è¿”å›ã€ä½œç”¨åŸŸç»“æŸç­‰ï¼‰ï¼Œå…¶ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œè´Ÿè´£é‡Šæ”¾å·²è·å–çš„èµ„æºï¼Œæ— è®ºæ˜¯æ­£å¸¸æ‰§è¡Œè¿˜æ˜¯å¼‚å¸¸å‘ç”Ÿï¼Œèµ„æºéƒ½ä¼šè¢«æ­£å¸¸é‡Šæ”¾ã€‚</p></li><li><p><strong>é¿å…èµ„æºæ³„æ¼å’Œç¡®ä¿èµ„æºç®¡ç†</strong>ï¼šé€šè¿‡RAIIæœºåˆ¶ï¼Œç¨‹åºå‘˜æ— éœ€æ‰‹åŠ¨ç®¡ç†èµ„æºçš„è·å–å’Œé‡Šæ”¾ï¼Œå‡å°‘äº†å› å¿˜è®°é‡Šæ”¾èµ„æºè€Œå¯¼è‡´çš„å†…å­˜æ³„æ¼æˆ–èµ„æºæ³„æ¼é—®é¢˜ã€‚</p></li><li><p><strong>å¼‚å¸¸å®‰å…¨æ€§</strong>ï¼šRAIIå¯ç¡®ä¿åœ¨å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œèµ„æºèƒ½å¤Ÿè¢«æ­£ç¡®é‡Šæ”¾ï¼Œé¿å…èµ„æºæ³„æ¼ï¼ŒåŒæ—¶ä¿è¯ç¨‹åºçš„å®‰å…¨æ€§ã€‚</p></li><li><p><strong>æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§</strong>ï¼šRAIIä½¿èµ„æºç®¡ç†çš„é€»è¾‘æ›´åŠ æ¸…æ™°æ˜äº†ï¼Œä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ï¼ŒåŒæ—¶é™ä½äº†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å‡ºç°çš„æ­»é”ç­‰é—®é¢˜ã€‚</p></li></ol><p>  åœ¨C++ä¸­ï¼Œæ ‡å‡†åº“ä¸­çš„æ™ºèƒ½æŒ‡é’ˆï¼ˆ<code>std::unique_ptr</code>ã€<code>std::shared_ptr</code>ç­‰ï¼‰å’Œé”ï¼ˆ<code>std::lock_guard</code>ã€<code>std::unique_lock</code>ç­‰ï¼‰éƒ½æ˜¯åŸºäºRAIIæœºåˆ¶è®¾è®¡çš„ã€‚é€šè¿‡åˆç†åˆ©ç”¨RAIIæœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆç®¡ç†èµ„æºï¼Œæé«˜ä»£ç çš„å¥å£®æ€§å’Œå¯é æ€§ã€‚</p></li><li><p><strong>åŠ é”</strong>ï¼šå½“<code>std::lock_guard</code>å¯¹è±¡<code>lock</code>è¢«åˆ›å»ºæ—¶ï¼Œå®ƒä¼šåœ¨æ„é€ å‡½æ•°ä¸­å¯¹äº’æ–¥é‡<code>mtx</code>è¿›è¡ŒåŠ é”æ“ä½œï¼Œå³é”ä½<code>mtx</code>ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨<code>lock_guard</code>å¯¹è±¡çš„ä½œç”¨åŸŸå†…ï¼ˆåœ¨è¿™ä¸ªæ‹¬å·å†…ï¼‰å¯¹<code>buffer</code>çš„è®¿é—®æ˜¯å—åˆ°ä¿æŠ¤çš„ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•åŒæ—¶ä¿®æ”¹<code>buffer</code>çš„å†…å®¹ï¼Œé¿å…äº†æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´æ€§ã€‚<code>åœ¨è¿™ä¸ªæ‹¬å·å†…</code>æŒ‡çš„æ˜¯<code>std::lock_guard</code>å¯¹è±¡<code>lock</code>çš„ä½œç”¨åŸŸèŒƒå›´ï¼Œå³<code>lock</code>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨C++ä¸­ï¼Œä½œç”¨åŸŸç”¨èŠ±æ‹¬å·<code>&#123;&#125;</code>è¡¨ç¤ºï¼Œä¹Ÿå«åšä»£ç å—ã€‚å½“<code>std::lock_guard</code>å¯¹è±¡<code>lock</code>çš„ä½œç”¨åŸŸèŒƒå›´ç»“æŸï¼ˆå³è¶…å‡ºäº†èŠ±æ‹¬å·çš„èŒƒå›´ï¼‰ï¼Œè¯¥å¯¹è±¡çš„ææ„å‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œä»è€Œè‡ªåŠ¨é‡Šæ”¾é”ã€‚è¿™ç§æ–¹å¼ç¡®ä¿äº†åœ¨<code>lock</code>å¯¹è±¡çš„ä½œç”¨åŸŸå†…ï¼Œäº’æ–¥é”è¢«ä¿æŒï¼Œä»è€Œä¿æŠ¤äº†å…±äº«èµ„æºï¼ˆå¦‚<code>buffer</code>ï¼‰çš„è®¿é—®å¹¶é¿å…äº†æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p></li></ul><p> å› æ­¤ï¼Œé€šè¿‡åœ¨èŠ±æ‹¬å·å†…åˆ›å»º<code>std::lock_guard</code>å¯¹è±¡å¹¶é”ä½äº’æ–¥é‡ï¼Œå¯ä»¥ç¡®ä¿åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®æˆ–ä¿®æ”¹è¢«ä¿æŠ¤çš„å…±äº«èµ„æºï¼Œä»è€Œæé«˜å¤šçº¿ç¨‹ç¨‹åºçš„å®‰å…¨æ€§ã€‚</p><ul><li><strong>è§£é”</strong>ï¼šå½“<code>lock_guard</code>å¯¹è±¡çš„ä½œç”¨åŸŸç»“æŸæ—¶ï¼Œä¼šè°ƒç”¨å…¶ææ„å‡½æ•°ï¼Œåœ¨ææ„å‡½æ•°ä¸­ä¼šè‡ªåŠ¨è§£é”äº’æ–¥é‡<code>mtx</code>ï¼Œå³é‡Šæ”¾<code>mtx</code>çš„é”ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚</li></ul><p> é€šè¿‡ä½¿ç”¨<code>std::lock_guard</code>å’Œäº’æ–¥é‡ï¼Œå¯ä»¥ç®€åŒ–äº†å¯¹ä¸´ç•ŒåŒºçš„åŠ é”å’Œè§£é”è¿‡ç¨‹ï¼Œå¹¶ä¸”å¯ä»¥é¿å…å› ä¸ºå¿˜è®°è§£é”å¯¼è‡´çš„æ­»é”æƒ…å†µã€‚è¿™æ ·çš„æ“ä½œä¿è¯äº†å¯¹ä¸´ç•ŒåŒºèµ„æºçš„è®¿é—®æ˜¯äº’æ–¥çš„ï¼Œç¡®ä¿äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®å®‰å…¨æ€§ã€‚</p></li><li><p><strong>cv.notify_one();</strong><br> åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œ<code>cv.notify_one()</code> æ˜¯ç”¨æ¥é€šçŸ¥ç­‰å¾…åœ¨æ¡ä»¶å˜é‡ä¸Šçš„æŸä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œçš„å‡½æ•°ã€‚å½“æŸä¸ªçº¿ç¨‹è°ƒç”¨ <code>cv.wait()</code> æ–¹æ³•å¹¶åœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨ <code>cv.notify_one()</code> æˆ– <code>cv.notify_all()</code> æ¥é€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚</p><p> å…·ä½“æ¥è¯´ï¼Œ<code>cv.notify_one()</code> ä¼šå”¤é†’åœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…çš„ä¸€ä¸ªçº¿ç¨‹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œè®©å…¶å¯ä»¥ä»ç­‰å¾…çŠ¶æ€ä¸­é†’æ¥å¹¶ç»§ç»­æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰çº¿ç¨‹åœ¨æ¡ä»¶å˜é‡ä¸Šç­‰å¾…ï¼Œé‚£ä¹ˆè°ƒç”¨ <code>cv.notify_one()</code> ä¹Ÿä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚</p><p> åœ¨å¤šçº¿ç¨‹åä½œä¸­ï¼Œé€šå¸¸ä¼šç»“åˆæ¡ä»¶å˜é‡å’Œäº’æ–¥é‡æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ“ä½œã€‚å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«æ•°æ®ï¼Œå¹¶å¸Œæœ›é€šçŸ¥å…¶ä»–çº¿ç¨‹æœ‰å…³æ­¤æ•°æ®çš„æ”¹å˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¡ä»¶å˜é‡æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥é€šä¿¡ã€‚é€šå¸¸çš„æµç¨‹æ˜¯ï¼Œå…ˆè·å¾—äº’æ–¥é”ï¼Œç„¶åä¿®æ”¹å…±äº«æ•°æ®ï¼Œå†é€šçŸ¥ç­‰å¾…åœ¨æ¡ä»¶å˜é‡ä¸Šçš„çº¿ç¨‹ï¼Œæœ€åé‡Šæ”¾äº’æ–¥é”ã€‚</p><p> åœ¨è¿™æ®µç¤ºä¾‹ä»£ç ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹é€šè¿‡æ¡ä»¶å˜é‡ <code>cv</code> å’Œäº’æ–¥é‡ <code>mtx</code> å®ç°äº†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥é€šä¿¡ã€‚ç”Ÿäº§è€…çº¿ç¨‹é€šè¿‡ <code>notify_one()</code> æ–¹æ³•é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œå‘ŠçŸ¥å…¶æœ‰æ–°çš„æ•°æ®å¯ä»¥è¢«æ¶ˆè´¹ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>cv.notify_one()</code> çš„ä½œç”¨æ˜¯ï¼š</p><ol><li>å½“ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§äº†ä¸€ä¸ªæ•°æ®åï¼ˆé€šè¿‡ <code>buffer.push(i)</code>ï¼‰ï¼Œå®ƒä¼šç«‹å³é€šçŸ¥ç­‰å¾…åœ¨æ¡ä»¶å˜é‡ <code>cv</code> ä¸Šçš„æ¶ˆè´¹è€…çº¿ç¨‹ã€‚</li><li>åœ¨æ¶ˆè´¹è€…çº¿ç¨‹ä¸­ï¼Œå½“å®ƒé€šè¿‡ <code>cv.wait(lock, [] &#123; return !buffer.empty(); &#125;);</code> è¿›å…¥ç­‰å¾…çŠ¶æ€æ—¶ï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾ <code>mtx</code> äº’æ–¥é‡å¹¶ç­‰å¾…ï¼Œç›´åˆ°ç”Ÿäº§è€…çº¿ç¨‹è°ƒç”¨ <code>cv.notify_one()</code> æ¥å”¤é†’å®ƒã€‚</li><li>ä¸€æ—¦æ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’ï¼Œå®ƒä¼šé‡æ–°è·å– <code>mtx</code> äº’æ–¥é‡å¹¶ç»§ç»­æ‰§è¡Œï¼Œä» <code>buffer</code> ä¸­å–å‡ºæ•°æ®æ¶ˆè´¹ã€‚</li><li>ç”Ÿäº§è€…çº¿ç¨‹æ¯ç”Ÿäº§ä¸€ä¸ªæ•°æ®ï¼Œå°±ä¼šå”¤é†’ä¸€ä¸ªç­‰å¾…çš„æ¶ˆè´¹è€…çº¿ç¨‹ã€‚å¦‚æœæœ‰å¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œåªæœ‰ä¸€ä¸ªä¼šè¢«å”¤é†’ã€‚</li></ol><p> ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>cv.notify_one()</code> çš„ä½œç”¨æ˜¯å”¤é†’ä¸€ä¸ªç­‰å¾…åœ¨æ¡ä»¶å˜é‡ä¸Šçš„çº¿ç¨‹ï¼Œç”¨æ¥æç¤ºè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œé€‚ç”¨äºåè°ƒå¤šçº¿ç¨‹ä¹‹é—´çš„æ“ä½œé¡ºåºå’Œæ•°æ®ä¼ é€’ã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆä¸€ä¸ªç”¨std::lock_guardä¸€ä¸ªç”¨std::unique_lock</strong><br> åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>producer()</code> å‡½æ•°ä½¿ç”¨äº† <code>std::lock_guard</code> æ¥é”å®šäº’æ–¥é‡ï¼Œè€Œ <code>consumer()</code> å‡½æ•°åˆ™ä½¿ç”¨äº† <code>std::unique_lock</code>ã€‚è¿™ç§é€‰æ‹©å¹¶éç»å¯¹ï¼Œè€Œæ˜¯æ ¹æ®ä¸åŒçš„éœ€æ±‚å’Œæƒ…å¢ƒæ¥å†³å®šä½¿ç”¨å“ªç§é”å®šæ–¹å¼ã€‚</p><ol><li><strong><code>std::lock_guard</code> åœ¨ producer å‡½æ•°ä¸­çš„ä½¿ç”¨ï¼š</strong></li></ol><ul><li>åœ¨ <code>producer()</code> å‡½æ•°ä¸­ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ•°æ®åˆ°ç¼“å†²åŒºï¼Œå¹¶åœ¨æ•°æ®ç”Ÿäº§å®Œæˆåç«‹å³é‡Šæ”¾äº’æ–¥é‡ã€‚ç”±äºåœ¨ç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®åå°±ä¼šé‡Šæ”¾äº’æ–¥é‡ï¼Œå› æ­¤ä½¿ç”¨ <code>std::lock_guard</code> è€Œä¸æ˜¯ <code>std::unique_lock</code> æ›´åŠ ç®€æ´å’Œåˆé€‚ã€‚<code>std::lock_guard</code> è‡ªåŠ¨é”å®šäº’æ–¥é‡ï¼Œå¹¶åœ¨ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨é‡Šæ”¾äº’æ–¥é‡ï¼Œéå¸¸é€‚åˆè¿™ç§ç®€å•çš„é”å®šå’Œé‡Šæ”¾æƒ…å†µã€‚</li></ul><ol start="2"><li><strong><code>std::unique_lock</code> åœ¨ consumer å‡½æ•°ä¸­çš„ä½¿ç”¨ï¼š</strong></li></ol><ul><li>åœ¨ <code>consumer()</code> å‡½æ•°ä¸­ï¼Œæ¶ˆè´¹è€…éœ€è¦ç­‰å¾…ç¼“å†²åŒºä¸­æœ‰æ•°æ®å¯æ¶ˆè´¹æ—¶æ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ä¸ºäº†æ”¯æŒåœ¨ç­‰å¾…æœŸé—´æ‰‹åŠ¨è§£é”äº’æ–¥é‡å¹¶ç­‰å¾…æ¡ä»¶å˜é‡ï¼Œè¿™é‡Œä½¿ç”¨äº† <code>std::unique_lock</code>ã€‚<code>std::unique_lock</code> æä¾›äº†æ›´çµæ´»çš„åŠ é”å’Œè§£é”æ“ä½œï¼ŒåŒæ—¶æ”¯æŒæ¡ä»¶å˜é‡çš„ç­‰å¾…ã€‚åœ¨ç­‰å¾…ç¼“å†²åŒºæœ‰æ•°æ®å¯æ¶ˆè´¹æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>cv.wait(lock, [] &#123; return !buffer.empty(); &#125;);</code> æ¥ç­‰å¾…æ¡ä»¶å˜é‡æ»¡è¶³ã€‚</li></ul><p> ç»¼ä¸Šæ‰€è¿°ï¼Œé€‰æ‹©ä½¿ç”¨ <code>std::lock_guard</code> æˆ– <code>std::unique_lock</code> å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚åœ¨ç®€å•çš„è‡ªåŠ¨é”å®šå’Œé‡Šæ”¾äº’æ–¥é‡æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>std::lock_guard</code>ï¼›è€Œåœ¨éœ€è¦æ›´å¤šçµæ´»æ€§å’Œæ¡ä»¶å˜é‡æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ <code>std::unique_lock</code>ã€‚åœ¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¯èƒ½æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œå› æ­¤å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©ä¸åŒçš„é”å®šæ–¹å¼ã€‚</p></li><li><p><strong>cv.wait(lock, [] { return !buffer.empty(); });</strong></p><p> <code>cv.wait(lock, [] &#123; return !buffer.empty(); &#125;);</code> è¿™è¡Œä»£ç æ˜¯åœ¨<code>consumer()</code>å‡½æ•°ä¸­ä½¿ç”¨æ¡ä»¶å˜é‡ç­‰å¾…çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬è¯¦ç»†è§£é‡Šè¿™æ®µä»£ç çš„ä½œç”¨å’Œå…·ä½“æ‰§è¡Œæµç¨‹ï¼š</p><ol><li><p><code>cv.wait(lock, condition)</code>ï¼šè¿™æ˜¯æ¡ä»¶å˜é‡ <code>cv</code> çš„ç­‰å¾…å‡½æ•°è°ƒç”¨ã€‚åœ¨è¿™é‡Œï¼Œ<code>lock</code> æ˜¯ä¸€ä¸ª <code>std::unique_lock&lt;std::mutex&gt;</code> å¯¹è±¡ï¼Œé€šè¿‡å°† <code>lock</code> ä¼ é€’ç»™ <code>cv.wait</code>ï¼Œä¼šåœ¨ç­‰å¾…æœŸé—´å°†äº’æ–¥é‡è§£é”ï¼Œä»¥ä¾¿å…¶ä»–çº¿ç¨‹å¯ä»¥åœ¨è¯¥äº’æ–¥é‡ä¸Šæ‰§è¡Œæ“ä½œã€‚<code>condition</code> æ˜¯ä¸€ä¸ª lambda å‡½æ•°ï¼Œç”¨äºæŒ‡å®šç­‰å¾…æ¡ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>cv.wait</code>ä¼šåœ¨ç­‰å¾…æœŸé—´æ£€æŸ¥ lambda å‡½æ•°è¿”å›çš„å¸ƒå°”å€¼ï¼Œåªæœ‰åœ¨ lambda å‡½æ•°è¿”å› <code>true</code> æ—¶æ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</p></li><li><p><code>[] &#123; return !buffer.empty(); &#125;</code>ï¼šè¿™æ˜¯ä¸€ä¸ª lambda å‡½æ•°ï¼Œå®ƒæ£€æŸ¥ <code>buffer</code> æ˜¯å¦ä¸ºç©ºã€‚æ¡ä»¶å˜é‡çš„ <code>wait</code> æ“ä½œä¾èµ–äºç”¨æˆ·æä¾›çš„æ¡ä»¶å‡½æ•°ã€‚åœ¨è¿™é‡Œï¼Œæ¡ä»¶å‡½æ•°æ£€æŸ¥ <code>buffer</code> æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™æ¡ä»¶ä¸ºå‡ï¼Œ <code>cv.wait</code> ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æ¡ä»¶å˜ä¸ºçœŸã€‚ä¸€æ—¦æ¡ä»¶ä¸ºçœŸï¼Œ<code>cv.wait</code> å°†ç»§ç»­æ‰§è¡Œï¼Œå³äº’æ–¥é‡è¢«é‡æ–°é”å®šï¼Œå¹¶ä¸”çº¿ç¨‹ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</p></li><li><p>æ‰§è¡Œæµç¨‹ï¼š</p><ul><li>å½“æ¶ˆè´¹è€…çº¿ç¨‹å¼€å§‹æ‰§è¡Œ <code>consumer()</code> å‡½æ•°æ—¶ï¼Œé¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ª <code>std::unique_lock&lt;std::mutex&gt;</code> å¯¹è±¡ <code>lock</code>ï¼Œè¯¥å¯¹è±¡åœ¨å®ä¾‹åŒ–æ—¶ä¼šé”å®šå…¶å…³è”çš„äº’æ–¥é‡ <code>mtx</code>ã€‚</li><li>æ¥ç€ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹è°ƒç”¨ <code>cv.wait(lock, condition)</code>ï¼Œè¿™ä¼šå¯¼è‡´çº¿ç¨‹é‡Šæ”¾äº’æ–¥é‡çš„é”å¹¶ç­‰å¾…ï¼Œç›´åˆ°<code>condition</code>è¿”å› <code>true</code>ã€‚</li><li>åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥è·å¾—äº’æ–¥é‡çš„é”å¹¶ä¿®æ”¹å…±äº«æ•°æ®ï¼Œä½†ç”±äºæ¡ä»¶æœªæ»¡è¶³ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹ä¼šä¸€ç›´ä¿æŒç­‰å¾…çŠ¶æ€ã€‚</li><li>å½“ç”Ÿäº§è€…çº¿ç¨‹å‘ <code>buffer</code> ä¸­åŠ å…¥æ•°æ®å¹¶è°ƒç”¨ <code>cv.notify_one()</code> é€šçŸ¥æ—¶ï¼Œæ¡ä»¶ <code>!buffer.empty()</code> å˜ä¸ºçœŸï¼Œè¿™ä¼šå¯¼è‡´æ¡ä»¶å˜é‡é€šçŸ¥æ¶ˆè´¹è€…çº¿ç¨‹ç»§ç»­æ‰§è¡Œã€‚</li><li>æ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’åï¼Œä¼šé‡æ–°è·å¾—äº’æ–¥é‡çš„é”ï¼Œè¿™æ—¶å¯ä»¥å®‰å…¨åœ°ä» <code>buffer</code> ä¸­å–å‡ºæ•°æ®è¿›è¡Œæ¶ˆè´¹ï¼Œç„¶åç»§ç»­æ‰§è¡Œåç»­çš„æ“ä½œã€‚</li></ul></li></ol><p> æ€»ä¹‹ï¼Œé€šè¿‡ä½¿ç”¨æ¡ä»¶å˜é‡å’Œ lambda å‡½æ•°ç­‰å¾…ç‰¹å®šæ¡ä»¶ï¼Œå¯ä»¥å®ç°çº¿ç¨‹é—´çš„åŒæ­¥å’Œåè°ƒï¼Œç¡®ä¿æ¶ˆè´¹è€…åœ¨æœ‰æ•°æ®å¯æ¶ˆè´¹æ—¶æ‰æ‰§è¡Œæ¶ˆè´¹æ“ä½œï¼Œä»è€Œæœ‰æ•ˆé¿å…äº†ç«æ€æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p></li><li><p><strong>lambda è¡¨è¾¾å¼</strong><br> ç”¨äºå®šä¹‰å‡½æ•°å¯¹è±¡ï¼š</p><ol><li><p><code>[]</code>ï¼šlambda è¡¨è¾¾å¼çš„å¼€å¤´ä»¥ä¸€å¯¹æ–¹æ‹¬å·å¼€å§‹ã€‚åœ¨è¿™é‡Œï¼Œ<code>[]</code> è¡¨ç¤º lambda è¡¨è¾¾å¼ä¸æ•è·ä»»ä½•å¤–éƒ¨å˜é‡ã€‚è¿™æ„å‘³ç€ lambda è¡¨è¾¾å¼åªèƒ½è®¿é—®ä¼ é€’ç»™å®ƒçš„å‚æ•°ï¼Œè€Œä¸èƒ½è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ã€‚</p></li><li><p><code>&#123;&#125;</code>ï¼šlambda è¡¨è¾¾å¼çš„ä¸»ä½“ä½¿ç”¨ä¸€å¯¹å¤§æ‹¬å·æ¥å®šä¹‰ï¼Œåœ¨å¤§æ‹¬å·å†…éƒ¨æ˜¯ lambda è¡¨è¾¾å¼çš„å…·ä½“å®ç°ã€‚</p></li></ol></li></ol><h2 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h2><p>åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºè€Œå¼•èµ·çš„ç«äº‰æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº’æ–¥é”ï¼ˆMutexï¼Œå…¨ç§°Mutual Exclusionï¼‰ã€‚äº’æ–¥é”æ˜¯ä¸€ç§åŒæ­¥åŸè¯­ï¼Œå®ƒå…è®¸çº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºï¼ˆå¯¹å…±äº«èµ„æºæ“ä½œçš„ä¸´ç•ŒåŒºåŸŸï¼‰å‰å…ˆè·å–é”ï¼Œæ‰§è¡Œå®Œåå†é‡Šæ”¾é”ï¼Œä»è€Œç¡®ä¿åœ¨åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥ä¸´ç•ŒåŒºè¿›è¡Œæ“ä½œã€‚</p><p>è¯¦ç»†è§£é‡Šäº’æ–¥é”åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p><strong>é”çš„çŠ¶æ€</strong>: äº’æ–¥é”æœ‰ä¸¤ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯é”å®šï¼ˆlockedï¼‰å’Œè§£é”ï¼ˆunlockedï¼‰ã€‚çº¿ç¨‹åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰éœ€è¦å…ˆè·å–é”ï¼ˆå³å°†é”å®šçŠ¶æ€è®¾å®šä¸ºlockedï¼‰ï¼Œæ‰§è¡Œå®Œåå†é‡Šæ”¾é”ï¼ˆå°†çŠ¶æ€è®¾å®šä¸ºunlockedï¼‰ã€‚</p></li><li><p><strong>äº’æ–¥æ€§</strong>: äº’æ–¥é”çš„ç‰¹æ€§ç¡®ä¿äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–é”ï¼Œå…¶ä»–çº¿ç¨‹éœ€è¦ç­‰å¾…å½“å‰æŒæœ‰é”çš„çº¿ç¨‹é‡Šæ”¾é”åæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥é¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºå¯¼è‡´çš„æ•°æ®ç«äº‰å’Œä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</p></li><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>: åœ¨å¤šçº¿ç¨‹ä»£ç ä¸­ä½¿ç”¨äº’æ–¥é”æ—¶ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨<code>std::mutex</code>æˆ–ç±»ä¼¼çš„äº’æ–¥é”ç±»å‹ã€‚å…¸å‹çš„ç”¨æ³•æ˜¯åœ¨ä¸´ç•ŒåŒºå¼€å§‹ä¹‹å‰è°ƒç”¨<code>lock()</code>æ–¹æ³•è·å–é”ï¼Œåœ¨ä¸´ç•ŒåŒºç»“æŸåè°ƒç”¨<code>unlock()</code>æ–¹æ³•é‡Šæ”¾é”ã€‚</p></li><li><p><strong>æ­»é”</strong>: å¦‚æœåœ¨å¤šçº¿ç¨‹ä»£ç ä¸­ä½¿ç”¨äº’æ–¥é”ä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­»é”ï¼ˆDeadlockï¼‰çš„é—®é¢˜ã€‚æ­»é”æŒ‡çš„æ˜¯å¤šä¸ªçº¿ç¨‹ç›¸äº’ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºè€Œæ— æ³•ç»§ç»­æ‰§è¡Œçš„æƒ…å†µï¼Œå› æ­¤åœ¨ä½¿ç”¨äº’æ–¥é”æ—¶è¦æ³¨æ„é¿å…é€ æˆæ­»é”ã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œäº’æ–¥é”æ˜¯ä¸€ç§é‡è¦çš„åŒæ­¥å·¥å…·ï¼Œç”¨äºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨æ€§å¹¶é¿å…ç«äº‰æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜çš„å‘ç”Ÿã€‚åœ¨æ­£ç¡®ä½¿ç”¨äº’æ–¥é”çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¿è¯å¤šçº¿ç¨‹ç¨‹åºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p><h3 id="ä¸´ç•ŒåŒºï¼ˆå¯¹å…±äº«èµ„æºæ“ä½œçš„ä¸´ç•ŒåŒºåŸŸï¼‰"><a href="#ä¸´ç•ŒåŒºï¼ˆå¯¹å…±äº«èµ„æºæ“ä½œçš„ä¸´ç•ŒåŒºåŸŸï¼‰" class="headerlink" title="ä¸´ç•ŒåŒºï¼ˆå¯¹å…±äº«èµ„æºæ“ä½œçš„ä¸´ç•ŒåŒºåŸŸï¼‰"></a>ä¸´ç•ŒåŒºï¼ˆå¯¹å…±äº«èµ„æºæ“ä½œçš„ä¸´ç•ŒåŒºåŸŸï¼‰</h3><p>ä¸´ç•ŒåŒºæ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«çš„æŸä¸€æ®µä»£ç æˆ–æ•°æ®åŒºåŸŸï¼Œè¿™é‡Œçš„ä»£ç æˆ–æ•°æ®å¯èƒ½ä¼šè¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å’Œæ“ä½œã€‚åœ¨ä¸´ç•ŒåŒºä¸­ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å…±äº«èµ„æºè¿›è¡Œè¯»å†™æ“ä½œï¼Œå°±ä¼šå‘ç”Ÿç«æ€æ¡ä»¶ï¼ˆRace Conditionï¼‰ï¼Œå¯¼è‡´ç¨‹åºå‡ºç°é”™è¯¯æˆ–äº§ç”Ÿä¸ç¡®å®šçš„ç»“æœã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç”ŸåŠ¨çš„æ¯”å–»æ¥è§£é‡Šä¸´ç•ŒåŒºï¼š</p><p>å‡è®¾æœ‰ä¸€ä¸ªå°å’–å•¡å…åªæœ‰ä¸€ä¸ªå’–å•¡æœºå¯ä»¥åˆ¶ä½œå’–å•¡ã€‚å¤šä¸ªæœåŠ¡å‘˜ï¼ˆçº¿ç¨‹ï¼‰éœ€è¦åˆ¶ä½œå’–å•¡æ—¶ï¼Œä»–ä»¬éœ€è¦å…ˆæ£€æŸ¥å’–å•¡æœºæ˜¯å¦ç©ºé—²ã€‚å¦‚æœå’–å•¡æœºæ­£åœ¨è¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå…¶ä»–æœåŠ¡å‘˜å¿…é¡»ç­‰å¾…ç›´åˆ°å½“å‰åˆ¶ä½œå®Œæˆå¹¶é‡Šæ”¾å’–å•¡æœºã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ£€æŸ¥å’–å•¡æœºçŠ¶æ€ã€å ç”¨å’–å•¡æœºã€é‡Šæ”¾å’–å•¡æœºçš„è¿™ä¸€æ®µä»£ç å°±æ˜¯ä¸´ç•ŒåŒºã€‚åªèƒ½æœ‰ä¸€ä¸ªæœåŠ¡å‘˜è¿›å…¥ä¸´ç•ŒåŒºï¼Œå ç”¨å’–å•¡æœºï¼Œåˆ¶ä½œå’–å•¡ï¼Œé˜²æ­¢å‡ºç°å¤šä¸ªæœåŠ¡å‘˜åŒæ—¶æ“ä½œå¯¼è‡´çš„é”™è¯¯ã€‚</p><p>æ‰€ä»¥ï¼Œä¸´ç•ŒåŒºæ˜¯æŒ‡åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œéœ€è¦åŒæ­¥è®¿é—®å…±äº«èµ„æºçš„ä»£ç åŒºåŸŸæˆ–æ•°æ®åŒºåŸŸï¼Œä¸ºäº†é¿å…ç«æ€æ¡ä»¶ï¼Œéœ€è¦é€šè¿‡äº’æ–¥é”ç­‰åŒæ­¥æœºåˆ¶æ¥ç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®ä¸´ç•ŒåŒºï¼Œä¿è¯æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚é€šè¿‡åˆç†ç®¡ç†ä¸´ç•ŒåŒºï¼Œå¯ä»¥æœ‰æ•ˆé¿å…å¤šçº¿ç¨‹ç¨‹åºä¸­çš„å„ç§æ½œåœ¨é—®é¢˜ï¼Œç¡®ä¿ç¨‹åºçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</p><h2 id="å¤æ‚ä¸€ç‚¹ç‚¹çš„ä¾‹å­"><a href="#å¤æ‚ä¸€ç‚¹ç‚¹çš„ä¾‹å­" class="headerlink" title="å¤æ‚ä¸€ç‚¹ç‚¹çš„ä¾‹å­"></a>å¤æ‚ä¸€ç‚¹ç‚¹çš„ä¾‹å­</h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„å¤šçº¿ç¨‹ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯ç”Ÿäº§è€…çº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡å…±äº«çš„ç¼“å†²åŒºè¿›è¡Œé€šä¿¡ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx;</span><br><span class="line">std::condition_variable produceCondition, consumeCondition;</span><br><span class="line">std::queue&lt;<span class="type">int</span>&gt; buffer;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> bufferSize = <span class="number">10</span>;</span><br><span class="line"><span class="type">bool</span> done = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">producer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">        produceCondition.<span class="built_in">wait</span>(lock, [] &#123; <span class="keyword">return</span> buffer.<span class="built_in">size</span>() &lt; bufferSize; &#125;);</span><br><span class="line">        </span><br><span class="line">        buffer.<span class="built_in">push</span>(i);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Produced: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        lock.<span class="built_in">unlock</span>();</span><br><span class="line">        consumeCondition.<span class="built_in">notify_one</span>();        </span><br><span class="line">    &#125;</span><br><span class="line">    done = <span class="literal">true</span>;</span><br><span class="line">    consumeCondition.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!done) &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">        consumeCondition.<span class="built_in">wait</span>(lock, [] &#123; <span class="keyword">return</span> !buffer.<span class="built_in">empty</span>() || done; &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!buffer.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> val = buffer.<span class="built_in">front</span>();</span><br><span class="line">            buffer.<span class="built_in">pop</span>();</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Consumed: &quot;</span> &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        lock.<span class="built_in">unlock</span>();</span><br><span class="line">        produceCondition.<span class="built_in">notify_one</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">producerThread</span><span class="params">(producer)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">consumerThread</span><span class="params">(consumer)</span></span>;</span><br><span class="line"></span><br><span class="line">    producerThread.<span class="built_in">join</span>();</span><br><span class="line">    consumerThread.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”Ÿäº§è€…çº¿ç¨‹è´Ÿè´£å‘ç¼“å†²åŒºä¸­æ”¾å…¥æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…çº¿ç¨‹åˆ™è´Ÿè´£ä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®ã€‚ç”Ÿäº§è€…çº¿ç¨‹ä¼šä¸€ç›´ç”Ÿäº§æ•°æ®ç›´åˆ°ç”Ÿäº§å®Œ20ä¸ªæ•°æ®ä¸ºæ­¢ã€‚æ¶ˆè´¹è€…çº¿ç¨‹ä¼šåœ¨ç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§æ•°æ®æ—¶ï¼Œä»ç¼“å†²åŒºä¸­æ¶ˆè´¹æ•°æ®ï¼Œå¹¶ä¸”å½“ç”Ÿäº§è€…çº¿ç¨‹ç»“æŸæ—¶ä¹Ÿä¼šç»“æŸã€‚</p><p>é€šè¿‡ä½¿ç”¨äº’æ–¥é”å’Œæ¡ä»¶å˜é‡æ¥å®ç°å¯¹ç¼“å†²åŒºçš„è®¿é—®æ§åˆ¶å’Œçº¿ç¨‹é€šä¿¡ã€‚ç”Ÿäº§è€…çº¿ç¨‹ä¼šæ ¹æ®ç¼“å†²åŒºçš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦ç”Ÿäº§æ•°æ®ï¼Œè€Œæ¶ˆè´¹è€…çº¿ç¨‹ä¹Ÿä¼šæ ¹æ®ç¼“å†²åŒºçš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦æ¶ˆè´¹æ•°æ®ã€‚åœ¨ä¸»å‡½æ•°ä¸­ï¼Œè°ƒç”¨äº† <code>join()</code> æ¥ç­‰å¾…ç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹çš„ç»“æŸã€‚</p><p><strong>è¾“å‡º:</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Produced: <span class="number">0</span></span><br><span class="line">Produced: <span class="number">1</span></span><br><span class="line">Produced: <span class="number">2</span></span><br><span class="line">Produced: <span class="number">3</span></span><br><span class="line">Produced: <span class="number">4</span></span><br><span class="line">Produced: <span class="number">5</span></span><br><span class="line">Produced: <span class="number">6</span></span><br><span class="line">Produced: <span class="number">7</span></span><br><span class="line">Produced: <span class="number">8</span></span><br><span class="line">Produced: <span class="number">9</span></span><br><span class="line">Consumed: <span class="number">0</span></span><br><span class="line">Consumed: <span class="number">1</span></span><br><span class="line">Consumed: <span class="number">2</span></span><br><span class="line">Consumed: <span class="number">3</span></span><br><span class="line">Consumed: <span class="number">4</span></span><br><span class="line">Consumed: <span class="number">5</span></span><br><span class="line">Consumed: <span class="number">6</span></span><br><span class="line">Consumed: <span class="number">7</span></span><br><span class="line">Consumed: <span class="number">8</span></span><br><span class="line">Consumed: <span class="number">9</span></span><br><span class="line">Produced: <span class="number">10</span></span><br><span class="line">Produced: <span class="number">11</span></span><br><span class="line">Produced: <span class="number">12</span></span><br><span class="line">Produced: <span class="number">13</span></span><br><span class="line">Produced: <span class="number">14</span></span><br><span class="line">Produced: <span class="number">15</span></span><br><span class="line">Produced: <span class="number">16</span></span><br><span class="line">Produced: <span class="number">17</span></span><br><span class="line">Produced: <span class="number">18</span></span><br><span class="line">Produced: <span class="number">19</span></span><br><span class="line">Consumed: <span class="number">10</span></span><br></pre></td></tr></table></figure><p><strong>å½“åŠ ä¸Šsleep_forå:</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line">std::mutex mtx;</span><br><span class="line">std::condition_variable produceCondition, consumeCondition;</span><br><span class="line">std::queue&lt;<span class="type">int</span>&gt; buffer;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> bufferSize = <span class="number">10</span>;</span><br><span class="line"><span class="type">bool</span> done = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">producer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">        produceCondition.<span class="built_in">wait</span>(lock, [] &#123; <span class="keyword">return</span> buffer.<span class="built_in">size</span>() &lt; bufferSize; &#125;);</span><br><span class="line"></span><br><span class="line">        buffer.<span class="built_in">push</span>(i);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Produced: &quot;</span> &lt;&lt; i &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        lock.<span class="built_in">unlock</span>();</span><br><span class="line">        consumeCondition.<span class="built_in">notify_one</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    done = <span class="literal">true</span>;</span><br><span class="line">    consumeCondition.<span class="built_in">notify_one</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">consumer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!done) &#123;</span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line">        consumeCondition.<span class="built_in">wait</span>(lock, [] &#123; <span class="keyword">return</span> !buffer.<span class="built_in">empty</span>() || done; &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!buffer.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="type">int</span> val = buffer.<span class="built_in">front</span>();</span><br><span class="line">            buffer.<span class="built_in">pop</span>();</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Consumed: &quot;</span> &lt;&lt; val &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        lock.<span class="built_in">unlock</span>();</span><br><span class="line">        produceCondition.<span class="built_in">notify_one</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">std::thread <span class="title">producerThread</span><span class="params">(producer)</span></span>;</span><br><span class="line">    <span class="function">std::thread <span class="title">consumerThread</span><span class="params">(consumer)</span></span>;</span><br><span class="line"></span><br><span class="line">    producerThread.<span class="built_in">join</span>();</span><br><span class="line">    consumerThread.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º:</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Produced: <span class="number">0</span></span><br><span class="line">Consumed: <span class="number">0</span></span><br><span class="line">Produced: <span class="number">1</span></span><br><span class="line">Consumed: <span class="number">1</span></span><br><span class="line">Produced: <span class="number">2</span></span><br><span class="line">Consumed: <span class="number">2</span></span><br><span class="line">Produced: <span class="number">3</span></span><br><span class="line">Consumed: <span class="number">3</span></span><br><span class="line">Produced: <span class="number">4</span></span><br><span class="line">Consumed: <span class="number">4</span></span><br><span class="line">Produced: <span class="number">5</span></span><br><span class="line">Consumed: <span class="number">5</span></span><br><span class="line">Produced: <span class="number">6</span></span><br><span class="line">Consumed: <span class="number">6</span></span><br><span class="line">Produced: <span class="number">7</span></span><br><span class="line">Consumed: <span class="number">7</span></span><br><span class="line">Produced: <span class="number">8</span></span><br><span class="line">Consumed: <span class="number">8</span></span><br><span class="line">Produced: <span class="number">9</span></span><br><span class="line">Consumed: <span class="number">9</span></span><br><span class="line">Produced: <span class="number">10</span></span><br><span class="line">Consumed: <span class="number">10</span></span><br><span class="line">Produced: <span class="number">11</span></span><br><span class="line">Consumed: <span class="number">11</span></span><br><span class="line">Produced: <span class="number">12</span></span><br><span class="line">Consumed: <span class="number">12</span></span><br><span class="line">Produced: <span class="number">13</span></span><br><span class="line">Consumed: <span class="number">13</span></span><br><span class="line">Produced: <span class="number">14</span></span><br><span class="line">Consumed: <span class="number">14</span></span><br><span class="line">Produced: <span class="number">15</span></span><br><span class="line">Consumed: <span class="number">15</span></span><br><span class="line">Produced: <span class="number">16</span></span><br><span class="line">Consumed: <span class="number">16</span></span><br><span class="line">Produced: <span class="number">17</span></span><br><span class="line">Consumed: <span class="number">17</span></span><br><span class="line">Produced: <span class="number">18</span></span><br><span class="line">Consumed: <span class="number">18</span></span><br><span class="line">Produced: <span class="number">19</span></span><br><span class="line">Consumed: <span class="number">19</span></span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿäº§è€…çº¿ç¨‹ä¸­ä½¿ç”¨<code>this_thread::sleep_for(std::chrono::milliseconds(500));</code>æ¥æ¨¡æ‹Ÿç”Ÿäº§æ•°æ®çš„è€—æ—¶æ“ä½œæ˜¯ä¸ºäº†æ¨¡æ‹Ÿå®é™…ç”Ÿäº§æ•°æ®å¯èƒ½å­˜åœ¨çš„è€—æ—¶æƒ…å†µï¼Œè€Œä¸æ˜¯ç«‹å³è¿ç»­ç”Ÿäº§æ•°æ®ã€‚è¿™ç§æ¨¡æ‹Ÿæœ‰å‡ ä¸ªå…³é”®çš„å½±å“ï¼š</p><ol><li><p><strong>æ¨¡æ‹Ÿå®é™…æƒ…å†µ</strong>ï¼šåœ¨å®é™…æƒ…å†µä¸‹ï¼Œç”Ÿäº§æ•°æ®å¯èƒ½æ¶‰åŠåˆ°ä¸€äº›ç¹é‡çš„è®¡ç®—æˆ–I&#x2F;Oæ“ä½œï¼Œè¿™å¯èƒ½å¯¼è‡´éœ€è¦ä¸€å®šçš„æ—¶é—´æ¥ç”Ÿæˆæ•°æ®ã€‚é€šè¿‡è¿™ç§æ¨¡æ‹Ÿï¼Œå¯ä»¥æ›´å¥½åœ°åæ˜ ç°å®æƒ…å†µä¸‹çš„ç”Ÿäº§æ•°æ®è¿‡ç¨‹ã€‚</p></li><li><p><strong>çº¿ç¨‹è°ƒåº¦</strong>ï¼šä½¿ç”¨<code>sleep_for</code>ä¼šä½¿å¾—å½“å‰çº¿ç¨‹åœ¨æŒ‡å®šçš„æ—¶é—´å†…æš‚åœæ‰§è¡Œï¼Œå…¶ä»–çº¿ç¨‹æœ‰æœºä¼šç»§ç»­æ‰§è¡Œã€‚è¿™æœ‰åŠ©äºæ¨¡æ‹Ÿå¹¶å‘ç¯å¢ƒä¸­ä¸åŒçº¿ç¨‹ä¹‹é—´çš„è°ƒåº¦å’Œç«äº‰ã€‚</p></li><li><p><strong>é¿å…èµ„æºäº‰å¤º</strong>ï¼šç”±äºç”Ÿäº§è€…çº¿ç¨‹åœ¨ç”Ÿäº§æ•°æ®æ—¶ä¼šæš‚åœä¸€æ®µæ—¶é—´ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹æœ‰æœºä¼šè®¿é—®å’Œå¤„ç†å·²ç”Ÿäº§çš„æ•°æ®ï¼Œè€Œä¸ä¼šå› ä¸ºç”Ÿäº§é€Ÿåº¦è¿‡å¿«å¯¼è‡´é˜Ÿåˆ—æº¢å‡ºæˆ–æ•°æ®ä¸¢å¤±ã€‚</p></li></ol><p>å¦‚æœå»æ‰<code>this_thread::sleep_for(std::chrono::milliseconds(500));</code>éƒ¨åˆ†ï¼Œç”Ÿäº§è€…çº¿ç¨‹å°†ä¼šå˜å¾—éå¸¸å¿«é€Ÿï¼Œå¯èƒ½å¯¼è‡´ç”Ÿäº§çš„æ•°æ®è¿…é€Ÿå¡«æ»¡é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹æ— æ³•åŠæ—¶æ¶ˆè´¹ï¼Œä»è€Œå¯¼è‡´é˜Ÿåˆ—æº¢å‡ºã€‚å› æ­¤ï¼Œè¿™æ®µä»£ç ä¸­çš„å»¶æ—¶æ“ä½œå¯¹äºæ­£ç¡®æ¨¡æ‹Ÿç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹å’Œçº¿ç¨‹è°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚</p><ol><li><p><strong>ä¸ºä»€ä¹ˆdone&#x3D;trueåé¢è¦åŠ consumeCondition.notify_one();</strong></p><p> åœ¨å…¸å‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œ<code>done=true</code>é€šå¸¸è¡¨ç¤ºç”Ÿäº§è€…å·²ç»å®Œæˆäº†ç”Ÿäº§ä»»åŠ¡ï¼Œæ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯ä¾›æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚å½“<code>done</code>è¢«è®¾ç½®ä¸º<code>true</code>æ—¶ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹éœ€è¦è¢«å”¤é†’å¹¶é€€å‡ºå¾ªç¯ï¼Œä»¥é¿å…ä¸å¿…è¦çš„ç­‰å¾…å’Œèµ„æºæµªè´¹ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ¡ä»¶å˜é‡ï¼ˆcondition variableï¼‰æ¥å®ç°çº¿ç¨‹çš„ç­‰å¾…å’Œå”¤é†’ã€‚</p><p> åœ¨è®¾ç½®<code>done=true</code>ä¹‹åï¼Œé€šè¿‡è°ƒç”¨<code>consumeCondition.notify_one()</code>æ¥å”¤é†’ç­‰å¾…åœ¨<code>consumeCondition</code>æ¡ä»¶å˜é‡ä¸Šçš„ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ã€‚è¿™æ ·åšå¯ä»¥ç¡®ä¿æ¶ˆè´¹è€…çº¿ç¨‹åœ¨<code>done=true</code>ä¹‹åèƒ½å¤Ÿç«‹å³è¢«å”¤é†’ï¼Œæ£€æŸ¥æ¡ä»¶å¹¶é€€å‡ºå¾ªç¯ã€‚æ²¡æœ‰è¿™ä¸€æ­¥çš„å”¤é†’æ“ä½œï¼Œæ¶ˆè´¹è€…çº¿ç¨‹å¯èƒ½ä¼šä¸€ç›´é˜»å¡åœ¨æ¡ä»¶å˜é‡ä¸Šï¼Œæ— æ³•åŠæ—¶é€€å‡ºå¾ªç¯ï¼Œå¯¼è‡´èµ„æºæµªè´¹æˆ–ç¨‹åºé€»è¾‘é”™è¯¯ã€‚</p><p> å› æ­¤ï¼Œé€šè¿‡åœ¨<code>done=true</code>ä¹‹åè°ƒç”¨<code>consumeCondition.notify_one()</code>æ¥å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹ï¼Œç¡®ä¿äº†ç”Ÿäº§è€…å®Œæˆç”Ÿäº§åæ¶ˆè´¹è€…èƒ½å¤ŸåŠæ—¶é€€å‡ºå¾ªç¯ï¼Œæœ‰æ•ˆåœ°ç®¡ç†çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºå’Œèµ„æºçš„åˆ©ç”¨ã€‚</p></li><li><p><strong>condition_variableæ˜¯ä»€ä¹ˆ</strong></p><p> <code>std::condition_variable</code> æ˜¯ C++ æ ‡å‡†åº“ä¸­ç”¨æ¥å®ç°å¤šçº¿ç¨‹åŒæ­¥çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒå…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°æŸä¸ªæ¡ä»¶å¾—åˆ°æ»¡è¶³åå†ç»§ç»­æ‰§è¡Œã€‚åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€ç§æ–¹å¼æ¥è¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡å’ŒåŒæ­¥ï¼Œ<code>std::condition_variable</code> å°±æ˜¯ä¸ºæ­¤è€Œè®¾è®¡çš„ã€‚</p><p> åœ¨ä½¿ç”¨ <code>std::condition_variable</code> æ—¶é€šå¸¸å’Œ <code>std::mutex</code> é…åˆä½¿ç”¨ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ <code>std::mutex</code> æ¥ä¿æŠ¤éœ€è¦ç­‰å¾…çš„æ¡ä»¶å˜é‡å’Œå…±äº«èµ„æºã€‚</li><li>å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œçº¿ç¨‹é€šè¿‡ <code>std::condition_variable</code> çš„ <code>wait()</code> æ–¹æ³•é‡Šæ”¾é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é€šçŸ¥æ¡ä»¶æ»¡è¶³ã€‚</li><li>å½“å…¶ä»–çº¿ç¨‹æ»¡è¶³äº†æ¡ä»¶åï¼Œè°ƒç”¨ <code>std::condition_variable</code> çš„ <code>notify_one()</code> æˆ– <code>notify_all()</code> æ–¹æ³•æ¥å”¤é†’ç­‰å¾…çš„çº¿ç¨‹ã€‚</li></ol><p> é€šè¿‡ <code>std::condition_variable</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°çº¿ç¨‹ä¹‹é—´çš„æœ‰æ•ˆåä½œå’ŒåŒæ­¥ï¼Œé¿å…äº†çº¿ç¨‹å¿™ç­‰å¾…ï¼Œæé«˜äº†ç¨‹åºçš„æ•ˆç‡å’Œæ€§èƒ½ã€‚</p></li></ol><h2 id="4ä¸ªçº¿ç¨‹æ¥å¹¶å‘è®¡ç®—éƒ¨åˆ†å’Œ"><a href="#4ä¸ªçº¿ç¨‹æ¥å¹¶å‘è®¡ç®—éƒ¨åˆ†å’Œ" class="headerlink" title="4ä¸ªçº¿ç¨‹æ¥å¹¶å‘è®¡ç®—éƒ¨åˆ†å’Œ"></a>4ä¸ªçº¿ç¨‹æ¥å¹¶å‘è®¡ç®—éƒ¨åˆ†å’Œ</h2>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> æ™ºèƒ½è½¦ï¼Œå¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›å›¾åƒå¤„ç†çš„å‡½æ•°</title>
      <link href="/2024/04/29/%E4%B8%80%E4%BA%9B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%9A%84%E5%87%BD%E6%95%B0/"/>
      <url>/2024/04/29/%E4%B8%80%E4%BA%9B%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%9A%84%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸­å€¼æ»¤æ³¢"><a href="#ä¸­å€¼æ»¤æ³¢" class="headerlink" title="ä¸­å€¼æ»¤æ³¢"></a>ä¸­å€¼æ»¤æ³¢</h2><p><strong>å·ç§¯æ ¸å¤§å°ä¸º7ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">medianFilter</span><span class="params">(Mat imgO)</span> </span>&#123;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Matå¯¹è±¡ç”¨äºå­˜å‚¨æ»¤æ³¢åçš„å›¾åƒ</span></span><br><span class="line">Mat img1 = Mat::<span class="built_in">zeros</span>(imgO.rows - <span class="number">6</span>, imgO.cols - <span class="number">6</span>, CV_8U);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹è¾“å…¥å›¾åƒè¿›è¡Œä¸­å€¼æ»¤æ³¢</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">3</span>; y &lt; imgO.rows - <span class="number">3</span>; y++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">3</span>; x &lt; imgO.cols - <span class="number">3</span>; x++) &#123;</span><br><span class="line">vector&lt;uchar&gt; values;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">-3</span>; j &lt;= <span class="number">3</span>; j++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">-3</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">values.<span class="built_in">push_back</span>(imgO.<span class="built_in">at</span>&lt;uchar&gt;(y + j, x + i));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯¹valuesæ•°ç»„ä¸­çš„å€¼è¿›è¡Œæ’åº</span></span><br><span class="line"><span class="built_in">sort</span>(values.<span class="built_in">begin</span>(), values.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—ä¸­å€¼å¹¶èµ‹å€¼ç»™è¾“å‡ºå›¾åƒ</span></span><br><span class="line">img1.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">3</span>, x - <span class="number">3</span>) = values[values.<span class="built_in">size</span>() / <span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> img1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src=",https://tumytime.github.io/picx-images-hosting/image.2yy5oeqtl5.webp" class="lazyload placeholder" data-srcset=",https://tumytime.github.io/picx-images-hosting/image.2yy5oeqtl5.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="sobelç®—å­è¾¹ç¼˜æ£€æµ‹"><a href="#sobelç®—å­è¾¹ç¼˜æ£€æµ‹" class="headerlink" title="sobelç®—å­è¾¹ç¼˜æ£€æµ‹"></a>sobelç®—å­è¾¹ç¼˜æ£€æµ‹</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">sobel3</span><span class="params">(Mat inputImg)</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> gx, gy;</span><br><span class="line">Mat tempImg;</span><br><span class="line">inputImg.<span class="built_in">copyTo</span>(tempImg); <span class="comment">// ä¸ºäº†èƒ½å¤Ÿåœ¨è¾“å‡ºå›¾åƒä¸­è®¿é—®åŸå§‹è¾“å…¥å›¾åƒçš„åƒç´ å€¼</span></span><br><span class="line"></span><br><span class="line">Mat outputImg = Mat::<span class="built_in">zeros</span>(inputImg.<span class="built_in">size</span>(), inputImg.<span class="built_in">type</span>());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">1</span>; y &lt; inputImg.rows - <span class="number">1</span>; y++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">1</span>; x &lt; inputImg.cols - <span class="number">1</span>; x++) &#123;</span><br><span class="line">gx = (<span class="number">-1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">1</span>, x - <span class="number">1</span>) + <span class="number">1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">1</span>, x + <span class="number">1</span>) +</span><br><span class="line"><span class="number">-2</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y, x - <span class="number">1</span>) + <span class="number">2</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y, x + <span class="number">1</span>) +</span><br><span class="line"><span class="number">-1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y + <span class="number">1</span>, x - <span class="number">1</span>) + <span class="number">1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y + <span class="number">1</span>, x + <span class="number">1</span>)) / <span class="number">4</span>;</span><br><span class="line">gy = (<span class="number">1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">1</span>, x - <span class="number">1</span>) + <span class="number">2</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">1</span>, x) + <span class="number">1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y - <span class="number">1</span>, x + <span class="number">1</span>) +</span><br><span class="line"><span class="number">-1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y + <span class="number">1</span>, x - <span class="number">1</span>) - <span class="number">2</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y + <span class="number">1</span>, x) - <span class="number">1</span> * tempImg.<span class="built_in">at</span>&lt;uchar&gt;(y + <span class="number">1</span>, x + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">outputImg.<span class="built_in">at</span>&lt;uchar&gt;(y, x) = (<span class="built_in">abs</span>(gx) + <span class="built_in">abs</span>(gy)) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> outputImg.<span class="built_in">clone</span>(); <span class="comment">// è¿”å›outputImgçš„å‰¯æœ¬</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ•ˆæœ</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src=",https://tumytime.github.io/picx-images-hosting/image.4jnwnvqbmt.webp" class="lazyload placeholder" data-srcset=",https://tumytime.github.io/picx-images-hosting/image.4jnwnvqbmt.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AuTopä»£ç æ•´ç†</title>
      <link href="/2024/04/28/AuTop%E4%BB%A3%E7%A0%81%E6%95%B4%E7%90%86/"/>
      <url>/2024/04/28/AuTop%E4%BB%A3%E7%A0%81%E6%95%B4%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="åœ†ç¯circle"><a href="#åœ†ç¯circle" class="headerlink" title="åœ†ç¯circle"></a>åœ†ç¯circle</h2><details ><summary pointer> circle.c </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;circle.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;motor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">circle_type_e</span> <span class="title">circle_type</span> =</span> CIRCLE_NONE;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹ä¾¿ä¸²å£æ”¶å‘</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> *circle_type_name[CIRCLE_NUM] = &#123;</span><br><span class="line">        <span class="string">&quot;CIRCLE_NONE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CIRCLE_LEFT_BEGIN&quot;</span>, <span class="string">&quot;CIRCLE_RIGHT_BEGIN&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CIRCLE_LEFT_RUNNING&quot;</span>, <span class="string">&quot;CIRCLE_RIGHT_RUNNING&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CIRCLE_LEFT_IN&quot;</span>, <span class="string">&quot;CIRCLE_RIGHT_IN&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CIRCLE_LEFT_OUT&quot;</span>, <span class="string">&quot;CIRCLE_RIGHT_OUT&quot;</span>,</span><br><span class="line">        <span class="string">&quot;CIRCLE_LEFT_END&quot;</span>, <span class="string">&quot;CIRCLE_RIGHT_END&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¼–ç å™¨ï¼Œç”¨äºé˜²æ­¢ä¸€äº›é‡å¤è§¦å‘ç­‰ã€‚</span></span><br><span class="line"><span class="type">int64_t</span> circle_encoder;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> none_left_line = <span class="number">0</span>, none_right_line = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> have_left_line = <span class="number">0</span>, have_right_line = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">check_circle</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// éåœ†ç¯æ¨¡å¼ä¸‹ï¼Œå•è¾¹Lè§’ç‚¹, å•è¾¹é•¿ç›´é“</span></span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_NONE &amp;&amp; Lpt0_found &amp;&amp; !Lpt1_found &amp;&amp; is_straight1) &#123;</span><br><span class="line">        circle_type = CIRCLE_LEFT_BEGIN;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_NONE &amp;&amp; !Lpt0_found &amp;&amp; Lpt1_found &amp;&amp; is_straight0) &#123;</span><br><span class="line">        circle_type = CIRCLE_RIGHT_BEGIN;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">run_circle</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int64_t</span> current_encoder = get_total_encoder();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¦ç¯å¼€å§‹ï¼Œå¯»å¤–ç›´é“å³çº¿</span></span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_BEGIN) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆä¸¢å·¦çº¿åæœ‰çº¿</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_left_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_left_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            have_left_line++;</span><br><span class="line">            <span class="keyword">if</span> (have_left_line &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                circle_type = CIRCLE_LEFT_IN;</span><br><span class="line">                none_left_line = <span class="number">0</span>;</span><br><span class="line">                have_left_line = <span class="number">0</span>;</span><br><span class="line">                circle_encoder = current_encoder;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¥ç¯ï¼Œå¯»å†…åœ†å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_IN) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼–ç å™¨æ‰“è¡¨è¿‡1/4åœ†   åº”ä¿®æ­£ä¸ºå³çº¿ä¸ºè½¬å¼¯æ— æ‹ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.1</span> / sample_dist ||</span><br><span class="line">            current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (<span class="number">3.14</span> * <span class="number">1</span> / <span class="number">2</span>)) &#123; circle_type = CIRCLE_LEFT_RUNNING; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­£å¸¸å·¡çº¿ï¼Œå¯»å¤–åœ†å³çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_RUNNING) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Lpt1_found) rpts1s_num = rptsc1_num = Lpt1_rpts1s_id;</span><br><span class="line">        <span class="comment">//å¤–ç¯æ‹ç‚¹(å³Lç‚¹)</span></span><br><span class="line">        <span class="keyword">if</span> (Lpt1_found &amp;&amp; Lpt1_rpts1s_id &lt; <span class="number">0.4</span> / sample_dist) &#123;</span><br><span class="line">            circle_type = CIRCLE_LEFT_OUT;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‡ºç¯ï¼Œå¯»å†…åœ†</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_OUT) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å³çº¿ä¸ºé•¿ç›´é“</span></span><br><span class="line">        <span class="keyword">if</span> (is_straight1) &#123;</span><br><span class="line">            circle_type = CIRCLE_LEFT_END;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//èµ°è¿‡åœ†ç¯ï¼Œå¯»å³çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_END) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦çº¿å…ˆä¸¢åæœ‰</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_left_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_left_line &gt; <span class="number">3</span>) &#123;</span><br><span class="line">            circle_type = CIRCLE_NONE;</span><br><span class="line">            none_left_line = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å³ç¯æ§åˆ¶ï¼Œå‰æœŸå¯»å·¦ç›´é“</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_BEGIN) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆä¸¢å³çº¿åæœ‰çº¿</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_right_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_right_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            have_right_line++;</span><br><span class="line">            <span class="keyword">if</span> (have_right_line &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                circle_type = CIRCLE_RIGHT_IN;</span><br><span class="line">                none_right_line = <span class="number">0</span>;</span><br><span class="line">                have_right_line = <span class="number">0</span>;</span><br><span class="line">                circle_encoder = current_encoder;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¥å³ç¯ï¼Œå¯»å³å†…åœ†ç¯</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_IN) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼–ç å™¨æ‰“è¡¨è¿‡1/4åœ†   åº”ä¿®æ­£ä¸ºå·¦çº¿ä¸ºè½¬å¼¯æ— æ‹ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.1</span> / sample_dist ||</span><br><span class="line">            current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (<span class="number">3.14</span> * <span class="number">1</span> / <span class="number">2</span>)) &#123; circle_type = CIRCLE_RIGHT_RUNNING; &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­£å¸¸å·¡çº¿ï¼Œå¯»å¤–åœ†å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_RUNNING) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤–ç¯å­˜åœ¨æ‹ç‚¹,å¯å†åŠ æ‹ç‚¹è·ç¦»åˆ¤æ®(å·¦Lç‚¹)</span></span><br><span class="line">        <span class="keyword">if</span> (Lpt0_found) rpts0s_num = rptsc0_num = Lpt0_rpts0s_id;</span><br><span class="line">        <span class="keyword">if</span> (Lpt0_found &amp;&amp; Lpt0_rpts0s_id &lt; <span class="number">0.4</span> / sample_dist) &#123;</span><br><span class="line">            circle_type = CIRCLE_RIGHT_OUT;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‡ºç¯ï¼Œå¯»å†…åœ†</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_OUT) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦é•¿åº¦åŠ å€¾æ–œè§’åº¦  åº”ä¿®æ­£å·¦å³çº¿æ‰¾åˆ°ä¸”ä¸ºç›´çº¿</span></span><br><span class="line">        <span class="comment">//if((rpts1s_num &gt;100 &amp;&amp; !Lpt1_found))  &#123;have_right_line++;&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (is_straight0) &#123;</span><br><span class="line">            circle_type = CIRCLE_RIGHT_END;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">//èµ°è¿‡åœ†ç¯ï¼Œå¯»å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_END) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦çº¿å…ˆä¸¢åæœ‰</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_right_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_right_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            circle_type = CIRCLE_NONE;</span><br><span class="line">            none_right_line = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»˜åˆ¶åœ†ç¯æ¨¡å¼ä¸‹çš„è°ƒè¯•å›¾åƒ</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">draw_circle</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><details ><summary pointer> circle.h </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> CIRCLE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CIRCLE_H</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">circle_type_e</span> &#123;</span></span><br><span class="line">    CIRCLE_NONE = <span class="number">0</span>,                            <span class="comment">// éåœ†ç¯æ¨¡å¼</span></span><br><span class="line">    CIRCLE_LEFT_BEGIN, CIRCLE_RIGHT_BEGIN,      <span class="comment">// åœ†ç¯å¼€å§‹ï¼Œè¯†åˆ«åˆ°å•ä¾§Lè§’ç‚¹å¦ä¸€ä¾§é•¿ç›´é“ã€‚</span></span><br><span class="line">    CIRCLE_LEFT_IN, CIRCLE_RIGHT_IN,            <span class="comment">// åœ†ç¯è¿›å…¥ï¼Œå³èµ°åˆ°ä¸€ä¾§ç›´é“ï¼Œä¸€ä¾§åœ†ç¯çš„ä½ç½®ã€‚</span></span><br><span class="line">    CIRCLE_LEFT_RUNNING, CIRCLE_RIGHT_RUNNING,  <span class="comment">// åœ†ç¯å†…éƒ¨ã€‚</span></span><br><span class="line">    CIRCLE_LEFT_OUT, CIRCLE_RIGHT_OUT,          <span class="comment">// å‡†å¤‡å‡ºåœ†ç¯ï¼Œå³è¯†åˆ«åˆ°å‡ºç¯å¤„çš„Lè§’ç‚¹ã€‚</span></span><br><span class="line">    CIRCLE_LEFT_END, CIRCLE_RIGHT_END,          <span class="comment">// åœ†ç¯ç»“æŸï¼Œå³å†æ¬¡èµ°åˆ°å•ä¾§ç›´é“çš„ä½ç½®ã€‚</span></span><br><span class="line">    CIRCLE_NUM,                                 <span class="comment">//</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="type">const</span> <span class="type">char</span> *circle_type_name[CIRCLE_NUM];</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="class"><span class="keyword">enum</span> <span class="title">circle_type_e</span> <span class="title">circle_type</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">check_circle</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">run_circle</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">draw_circle</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// CIRCLE_H</span></span></span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="éåœ†ç¯æ¨¡å¼ä¸‹åˆ¤æ–­åœ†ç¯"><a href="#éåœ†ç¯æ¨¡å¼ä¸‹åˆ¤æ–­åœ†ç¯" class="headerlink" title="éåœ†ç¯æ¨¡å¼ä¸‹åˆ¤æ–­åœ†ç¯"></a>éåœ†ç¯æ¨¡å¼ä¸‹åˆ¤æ–­åœ†ç¯</h3><p><strong>å•è¾¹Lè§’ç‚¹, å•è¾¹é•¿ç›´é“</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">check_circle</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// éåœ†ç¯æ¨¡å¼ä¸‹ï¼Œå•è¾¹Lè§’ç‚¹, å•è¾¹é•¿ç›´é“</span></span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_NONE &amp;&amp; Lpt0_found &amp;&amp; !Lpt1_found &amp;&amp; is_straight1) &#123;</span><br><span class="line">        circle_type = CIRCLE_LEFT_BEGIN;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_NONE &amp;&amp; !Lpt0_found &amp;&amp; Lpt1_found &amp;&amp; is_straight0) &#123;</span><br><span class="line">        circle_type = CIRCLE_RIGHT_BEGIN;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åœ†ç¯æ‰§è¡Œ"><a href="#åœ†ç¯æ‰§è¡Œ" class="headerlink" title="åœ†ç¯æ‰§è¡Œ"></a>åœ†ç¯æ‰§è¡Œ</h3><details ><summary pointer> run_circle() </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">run_circle</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int64_t</span> current_encoder = get_total_encoder();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å·¦ç¯å¼€å§‹ï¼Œå¯»å¤–ç›´é“å³çº¿</span></span><br><span class="line">    <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_BEGIN) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆä¸¢å·¦çº¿åæœ‰çº¿</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_left_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_left_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            have_left_line++;</span><br><span class="line">            <span class="keyword">if</span> (have_left_line &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                circle_type = CIRCLE_LEFT_IN;</span><br><span class="line">                none_left_line = <span class="number">0</span>;</span><br><span class="line">                have_left_line = <span class="number">0</span>;</span><br><span class="line">                circle_encoder = current_encoder;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¥ç¯ï¼Œå¯»å†…åœ†å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_IN) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼–ç å™¨æ‰“è¡¨è¿‡1/4åœ†   åº”ä¿®æ­£ä¸ºå³çº¿ä¸ºè½¬å¼¯æ— æ‹ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.1</span> / sample_dist ||</span><br><span class="line">            current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (<span class="number">3.14</span> * <span class="number">1</span> / <span class="number">2</span>)) &#123; circle_type = CIRCLE_LEFT_RUNNING; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­£å¸¸å·¡çº¿ï¼Œå¯»å¤–åœ†å³çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_RUNNING) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (Lpt1_found) rpts1s_num = rptsc1_num = Lpt1_rpts1s_id;</span><br><span class="line">        <span class="comment">//å¤–ç¯æ‹ç‚¹(å³Lç‚¹)</span></span><br><span class="line">        <span class="keyword">if</span> (Lpt1_found &amp;&amp; Lpt1_rpts1s_id &lt; <span class="number">0.4</span> / sample_dist) &#123;</span><br><span class="line">            circle_type = CIRCLE_LEFT_OUT;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‡ºç¯ï¼Œå¯»å†…åœ†</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_OUT) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å³çº¿ä¸ºé•¿ç›´é“</span></span><br><span class="line">        <span class="keyword">if</span> (is_straight1) &#123;</span><br><span class="line">            circle_type = CIRCLE_LEFT_END;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//èµ°è¿‡åœ†ç¯ï¼Œå¯»å³çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_LEFT_END) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦çº¿å…ˆä¸¢åæœ‰</span></span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_left_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts0s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_left_line &gt; <span class="number">3</span>) &#123;</span><br><span class="line">            circle_type = CIRCLE_NONE;</span><br><span class="line">            none_left_line = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å³ç¯æ§åˆ¶ï¼Œå‰æœŸå¯»å·¦ç›´é“</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_BEGIN) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…ˆä¸¢å³çº¿åæœ‰çº¿</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_right_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_right_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            have_right_line++;</span><br><span class="line">            <span class="keyword">if</span> (have_right_line &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                circle_type = CIRCLE_RIGHT_IN;</span><br><span class="line">                none_right_line = <span class="number">0</span>;</span><br><span class="line">                have_right_line = <span class="number">0</span>;</span><br><span class="line">                circle_encoder = current_encoder;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¥å³ç¯ï¼Œå¯»å³å†…åœ†ç¯</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_IN) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¼–ç å™¨æ‰“è¡¨è¿‡1/4åœ†   åº”ä¿®æ­£ä¸ºå·¦çº¿ä¸ºè½¬å¼¯æ— æ‹ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.1</span> / sample_dist ||</span><br><span class="line">            current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (<span class="number">3.14</span> * <span class="number">1</span> / <span class="number">2</span>)) &#123; circle_type = CIRCLE_RIGHT_RUNNING; &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ­£å¸¸å·¡çº¿ï¼Œå¯»å¤–åœ†å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_RUNNING) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¤–ç¯å­˜åœ¨æ‹ç‚¹,å¯å†åŠ æ‹ç‚¹è·ç¦»åˆ¤æ®(å·¦Lç‚¹)</span></span><br><span class="line">        <span class="keyword">if</span> (Lpt0_found) rpts0s_num = rptsc0_num = Lpt0_rpts0s_id;</span><br><span class="line">        <span class="keyword">if</span> (Lpt0_found &amp;&amp; Lpt0_rpts0s_id &lt; <span class="number">0.4</span> / sample_dist) &#123;</span><br><span class="line">            circle_type = CIRCLE_RIGHT_OUT;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å‡ºç¯ï¼Œå¯»å†…åœ†</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_OUT) &#123;</span><br><span class="line">        track_type = TRACK_RIGHT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦é•¿åº¦åŠ å€¾æ–œè§’åº¦  åº”ä¿®æ­£å·¦å³çº¿æ‰¾åˆ°ä¸”ä¸ºç›´çº¿</span></span><br><span class="line">        <span class="comment">//if((rpts1s_num &gt;100 &amp;&amp; !Lpt1_found))  &#123;have_right_line++;&#125;</span></span><br><span class="line">        <span class="keyword">if</span> (is_straight0) &#123;</span><br><span class="line">            circle_type = CIRCLE_RIGHT_END;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">//èµ°è¿‡åœ†ç¯ï¼Œå¯»å·¦çº¿</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (circle_type == CIRCLE_RIGHT_END) &#123;</span><br><span class="line">        track_type = TRACK_LEFT;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å·¦çº¿å…ˆä¸¢åæœ‰</span></span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &lt; <span class="number">0.2</span> / sample_dist) &#123; none_right_line++; &#125;</span><br><span class="line">        <span class="keyword">if</span> (rpts1s_num &gt; <span class="number">1.0</span> / sample_dist &amp;&amp; none_right_line &gt; <span class="number">2</span>) &#123;</span><br><span class="line">            circle_type = CIRCLE_NONE;</span><br><span class="line">            none_right_line = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details ><summary pointer> è¯¦ç»†è§£è¯» </summary>              <div class='content'>              <details open><summary pointer> get_total_encoder() </summary>          <div class='content'>          <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int64_t</span> <span class="title function_">get_total_encoder</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int64_t</span>) ((motor_l.total_encoder + motor_r.total_encoder) / <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªå‡½æ•° <code>get_total_encoder()</code>ï¼Œç”¨äºè®¡ç®—å·¦å³ä¸¤ä¸ªç”µæœºçš„ç¼–ç å™¨æ€»å’Œå¹¶å–å¹³å‡å€¼ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>è·å–å·¦ç”µæœºå’Œå³ç”µæœºçš„ç¼–ç å™¨å€¼ <code>motor_l.total_encoder</code> å’Œ <code>motor_r.total_encoder</code>ã€‚</li><li>å°†å·¦å³ä¸¤ä¸ªç”µæœºçš„ç¼–ç å™¨å€¼ç›¸åŠ å¾—åˆ°æ€»å’Œã€‚</li><li>å°†æ€»å’Œé™¤ä»¥2å–å¹³å‡å€¼ï¼Œç„¶åä»¥ <code>int64_t</code> ç±»å‹è¿”å›ç»“æœã€‚</li></ol>          </div>        </details>              </div>            </details><p>track_typeï¼šå•è¾¹å¾—ä¸­çº¿çš„è¾¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–ç å™¨æ‰“è¡¨è¿‡1/4åœ†   åº”ä¿®æ­£ä¸ºå³çº¿ä¸ºè½¬å¼¯æ— æ‹ç‚¹</span></span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (rpts0s_num &lt; <span class="number">0.1</span> / sample_dist ||</span><br><span class="line">          current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (<span class="number">3.14</span> * <span class="number">1</span> / <span class="number">2</span>)) &#123; circle_type = CIRCLE_LEFT_RUNNING; &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„é€»è¾‘ä¼¼ä¹ä¸ä¹‹å‰çš„ä»£ç ç›¸å…³ï¼Œç”¨äºæ£€æµ‹ç¼–ç å™¨åœ¨æ‰“è¡¨è¿‡1&#x2F;4åœ†æ—¶çš„çŠ¶æ€ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ä¿®æ­£ã€‚è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„ä½œç”¨ï¼š</p><ol><li>é¦–å…ˆåˆ¤æ–­æ¡ä»¶ <code>rpts0s_num &lt; 0.1 / sample_dist</code>ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œè¯´æ˜å°è½¦è¿˜æœªè¡Œé©¶åˆ°1&#x2F;4åœ†çš„ä½ç½®ï¼Œæˆ–è€…å³çº¿æœªè¢«æ£€æµ‹åˆ°ã€‚</li><li>æˆ–è€…åˆ¤æ–­æ¡ä»¶ <code>current_encoder - circle_encoder &gt;= ENCODER_PER_METER * (3.14 * 1 / 2)</code>ï¼Œè¿™ä¸ªæ¡ä»¶çœ‹èµ·æ¥æ˜¯åœ¨åˆ¤æ–­å½“å‰ç¼–ç å™¨å€¼ä¸å¼€å§‹æ‰“è¡¨æ—¶çš„ç¼–ç å™¨å€¼ä¹‹å·®æ˜¯å¦è¶…è¿‡äº†1&#x2F;4åœ†çš„å‘¨é•¿å¯¹åº”çš„ç¼–ç å™¨å€¼ã€‚</li><li>å¦‚æœä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶æœ‰ä¸€ä¸ªæˆç«‹ï¼Œå°±ä¼šå°† <code>circle_type</code> è®¾ç½®ä¸º <code>CIRCLE_LEFT_RUNNING</code>ï¼Œè¡¨ç¤ºå°è½¦æ­£åœ¨å·¦ç¯è¡Œé©¶çš„é˜¶æ®µã€‚</li></ol><p>åœ¨æ£€æµ‹åˆ°å°è½¦è¡Œé©¶è¿‡1&#x2F;4åœ†æˆ–è€…å³çº¿ä¸ºè½¬å¼¯æ—¶å°† <code>circle_type</code> ä¿®æ”¹ä¸º <code>CIRCLE_LEFT_RUNNING</code>ï¼Œå¯èƒ½æ˜¯ä¸ºäº†æ ¡å‡†å°è½¦åœ¨å·¦ç¯èµ›é“ä¸Šè¡Œé©¶æ—¶çš„ç‰¹å®šçŠ¶æ€ã€‚è¿™æ®µä»£ç ä¸ä¹‹å‰çš„ä»£ç ä¸€èµ·ï¼Œä¼¼ä¹åœ¨å®ç°ä¸€ä¸ªå¤æ‚çš„çŠ¶æ€æœºæ¥æ§åˆ¶å°è½¦åœ¨å·¦ç¯èµ›é“ä¸Šçš„è¿åŠ¨ã€‚å¦‚æœæ‚¨æœ‰æ›´å¤šçš„é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥è§£é‡Šï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p><hr><p>ä»€ä¹ˆæ˜¯ç¼–ç å™¨æ‰“è¡¨:<br>ç¼–ç å™¨æ‰“è¡¨ï¼ˆEncoder Look-Up Tableï¼‰é€šå¸¸æŒ‡çš„æ˜¯åœ¨ç¼–ç å™¨æ¨¡å—ä¸­ä½¿ç”¨æŸ¥æ‰¾è¡¨ï¼ˆLook-Up Tableï¼‰æ¥è¿›è¡Œç¼–ç çš„è¿‡ç¨‹ã€‚åœ¨ä¿¡å·å¤„ç†é¢†åŸŸæˆ–è€…é€šä¿¡ç³»ç»Ÿä¸­ï¼Œç¼–ç å™¨çš„ä½œç”¨æ˜¯å°†è¾“å…¥ä¿¡å·è½¬æ¢ä¸ºç‰¹å®šçš„ç¼–ç å½¢å¼ï¼Œä»¥ä¾¿ä¼ è¾“ã€å­˜å‚¨æˆ–å¤„ç†ã€‚è€Œç¼–ç å™¨æ‰“è¡¨çš„æ¦‚å¿µæ˜¯é€šè¿‡é¢„å…ˆæ„å»ºä¸€ä¸ªè¡¨æ ¼ï¼Œå°†è¾“å…¥ä¿¡å·æ˜ å°„åˆ°ç‰¹å®šçš„ç¼–ç å€¼ï¼Œä»è€Œå®ç°ç¼–ç çš„è¿‡ç¨‹ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–ç å™¨æ‰“è¡¨çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥æé«˜ç¼–ç çš„é€Ÿåº¦å’Œæ•ˆç‡ã€‚é€šè¿‡æŸ¥æ‰¾è¡¨ï¼Œç¼–ç å™¨å¯ä»¥ä»¥å¸¸é‡æ—¶é—´å¤æ‚åº¦å¿«é€ŸæŸ¥æ‰¾åˆ°å¯¹åº”çš„ç¼–ç å€¼ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½è¿›è¡Œå¤æ‚çš„è®¡ç®—æˆ–é€»è¾‘åˆ¤æ–­ã€‚è¿™æ ·å¯ä»¥åŠ å¿«ç¼–ç è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦é¢‘ç¹ç¼–ç å¤§é‡æ•°æ®æ—¶ï¼Œå¯ä»¥èŠ‚çœæ—¶é—´å’Œè®¡ç®—èµ„æºã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œç¼–ç å™¨æ‰“è¡¨æ˜¯ä¸€ç§æé«˜ç¼–ç æ•ˆç‡çš„æ–¹æ³•ï¼Œé€šè¿‡é¢„å…ˆå»ºç«‹ç¼–ç æ˜ å°„è¡¨ï¼Œå¯ä»¥åœ¨ç¼–ç è¿‡ç¨‹ä¸­å¿«é€Ÿå‡†ç¡®åœ°æ‰¾åˆ°å¯¹åº”çš„ç¼–ç å€¼ï¼Œæé«˜ç³»ç»Ÿæ€§èƒ½å’Œé€Ÿåº¦ã€‚</p><hr><h2 id="è¿·å®«å·¡çº¿éƒ¨åˆ†"><a href="#è¿·å®«å·¡çº¿éƒ¨åˆ†" class="headerlink" title="è¿·å®«å·¡çº¿éƒ¨åˆ†"></a>è¿·å®«å·¡çº¿éƒ¨åˆ†</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å‰è¿›æ–¹å‘å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment"> *   0</span></span><br><span class="line"><span class="comment"> * 3   1</span></span><br><span class="line"><span class="comment"> *   2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">AT_DTCM_SECTION_ALIGN_INIT</span>(<span class="type">const</span> <span class="type">int</span> dir_front[<span class="number">4</span>][<span class="number">2</span>], <span class="number">8</span>) = &#123;&#123;<span class="number">0</span>,  <span class="number">-1</span>&#125;,</span><br><span class="line">                                                            &#123;<span class="number">1</span>,  <span class="number">0</span>&#125;,</span><br><span class="line">                                                            &#123;<span class="number">0</span>,  <span class="number">1</span>&#125;,</span><br><span class="line">                                                            &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"><span class="built_in">AT_DTCM_SECTION_ALIGN_INIT</span>(<span class="type">const</span> <span class="type">int</span> dir_frontleft[<span class="number">4</span>][<span class="number">2</span>], <span class="number">8</span>) = &#123;&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">                                                                &#123;<span class="number">1</span>,  <span class="number">-1</span>&#125;,</span><br><span class="line">                                                                &#123;<span class="number">1</span>,  <span class="number">1</span>&#125;,</span><br><span class="line">                                                                &#123;<span class="number">-1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line"><span class="built_in">AT_DTCM_SECTION_ALIGN_INIT</span>(<span class="type">const</span> <span class="type">int</span> dir_frontright[<span class="number">4</span>][<span class="number">2</span>], <span class="number">8</span>) = &#123;&#123;<span class="number">1</span>,  <span class="number">-1</span>&#125;,</span><br><span class="line">                                                                 &#123;<span class="number">1</span>,  <span class="number">1</span>&#125;,</span><br><span class="line">                                                                 &#123;<span class="number">-1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                                                                 &#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¦æ‰‹è¿·å®«å·¡çº¿</span></span><br><span class="line"><span class="built_in">AT_ITCM_SECTION_INIT</span>(<span class="type">void</span> <span class="built_in">findline_lefthand_adaptive</span>(<span class="type">image_t</span> *img, <span class="type">int</span> block_size, <span class="type">int</span> clip_value, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> pts[][<span class="number">2</span>], <span class="type">int</span> *num)) &#123;</span><br><span class="line">    <span class="built_in">assert</span>(img &amp;&amp; img-&gt;data);</span><br><span class="line">    <span class="built_in">assert</span>(num &amp;&amp; *num &gt;= <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">assert</span>(block_size &gt; <span class="number">1</span> &amp;&amp; block_size % <span class="number">2</span> == <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> half = block_size / <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> step = <span class="number">0</span>, dir = <span class="number">0</span>, turn = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (step &lt; *num &amp;&amp; half &lt; x &amp;&amp; x &lt; img-&gt;width - half - <span class="number">1</span> &amp;&amp; half &lt; y &amp;&amp; y &lt; img-&gt;height - half - <span class="number">1</span> &amp;&amp; turn &lt; <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="type">int</span> local_thres = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> dy = -half; dy &lt;= half; dy++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> dx = -half; dx &lt;= half; dx++) &#123;</span><br><span class="line">                local_thres += <span class="built_in">AT</span>(img, x + dx, y + dy);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        local_thres /= block_size * block_size;</span><br><span class="line">        local_thres -= clip_value;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> current_value = <span class="built_in">AT</span>(img, x, y);</span><br><span class="line">        <span class="type">int</span> front_value = <span class="built_in">AT</span>(img, x + dir_front[dir][<span class="number">0</span>], y + dir_front[dir][<span class="number">1</span>]);</span><br><span class="line">        <span class="type">int</span> frontleft_value = <span class="built_in">AT</span>(img, x + dir_frontleft[dir][<span class="number">0</span>], y + dir_frontleft[dir][<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (front_value &lt; local_thres) &#123;</span><br><span class="line">            dir = (dir + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">            turn++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (frontleft_value &lt; local_thres) &#123;</span><br><span class="line">            x += dir_front[dir][<span class="number">0</span>];</span><br><span class="line">            y += dir_front[dir][<span class="number">1</span>];</span><br><span class="line">            pts[step][<span class="number">0</span>] = x;</span><br><span class="line">            pts[step][<span class="number">1</span>] = y;</span><br><span class="line">            step++;</span><br><span class="line">            turn = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x += dir_frontleft[dir][<span class="number">0</span>];</span><br><span class="line">            y += dir_frontleft[dir][<span class="number">1</span>];</span><br><span class="line">            dir = (dir + <span class="number">3</span>) % <span class="number">4</span>;</span><br><span class="line">            pts[step][<span class="number">0</span>] = x;</span><br><span class="line">            pts[step][<span class="number">1</span>] = y;</span><br><span class="line">            step++;</span><br><span class="line">            turn = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *num = step;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å³æ‰‹è¿·å®«å·¡çº¿</span></span><br><span class="line"><span class="built_in">AT_ITCM_SECTION_INIT</span>(<span class="type">void</span> <span class="built_in">findline_righthand_adaptive</span>(<span class="type">image_t</span> *img, <span class="type">int</span> block_size, <span class="type">int</span> clip_value, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> pts[][<span class="number">2</span>], <span class="type">int</span> *num)) &#123;</span><br><span class="line">    <span class="built_in">assert</span>(img &amp;&amp; img-&gt;data);</span><br><span class="line">    <span class="built_in">assert</span>(num &amp;&amp; *num &gt;= <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">assert</span>(block_size &gt; <span class="number">1</span> &amp;&amp; block_size % <span class="number">2</span> == <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> half = block_size / <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> step = <span class="number">0</span>, dir = <span class="number">0</span>, turn = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (step &lt; *num &amp;&amp; <span class="number">0</span> &lt; x &amp;&amp; x &lt; img-&gt;width - <span class="number">1</span> &amp;&amp; <span class="number">0</span> &lt; y &amp;&amp; y &lt; img-&gt;height - <span class="number">1</span> &amp;&amp; turn &lt; <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="type">int</span> local_thres = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> dy = -half; dy &lt;= half; dy++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> dx = -half; dx &lt;= half; dx++) &#123;</span><br><span class="line">                local_thres += <span class="built_in">AT</span>(img, x + dx, y + dy);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        local_thres /= block_size * block_size;</span><br><span class="line">        local_thres -= clip_value;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> current_value = <span class="built_in">AT</span>(img, x, y);</span><br><span class="line">        <span class="type">int</span> front_value = <span class="built_in">AT</span>(img, x + dir_front[dir][<span class="number">0</span>], y + dir_front[dir][<span class="number">1</span>]);</span><br><span class="line">        <span class="type">int</span> frontright_value = <span class="built_in">AT</span>(img, x + dir_frontright[dir][<span class="number">0</span>], y + dir_frontright[dir][<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span> (front_value &lt; local_thres) &#123;</span><br><span class="line">            dir = (dir + <span class="number">3</span>) % <span class="number">4</span>;</span><br><span class="line">            turn++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (frontright_value &lt; local_thres) &#123;</span><br><span class="line">            x += dir_front[dir][<span class="number">0</span>];</span><br><span class="line">            y += dir_front[dir][<span class="number">1</span>];</span><br><span class="line">            pts[step][<span class="number">0</span>] = x;</span><br><span class="line">            pts[step][<span class="number">1</span>] = y;</span><br><span class="line">            step++;</span><br><span class="line">            turn = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            x += dir_frontright[dir][<span class="number">0</span>];</span><br><span class="line">            y += dir_frontright[dir][<span class="number">1</span>];</span><br><span class="line">            dir = (dir + <span class="number">1</span>) % <span class="number">4</span>;</span><br><span class="line">            pts[step][<span class="number">0</span>] = x;</span><br><span class="line">            pts[step][<span class="number">1</span>] = y;</span><br><span class="line">            step++;</span><br><span class="line">            turn = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    *num = step;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€†é€è§†"><a href="#é€†é€è§†" class="headerlink" title="é€†é€è§†"></a>é€†é€è§†</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">warpPerspective</span><span class="params">(InputArray src, OutputArray dst, InputArray M, Size dsize,</span></span></span><br><span class="line"><span class="params"><span class="function">                      <span class="type">int</span> flags = INTER_LINEAR, <span class="type">int</span> borderMode = BORDER_CONSTANT,</span></span></span><br><span class="line"><span class="params"><span class="function">                      <span class="type">const</span> Scalar &amp;borderValue = Scalar())</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">CV_INSTRUMENT_REGION</span>()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">CV_Assert</span>(!src.<span class="built_in">empty</span>());</span><br><span class="line">    <span class="built_in">CV_Assert</span>(src.<span class="built_in">depth</span>() == CV_8U || src.<span class="built_in">depth</span>() == CV_32F);</span><br><span class="line">    <span class="built_in">CV_Assert</span>(M.<span class="built_in">rows</span>() == <span class="number">3</span> &amp;&amp; M.<span class="built_in">cols</span>() == <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function">Mat <span class="title">mapx</span><span class="params">(dsize, CV_32F)</span></span>;</span><br><span class="line">    <span class="function">Mat <span class="title">mapy</span><span class="params">(dsize, CV_32F)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">Mat <span class="title">transform</span><span class="params">(<span class="number">2</span>, <span class="number">3</span>, CV_64F)</span></span>;</span><br><span class="line">    M.<span class="built_in">getMat</span>().<span class="built_in">colRange</span>(<span class="number">0</span>, <span class="number">2</span>).<span class="built_in">convertTo</span>(transform, transform.<span class="built_in">type</span>());</span><br><span class="line"></span><br><span class="line">    <span class="built_in">buildWarpPerspectiveMaps</span>(transform, flags, dsize, mapx, mapy);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">remap</span>(src, dst, mapx, mapy, flags, borderMode, borderValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯OpenCVä¸­çš„warpPerspectiveå‡½æ•°çš„å®ç°ï¼Œç”¨äºå¯¹è¾“å…¥å›¾åƒè¿›è¡Œé€è§†å˜æ¢ã€‚ä¸‹é¢æ˜¯å¯¹ä»£ç ä¸­çš„å‡½æ•°åŠå‚æ•°çš„è¯¦ç»†è§£é‡Šï¼š</p><h3 id="warpPerspectiveå‡½æ•°å‚æ•°è§£é‡Šï¼š"><a href="#warpPerspectiveå‡½æ•°å‚æ•°è§£é‡Šï¼š" class="headerlink" title="warpPerspectiveå‡½æ•°å‚æ•°è§£é‡Šï¼š"></a>warpPerspectiveå‡½æ•°å‚æ•°è§£é‡Šï¼š</h3><ul><li><strong>src</strong>ï¼šè¾“å…¥å›¾åƒï¼Œç±»å‹ä¸ºInputArrayã€‚</li><li><strong>dst</strong>ï¼šè¾“å‡ºå›¾åƒï¼Œç±»å‹ä¸ºOutputArrayã€‚</li><li><strong>M</strong>ï¼š3x3çš„å˜æ¢çŸ©é˜µï¼Œæè¿°äº†é€è§†å˜æ¢ï¼Œç±»å‹ä¸ºInputArrayã€‚</li><li><strong>dsize</strong>ï¼šè¾“å‡ºå›¾åƒçš„å°ºå¯¸ï¼Œç±»å‹ä¸ºSizeã€‚</li><li><strong>flags</strong>ï¼šæ’å€¼æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šåœ¨è¿›è¡Œåƒç´ å€¼æ’å€¼æ—¶è¦ä½¿ç”¨çš„æ–¹æ³•ï¼Œé»˜è®¤ä¸ºINTER_LINEARã€‚</li><li><strong>borderMode</strong>ï¼šè¾¹ç•Œåƒç´ æ’å€¼æ¨¡å¼ï¼Œç”¨äºæŒ‡å®šå½“ç›®æ ‡å›¾åƒåƒç´ ä½äºæºå›¾åƒä¹‹å¤–æ—¶çš„å¤„ç†æ–¹å¼ï¼Œé»˜è®¤ä¸ºBORDER_CONSTANTã€‚</li><li><strong>borderValue</strong>ï¼šè¾¹ç•Œå¡«å……çš„åƒç´ å€¼ï¼Œç±»å‹ä¸ºScalarã€‚</li></ul><h3 id="warpPerspectiveå‡½æ•°ä¸»è¦æ­¥éª¤è§£é‡Šï¼š"><a href="#warpPerspectiveå‡½æ•°ä¸»è¦æ­¥éª¤è§£é‡Šï¼š" class="headerlink" title="warpPerspectiveå‡½æ•°ä¸»è¦æ­¥éª¤è§£é‡Šï¼š"></a>warpPerspectiveå‡½æ•°ä¸»è¦æ­¥éª¤è§£é‡Šï¼š</h3><ol><li><p><strong>CV_INSTRUMENT_REGION</strong>ï¼šç”¨äºæ€§èƒ½æµ‹é‡å’Œä¼˜åŒ–çš„å®å®šä¹‰ã€‚</p></li><li><p><strong>CV_Assert</strong>ï¼šæ–­è¨€ï¼Œç”¨äºåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæ¡ä»¶ä¸æˆç«‹åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p></li><li><p><strong>Mat mapx</strong>å’Œ<strong>Mat mapy</strong>ï¼šåˆ†åˆ«ç”¨äºå­˜å‚¨Xå’ŒYæ–¹å‘çš„æ˜ å°„ç»“æœã€‚</p></li><li><p><strong>Mat transform</strong>ï¼šæ˜¯ä¸€ä¸ª2x3çš„çŸ©é˜µï¼Œç”¨äºä¿å­˜MçŸ©é˜µçš„å‰ä¸¤åˆ—ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºCV_64Fç±»å‹ã€‚</p></li><li><p><strong>buildWarpPerspectiveMaps</strong>ï¼šæ ¹æ®é€è§†å˜æ¢çŸ©é˜µå’ŒæŒ‡å®šçš„æ’å€¼æ–¹æ³•ï¼Œæ„å»ºå‡ºç›®æ ‡å›¾åƒåœ¨æºå›¾åƒä¸Šçš„æ˜ å°„å…³ç³»ã€‚</p></li><li><p><strong>remap</strong>ï¼šæ ¹æ®ç”Ÿæˆçš„æ˜ å°„å…³ç³»å¯¹è¾“å…¥å›¾åƒè¿›è¡Œé€è§†å˜æ¢ï¼Œå¹¶å­˜å‚¨ç»“æœåˆ°è¾“å‡ºå›¾åƒdstä¸­ã€‚<br>  M.getMat().colRange(0, 2).convertTo(transform, transform.type());è¯¦ç»†è§£é‡Š<br>  è¿™è¡Œä»£ç æ˜¯é’ˆå¯¹OpenCVä¸­çš„çŸ©é˜µæ“ä½œã€‚è®©æˆ‘é€æ­¥è§£é‡Šä¸€ä¸‹ï¼š</p></li><li><p><code>M.getMat()</code>: è¿™éƒ¨åˆ†è·å–ä¸€ä¸ªOpenCVçš„çŸ©é˜µ<code>M</code>ã€‚</p></li><li><p><code>.colRange(0, 2)</code>: è¿™ä¸ªéƒ¨åˆ†è¡¨ç¤ºå¯¹è¯¥çŸ©é˜µ<code>M</code>çš„åˆ—è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œåªé€‰æ‹©ä»ç¬¬0åˆ—åˆ°ç¬¬2åˆ—ï¼ˆä¸åŒ…æ‹¬ç¬¬2åˆ—ï¼‰çš„éƒ¨åˆ†ã€‚</p></li><li><p><code>.convertTo(transform, transform.type())</code>: è¿™ä¸€éƒ¨åˆ†æ˜¯å°†åˆ‡ç‰‡åçš„åˆ—æ•°æ®è¿›è¡Œç±»å‹è½¬æ¢å¹¶èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªçŸ©é˜µ<code>transform</code>ã€‚è¿™é‡Œçš„<code>transform</code>æ˜¯ä¸€ä¸ªç›®æ ‡çŸ©é˜µï¼Œå®ƒå°†åŒ…å«è½¬æ¢åçš„æ•°æ®ã€‚<code>transform.type()</code>è¿”å›<code>transform</code>çŸ©é˜µçš„ç±»å‹ã€‚</p></li></ol><p>å› æ­¤ï¼Œæ•´ä½“æ¥çœ‹ï¼Œè¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯ä»çŸ©é˜µ<code>M</code>ä¸­é€‰æ‹©ç¬¬0åˆ—åˆ°ç¬¬1åˆ—çš„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ï¼Œç„¶åå­˜å‚¨åˆ°çŸ©é˜µ<code>transform</code>ä¸­ã€‚</p><p>è¿™æ˜¯ <code>buildWarpPerspectiveMaps</code> å‡½æ•°çš„ä¼ªä»£ç å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">buildWarpPerspectiveMaps</span><span class="params">(Size src_size, Matx33f M, <span class="type">bool</span> inverse_map, Mat&amp; xmap, Mat&amp; ymap)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> width = src_size.width;</span><br><span class="line">    <span class="type">int</span> height = src_size.height;</span><br><span class="line">    </span><br><span class="line">    xmap.<span class="built_in">create</span>(height, width, CV_32F);</span><br><span class="line">    ymap.<span class="built_in">create</span>(height, width, CV_32F);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> y = <span class="number">0</span>; y &lt; height; y++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> x = <span class="number">0</span>; x &lt; width; x++) &#123;</span><br><span class="line">            Vec3f src_pt = <span class="built_in">Vec3f</span>(x, y, <span class="number">1</span>); <span class="comment">// Source point</span></span><br><span class="line">            Vec3f dst_pt = M * src_pt;      <span class="comment">// Apply transformation matrix</span></span><br><span class="line"></span><br><span class="line">            <span class="type">float</span> map_x, map_y;</span><br><span class="line">            <span class="keyword">if</span> (!inverse_map) &#123;</span><br><span class="line">                map_x = dst_pt[<span class="number">0</span>] / dst_pt[<span class="number">2</span>];</span><br><span class="line">                map_y = dst_pt[<span class="number">1</span>] / dst_pt[<span class="number">2</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map_x = src_pt[<span class="number">0</span>] - dst_pt[<span class="number">0</span>];</span><br><span class="line">                map_y = src_pt[<span class="number">1</span>] - dst_pt[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            xmap.<span class="built_in">at</span>&lt;<span class="type">float</span>&gt;(y, x) = map_x;</span><br><span class="line">            ymap.<span class="built_in">at</span>&lt;<span class="type">float</span>&gt;(y, x) = map_y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¼ªä»£ç å®ç°æè¿°äº† <code>buildWarpPerspectiveMaps</code> å‡½æ•°çš„å¤§è‡´æ“ä½œæ­¥éª¤ã€‚å®é™…çš„ <code>buildWarpPerspectiveMaps</code> å‡½æ•°æ˜¯ OpenCV ä¸­ç”¨äºæ„å»ºé€è§†å˜æ¢æ˜ å°„çš„å‡½æ•°ï¼Œå…·ä½“å®ç°ä¼šæ›´åŠ å¤æ‚å¹¶ä¸”åŒ…å«äº†æ›´å¤šç»†èŠ‚ã€‚å¦‚æœä½ éœ€è¦å®é™…çš„ä»£ç å®ç°ï¼Œå»ºè®®æŸ¥é˜… OpenCV çš„æºä»£ç æˆ–è€…å®˜æ–¹æ–‡æ¡£ä¸­æä¾›çš„å…·ä½“å‡½æ•°å®ç°ã€‚å¸Œæœ›è¿™ä¸ªç®€è¦æè¿°èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ï¼Œå¦‚æœæœ‰å…¶ä»–é—®é¢˜æˆ–è€…éœ€è¦æ›´å¤šå¸®åŠ©ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h3><ul><li>è¾“å…¥å›¾åƒsrcä¸èƒ½ä¸ºç©ºã€‚</li><li>è¾“å…¥å›¾åƒsrcçš„æ·±åº¦å¿…é¡»ä¸ºCV_8Uæˆ–CV_32Fã€‚</li><li>å˜æ¢çŸ©é˜µMå¿…é¡»ä¸ºä¸€ä¸ª3x3çŸ©é˜µã€‚</li><li>warpPerspectiveå‡½æ•°å®ç°äº†é€è§†å˜æ¢çš„æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡æ„å»ºå˜æ¢çŸ©é˜µå¹¶åˆ©ç”¨remapå‡½æ•°å®ç°å¯¹å›¾åƒçš„é€è§†å˜æ¢æ“ä½œã€‚</li></ul><p>å¦‚æœä½ æœ‰ä»»ä½•å…³äºè¿™æ®µä»£ç çš„ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥è§£é‡Šï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p><p>@brief Applies a perspective transformation to an image.</p><p>The function warpPerspective transforms the source image using the specified matrix:</p><p>  [$\texttt{dst} (x,y) &#x3D;  \texttt{src} \left ( \frac{M_{11} x + M_{12} y + M_{13}}{M_{31} x + M_{32} y + M_{33}} ,<br>     \frac{M_{21} x + M_{22} y + M_{23}}{M_{31} x + M_{32} y + M_{33}} \right )$] </p><p>when the flag #WARP_INVERSE_MAP is set. Otherwise, the transformation is first inverted with invert<br>and then put in the formula above instead of M. The function cannot operate in-place.</p><p>@param src input image.<br>@param dst output image that has the size dsize and the same type as src .<br>@param M  $ 3\times 3 $ transformation matrix.<br>@param dsize size of the output image.<br>@param flags combination of interpolation methods (#INTER_LINEAR or #INTER_NEAREST) and the<br>optional flag #WARP_INVERSE_MAP, that sets M as the inverse transformation (<br>$\texttt{dst}\rightarrow\texttt{src} $ ).<br>@param borderMode pixel extrapolation method (#BORDER_CONSTANT or #BORDER_REPLICATE).<br>@param borderValue value used in case of a constant border; by default, it equals 0.</p><p>@sa  warpAffine, resize, remap, getRectSubPix, perspectiveTransform</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€†é€è§†</title>
      <link href="/2024/04/27/%E9%80%86%E9%80%8F%E8%A7%86/"/>
      <url>/2024/04/27/%E9%80%86%E9%80%8F%E8%A7%86/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @brief IPMåˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @param origSize è¾“å…¥åŸå§‹å›¾åƒSize</span></span><br><span class="line"><span class="comment">     * @param dstSize è¾“å‡ºå›¾åƒSize</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">const</span> cv::Size &amp;origSize, <span class="type">const</span> cv::Size &amp;dstSize)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// åŸå§‹åŸŸï¼šåˆ†è¾¨ç‡320x240</span></span><br><span class="line">        <span class="comment">// The 4-points at the input image</span></span><br><span class="line">        m_origPoints.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">// [ç¬¬äºŒç‰ˆæ— å¸¦ç•¸å˜é•œå¤´å‚æ•°]</span></span><br><span class="line">        m_origPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">0</span>, <span class="number">214</span>));   <span class="comment">// å·¦ä¸‹</span></span><br><span class="line">        m_origPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">319</span>, <span class="number">214</span>)); <span class="comment">// å³ä¸‹</span></span><br><span class="line">        m_origPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">192</span>, <span class="number">0</span>));   <span class="comment">// å³ä¸Š</span></span><br><span class="line">        m_origPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">128</span>, <span class="number">0</span>));   <span class="comment">// å·¦ä¸Š</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// çŸ«æ­£åŸŸï¼šåˆ†è¾¨ç‡320x240</span></span><br><span class="line">        <span class="comment">// The 4-points correspondences in the destination image</span></span><br><span class="line">        m_dstPoints.<span class="built_in">clear</span>();</span><br><span class="line">        m_dstPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">100</span>, <span class="number">400</span>)); <span class="comment">// å·¦ä¸‹</span></span><br><span class="line">        m_dstPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">220</span>, <span class="number">400</span>)); <span class="comment">// å³ä¸‹</span></span><br><span class="line">        m_dstPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">220</span>, <span class="number">0</span>));   <span class="comment">// å³ä¸Š</span></span><br><span class="line">        m_dstPoints.<span class="built_in">push_back</span>(<span class="built_in">Point2f</span>(<span class="number">100</span>, <span class="number">0</span>));   <span class="comment">// å·¦ä¸Š</span></span><br><span class="line"></span><br><span class="line">        m_origSize = origSize;</span><br><span class="line">        m_dstSize = dstSize;</span><br><span class="line">        <span class="built_in">assert</span>(m_origPoints.<span class="built_in">size</span>() == <span class="number">4</span> &amp;&amp; m_dstPoints.<span class="built_in">size</span>() == <span class="number">4</span> &amp;&amp; <span class="string">&quot;Orig. points and Dst. points must vectors of 4 points&quot;</span>);</span><br><span class="line">        m_H = <span class="built_in">getPerspectiveTransform</span>(m_origPoints, m_dstPoints); <span class="comment">// è®¡ç®—å˜æ¢çŸ©é˜µ [3x3]</span></span><br><span class="line">        m_H_inv = m_H.<span class="built_in">inv</span>();                                      <span class="comment">// æ±‚è§£é€†è½¬æ¢çŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">createMaps</span>();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li><p><code>void init(const cv::Size &amp;origSize, const cv::Size &amp;dstSize)</code>: è¿™æ˜¯ä¸€ä¸ªåä¸º<code>init</code>çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°<code>origSize</code>å’Œ<code>dstSize</code>ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯OpenCVåº“ä¸­çš„<code>cv::Size</code>ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºå›¾åƒçš„å°ºå¯¸ã€‚</p></li><li><p><code>m_origPoints.clear();</code>: æ¸…ç©ºå­˜å‚¨åŸå§‹åŸŸç‚¹åæ ‡çš„å®¹å™¨<code>m_origPoints</code>ã€‚</p></li><li><p><code>m_origPoints.push_back(Point2f(0, 214));</code>: å°†<code>(0, 214)</code>ç‚¹åæ ‡æ·»åŠ åˆ°åŸå§‹åŸŸçš„ç‚¹åæ ‡é›†åˆä¸­ï¼Œä»£è¡¨åŸå§‹å›¾åƒçš„å·¦ä¸‹è§’ã€‚</p></li><li><p>ä¾æ¬¡ç±»æ¨ï¼Œå°†åŸå§‹åŸŸçš„å››ä¸ªè§’çš„ç‚¹åæ ‡æ·»åŠ åˆ°<code>m_origPoints</code>ä¸­ï¼Œä¾æ¬¡æ˜¯å·¦ä¸‹ã€å³ä¸‹ã€å³ä¸Šå’Œå·¦ä¸Šã€‚</p></li><li><p><code>m_dstPoints.clear();</code>: æ¸…ç©ºå­˜å‚¨çŸ«æ­£åŸŸç‚¹åæ ‡çš„å®¹å™¨<code>m_dstPoints</code>ã€‚</p></li><li><p><code>m_dstPoints.push_back(Point2f(100, 400));</code>: å°†<code>(100, 400)</code>ç‚¹åæ ‡æ·»åŠ åˆ°çŸ«æ­£åŸŸçš„ç‚¹åæ ‡é›†åˆä¸­ï¼Œä»£è¡¨çŸ«æ­£å›¾åƒçš„å·¦ä¸‹è§’ã€‚</p></li><li><p>ä¾æ¬¡ç±»æ¨ï¼Œå°†çŸ«æ­£åŸŸçš„å››ä¸ªè§’çš„ç‚¹åæ ‡æ·»åŠ åˆ°<code>m_dstPoints</code>ä¸­ï¼Œä¾æ¬¡æ˜¯å·¦ä¸‹ã€å³ä¸‹ã€å³ä¸Šå’Œå·¦ä¸Šã€‚</p></li><li><p><code>m_origSize = origSize;</code>å’Œ<code>m_dstSize = dstSize;</code>: å°†åŸå§‹å›¾åƒå°ºå¯¸å’Œç›®æ ‡å›¾åƒå°ºå¯¸ä¿å­˜ä¸‹æ¥ã€‚</p></li><li><p><code>assert(m_origPoints.size() == 4 &amp;&amp; m_dstPoints.size() == 4 &amp;&amp; &quot;Orig. points and Dst. points must vectors of 4 points&quot;);</code>: ä½¿ç”¨<code>assert</code>æ–­è¨€æ¥ç¡®ä¿åŸå§‹åŸŸå’ŒçŸ«æ­£åŸŸçš„ç‚¹åæ ‡é›†åˆéƒ½åŒ…å«å››ä¸ªç‚¹ã€‚</p></li><li><p><code>m_H = getPerspectiveTransform(m_origPoints, m_dstPoints);</code>: é€šè¿‡åŸå§‹åŸŸå’ŒçŸ«æ­£åŸŸçš„ç‚¹åæ ‡è®¡ç®—é€è§†å˜æ¢çŸ©é˜µ<code>m_H</code>ã€‚</p></li><li><p><code>m_H_inv = m_H.inv();</code>: æ±‚è§£é€è§†å˜æ¢çŸ©é˜µ<code>m_H</code>çš„é€†çŸ©é˜µï¼Œå­˜å‚¨åœ¨<code>m_H_inv</code>ä¸­ã€‚</p></li><li><p><code>createMaps();</code>: è°ƒç”¨<code>createMaps</code>å‡½æ•°ï¼Œåˆ›å»ºåœ°å›¾ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®é›†æ ‡æ³¨jsonè½¬xmlè„šæœ¬</title>
      <link href="/2024/04/26/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%87%E6%B3%A8json%E8%BD%ACxml%E8%84%9A%E6%9C%AC/"/>
      <url>/2024/04/26/%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%87%E6%B3%A8json%E8%BD%ACxml%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">convert_json_to_xml</span>(<span class="params">json_data</span>):</span><br><span class="line">    root = ET.Element(<span class="string">&quot;annotation&quot;</span>)</span><br><span class="line">    filename = ET.SubElement(root, <span class="string">&quot;filename&quot;</span>)</span><br><span class="line">    filename.text = json_data[<span class="string">&quot;imagePath&quot;</span>]</span><br><span class="line">    object_num = ET.SubElement(root, <span class="string">&quot;object_num&quot;</span>)</span><br><span class="line">    object_num.text = <span class="built_in">str</span>(<span class="built_in">len</span>(json_data[<span class="string">&quot;shapes&quot;</span>]))</span><br><span class="line">    size = ET.SubElement(root, <span class="string">&quot;size&quot;</span>)</span><br><span class="line">    width = ET.SubElement(size, <span class="string">&quot;width&quot;</span>)</span><br><span class="line">    width.text = <span class="built_in">str</span>(json_data[<span class="string">&quot;imageWidth&quot;</span>])</span><br><span class="line">    height = ET.SubElement(size, <span class="string">&quot;height&quot;</span>)</span><br><span class="line">    height.text = <span class="built_in">str</span>(json_data[<span class="string">&quot;imageHeight&quot;</span>])</span><br><span class="line">    <span class="keyword">for</span> shape <span class="keyword">in</span> json_data[<span class="string">&quot;shapes&quot;</span>]:</span><br><span class="line">        object_element = ET.SubElement(root, <span class="string">&quot;object&quot;</span>)</span><br><span class="line">        name = ET.SubElement(object_element, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">        name.text = shape[<span class="string">&quot;label&quot;</span>]</span><br><span class="line">        difficult = ET.SubElement(object_element, <span class="string">&quot;difficult&quot;</span>)</span><br><span class="line">        difficult.text = <span class="string">&quot;0&quot;</span></span><br><span class="line">        bndbox = ET.SubElement(object_element, <span class="string">&quot;bndbox&quot;</span>)</span><br><span class="line">        xmin = ET.SubElement(bndbox, <span class="string">&quot;xmin&quot;</span>)</span><br><span class="line">        xmin.text = <span class="built_in">str</span>(<span class="built_in">int</span>(shape[<span class="string">&quot;points&quot;</span>][<span class="number">0</span>][<span class="number">0</span>]))</span><br><span class="line">        ymin = ET.SubElement(bndbox, <span class="string">&quot;ymin&quot;</span>)</span><br><span class="line">        ymin.text = <span class="built_in">str</span>(<span class="built_in">int</span>(shape[<span class="string">&quot;points&quot;</span>][<span class="number">0</span>][<span class="number">1</span>]))</span><br><span class="line">        xmax = ET.SubElement(bndbox, <span class="string">&quot;xmax&quot;</span>)</span><br><span class="line">        xmax.text = <span class="built_in">str</span>(<span class="built_in">int</span>(shape[<span class="string">&quot;points&quot;</span>][<span class="number">1</span>][<span class="number">0</span>]))</span><br><span class="line">        ymax = ET.SubElement(bndbox, <span class="string">&quot;ymax&quot;</span>)</span><br><span class="line">        ymax.text = <span class="built_in">str</span>(<span class="built_in">int</span>(shape[<span class="string">&quot;points&quot;</span>][<span class="number">1</span>][<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">return</span> ET.tostring(root, encoding=<span class="string">&quot;unicode&quot;</span>)</span><br><span class="line">current_dir = os.getcwd()</span><br><span class="line">parent_dir = os.path.abspath(os.path.join(current_dir, os.pardir))</span><br><span class="line">output_dir = os.path.join(parent_dir, <span class="string">&quot;xml_output&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(output_dir):</span><br><span class="line">    os.makedirs(output_dir)</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(current_dir):</span><br><span class="line">    <span class="keyword">if</span> file.endswith(<span class="string">&quot;.json&quot;</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(current_dir, file), <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> json_file:</span><br><span class="line">            json_data = json.load(json_file)</span><br><span class="line">            xml_data = convert_json_to_xml(json_data)</span><br><span class="line">            xml_filename = file.replace(<span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.xml&quot;</span>)</span><br><span class="line">            output_path = os.path.join(output_dir, xml_filename)</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(output_path, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> xml_file:</span><br><span class="line">                xml_file.write(xml_data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ‰€æœ‰JSONæ–‡ä»¶å·²ç»è½¬æ¢ä¸ºXMLå¹¶ä¿å­˜åœ¨æ–‡ä»¶å¤¹ xml_output ä¸­&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> python </tag>
            
            <tag> æ•°æ®é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ— äººé©¾é©¶æ±½è½¦ç³»ç»Ÿå…¥é—¨ï¼ˆä¸€ï¼‰å¡å°”æ›¼æ»¤æ³¢ä¸ç›®æ ‡è¿½è¸ª</title>
      <link href="/2024/04/25/%E6%97%A0%E4%BA%BA%E9%A9%BE%E9%A9%B6%E6%B1%BD%E8%BD%A6%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2%E4%B8%8E%E7%9B%AE%E6%A0%87%E8%BF%BD%E8%B8%AA/"/>
      <url>/2024/04/25/%E6%97%A0%E4%BA%BA%E9%A9%BE%E9%A9%B6%E6%B1%BD%E8%BD%A6%E7%B3%BB%E7%BB%9F%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2%E4%B8%8E%E7%9B%AE%E6%A0%87%E8%BF%BD%E8%B8%AA/</url>
      
        <content type="html"><![CDATA[<div class="tagLink"><a class="link-card" title="å¡å°”æ›¼æ»¤æ³¢æ•™ç¨‹" href="https://www.kalmanfilter.net/CN/background_cn.html"><span class="link-card-backdrop" style="background-image: url(https://www.kalmanfilter.net/img/profile.png)"></span><div class="left"><img src="https://www.kalmanfilter.net/img/profile.png" class="lazyload placeholder" data-srcset="https://www.kalmanfilter.net/img/profile.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">å¡å°”æ›¼æ»¤æ³¢æ•™ç¨‹</p><p class="url">https://www.kalmanfilter.net/CN/background_cn.html</p></div></a></div><div class="tagLink"><a class="link-card" title="ä¸€ä¸ªä¾‹å­ææ¸…æ¥šï¼ˆå…ˆéªŒåˆ†å¸ƒ/åéªŒåˆ†å¸ƒ/ä¼¼ç„¶ä¼°è®¡ï¼‰" href="https://blog.csdn.net/qq_23947237/article/details/78265026"><span class="link-card-backdrop" style="background-image: url(https://img-blog.csdn.net/20171021161006627?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjM5NDcyMzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)"></span><div class="left"><img src="https://img-blog.csdn.net/20171021161006627?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjM5NDcyMzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" class="lazyload placeholder" data-srcset="https://img-blog.csdn.net/20171021161006627?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjM5NDcyMzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">ä¸€ä¸ªä¾‹å­ææ¸…æ¥šï¼ˆå…ˆéªŒåˆ†å¸ƒ/åéªŒåˆ†å¸ƒ/ä¼¼ç„¶ä¼°è®¡ï¼‰</p><p class="url">https://blog.csdn.net/qq_23947237/article/details/78265026</p></div></a></div><p>åœ¨è´å¶æ–¯æ¨æ–­ä¸­ï¼ŒåéªŒåˆ†å¸ƒä¸å…ˆéªŒåˆ†å¸ƒå’Œä¼¼ç„¶ä¹‹é—´å­˜åœ¨ä¸€ç§é‡è¦çš„å…³ç³»ï¼Œå³åéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶ã€‚è¿™ç§å…³ç³»å¯ä»¥é€šè¿‡è´å¶æ–¯å®šç†æ¥è¿›è¡Œæ¨å¯¼å’Œè§£é‡Šã€‚</p><h3 id="è´å¶æ–¯å®šç†ï¼š"><a href="#è´å¶æ–¯å®šç†ï¼š" class="headerlink" title="è´å¶æ–¯å®šç†ï¼š"></a>è´å¶æ–¯å®šç†ï¼š</h3><p>è´å¶æ–¯å®šç†æè¿°äº†åœ¨è§‚æµ‹åˆ°æ•°æ® $( D ) $åï¼Œå‚æ•° $( \theta )$ çš„åéªŒæ¦‚ç‡å¦‚ä½•æ ¹æ®å…ˆéªŒæ¦‚ç‡ $( P(\theta) )$ å’Œä¼¼ç„¶æ€§å‡½æ•° $( P(D|\theta) )$ æ¥æ›´æ–°ã€‚è¡¨è¾¾å¼å¦‚ä¸‹ï¼š<br>$[ P(\theta|D) &#x3D; \frac{P(D|\theta) \times P(\theta)}{P(D)} ]$</p><p>å…¶ä¸­ï¼š</p><ul><li>$( P(\theta|D) )$ æ˜¯åœ¨ç»™å®šè§‚æµ‹æ•°æ® $( D )$ åå‚æ•°$ ( \theta )$ çš„åéªŒæ¦‚ç‡ï¼›</li><li>$( P(D|\theta) )$ æ˜¯åœ¨ç»™å®šå‚æ•° $( \theta ) $çš„æ¡ä»¶ä¸‹è§‚æµ‹æ•°æ® $( D )$ çš„ä¼¼ç„¶æ€§ï¼›</li><li>$( P(\theta) )$ æ˜¯å‚æ•° $( \theta )$ çš„å…ˆéªŒæ¦‚ç‡ï¼›</li><li>$( P(D) )$ æ˜¯æ•°æ® $( D )$ çš„è¾¹é™…æ¦‚ç‡ã€‚</li></ul><h3 id="åéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶ï¼š"><a href="#åéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶ï¼š" class="headerlink" title="åéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶ï¼š"></a>åéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶ï¼š</h3><p>ä»è´å¶æ–¯å®šç†ä¸­å¯ä»¥å¾—å‡ºåéªŒåˆ†å¸ƒæ­£æ¯”äºå…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶çš„ç»“è®ºï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š<br>$[ P(\theta|D) \propto P(D|\theta) \times P(\theta) ]$</p><p>è¿™æ„å‘³ç€åéªŒåˆ†å¸ƒä¸å…ˆéªŒåˆ†å¸ƒä¹˜ä»¥ä¼¼ç„¶æ€§å‡½æ•°ä¹‹é—´å­˜åœ¨æ¯”ä¾‹å…³ç³»ã€‚å…·ä½“è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li>å…ˆéªŒåˆ†å¸ƒ $( P(\theta) )$ æè¿°äº†åœ¨è§‚æµ‹æ•°æ®ä¹‹å‰å¯¹å‚æ•° $( \theta )$ çš„ä¸ç¡®å®šæ€§çš„åˆå§‹ä¼°è®¡ï¼›</li><li>ä¼¼ç„¶æ€§å‡½æ•° $( P(D|\theta) ) $æè¿°äº†åœ¨ç»™å®šå‚æ•° $( \theta )$ çš„æƒ…å†µä¸‹è§‚æµ‹åˆ°æ•°æ® $( D )$ çš„æ¦‚ç‡ï¼›</li><li>åéªŒåˆ†å¸ƒ $( P(\theta|D) )$ ç»“åˆäº†å…ˆéªŒä¿¡æ¯å’Œæ–°æ•°æ®çš„ä¿¡æ¯ï¼Œæä¾›äº†åœ¨ç»™å®šæ•°æ® $( D )$ åå¯¹å‚æ•° $( \theta )$ çš„æ›´å‡†ç¡®ä¼°è®¡ã€‚</li></ul><p>é€šè¿‡è¿™ç§å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…ˆéªŒçŸ¥è¯†å’Œè§‚æµ‹åˆ°çš„æ•°æ®æ¥æ›´æ–°å¯¹å‚æ•°çš„ä¼°è®¡ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£æ•°æ®å’Œè¿›è¡Œæ¨æ–­ã€‚è¿™ç§è´å¶æ–¯æ–¹æ³•åœ¨å¤„ç†ä¸ç¡®å®šæ€§å’Œå°æ ·æœ¬æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚</p><iframe src="//player.bilibili.com/player.html?aid=399758288&bvid=BV1zo4y1J76H&cid=1164008541&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>å¡å°”æ›¼æ»¤æ³¢ï¼ˆKalman Filterï¼‰æ˜¯ä¸€ç§ç”¨äºä¼°è®¡ç³»ç»ŸçŠ¶æ€çš„æ•°å­¦ç®—æ³•ï¼Œé€šè¿‡èåˆç³»ç»Ÿæ¨¡å‹çš„é¢„æµ‹ä¿¡æ¯å’Œå®é™…è§‚æµ‹çš„æµ‹é‡ä¿¡æ¯ï¼Œä»¥ä¼˜åŒ–å¯¹ç³»ç»Ÿå½“å‰çŠ¶æ€çš„ä¼°è®¡ã€‚å¡å°”æ›¼æ»¤æ³¢ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯é€šè¿‡å¯¹ç³»ç»ŸçŠ¶æ€çš„åŠ¨æ€å»ºæ¨¡å’Œä¸ç¡®å®šæ€§çš„ä¼°è®¡ï¼Œæ¥è·å¾—ç³»ç»ŸçŠ¶æ€çš„æœ€ä¼˜ä¼°è®¡ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¡å°”æ›¼æ»¤æ³¢é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°å¯¹å½“å‰çŠ¶æ€çš„ä¼°è®¡ï¼š</p><ol><li><p><strong>é¢„æµ‹çŠ¶æ€</strong>ï¼šé¦–å…ˆæ ¹æ®ç³»ç»Ÿçš„åŠ¨æ€æ¨¡å‹ï¼Œåˆ©ç”¨ç³»ç»Ÿçš„ä¸Šä¸€ä¸ªçŠ¶æ€å€¼å’Œç³»ç»Ÿçš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œé¢„æµ‹ç³»ç»Ÿçš„å½“å‰çŠ¶æ€å€¼ã€‚è¿™ä¸€æ­¥æ˜¯åŸºäºç³»ç»Ÿçš„å†…åœ¨è§„å¾‹è¿›è¡Œçš„çŠ¶æ€é¢„æµ‹ï¼Œä¸è€ƒè™‘è§‚æµ‹å€¼ã€‚</p></li><li><p><strong>æ›´æ–°çŠ¶æ€</strong>ï¼šæ¥ç€ï¼Œå¡å°”æ›¼æ»¤æ³¢è€ƒè™‘åˆ°å½“å‰çš„æµ‹é‡å€¼ï¼Œå³è§‚æµ‹åˆ°çš„ç³»ç»ŸçŠ¶æ€å€¼ã€‚é€šè¿‡æ¯”è¾ƒå®é™…è§‚æµ‹å€¼å’Œé¢„æµ‹çŠ¶æ€å€¼ä¹‹é—´çš„å·®å¼‚ï¼Œç»“åˆç³»ç»Ÿçš„æµ‹é‡æ–¹ç¨‹å’Œåæ–¹å·®çŸ©é˜µï¼Œæ›´æ–°å¯¹ç³»ç»Ÿå½“å‰çŠ¶æ€çš„ä¼°è®¡ã€‚è¿™ä¸€æ­¥å¯ä»¥ç†è§£ä¸ºæ ¹æ®æµ‹é‡ç»“æœå¯¹ç³»ç»ŸçŠ¶æ€è¿›è¡Œä¿®æ­£å’Œä¼˜åŒ–ï¼ŒåŒæ—¶è€ƒè™‘åˆ°æµ‹é‡è¯¯å·®å’Œç³»ç»ŸåŠ¨æ€çš„ä¸ç¡®å®šæ€§ã€‚</p></li><li><p><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šç»è¿‡é¢„æµ‹å’Œæ›´æ–°ä¹‹åï¼Œå¡å°”æ›¼æ»¤æ³¢ä¼šæ ¹æ®é¢„æµ‹å’Œæ›´æ–°çš„ç»“æœæ¥æ›´æ–°ç³»ç»Ÿçš„çŠ¶æ€ä¼°è®¡å’ŒçŠ¶æ€çš„ä¸ç¡®å®šæ€§ï¼Œç„¶åå¾ªç¯è¿­ä»£è¿™äº›æ­¥éª¤ä»¥è·å¾—å¯¹ç³»ç»ŸçŠ¶æ€çš„è¿ç»­ä¼°è®¡ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œå¡å°”æ›¼æ»¤æ³¢ç®—æ³•å……åˆ†åˆ©ç”¨äº†ç³»ç»ŸåŠ¨æ€æ¨¡å‹å’Œä¼ æ„Ÿå™¨æµ‹é‡ä¿¡æ¯ï¼Œé€šè¿‡é¢„æµ‹å’Œæ›´æ–°çš„æ­¥éª¤æ¥è·å¾—å¯¹ç³»ç»ŸçŠ¶æ€çš„æœ€ä¼˜ä¼°è®¡ã€‚é€šè¿‡åŒæ—¶è€ƒè™‘ä¸Šä¸€ä¸ªçŠ¶æ€å€¼å’Œå½“å‰çš„æµ‹é‡å€¼ï¼Œå¡å°”æ›¼æ»¤æ³¢èƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†ç³»ç»ŸåŠ¨æ€ã€æµ‹é‡è¯¯å·®å’Œä¸ç¡®å®šæ€§ï¼Œä»è€Œæé«˜å¯¹ç³»ç»ŸçŠ¶æ€çš„ä¼°è®¡ç²¾åº¦ã€‚</p><h2 id="è´å¡å°”æ ¡æ­£"><a href="#è´å¡å°”æ ¡æ­£" class="headerlink" title="è´å¡å°”æ ¡æ­£"></a>è´å¡å°”æ ¡æ­£</h2><p>åœ¨é«˜æ–¯åˆ†å¸ƒï¼ˆæ­£æ€åˆ†å¸ƒï¼‰ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä»æ€»ä½“åˆ†å¸ƒä¸­æŠ½å–ä¸€å°éƒ¨åˆ†æ ·æœ¬æ¥ä¼°è®¡æ€»ä½“çš„æ–¹å·®ï¼Œé€šå¸¸æƒ…å†µä¸‹æ ·æœ¬æ–¹å·®ä¼šä½ä¼°æ€»ä½“æ–¹å·®ã€‚è¿™ç§ç°è±¡çš„åŸå› ä¸»è¦æ˜¯ç”±äºæ ·æœ¬æŠ½å–çš„å±€é™æ€§å’Œé«˜æ–¯åˆ†å¸ƒæ¦‚ç‡å¯†åº¦å‡½æ•°çš„å½¢çŠ¶æ‰€å¯¼è‡´çš„ã€‚</p><p>å½“æˆ‘ä»¬ä»é«˜æ–¯åˆ†å¸ƒä¸­æŠ½å–æ ·æœ¬æ—¶ï¼Œç”±äºé«˜æ–¯åˆ†å¸ƒçš„ä¸­å¿ƒå€¼ï¼ˆå‡å€¼ï¼‰å…·æœ‰æ›´é«˜çš„æ¦‚ç‡å¯†åº¦ï¼Œå¤§éƒ¨åˆ†æ ·æœ¬ä¼šé›†ä¸­åœ¨å‡å€¼é™„è¿‘ï¼Œè€Œåœ¨åˆ†å¸ƒçš„å°¾éƒ¨ï¼ˆè¾¹æ²¿ï¼‰ä½ç½®ä¸Šï¼Œæ ·æœ¬æ•°é‡ç›¸å¯¹è¾ƒå°‘ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åªä»é«˜æ–¯åˆ†å¸ƒçš„ä¸­å¿ƒå€¼é™„è¿‘æŠ½å–æ ·æœ¬æ¥ä¼°è®¡æ€»ä½“æ–¹å·®ï¼Œç”±äºæœªèƒ½å¾ˆå¥½åœ°è¦†ç›–æ•´ä¸ªåˆ†å¸ƒï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´æ€»ä½“æ–¹å·®çš„ä½ä¼°ã€‚</p><p>æ ·æœ¬æ–¹å·®çš„è®¡ç®—æ˜¯åŸºäºæ ·æœ¬æ•°æ®ä¸æ ·æœ¬å‡å€¼ä¹‹é—´çš„å·®å¼‚æ¥è¡¡é‡çš„ã€‚å½“æ ·æœ¬ä¸»è¦é›†ä¸­åœ¨æ€»ä½“åˆ†å¸ƒçš„ä¸­å¿ƒå€¼é™„è¿‘æ—¶ï¼Œéƒ¨åˆ†æ ·æœ¬ä¸æ ·æœ¬å‡å€¼ä¹‹é—´çš„å·®å¼‚ç›¸å¯¹è¾ƒå°ï¼Œå¯¼è‡´æ ·æœ¬æ–¹å·®çš„è®¡ç®—ç»“æœè¾ƒå°ã€‚è€Œæ€»ä½“çš„æ–¹å·®æ˜¯è€ƒè™‘äº†æ•´ä¸ªåˆ†å¸ƒèŒƒå›´å†…æ•°æ®ç‚¹ä¸æ€»ä½“å‡å€¼ä¹‹é—´çš„å·®å¼‚ï¼ˆåŒ…æ‹¬è¾¹ç¼˜å€¼ï¼‰ï¼Œå› æ­¤æ€»ä½“æ–¹å·®é€šå¸¸ä¼šå¤§äºæ ·æœ¬æ–¹å·®ã€‚</p><p>å› æ­¤ï¼Œç”±äºæ ·æœ¬ä¸»è¦é›†ä¸­åœ¨é«˜æ–¯åˆ†å¸ƒçš„ä¸­å¿ƒå€¼é™„è¿‘ä¸”æ ·æœ¬æ•°é‡æœ‰é™ï¼Œä½¿ç”¨è¿™éƒ¨åˆ†æ ·æœ¬æ¥ä¼°è®¡æ€»ä½“çš„æ–¹å·®å¾€å¾€ä¼šä½ä¼°æ€»ä½“æ–¹å·®ã€‚ä¸ºäº†æ›´å‡†ç¡®åœ°ä¼°è®¡æ€»ä½“æ–¹å·®ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ æ ·æœ¬æ•°é‡ã€åœ¨æ•´ä¸ªåˆ†å¸ƒèŒƒå›´å†…å‡åŒ€æŠ½æ ·æˆ–è€…ä½¿ç”¨æ›´å¤æ‚çš„ç»Ÿè®¡æ–¹æ³•æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2obbpl0e33.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2obbpl0e33.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;å¡å°”æ›¼æ»¤æ³¢å™¨æ•™ç¨‹&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;</p><h2 id="ké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©"><a href="#ké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©" class="headerlink" title="ké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©"></a>ké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©</h2><p>åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©æ˜¯ç”¨äºæè¿°æ¦‚ç‡åˆ†å¸ƒç‰¹æ€§çš„æ¦‚å¿µã€‚</p><ol><li><p>ké˜¶åŸç‚¹çŸ©ï¼š<br>å¯¹äºä¸€ä¸ªéšæœºå˜é‡Xï¼Œå®ƒçš„ké˜¶åŸç‚¹çŸ©è¡¨ç¤ºä¸ºÎ¼_k &#x3D; E(X^k)ï¼Œå³è¯¥éšæœºå˜é‡çš„kæ¬¡å¹‚çš„æœŸæœ›å€¼ã€‚æ¢å¥è¯è¯´ï¼Œké˜¶åŸç‚¹çŸ©æè¿°äº†éšæœºå˜é‡Xåœ¨kæ¬¡å¹‚ä¸Šçš„å¹³å‡å€¼ã€‚</p></li><li><p>ké˜¶ä¸­å¿ƒçŸ©ï¼š<br>å¯¹äºä¸€ä¸ªéšæœºå˜é‡Xï¼Œå®ƒçš„ké˜¶ä¸­å¿ƒçŸ©è¡¨ç¤ºä¸ºÎ¼â€™_k &#x3D; E[(X - Î¼)^k]ï¼Œå…¶ä¸­Î¼ä¸ºéšæœºå˜é‡Xçš„æœŸæœ›å€¼ï¼ˆå‡å€¼ï¼‰ã€‚ké˜¶ä¸­å¿ƒçŸ©æ˜¯æŒ‡å°†éšæœºå˜é‡Xå‡å»å…¶å‡å€¼åå†å–kæ¬¡å¹‚çš„æœŸæœ›ã€‚æ¢å¥è¯è¯´ï¼Œké˜¶ä¸­å¿ƒçŸ©æè¿°äº†éšæœºå˜é‡Xå…³äºå‡å€¼çš„kæ¬¡å¹‚çš„æœŸæœ›å€¼ã€‚</p></li></ol><p>å…³äºké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©çš„ä¸€äº›å…³é”®ç‚¹ï¼š</p><ul><li>ké˜¶åŸç‚¹çŸ©åŒ…å«æ•°æ®çš„ç»å¯¹ä¿¡æ¯ï¼Œè€Œké˜¶ä¸­å¿ƒçŸ©åŒ…å«æ•°æ®çš„ç›¸å¯¹ä¿¡æ¯ã€‚</li><li>ä¸€é˜¶ä¸­å¿ƒçŸ©å§‹ç»ˆä¸º0ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºéšæœºå˜é‡å‡å»è‡ªèº«çš„å‡å€¼ï¼Œç»“æœå¿…ç„¶ä¸º0ã€‚</li><li>äºŒé˜¶ä¸­å¿ƒçŸ©æ˜¯æ–¹å·®çš„å¹³æ–¹æ ¹ï¼Œç”¨äºè¡¡é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚</li><li>ä¸‰é˜¶ä¸­å¿ƒçŸ©æ˜¯ååº¦ï¼Œç”¨äºè¡¡é‡åˆ†å¸ƒçš„å¯¹ç§°æ€§ã€‚</li><li>å››é˜¶ä¸­å¿ƒçŸ©æ˜¯å³°åº¦ï¼Œç”¨äºè¡¡é‡åˆ†å¸ƒçš„å°–å³­ç¨‹åº¦æˆ–å¹³å¦åº¦ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼Œké˜¶åŸç‚¹çŸ©å’Œké˜¶ä¸­å¿ƒçŸ©æ˜¯ç”¨äºæ·±å…¥äº†è§£éšæœºå˜é‡æ•°æ®åˆ†å¸ƒç‰¹æ€§çš„é‡è¦ç»Ÿè®¡é‡ã€‚å®ƒä»¬æä¾›äº†å…³äºæ•°æ®çš„é«˜é˜¶ç»Ÿè®¡ä¿¡æ¯ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´å…¨é¢åœ°ç†è§£éšæœºå˜é‡çš„æ€§è´¨å’Œè¡Œä¸ºã€‚</p><h2 id="å‡†åº¦å’Œç²¾åº¦"><a href="#å‡†åº¦å’Œç²¾åº¦" class="headerlink" title="å‡†åº¦å’Œç²¾åº¦"></a>å‡†åº¦å’Œç²¾åº¦</h2><p>å‡†åº¦å’Œç²¾åº¦æ˜¯ä¸¤ä¸ªç»å¸¸åœ¨ç§‘å­¦ä¸å·¥ç¨‹é¢†åŸŸä¸­ä½¿ç”¨çš„æ¦‚å¿µï¼Œå®ƒä»¬è¡¨ç¤ºäº†æµ‹é‡ç»“æœæˆ–æ•°æ®çš„è´¨é‡ï¼Œä½†åœ¨å«ä¹‰ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><ol><li><p>å‡†åº¦ï¼ˆAccuracyï¼‰ï¼š<br>å‡†åº¦æŒ‡çš„æ˜¯æµ‹é‡ç»“æœæˆ–æ•°æ®ä¸çœŸå®æ•°å€¼ä¹‹é—´çš„åå·®ç¨‹åº¦ï¼Œå³æµ‹é‡ç»“æœçš„æ¥è¿‘ç¨‹åº¦ã€‚å¦‚æœæµ‹é‡ç»“æœä¸çœŸå®æ•°å€¼éå¸¸æ¥è¿‘ï¼Œåˆ™è®¤ä¸ºè¯¥æµ‹é‡æ˜¯å‡†ç¡®çš„ï¼Œå…·æœ‰é«˜å‡†åº¦ã€‚å‡†åº¦é€šå¸¸ç”¨è¯¯å·®æˆ–åå·®æ¥è¡¨ç¤ºï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿæ€§çš„ï¼ˆåå·®æ’å®šï¼‰æˆ–éšæœºæ€§çš„ï¼ˆéšæœºè¯¯å·®ï¼‰ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‡†åº¦çš„æé«˜æ„å‘³ç€æ›´æ¥è¿‘çœŸå®å€¼çš„æµ‹é‡ç»“æœï¼Œå³æ›´å°‘çš„è¯¯å·®ã€‚</p></li><li><p>ç²¾åº¦ï¼ˆPrecisionï¼‰ï¼š<br>ç²¾åº¦æŒ‡çš„æ˜¯å¤šæ¬¡æµ‹é‡æ‰€å¾—ç»“æœä¹‹é—´çš„ä¸€è‡´æ€§æˆ–é‡å¤æ€§ï¼Œå³æµ‹é‡ç»“æœçš„ç¨³å®šç¨‹åº¦ã€‚å¦‚æœå¤šæ¬¡æµ‹é‡æ‰€å¾—ç»“æœéå¸¸æ¥è¿‘ï¼Œå¯ä»¥è®¤ä¸ºè¯¥æµ‹é‡æ˜¯ç²¾ç¡®çš„ï¼Œå…·æœ‰é«˜ç²¾åº¦ã€‚ç²¾åº¦é€šå¸¸ç”¨æ ‡å‡†åå·®æˆ–æ–¹å·®æ¥æè¿°ï¼Œç”¨æ¥è¡¡é‡æµ‹é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç²¾åº¦çš„æé«˜æ„å‘³ç€æµ‹é‡ç»“æœä¹‹é—´çš„ä¸€è‡´æ€§æ›´é«˜ï¼Œå³æ•°æ®æ›´åŠ ç¨³å®šã€‚</p></li></ol><p>åŒºåˆ«æ€»ç»“ï¼š</p><ul><li>å‡†åº¦å¼ºè°ƒæµ‹é‡ç»“æœä¸çœŸå®å€¼ä¹‹é—´çš„æ¥è¿‘ç¨‹åº¦ï¼Œè€Œç²¾åº¦å¼ºè°ƒå¤šæ¬¡æµ‹é‡ç»“æœä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</li><li>å‡†åº¦æ¶‰åŠæµ‹é‡ç»“æœçš„å‡†ç¡®ç¨‹åº¦ï¼Œç²¾åº¦æ¶‰åŠæµ‹é‡ç»“æœçš„ç¨³å®šç¨‹åº¦ã€‚</li><li>æé«˜å‡†åº¦æ„å‘³ç€å‡å°‘ä¸çœŸå®å€¼çš„å·®è·ï¼Œè€Œæé«˜ç²¾åº¦æ„å‘³ç€å¢åŠ æµ‹é‡ç»“æœä¹‹é—´çš„ä¸€è‡´æ€§ã€‚</li></ul><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå‡†ç¡®åº¦å’Œç²¾åº¦é€šå¸¸éœ€è¦å¹³è¡¡è€ƒè™‘ã€‚ä¸€ä¸ªæµ‹é‡æ—¢è¦å‡†ç¡®åœ°è¡¨è¾¾çœŸå®å€¼ï¼Œåˆè¦å…·æœ‰é‡å¤æ€§å’Œä¸€è‡´æ€§ï¼Œè¿™æ ·æ‰èƒ½æä¾›å¯é çš„æ•°æ®æ”¯æŒç§‘å­¦ç ”ç©¶ã€å·¥ç¨‹è®¾è®¡ç­‰é¢†åŸŸçš„å†³ç­–å’Œåˆ¤æ–­ã€‚</p><h2 id="Î±âˆ’Î²âˆ’Î³æ»¤æ³¢å™¨å’Œå¡å°”æ›¼æ»¤æ³¢å™¨çš„è”ç³»å’ŒåŒºåˆ«"><a href="#Î±âˆ’Î²âˆ’Î³æ»¤æ³¢å™¨å’Œå¡å°”æ›¼æ»¤æ³¢å™¨çš„è”ç³»å’ŒåŒºåˆ«" class="headerlink" title="Î±âˆ’Î²âˆ’Î³æ»¤æ³¢å™¨å’Œå¡å°”æ›¼æ»¤æ³¢å™¨çš„è”ç³»å’ŒåŒºåˆ«"></a>Î±âˆ’Î²âˆ’Î³æ»¤æ³¢å™¨å’Œå¡å°”æ›¼æ»¤æ³¢å™¨çš„è”ç³»å’ŒåŒºåˆ«</h2><p>Î±-Î²-Î³æ»¤æ³¢å™¨å’Œå¡å°”æ›¼æ»¤æ³¢å™¨éƒ½æ˜¯ç”¨äºä¼°è®¡ç³»ç»ŸçŠ¶æ€çš„æ»¤æ³¢å™¨ï¼Œå®ƒä»¬æœ‰ä¸€äº›è”ç³»å’ŒåŒºåˆ«ï¼š</p><ol><li><p>è”ç³»ï¼š</p><ul><li>ä¸¤è€…éƒ½æ˜¯å¸¸ç”¨çš„æ»¤æ³¢å™¨ç®—æ³•ï¼Œç”¨äºä¼°è®¡ç³»ç»Ÿçš„çŠ¶æ€ï¼Œå¹¶å¯¹ä¼ æ„Ÿå™¨æ•°æ®è¿›è¡Œå¹³æ»‘å¤„ç†ã€‚</li><li>åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼ŒÎ±-Î²-Î³æ»¤æ³¢å™¨å¯ä»¥çœ‹ä½œæ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨çš„ä¸€ç§ç®€åŒ–ç‰ˆæœ¬ï¼Œé€‚ç”¨äºä¸€äº›ç®€å•çš„ç³»ç»Ÿã€‚</li></ul></li><li><p>åŒºåˆ«ï¼š</p><ul><li>å¡å°”æ›¼æ»¤æ³¢å™¨æ˜¯ä¸€ç§åŸºäºçŠ¶æ€ç©ºé—´æ¨¡å‹çš„é€’å½’æ»¤æ³¢å™¨ï¼Œå¯ä»¥å¤„ç†å…·æœ‰é«˜æ–¯å™ªå£°çš„åŠ¨æ€ç³»ç»Ÿã€‚å®ƒé€šè¿‡çŠ¶æ€ä¼°è®¡å’Œè¯¯å·®åæ–¹å·®ä¼°è®¡æ¥æœ€ä¼˜åœ°ç»“åˆå…ˆéªŒä¿¡æ¯å’Œæµ‹é‡æ•°æ®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒÎ±-Î²-Î³æ»¤æ³¢å™¨æ˜¯ä¸€ç§æ›´ç®€å•çš„æ»¤æ³¢å™¨ï¼Œé€šå¸¸ç”¨äºä½æˆæœ¬çš„åº”ç”¨å’Œå¯¹è®¡ç®—èµ„æºè¦æ±‚è¾ƒä½çš„åœºæ™¯ã€‚</li><li>åœ¨å•ä¸ªç»´åº¦ä¸Šï¼ŒÎ±-Î²-Î³æ»¤æ³¢å™¨å¯ç”¨äºå¯¹åŠ é€Ÿåº¦æ•°æ®è¿›è¡Œæ»¤æ³¢å’Œå¹³æ»‘å¤„ç†ï¼Œè€Œå¡å°”æ›¼æ»¤æ³¢å™¨æ›´å¸¸ç”¨äºå¤šç»´åº¦çŠ¶æ€ä¼°è®¡ï¼Œä¾‹å¦‚è·Ÿè¸ªç§»åŠ¨ç›®æ ‡ã€‚</li><li>å¡å°”æ›¼æ»¤æ³¢å™¨åœ¨å¤„ç†éçº¿æ€§ç³»ç»Ÿå’Œéé«˜æ–¯å™ªå£°æ—¶æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿè‡ªé€‚åº”åœ°è°ƒæ•´åæ–¹å·®çŸ©é˜µã€‚è€ŒÎ±-Î²-Î³æ»¤æ³¢å™¨åˆ™æ›´é€‚ç”¨äºçº¿æ€§ç³»ç»Ÿæˆ–é«˜æ–¯å™ªå£°çš„æƒ…å†µã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨æ˜¯ä¸€ç§æ›´åŠ é€šç”¨å’Œçµæ´»çš„æ»¤æ³¢å™¨ç®—æ³•ï¼Œé€‚ç”¨äºè¾ƒä¸ºå¤æ‚çš„ç³»ç»ŸçŠ¶æ€ä¼°è®¡é—®é¢˜ï¼Œè€ŒÎ±-Î²-Î³æ»¤æ³¢å™¨åˆ™æ˜¯ä¸€ç§ç®€å•çš„æ»¤æ³¢å™¨ç®—æ³•ï¼Œé€‚ç”¨äºä¸€äº›ç®€å•çš„ç³»ç»Ÿå¹³æ»‘å¤„ç†ä»»åŠ¡ã€‚é€‰æ‹©å“ªç§æ»¤æ³¢å™¨å–å†³äºå…·ä½“çš„åº”ç”¨åœºæ™¯å’Œç³»ç»Ÿè¦æ±‚ã€‚</p><h2 id="å¡å°”æ›¼æ»¤æ³¢"><a href="#å¡å°”æ›¼æ»¤æ³¢" class="headerlink" title="å¡å°”æ›¼æ»¤æ³¢"></a>å¡å°”æ›¼æ»¤æ³¢</h2><p><strong>Q:</strong><br>å¡å°”æ›¼æ»¤æ³¢æ˜¯æ ¹æ®ä¸Šä¸€æ¬¡çš„å€¼å¾—å‡ºçš„è¿™ä¸€æ¬¡çš„é¢„æµ‹å€¼å’Œè¿™ä¸€æ¬¡çš„æµ‹é‡å€¼è¿™ä¸¤ä¸ªå€¼åŠ æƒæ±‚å¾—çš„å€¼å—<br><strong>A:</strong><br>å¡å°”æ›¼æ»¤æ³¢æ˜¯ä¸€ç§ç”¨äºä¼°è®¡ç³»ç»ŸçŠ¶æ€çš„å¼ºå¤§æŠ€æœ¯ï¼Œç¡®å®æ¶‰åŠåˆ°å¯¹ä¸Šä¸€æ¬¡çŠ¶æ€çš„ä¼°è®¡å€¼ã€å½“å‰æ—¶åˆ»çš„æµ‹é‡å€¼å’Œé¢„æµ‹å€¼è¿›è¡ŒåŠ æƒå¹³å‡ã€‚åœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­ï¼Œç³»ç»ŸçŠ¶æ€è¢«è¡¨ç¤ºä¸ºä¸€ä¸ªå«æœ‰çŠ¶æ€å˜é‡çš„å‘é‡ï¼Œè€Œç³»ç»Ÿçš„åŠ¨æ€è¡Œä¸ºé€šå¸¸ç”±ä¸€ç»„çº¿æ€§åŠ¨æ€æ–¹ç¨‹å’Œä¸€ç»„çº¿æ€§æµ‹é‡æ–¹ç¨‹æè¿°ã€‚</p><p>åœ¨æ¯ä¸ªæ—¶é—´æ­¥ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š</p><ol><li><p><strong>é¢„æµ‹æ­¥éª¤ï¼ˆPredictï¼‰</strong>ï¼šåŸºäºä¸Šä¸€æ¬¡çš„çŠ¶æ€ä¼°è®¡ä»¥åŠç³»ç»ŸåŠ¨æ€æ–¹ç¨‹ï¼Œé¢„æµ‹ç³»ç»Ÿçš„å½“å‰çŠ¶æ€ã€‚è¿™ä¸€é¢„æµ‹è€ƒè™‘äº†ä¸Šä¸€æ¬¡çš„çŠ¶æ€ä¼°è®¡å’Œç³»ç»Ÿè¡Œä¸ºæ¨¡å‹ï¼Œäº§ç”Ÿä¸€ä¸ªé¢„æµ‹çš„çŠ¶æ€å’Œåæ–¹å·®ä¼°è®¡ã€‚</p></li><li><p><strong>æ›´æ–°æ­¥éª¤ï¼ˆUpdateï¼‰</strong>ï¼šå°†é¢„æµ‹çš„çŠ¶æ€ä¸å½“å‰çš„æµ‹é‡å€¼è¿›è¡Œæ¯”è¾ƒï¼Œæ ¹æ®äºŒè€…çš„å…³ç³»æ¥ä¿®æ­£é¢„æµ‹çŠ¶æ€ï¼Œå¾—åˆ°æ›´å‡†ç¡®çš„çŠ¶æ€ä¼°è®¡ã€‚è¿™ä¸€æ­¥éª¤æ¶‰åŠå¡å°”æ›¼å¢ç›Šçš„è®¡ç®—ï¼Œä»¥ç¡®ä¿é¢„æµ‹çŠ¶æ€å’Œæµ‹é‡çŠ¶æ€ä¹‹é—´çš„åŠ æƒå¹³å‡ã€‚</p></li></ol><p>å› æ­¤ï¼Œåœ¨å¡å°”æ›¼æ»¤æ³¢ä¸­ï¼Œé€šè¿‡å°†ä¸Šä¸€æ¬¡çš„çŠ¶æ€ä¼°è®¡ã€å½“å‰æ—¶åˆ»çš„é¢„æµ‹å€¼å’Œæµ‹é‡å€¼è¿›è¡Œåˆç†çš„åŠ æƒç»„åˆï¼Œå¯ä»¥æ›´å¥½åœ°ä¼°è®¡ç³»ç»Ÿçš„çœŸå®çŠ¶æ€ï¼Œå¹¶å¯¹å™ªå£°è¿›è¡Œæœ‰æ•ˆæŠ‘åˆ¶ã€‚æ•´ä¸ªè¿‡ç¨‹é€šè¿‡ä¸æ–­è¿­ä»£é¢„æµ‹å’Œæ›´æ–°æ­¥éª¤ï¼Œé€æ¸æé«˜çŠ¶æ€ä¼°è®¡çš„å‡†ç¡®æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> æ— äººé©¾é©¶ </tag>
            
            <tag> æ¦‚ç‡è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯åµŒå…¥å¼å®¢è§‚é¢˜ç¬”è®°</title>
      <link href="/2024/03/30/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%A2%E8%A7%82%E9%A2%98%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/03/30/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%A2%E8%A7%82%E9%A2%98%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<details open><summary pointer> æ—¶åºé€»è¾‘ç”µè·¯ </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8hg8xhmilq.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8hg8xhmilq.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>æ—¶åºé€»è¾‘ç”µè·¯:</strong><br>è®¡æ•°å™¨<br>åˆ†é¢‘å™¨<br>è§¦å‘å™¨<br>ç§¯åˆ†å™¨<br>ç§»ä½å¯„å­˜å™¨<br>æ—¶åºæ¯”è¾ƒå™¨<br><strong>ç»„åˆé€»è¾‘ç”µè·¯:</strong><br>é€»è¾‘é—¨<br>è¯‘ç å™¨<br>ç¼–ç å™¨<br>å¤šè·¯é€‰æ‹©å™¨<br>åŠ æ³•å™¨<br>æ¯”è¾ƒå™¨<br>æ•°å­—æ¯”ä¾‹è°ƒèŠ‚å™¨</p>              </div>            </details><details open><summary pointer> å‡æ³•è®¡æ•°å™¨ </summary>              <div class='content'>              <p>ä¸€ä¸ª 8ä½äºŒè¿›åˆ¶å‡æ³•è®¡æ•°å™¨ï¼Œ åˆå§‹çŠ¶æ€ä¸º 00000000ï¼Œ é—®ç»è¿‡ 268ä¸ªè¾“å…¥è„‰å†²åï¼Œ æ­¤è®¡æ•°å™¨çš„çŠ¶æ€ä¸º ______ã€‚<br>A.11001111<br>B.11110100<br>C.11110010<br>D.11110011<br>ç­”æ¡ˆï¼šB<br>è§£æï¼š8ä½äºŒè¿›åˆ¶æ•°è®¡æ•°2^8 &#x3D; 256æ¬¡åå›åˆ°00000000ï¼Œè¿˜å‰©268-256&#x3D;12æ¬¡è®¡æ•°ï¼Œè®¡æ•°1æ¬¡åä»â€œ00000000â€å‡ä¸ºâ€œ11111111â€ï¼Œæ­¤åå†å‡11ï¼ˆ00001011ï¼‰ï¼Œå¾—åˆ°11110100ï¼Œé€‰Bã€‚<br>1111 1111<br>â€“ 0000 1011<br>1111 0100</p>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‘„åƒå¤´è€ƒæ ¸</title>
      <link href="/2024/03/25/%E6%91%84%E5%83%8F%E5%A4%B4%E8%80%83%E6%A0%B8/"/>
      <url>/2024/03/25/%E6%91%84%E5%83%8F%E5%A4%B4%E8%80%83%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒå¤„ç†ç¬”è®°ï¼ˆäºŒï¼‰ç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢åŸºç¡€</title>
      <link href="/2024/03/25/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%81%B0%E5%BA%A6%E5%8F%98%E6%8D%A2%E5%92%8C%E7%A9%BA%E9%97%B4%E6%BB%A4%E6%B3%A2%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/03/25/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E7%81%B0%E5%BA%A6%E5%8F%98%E6%8D%A2%E5%92%8C%E7%A9%BA%E9%97%B4%E6%BB%A4%E6%B3%A2%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h2 id="ç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢åŸºç¡€"><a href="#ç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢åŸºç¡€" class="headerlink" title="ç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢åŸºç¡€"></a>ç°åº¦å˜æ¢å’Œç©ºé—´æ»¤æ³¢åŸºç¡€</h2><h3 id="ç°åº¦å˜æ¢ï¼ˆç°åº¦åè½¬ï¼Œå¯¹æ•°å˜æ¢ï¼Œå¹‚å¾‹å˜æ¢ï¼‰"><a href="#ç°åº¦å˜æ¢ï¼ˆç°åº¦åè½¬ï¼Œå¯¹æ•°å˜æ¢ï¼Œå¹‚å¾‹å˜æ¢ï¼‰" class="headerlink" title="ç°åº¦å˜æ¢ï¼ˆç°åº¦åè½¬ï¼Œå¯¹æ•°å˜æ¢ï¼Œå¹‚å¾‹å˜æ¢ï¼‰"></a>ç°åº¦å˜æ¢ï¼ˆç°åº¦åè½¬ï¼Œå¯¹æ•°å˜æ¢ï¼Œå¹‚å¾‹å˜æ¢ï¼‰</h3><h4 id="ç°åº¦å˜æ¢åŸç†"><a href="#ç°åº¦å˜æ¢åŸç†" class="headerlink" title="ç°åº¦å˜æ¢åŸç†"></a>ç°åº¦å˜æ¢åŸç†</h4><p>å˜æ¢åŸç†ï¼šé€šè¿‡å˜æ¢å‡½æ•°Tå°†åŸå›¾åƒåƒç´ ç°åº¦å€¼ræ˜ å°„ä¸ºç°åº¦å€¼sï¼š</p><p>$s&#x3D;T(r)$</p><h4 id="ç°åº¦åè½¬"><a href="#ç°åº¦åè½¬" class="headerlink" title="ç°åº¦åè½¬"></a>ç°åº¦åè½¬</h4><h5 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†:"></a>åŸç†:</h5><p>ç°åº¦åè½¬ï¼šå°†å›¾åƒäº®æš—å¯¹è°ƒï¼Œå¯ä»¥å¢å¼ºå›¾åƒä¸­æš—è‰²åŒºåŸŸç»†èŠ‚<br>$s&#x3D;T(r)&#x3D;L-1-r$<br>å…¶ä¸­Lä¸ºå›¾åƒç°åº¦çº§ï¼Œ0~255ç°åº¦å›¾åƒçš„ç°åº¦çº§ä¸º256.</p><h5 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Mat image1, output_image, image1_gray;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒï¼Œè¾“å‡ºå›¾åƒï¼Œç°åº¦å›¾åƒ</span></span><br><span class="line">image1 = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cvtColor(image1, image1_gray, COLOR_BGR2GRAY);  <span class="comment">//ç°åº¦åŒ–</span></span><br><span class="line">imshow(<span class="string">&quot; image1_gray&quot;</span>, image1_gray);   <span class="comment">//æ˜¾ç¤ºç°åº¦å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">output_image = image1_gray.clone();</span><br><span class="line"><span class="comment">//éå†åƒç´ ç‚¹</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; image1_gray.rows; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; image1_gray.cols; j++)</span><br><span class="line">&#123;</span><br><span class="line">output_image.at&lt;uchar&gt;(i, j) = <span class="number">255</span> - image1_gray.at&lt;uchar&gt;(i, j);  <span class="comment">//ç°åº¦åè½¬</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">imshow(<span class="string">&quot;output_image&quot;</span>, output_image);  <span class="comment">//æ˜¾ç¤ºåè½¬å›¾åƒ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvht9o5v6.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvht9o5v6.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å¯¹æ•°å˜æ¢"><a href="#å¯¹æ•°å˜æ¢" class="headerlink" title="å¯¹æ•°å˜æ¢"></a>å¯¹æ•°å˜æ¢</h4><h5 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h5><p>å¯¹æ•°å˜æ¢ï¼šæ‰©å±•å›¾åƒä¸­çš„æš—åƒç´ å€¼ï¼Œå‹ç¼©é«˜ç°åº¦å€¼ã€‚<br>$s&#x3D;T(r)&#x3D;c*log(1+r)$<br>$log(1+r)$æ–œç‡é€æ¸é™ä½ï¼Œä¸Šå‡è¶‹åŠ¿é€æ¸æ”¾ç¼“</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Mat image1, output_image, image1_gray;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒï¼Œè¾“å‡ºå›¾åƒï¼Œç°åº¦å›¾åƒ</span></span><br><span class="line">image1 = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cvtColor(image1, image1_gray, COLOR_BGR2GRAY);  <span class="comment">//ç°åº¦åŒ–</span></span><br><span class="line">imshow(<span class="string">&quot; image1_gray&quot;</span>, image1_gray);   <span class="comment">//æ˜¾ç¤ºç°åº¦å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">output_image = image1_gray.clone();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; image1_gray.rows; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; image1_gray.cols; j++)</span><br><span class="line">&#123;</span><br><span class="line">output_image.at&lt;uchar&gt;(i, j) = <span class="number">6</span> * <span class="built_in">log</span>((<span class="type">double</span>)(image1_gray.at&lt;uchar&gt;(i, j)) + <span class="number">1</span>);  <span class="comment">//å¯¹æ•°å˜æ¢ s=6*log(r+1)</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">normalize(output_image, output_image, <span class="number">0</span>, <span class="number">255</span>, NORM_MINMAX);  <span class="comment">//å›¾åƒå½’ä¸€åŒ–ï¼Œè½¬åˆ°0~255èŒƒå›´å†…</span></span><br><span class="line">convertScaleAbs(output_image, output_image);  <span class="comment">//æ•°æ®ç±»å‹è½¬æ¢åˆ°CV_8U</span></span><br><span class="line">imshow(<span class="string">&quot; output_image&quot;</span>, output_image);  <span class="comment">//æ˜¾ç¤ºå˜æ¢å›¾åƒ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3uulpxj04i.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3uulpxj04i.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å¹‚å¾‹ï¼ˆä¼½é©¬å˜æ¢ï¼‰"><a href="#å¹‚å¾‹ï¼ˆä¼½é©¬å˜æ¢ï¼‰" class="headerlink" title="å¹‚å¾‹ï¼ˆä¼½é©¬å˜æ¢ï¼‰"></a>å¹‚å¾‹ï¼ˆä¼½é©¬å˜æ¢ï¼‰</h4><h5 id="åŸç†-2"><a href="#åŸç†-2" class="headerlink" title="åŸç†"></a>åŸç†</h5><p>å¹‚å¾‹å˜æ¢ä¸å¯¹æ•°å˜æ¢ç±»ä¼¼ï¼š<br>$s&#x3D;T(r)&#x3D;c*r^Î³$</p><h5 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123; </span><br><span class="line">Mat image1, output_image, image1_gray;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒï¼Œè¾“å‡ºå›¾åƒï¼Œç°åº¦å›¾åƒ</span></span><br><span class="line">image1 = imread(<span class="string">&quot;lena.png&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cvtColor(image1, image1_gray, COLOR_BGR2GRAY);  <span class="comment">//ç°åº¦åŒ–</span></span><br><span class="line">imshow(<span class="string">&quot; image1_gray&quot;</span>, image1_gray);   <span class="comment">//æ˜¾ç¤ºç°åº¦å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">output_image = image1_gray.clone();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; image1_gray.rows; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; image1_gray.cols; j++)</span><br><span class="line">&#123;</span><br><span class="line">output_image.at&lt;uchar&gt;(i, j) =<span class="number">6</span>*<span class="built_in">pow</span>((<span class="type">double</span>)image1_gray.at&lt;uchar&gt;(i, j),<span class="number">0.5</span>);  <span class="comment">//å¹‚å¾‹å˜æ¢ s=6*r^0.5</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">normalize(output_image, output_image, <span class="number">0</span>, <span class="number">255</span>, NORM_MINMAX);  <span class="comment">//å›¾åƒå½’ä¸€åŒ–ï¼Œè½¬åˆ°0~255èŒƒå›´å†…</span></span><br><span class="line">convertScaleAbs(output_image, output_image);  <span class="comment">//æ•°æ®ç±»å‹è½¬æ¢åˆ°CV_8U</span></span><br><span class="line">imshow(<span class="string">&quot; output_image&quot;</span>, output_image);  <span class="comment">//æ˜¾ç¤ºå˜æ¢å›¾åƒ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2obahbyue1.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2obahbyue1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="ç›´æ–¹å›¾å¤„ç†ï¼ˆç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œç›´æ–¹å›¾åŒ¹é…ï¼ˆè§„å®šåŒ–ï¼‰ï¼‰"><a href="#ç›´æ–¹å›¾å¤„ç†ï¼ˆç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œç›´æ–¹å›¾åŒ¹é…ï¼ˆè§„å®šåŒ–ï¼‰ï¼‰" class="headerlink" title="ç›´æ–¹å›¾å¤„ç†ï¼ˆç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œç›´æ–¹å›¾åŒ¹é…ï¼ˆè§„å®šåŒ–ï¼‰ï¼‰"></a>ç›´æ–¹å›¾å¤„ç†ï¼ˆç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œç›´æ–¹å›¾åŒ¹é…ï¼ˆè§„å®šåŒ–ï¼‰ï¼‰</h3><p>ç›´æ–¹å›¾æ˜¾ç¤ºäº†æ¯ä¸ªåƒç´ å€¼åœ¨æ•´å¹…å›¾åƒä¸­å‡ºç°çš„é¢‘ç‡æˆ–æ•°é‡ï¼Œä»è€Œå¸®åŠ©æˆ‘ä»¬ç†è§£å›¾åƒçš„äº®åº¦åˆ†å¸ƒæƒ…å†µã€‚</p><h4 id="å›¾åƒç›´æ–¹å›¾"><a href="#å›¾åƒç›´æ–¹å›¾" class="headerlink" title="å›¾åƒç›´æ–¹å›¾"></a>å›¾åƒç›´æ–¹å›¾</h4><p>éå½’ä¸€åŒ–ç›´æ–¹å›¾:<br>$h(r_k)&#x3D;n_k$<br>å½’ä¸€åŒ–ç›´æ–¹å›¾:<br>$p(r_k)&#x3D;{n_k \over MN}$<br>å…¶ä¸­MNä¸ºå›¾åƒè¡Œæ•°å’Œåˆ—æ•°ï¼Œå¸¸è¯´çš„å›¾åƒç›´æ–¹å›¾å°±æ˜¯å½’ä¸€åŒ–ç›´æ–¹å›¾ã€‚</p><p>è·å–å›¾åƒç›´æ–¹å›¾ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Mat image, image_gray, hist;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒï¼Œç°åº¦å›¾åƒ, ç›´æ–¹å›¾</span></span><br><span class="line">image = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cvtColor(image, image_gray, COLOR_BGR2GRAY);  <span class="comment">//ç°åº¦åŒ–</span></span><br><span class="line">imshow(<span class="string">&quot; image_gray&quot;</span>, image_gray);   <span class="comment">//æ˜¾ç¤ºç°åº¦å›¾åƒ</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å›¾åƒç›´æ–¹å›¾</span></span><br><span class="line"><span class="type">int</span> histsize = <span class="number">256</span>;</span><br><span class="line"><span class="type">float</span> ranges[] = &#123; <span class="number">0</span>,<span class="number">256</span> &#125;;</span><br><span class="line"><span class="type">const</span> <span class="type">float</span>* histRanges = &#123; ranges &#125;;</span><br><span class="line">calcHist(&amp;image_gray, <span class="number">1</span>, <span class="number">0</span>, Mat(), hist, <span class="number">1</span>, &amp;histsize, &amp;histRanges, <span class="literal">true</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç”¨äºè®¡ç®—å›¾åƒçš„ç›´æ–¹å›¾ï¼Œä¸‹é¢æ˜¯å¯¹è¿™æ®µä»£ç çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li><p><strong>histsize &#x3D; 256ï¼š</strong> è¿™é‡Œå®šä¹‰äº†ç›´æ–¹å›¾çš„å¤§å°ä¸º256ï¼Œè¡¨ç¤ºç›´æ–¹å›¾çš„æ¨ªè½´èŒƒå›´ï¼Œé€šå¸¸å¯¹åº”ç€å›¾åƒå¯èƒ½çš„åƒç´ å€¼èŒƒå›´ï¼ˆ0åˆ°255ï¼‰ã€‚</p></li><li><p><strong>ranges[] &#x3D; {0, 256}ï¼š</strong> è¿™é‡Œå®šä¹‰äº†ç›´æ–¹å›¾å¯èƒ½çš„åƒç´ å€¼èŒƒå›´ä¸º0åˆ°256ï¼Œç”¨äºæŒ‡å®šç›´æ–¹å›¾ä¸­æ¯ä¸ªåƒç´ å€¼çš„èŒƒå›´ã€‚</p></li><li><p><em><em>const float</em> histRanges &#x3D; {ranges};</em>* è¿™ä¸€è¡Œç”¨äºå°†rangesæ•°ç»„è½¬æ¢ä¸ºæŒ‡å‘å¸¸é‡æµ®ç‚¹æ•°çš„æŒ‡é’ˆï¼Œä¾›calcHistå‡½æ•°ä½¿ç”¨ã€‚</p></li><li><p><strong>calcHist(&amp;image_gray, 1, 0, Mat(), hist, 1, &amp;histsize, &amp;histRanges, true, false)ï¼š</strong></p><ul><li><strong>&amp;image_grayï¼š</strong> è¿™æ˜¯è¾“å…¥çš„ç°åº¦å›¾åƒï¼Œè¡¨ç¤ºè¦è®¡ç®—ç›´æ–¹å›¾çš„åŸå§‹å›¾åƒã€‚</li><li><strong>1ï¼š</strong> è¡¨ç¤ºè¦è®¡ç®—çš„å›¾åƒæ•°é‡ã€‚</li><li><strong>0ï¼š</strong> è¡¨ç¤ºç›´æ–¹å›¾è¦è®¡ç®—çš„é€šé“ç´¢å¼•ï¼Œ0è¡¨ç¤ºç°åº¦å›¾åƒã€‚</li><li><strong>Mat()ï¼š</strong> è¿™é‡Œæ˜¯ä¸€ä¸ªæ©ç å›¾åƒï¼Œç”¨äºæŒ‡å®šè¦è®¡ç®—ç›´æ–¹å›¾çš„åŒºåŸŸï¼›åœ¨è¿™é‡Œæ²¡æœ‰ä½¿ç”¨ï¼Œå› æ­¤ä¸ºç©ºã€‚</li><li><strong>histï¼š</strong> è¿™æ˜¯ç”¨äºå­˜å‚¨è®¡ç®—åç›´æ–¹å›¾çš„Matå¯¹è±¡ã€‚</li><li><strong>1ï¼š</strong> ç›´æ–¹å›¾çš„ç»´æ•°ï¼Œå¯¹äºç°åº¦å›¾åƒæ˜¯1ç»´ã€‚</li><li><strong>&amp;histsizeï¼š</strong> è¿™æ˜¯åŒ…å«ç›´æ–¹å›¾å¤§å°ï¼ˆ256ï¼‰çš„æŒ‡é’ˆã€‚</li><li><strong>&amp;histRangesï¼š</strong> æŒ‡å‘ç›´æ–¹å›¾èŒƒå›´çš„æŒ‡é’ˆã€‚</li><li><strong>trueï¼š</strong> æŒ‡ç¤ºç›´æ–¹å›¾æ˜¯å¦å‡ä¸€åŒ–ï¼Œå³åœ¨èŒƒå›´0åˆ°255å†…å¯¹ç›´æ–¹å›¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ã€‚</li><li><strong>falseï¼š</strong> æŒ‡ç¤ºç›´æ–¹å›¾æ˜¯å¦ç´¯ç§¯ï¼Œå³è¡¨ç¤ºç›´æ–¹å›¾æ˜¯å¦ç´¯ç§¯è®¡ç®—ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™æ®µä»£ç ï¼Œå¯ä»¥é€šè¿‡calcHistå‡½æ•°è®¡ç®—å›¾åƒimage_grayçš„ç›´æ–¹å›¾ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨histå¯¹è±¡ä¸­ã€‚ç›´æ–¹å›¾çš„èŒƒå›´æ˜¯0åˆ°255ä¹‹é—´ï¼Œä¸”è¿›è¡Œäº†å½’ä¸€åŒ–å¤„ç†ã€‚è¿™èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬äº†è§£å›¾åƒçš„åƒç´ å€¼åˆ†å¸ƒæƒ…å†µï¼Œä¸ºåç»­çš„å›¾åƒå¤„ç†å’Œåˆ†ææä¾›æ•°æ®æ”¯æŒã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šå¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºç›´æ–¹å›¾æ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line"><span class="type">int</span> hist_h = <span class="number">300</span>;<span class="comment">//ç›´æ–¹å›¾çš„å›¾åƒçš„é«˜</span></span><br><span class="line"><span class="type">int</span> hist_w = <span class="number">512</span>; <span class="comment">//ç›´æ–¹å›¾çš„å›¾åƒçš„å®½</span></span><br><span class="line"><span class="type">int</span> bin_w = hist_w / histsize;<span class="comment">//ç›´æ–¹å›¾çš„ç­‰çº§</span></span><br><span class="line">Mat <span class="title function_">histImage</span><span class="params">(hist_h, hist_w, CV_8UC3, Scalar(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span>;<span class="comment">//ç»˜åˆ¶ç›´æ–¹å›¾æ˜¾ç¤ºçš„å›¾åƒ</span></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»˜åˆ¶å¹¶æ˜¾ç¤ºç›´æ–¹å›¾</span></span><br><span class="line">normalize(hist, hist, <span class="number">0</span>, hist_h, NORM_MINMAX, <span class="number">-1</span>, Mat());<span class="comment">//å½’ä¸€åŒ–ç›´æ–¹å›¾</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; histsize; i++)</span><br><span class="line">&#123;</span><br><span class="line">line(histImage, Point((i - <span class="number">1</span>) * bin_w, hist_h - cvRound(hist.at&lt;<span class="type">float</span>&gt;(i - <span class="number">1</span>))),</span><br><span class="line">Point((i)*bin_w, hist_h - cvRound(hist.at&lt;<span class="type">float</span>&gt;(i))), Scalar(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">2</span>, <span class="number">8</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">imshow(<span class="string">&quot;histImage&quot;</span>, histImage);</span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ç”¨äºå°†å½’ä¸€åŒ–åçš„ç›´æ–¹å›¾æ•°æ®ç»˜åˆ¶æˆç›´æ–¹å›¾å›¾åƒçš„è¿‡ç¨‹ã€‚ä¸‹é¢æ˜¯å¯¹ä»£ç çš„è¯¦ç»†è§£é‡Šï¼š</p><ol><li><p><strong><code>for</code>å¾ªç¯ï¼š</strong></p><ul><li>è¿™æ®µä»£ç ä½¿ç”¨<code>for</code>å¾ªç¯éå†ç›´æ–¹å›¾çš„æ¯ä¸ªæ¡ï¼Œä»ç¬¬2ä¸ªæ¡å¼€å§‹åˆ°æœ€åä¸€ä¸ªæ¡ã€‚</li><li><code>i</code>ä»1å¼€å§‹ï¼Œå› ä¸ºç¬¬0ä¸ªæ¡é€šå¸¸ä»£è¡¨èƒŒæ™¯ï¼Œå¯ä»¥è·³è¿‡ä¸ç»˜åˆ¶ã€‚</li></ul></li><li><p><strong><code>line()</code>å‡½æ•°ï¼š</strong></p><ul><li><code>line()</code>å‡½æ•°ç”¨äºåœ¨<code>histImage</code>ä¸Šç»˜åˆ¶ç›´æ–¹å›¾çš„æ¡ã€‚</li><li><code>Point((i - 1) * bin_w, hist_h - cvRound(hist.at&lt;float&gt;(i - 1)))</code>è¡¨ç¤ºå½“å‰æ¡çš„èµ·å§‹ç‚¹ä½ç½®ï¼Œå‰ä¸€ä¸ªæ¡çš„ç»“æŸç‚¹ä½ç½®ã€‚</li><li><code>Point((i)*bin_w, hist_h - cvRound(hist.at&lt;float&gt;(i)))</code> è¡¨ç¤ºå½“å‰æ¡çš„ç»ˆç‚¹ä½ç½®ã€‚</li><li><code>Scalar(255, 0, 0)</code>æŒ‡å®šç»˜åˆ¶ç›´çº¿çš„é¢œè‰²ä¸ºè“è‰²ã€‚</li><li><code>2</code>è¡¨ç¤ºçº¿çš„ç²—ç»†ä¸º2ä¸ªåƒç´ ã€‚</li><li><code>8</code>è¡¨ç¤ºçº¿çš„ç±»å‹ä¸º8-connectedã€‚</li><li><code>0</code>è¡¨ç¤ºçº¿çš„åç§»å€¼ä¸º0ã€‚</li></ul></li><li><p><strong>ç»˜åˆ¶ç›´æ–¹å›¾æ¡ï¼š</strong></p><ul><li>é€šè¿‡è®¡ç®—æ¯ä¸ªç›´æ–¹å›¾æ¡çš„èµ·å§‹å’Œç»ˆæ­¢ç‚¹ï¼Œä½¿ç”¨<code>line()</code>å‡½æ•°åœ¨<code>histImage</code>ä¸Šç»˜åˆ¶ç›´æ–¹å›¾æ¡ã€‚</li><li><code>cvRound()</code>ç”¨äºå°†æµ®ç‚¹å€¼å››èˆäº”å…¥ä¸ºæœ€æ¥è¿‘çš„æ•´æ•°ï¼Œç¡®ä¿ç›´æ–¹å›¾èƒ½å¤Ÿæ­£ç¡®æ˜ å°„åˆ°å›¾åƒä¸Šã€‚</li></ul></li></ol><h4 id="ç›´æ–¹å›¾å‡è¡¡åŒ–"><a href="#ç›´æ–¹å›¾å‡è¡¡åŒ–" class="headerlink" title="ç›´æ–¹å›¾å‡è¡¡åŒ–"></a>ç›´æ–¹å›¾å‡è¡¡åŒ–</h4><p>(æˆ‘æ„Ÿè§‰å·®ä¸å¤šäº†ï¼Œæˆ‘å»åšè€ƒæ ¸å’¯~)</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒå¤„ç†ç¬”è®°ï¼ˆä¸€ï¼‰åŸºç¡€æ“ä½œ</title>
      <link href="/2024/03/25/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0-1/"/>
      <url>/2024/03/25/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0-1/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰é¢ä¸€éƒ¨åˆ†ç¬”è®°éƒ½æ˜¯å­¦ä¹ ä¸€ä¸ªå¤§ä½¬çš„æ•™ç¨‹åšçš„ï¼Œä½†æ˜¯å¤§ä½¬ç”¨çš„pythonï¼Œæˆ‘åœ¨ç¬”è®°é‡Œéƒ½è½¬æ¢æˆäº†c++</p></blockquote><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2kroj52zde.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2kroj52zde.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.pf3qismjr.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.pf3qismjr.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4g49bri91j.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4g49bri91j.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1set1eq2uf.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1set1eq2uf.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.58h4ti0gy2.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.58h4ti0gy2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1hrz89c5f9.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1hrz89c5f9.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="å›¾ç‰‡åŸºæœ¬è¯»å–æ“ä½œ"><a href="#å›¾ç‰‡åŸºæœ¬è¯»å–æ“ä½œ" class="headerlink" title="å›¾ç‰‡åŸºæœ¬è¯»å–æ“ä½œ"></a>å›¾ç‰‡åŸºæœ¬è¯»å–æ“ä½œ</h2><p>ç”µè„‘ä¸Šçš„å½©è‰²å›¾æ˜¯ä»¥ RGB(çº¢ - ç»¿-è“ï¼ŒRed-Green-Blue) é¢œè‰²æ¨¡å¼æ˜¾ç¤ºçš„ï¼Œä½† OpenCV ä¸­å½©è‰²å›¾æ˜¯ä»¥ B-G-R é€šé“é¡ºåºå­˜å‚¨çš„ï¼Œç°åº¦å›¾åªæœ‰ä¸€ä¸ªé€šé“ã€‚</p><p>å›¾åƒåæ ‡çš„èµ·å§‹ç‚¹æ˜¯åœ¨å·¦ä¸Šè§’ï¼Œæ‰€ä»¥è¡Œå¯¹åº”çš„æ˜¯ yï¼Œåˆ—å¯¹åº”çš„æ˜¯ xï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.54xivstf47.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.54xivstf47.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h3><blockquote><span class='pbg info'>imread()</span><blockquote><p><strong>ä¸¤ä¸ªå‚æ•°:</strong></p><ul><li>å‚æ•° 1ï¼šå›¾ç‰‡çš„æ–‡ä»¶å<br> å¦‚æœå›¾ç‰‡æ”¾åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œç›´æ¥å†™æ–‡ä»¶åå°±è¡Œï¼Œå¦‚â€lena.jpgâ€<br> å¦åˆ™éœ€è¦ç»™å‡ºç»å¯¹è·¯å¾„ï¼Œå¦‚â€C:&#x2F;Users&#x2F;lxcqm&#x2F;Desktop&#x2F;å›¾ç‰‡å’Œè§†é¢‘&#x2F;11111.pngâ€</li><li>å‚æ•° 2ï¼šè¯»å…¥æ–¹å¼ï¼Œçœç•¥å³é‡‡ç”¨é»˜è®¤å€¼<br> cv2.IMREAD_COLORï¼šå½©è‰²å›¾ï¼Œé»˜è®¤å€¼(1)or(IMREAD_COLOR)<br> cv2.IMREAD_GRAYSCALEï¼šç°åº¦å›¾(0)or(IMREAD_GRAYSCALE)<br> cv2.IMREAD_UNCHANGEDï¼šåŒ…å«é€æ˜é€šé“çš„å½©è‰²å›¾(-1)or(IMREAD_UNCHANGED)</li></ul></blockquote></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½ç°åº¦å›¾</span></span><br><span class="line">Mat  img = imread(<span class="string">&quot;C:/Users/lxcqm/Desktop/images/11111.png&quot;</span>,<span class="number">0</span>);</span><br></pre></td></tr></table></figure><blockquote><p>ç»éªŒä¹‹è°ˆï¼šè·¯å¾„ä¸­ä¸èƒ½æœ‰ä¸­æ–‡å™¢ï¼Œå¹¶ä¸”æ²¡æœ‰åŠ è½½æˆåŠŸçš„è¯æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œprint(img)çš„ç»“æœä¸º Noneï¼Œåé¢å¤„ç†æ‰ä¼šæŠ¥é”™ï¼Œç®—æ˜¯ä¸ªå°å‘ã€‚</p></blockquote><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="æ˜¾ç¤ºå›¾ç‰‡"><a href="#æ˜¾ç¤ºå›¾ç‰‡" class="headerlink" title="æ˜¾ç¤ºå›¾ç‰‡"></a>æ˜¾ç¤ºå›¾ç‰‡</h2><p>ä½¿ç”¨<code>imshow()</code>æ˜¾ç¤ºå›¾ç‰‡ï¼Œçª—å£ä¼šè‡ªé€‚åº”å›¾ç‰‡çš„å¤§å°ï¼š</p><blockquote><p><code>imshow()</code></p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½ç°åº¦å›¾</span></span><br><span class="line">Mat  img = imread(<span class="string">&quot;C:/Users/lxcqm/Desktop/images/11111.png&quot;</span>,<span class="number">0</span>);</span><br><span class="line">imshow(<span class="string">&quot;pic&quot;</span>, img);</span><br><span class="line">waitKey(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>å‚æ•° 1 æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•° 2 æ˜¯è¦æ˜¾ç¤ºçš„å›¾ç‰‡ã€‚ä¸åŒçª—å£ä¹‹é—´ç”¨çª—å£ååŒºåˆ†ï¼Œæ‰€ä»¥çª—å£åç›¸åŒå°±è¡¨ç¤ºæ˜¯åŒä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š<br><strong>æ•ˆæœ:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.32hq7r8seh.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.32hq7r8seh.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><blockquote><p><code>waitKey()</code>æ˜¯è®©ç¨‹åºæš‚åœçš„æ„æ€ï¼Œå‚æ•°æ˜¯ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ msï¼‰ã€‚<br>æ—¶é—´ä¸€åˆ°ï¼Œä¼šç»§ç»­æ‰§è¡Œæ¥ä¸‹æ¥çš„ç¨‹åºï¼Œä¼ å…¥ 0 çš„è¯è¡¨ç¤ºä¸€ç›´ç­‰å¾…ã€‚ç­‰å¾…æœŸé—´ä¹Ÿå¯ä»¥è·å–ç”¨æˆ·çš„æŒ‰é”®è¾“å…¥ï¼šk &#x3D; waitKey(0)</p></blockquote><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç”¨<code>namedWindow()</code>åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œä¹‹åå†æ˜¾ç¤ºå›¾ç‰‡ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">namedWindow(<span class="string">&quot;pic2&quot;</span>, WINDOW_NORMAL);</span><br><span class="line">imshow(<span class="string">&quot;pic2&quot;</span>, img);</span><br><span class="line">waitKey(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>å‚æ•° 1 ä¾æ—§æ˜¯çª—å£çš„åå­—ï¼Œå‚æ•° 2 é»˜è®¤æ˜¯<code>WINDOW_AUTOSIZE</code>ï¼Œè¡¨ç¤ºçª—å£å¤§å°è‡ªé€‚åº”å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸º<code>WINDOW_NORMAL</code>ï¼Œè¡¨ç¤ºçª—å£å¤§å°å¯è°ƒæ•´ã€‚å›¾ç‰‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ç”¨åè€…ã€‚</p><h3 id="ä¿å­˜å›¾ç‰‡"><a href="#ä¿å­˜å›¾ç‰‡" class="headerlink" title="ä¿å­˜å›¾ç‰‡"></a>ä¿å­˜å›¾ç‰‡</h3><blockquote><p><code>imwrite()</code></p></blockquote><p>ä½¿ç”¨<code>imwrite()</code>ä¿å­˜å›¾ç‰‡ï¼Œå‚æ•° 1 æ˜¯åŒ…å«åç¼€åçš„æ–‡ä»¶åï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imwrite(<span class="string">&quot;pictest.jpg&quot;</span>, img);</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.sypoa1fpo.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.sypoa1fpo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¼šä¿å­˜åœ¨ç›®å½•æ–‡ä»¶å¤¹é‡Œ</p><h2 id="æ‘„åƒå¤´"><a href="#æ‘„åƒå¤´" class="headerlink" title="æ‘„åƒå¤´"></a>æ‘„åƒå¤´</h2><h3 id="æ‰“å¼€æ‘„åƒå¤´"><a href="#æ‰“å¼€æ‘„åƒå¤´" class="headerlink" title="æ‰“å¼€æ‘„åƒå¤´"></a>æ‰“å¼€æ‘„åƒå¤´</h3><p>è¦ä½¿ç”¨æ‘„åƒå¤´ï¼Œéœ€è¦ä½¿ç”¨<code>VideoCapture capture(0);</code>å‚æ•° <code>0</code> æŒ‡çš„æ˜¯æ‘„åƒå¤´çš„ç¼–å·ï¼Œå¦‚æœä½ ç”µè„‘ä¸Šæœ‰ä¸¤ä¸ªæ‘„åƒå¤´çš„è¯ï¼Œè®¿é—®ç¬¬ 2 ä¸ªæ‘„åƒå¤´å°±å¯ä»¥ä¼ å…¥ <code>1</code>ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    VideoCapture <span class="title function_">capture</span><span class="params">(<span class="number">0</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!capture.isOpened()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        Mat frame;</span><br><span class="line">        <span class="comment">//&gt;&gt; æ˜¯è¾“å…¥æµæå–è¿ç®—ç¬¦</span></span><br><span class="line">        <span class="comment">// å®ƒé€šå¸¸ç”¨äºä»è¾“å…¥æµä¸­æå–æ•°æ®å¹¶å°†å…¶å­˜å‚¨åœ¨ç›¸åº”çš„å˜é‡ä¸­</span></span><br><span class="line">        <span class="comment">// è¡¨ç¤ºä» capture è¾“å…¥æµä¸­è¯»å–æ•°æ®ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ frame å˜é‡ä¸­</span></span><br><span class="line">        capture &gt;&gt; frame;</span><br><span class="line"></span><br><span class="line">        Mat gray;</span><br><span class="line">        cvtColor(frame, gray, COLOR_BGR2GRAY);</span><br><span class="line"></span><br><span class="line">        imshow(<span class="string">&quot;frame&quot;</span>, gray);</span><br><span class="line">        <span class="keyword">if</span> (waitKey(<span class="number">1</span>) == <span class="string">&#x27;q&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>cv2.cvtColor()</code>ç”¨æ¥è½¬æ¢é¢œè‰²ï¼Œè¿™é‡Œå°†å½©è‰²å›¾è½¬æˆç°åº¦å›¾ã€‚<br>é€šè¿‡cap.get(propId)å¯ä»¥è·å–æ‘„åƒå¤´çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚æ•è·çš„åˆ†è¾¨ç‡ï¼Œäº®åº¦å’Œå¯¹æ¯”åº¦ç­‰ã€‚propId æ˜¯ä» 0~18 çš„æ•°å­—ï¼Œä»£è¡¨ä¸åŒçš„å±æ€§ï¼Œå®Œæ•´çš„å±æ€§åˆ—è¡¨å¯ä»¥å‚è€ƒï¼šVideoCaptureProperties(<a href="https://docs.opencv.org/4.0.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d">https://docs.opencv.org/4.0.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d</a>)<br>ä¹Ÿå¯ä»¥ä½¿ç”¨cap.set(propId,value)æ¥ä¿®æ”¹å±æ€§å€¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬åœ¨ while ä¹‹å‰æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> width = capture.get(CAP_PROP_FRAME_WIDTH);</span><br><span class="line"><span class="type">double</span> height = capture.get(CAP_PROP_FRAME_HEIGHT);</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Original width: &quot;</span> &lt;&lt; width &lt;&lt; <span class="string">&quot;, height: &quot;</span> &lt;&lt; height &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">capture.<span class="built_in">set</span>(CAP_PROP_FRAME_WIDTH, width * <span class="number">2</span>);</span><br><span class="line">capture.<span class="built_in">set</span>(CAP_PROP_FRAME_HEIGHT, height * <span class="number">2</span>);</span><br></pre></td></tr></table></figure><details open><summary pointer> std::cout << Original width: << width << </summary>              <div class='content'>              <p>è¿™è¡Œä»£ç ä½¿ç”¨äº†C++ä¸­çš„æµè¾“å‡ºæ“ä½œç¬¦â€&lt;&lt;â€ï¼Œå®ƒç”¨äºå°†æ•°æ®æ’å…¥åˆ°è¾“å‡ºæµä¸­ã€‚åœ¨è¿™ä¸ªè¯­å¥ä¸­ï¼š</p><ul><li><code>std::cout</code>: æ˜¯C++æ ‡å‡†åº“ä¸­çš„æ ‡å‡†è¾“å‡ºæµå¯¹è±¡ï¼Œç”¨äºå°†æ•°æ®è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</li><li><code>&quot;Original width: &quot;</code>ã€<code>width</code>ã€<code>&quot;, height: &quot;</code>ã€<code>height</code>ã€<code>std::endl</code> éƒ½æ˜¯è¦è¾“å‡ºçš„å…·ä½“å†…å®¹ã€‚</li><li><code>&lt;&lt;</code>ï¼šæ˜¯æµè¾“å‡ºæ“ä½œç¬¦ï¼Œç”¨äºå°†åé¢çš„å†…å®¹æ’å…¥åˆ°è¾“å‡ºæµä¸­ã€‚</li></ul><p>æ‰€ä»¥ï¼Œ<code>std::cout &lt;&lt; &quot;Original width: &quot; &lt;&lt; width &lt;&lt; &quot;, height: &quot; &lt;&lt; height &lt;&lt; std::endl;</code> è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯å°†æè¿°åŸå§‹å®½åº¦å’Œé«˜åº¦çš„å­—ç¬¦ä¸²ä»¥åŠç›¸åº”çš„å˜é‡å€¼è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¹¶åœ¨æœ€åæ¢è¡Œã€‚</p>              </div>            </details><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.86texdkg7l.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.86texdkg7l.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><blockquote><p>ç»éªŒä¹‹è°ˆï¼šæŸäº›æ‘„åƒå¤´è®¾å®šåˆ†è¾¨ç‡ç­‰å‚æ•°æ—¶ä¼šæ— æ•ˆï¼Œå› ä¸ºå®ƒæœ‰å›ºå®šçš„åˆ†è¾¨ç‡å¤§å°æ”¯æŒï¼Œä¸€èˆ¬å¯åœ¨æ‘„åƒå¤´çš„èµ„æ–™é¡µä¸­æ‰¾åˆ°ã€‚</p></blockquote><h3 id="æ’­æ”¾æœ¬åœ°è§†é¢‘"><a href="#æ’­æ”¾æœ¬åœ°è§†é¢‘" class="headerlink" title="æ’­æ”¾æœ¬åœ°è§†é¢‘"></a>æ’­æ”¾æœ¬åœ°è§†é¢‘</h3><p>è·Ÿæ‰“å¼€æ‘„åƒå¤´ä¸€æ ·ï¼Œå¦‚æœæŠŠæ‘„åƒå¤´çš„ç¼–å·æ¢æˆè§†é¢‘çš„è·¯å¾„å°±å¯ä»¥æ’­æ”¾æœ¬åœ°è§†é¢‘äº†ã€‚å›æƒ³ä¸€ä¸‹<code>waitKey()</code>ï¼Œå®ƒçš„å‚æ•°è¡¨ç¤ºæš‚åœæ—¶é—´ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼è¶Šå¤§ï¼Œè§†é¢‘æ’­æ”¾é€Ÿåº¦è¶Šæ…¢ï¼Œåä¹‹ï¼Œæ’­æ”¾é€Ÿåº¦è¶Šå¿«ï¼Œé€šå¸¸è®¾ç½®ä¸º <code>25</code> æˆ– <code>30</code>ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    VideoCapture <span class="title function_">capture</span><span class="params">(<span class="string">&quot;C:/Users/lxcqm/Desktop/WeChat_20240325194731.mp4&quot;</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!capture.isOpened()) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Error opening video file&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     Mat frame, gray;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!capture.read(frame)) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cvtColor(frame, gray, COLOR_BGR2GRAY);</span><br><span class="line"></span><br><span class="line">        imshow(<span class="string">&quot;frame&quot;</span>, gray);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (waitKey(<span class="number">30</span>) == <span class="string">&#x27;q&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    capture.release();</span><br><span class="line">    destroyAllWindows();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å½•åˆ¶è§†é¢‘"><a href="#å½•åˆ¶è§†é¢‘" class="headerlink" title="å½•åˆ¶è§†é¢‘"></a>å½•åˆ¶è§†é¢‘</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/core/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;opencv2/imgproc.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line">using namespace cv;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    VideoCapture <span class="title function_">capture</span><span class="params">(<span class="number">0</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ç¼–ç æ–¹å¼å¹¶åˆ›å»º VideoWriter å¯¹è±¡</span></span><br><span class="line">    VideoWriter <span class="title function_">outfile</span><span class="params">(<span class="string">&quot;output.avi&quot;</span>, VideoWriter::fourcc(<span class="string">&#x27;M&#x27;</span>, <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;P&#x27;</span>, <span class="string">&#x27;G&#x27;</span>), <span class="number">25.</span>, Size(<span class="number">640</span>, <span class="number">480</span>))</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (capture.isOpened()) &#123;</span><br><span class="line">        Mat frame;</span><br><span class="line">        capture.read(frame);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!frame.empty()) &#123;</span><br><span class="line">            outfile.write(frame); <span class="comment">// å†™å…¥æ–‡ä»¶</span></span><br><span class="line">            imshow(<span class="string">&quot;frame&quot;</span>, frame);</span><br><span class="line">            <span class="keyword">if</span> (waitKey(<span class="number">1</span>) == <span class="string">&#x27;q&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="Matåˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰"><a href="#Matåˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰" class="headerlink" title="Matåˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰"></a>Matåˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰</h3><h4 id="åˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰ï¼šMat"><a href="#åˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰ï¼šMat" class="headerlink" title="åˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰ï¼šMat"></a>åˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰ï¼šMat</h4><p>ä½¿ç”¨Matåˆ›å»ºå›¾åƒï¼ˆçŸ©é˜µï¼‰çš„å¸¸ç”¨å½¢å¼æœ‰ï¼š</p><ol><li><p>åˆ›å»ºä¸€ä¸ªç©ºå›¾åƒï¼Œå¤§å°ä¸º0</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mat image1;</span><br></pre></td></tr></table></figure></li><li><p>æŒ‡å®šçŸ©é˜µå¤§å°ï¼ŒæŒ‡å®šæ•°æ®ç±»å‹ï¼š</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mat <span class="title function_">image1</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>,CV_8U)</span>;</span><br></pre></td></tr></table></figure><p> å‚æ•°:çŸ©é˜µè¡Œæ•°ï¼ŒçŸ©é˜µåˆ—æ•°ï¼Œæ•°æ®ç±»å‹</p><p> å…¶ä¸­æ•°æ®ç±»å‹æœ‰å¾ˆå¤šç§ï¼Œå¸¸ç”¨çš„åº”è¯¥æœ‰ï¼š</p><p> CV_8Uï¼š8ä½æ— ç¬¦å·å‹ï¼ˆ0~255ï¼‰ï¼Œå³ç°åº¦å›¾åƒï¼›</p><p> CV_8UC3ï¼šä¸‰é€šé“8ä½æ— ç¬¦å·å‹ï¼Œè¿™é‡Œä¸‰é€šé“æŒ‡Bï¼ˆè“ï¼‰Gï¼ˆç»¿ï¼‰Rï¼ˆçº¢ï¼‰ï¼Œä¸matlabä¸­çš„RGBæ­£å¥½ç›¸åã€‚</p><p> è¿™é‡Œåˆ›å»ºçŸ©é˜µæ—¶æœªæŒ‡å®šçŸ©é˜µçš„å€¼ï¼Œå‘ç°é»˜è®¤å€¼çš„å¤§å°ä¸º205.</p></li><li><p>æŒ‡å®šçŸ©é˜µå¤§å°ï¼ŒæŒ‡å®šæ•°æ®ç±»å‹ï¼Œè®¾ç½®åˆå§‹å€¼ï¼š</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mat <span class="title function_">image1</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>,CV_8U, <span class="number">100</span>)</span>;</span><br></pre></td></tr></table></figure><p> è¿™é‡ŒåŒ…å«å››ä¸ªå‚æ•°ï¼šçŸ©é˜µè¡Œæ•°ï¼ŒçŸ©é˜µåˆ—æ•°ï¼Œæ•°æ®ç±»å‹ï¼Œåˆå§‹å€¼ï¼›<br> å¯¹äºç°åº¦å›¾åƒï¼šå¯ä»¥ç›´æ¥ç»™å‡ºåˆå§‹å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Scalarï¼ˆï¼‰ï¼›</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> Mat <span class="title function_">image1</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>,CV_8U, <span class="number">100</span>)</span>;</span><br><span class="line">Mat <span class="title function_">image1</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>,CV_8U, Scalar(<span class="number">100</span>))</span>;<span class="comment">//Scalar:æ ‡é‡</span></span><br></pre></td></tr></table></figure><p> å¯¹äºä¸‰é€šé“å›¾åƒï¼šä½¿ç”¨Scalarï¼ˆï¼‰ï¼›</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mat <span class="title function_">image1</span><span class="params">(<span class="number">100</span>,<span class="number">100</span>,CV_8UC3, Scalar(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>))</span>;</span><br></pre></td></tr></table></figure></li></ol><h3 id="è·å–å›¾åƒä¿¡æ¯"><a href="#è·å–å›¾åƒä¿¡æ¯" class="headerlink" title="è·å–å›¾åƒä¿¡æ¯"></a>è·å–å›¾åƒä¿¡æ¯</h3><p>è·å–å›¾åƒçš„å®½åº¦ï¼ˆåˆ—æ•°ï¼‰ï¼Œé«˜åº¦ï¼ˆè¡Œæ•°ï¼‰ï¼Œå°ºå¯¸å’Œé€šé“æ•°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Mat image1 = imread(<span class="string">&quot;lena.png&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºå›¾åƒï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;å›¾åƒçš„è¡Œæ•°ä¸ºï¼š &quot;</span> &lt;&lt; image1.rows &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è·å–å›¾åƒçš„é«˜åº¦ï¼Œè¡Œæ•°ï¼›</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;å›¾åƒçš„åˆ—æ•°ä¸ºï¼š &quot;</span> &lt;&lt; image1.cols &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è·å–å›¾åƒçš„å®½åº¦ï¼Œåˆ—æ•°ï¼›</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;å›¾åƒçš„é€šé“æ•°ä¸ºï¼š &quot;</span> &lt;&lt; image1.channels() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è·å–å›¾åƒçš„é€šé“æ•°ï¼Œå½©è‰²å›¾=3ï¼Œç°åº¦å›¾=1ï¼›</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;å›¾åƒçš„å°ºå¯¸ä¸ºï¼š &quot;</span> &lt;&lt; image1.size &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è·å–å›¾åƒçš„å°ºå¯¸ï¼Œè¡Œ*åˆ—ï¼›</span></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.64dm9cq5y1.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.64dm9cq5y1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="æ„Ÿå…´è¶£åŒºåŸŸ"><a href="#æ„Ÿå…´è¶£åŒºåŸŸ" class="headerlink" title="æ„Ÿå…´è¶£åŒºåŸŸ"></a>æ„Ÿå…´è¶£åŒºåŸŸ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Mat image1 = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºå›¾åƒï¼›</span></span><br><span class="line"></span><br><span class="line">Mat <span class="title function_">imageROI</span><span class="params">(image1, Rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>))</span>;  <span class="comment">//å®šä¹‰æ„Ÿå…´è¶£åŒºåŸŸ</span></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­Rectï¼ˆï¼‰æœ‰å››ä¸ªå‚æ•°ï¼ŒRectï¼ˆa,b,c,dï¼‰:</p><ul><li>aï¼šæ„Ÿå…´è¶£åŒºåŸŸåˆ—(cols)çš„èµ·ç‚¹ï¼›</li><li>bï¼šæ„Ÿå…´è¶£åŒºåŸŸè¡Œ(rows)çš„èµ·ç‚¹ï¼›</li><li>cï¼šæ„Ÿå…´è¶£åŒºåŸŸçš„åˆ—æ•°(cols)ï¼›</li><li>dï¼šæ„Ÿå…´è¶£åŒºåŸŸçš„è¡Œæ•°(rows)ï¼›</li></ul><h3 id="é€šè¿‡é¼ æ ‡ç‚¹å‡»æ“ä½œè·å–å›¾åƒçš„åƒç´ åæ ‡å’Œåƒç´ å€¼"><a href="#é€šè¿‡é¼ æ ‡ç‚¹å‡»æ“ä½œè·å–å›¾åƒçš„åƒç´ åæ ‡å’Œåƒç´ å€¼" class="headerlink" title="é€šè¿‡é¼ æ ‡ç‚¹å‡»æ“ä½œè·å–å›¾åƒçš„åƒç´ åæ ‡å’Œåƒç´ å€¼"></a>é€šè¿‡é¼ æ ‡ç‚¹å‡»æ“ä½œè·å–å›¾åƒçš„åƒç´ åæ ‡å’Œåƒç´ å€¼</h3><h4 id="åˆ›å»ºé¼ æ ‡æ“ä½œå‡½æ•°çš„å¤´æ–‡ä»¶"><a href="#åˆ›å»ºé¼ æ ‡æ“ä½œå‡½æ•°çš„å¤´æ–‡ä»¶" class="headerlink" title="åˆ›å»ºé¼ æ ‡æ“ä½œå‡½æ•°çš„å¤´æ–‡ä»¶"></a>åˆ›å»ºé¼ æ ‡æ“ä½œå‡½æ•°çš„å¤´æ–‡ä»¶</h4><details open><summary pointer> onMouse.h </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">onMouse</span><span class="params">(<span class="type">int</span> event, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> flags, <span class="type">void</span>* param)</span>;  <span class="comment">//evnet:é¼ æ ‡äº‹ä»¶ç±»å‹ x,y:é¼ æ ‡åæ ‡ flagsï¼šé¼ æ ‡å“ªä¸ªé”®</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">onMouse</span><span class="params">(<span class="type">int</span> event, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> flags, <span class="type">void</span>* param)</span>  <span class="comment">//evnet:é¼ æ ‡äº‹ä»¶ç±»å‹ x,y:é¼ æ ‡åæ ‡ flagsï¼šé¼ æ ‡å“ªä¸ªé”®</span></span><br><span class="line">&#123;</span><br><span class="line">Mat* im = reinterpret_cast&lt;Mat*&gt;(param);</span><br><span class="line"><span class="keyword">switch</span> (event) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> EVENT_LBUTTONDOWN:</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºå›¾åƒåƒç´ å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (static_cast&lt;<span class="type">int</span>&gt;(im-&gt;channels()) == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è‹¥å›¾åƒä¸ºå•é€šé“å›¾åƒï¼Œåˆ™æ˜¾ç¤ºé¼ æ ‡ç‚¹å‡»çš„åæ ‡ä»¥åŠç°åº¦å€¼</span></span><br><span class="line"><span class="keyword">switch</span> (im-&gt;type())</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;uchar&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;<span class="type">char</span>&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;ushort&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;<span class="type">short</span>&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;<span class="type">int</span>&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;<span class="type">float</span>&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot; ) value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;<span class="type">double</span>&gt;(Point(x, y))) &lt;&lt; <span class="built_in">endl</span>; <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//è‹¥å›¾åƒä¸ºå½©è‰²å›¾åƒï¼Œåˆ™æ˜¾ç¤ºé¼ æ ‡ç‚¹å‡»åæ ‡ä»¥åŠå¯¹åº”çš„B, G, Rå€¼</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;at (&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; y &lt;&lt; <span class="string">&quot;)&quot;</span></span><br><span class="line">&lt;&lt; <span class="string">&quot;  B value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;Vec3b&gt;(Point(x, y))[<span class="number">0</span>])</span><br><span class="line">&lt;&lt; <span class="string">&quot;  G value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;Vec3b&gt;(Point(x, y))[<span class="number">1</span>])</span><br><span class="line">&lt;&lt; <span class="string">&quot;  R value is: &quot;</span> &lt;&lt; static_cast&lt;<span class="type">int</span>&gt;(im-&gt;at&lt;Vec3b&gt;(Point(x, y))[<span class="number">2</span>])</span><br><span class="line">&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//setMouseCallback(&quot;image1&quot;, onMouse, reinterpret_cast&lt;void*&gt;(&amp;image1)); //å…³è”å›¾åƒæ˜¾ç¤ºçª—å£å’ŒonMouseå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Matæ¯ä¸ªæ ¼å­å†…çš„æ•°æ®æ ¼å¼---------- - Matå®šä¹‰</span></span><br><span class="line"><span class="comment">//Mat_&lt;uchar&gt;-------- - CV_8Uï¼ˆ0-255ï¼‰</span></span><br><span class="line"><span class="comment">//Mat&lt;char&gt;---------- - CV_8Sï¼ˆ-128-127ï¼‰</span></span><br><span class="line"><span class="comment">//Nat_&lt;short&gt;-------- - CV_16Sï¼ˆ-32768-32767ï¼‰</span></span><br><span class="line"><span class="comment">//Mat_&lt;ushort&gt;--------CV_16Uï¼ˆ0-65535ï¼‰</span></span><br><span class="line"><span class="comment">//Mat_&lt;int&gt;---------- - CV_32Sï¼ˆ-2147483648-2147483647ï¼‰</span></span><br><span class="line"><span class="comment">//Mat_&lt;float&gt;----------CV_32Fï¼ˆ-FLT_MAXâ€¦FLT_MAXï¼ŒINFï¼ŒNANï¼‰</span></span><br><span class="line"><span class="comment">//Mat_&lt;double&gt;--------CV_64Fï¼ˆ-DBL_MAXâ€¦DBL_MAXï¼ŒINFï¼ŒNANï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Matæ•°æ®ç±»å‹å’Œé€šé“å¯¹åº”çš„type()</span></span><br><span class="line"><span class="comment">//              C1          C2          C3          C4</span></span><br><span class="line"><span class="comment">//CV_8U         0           8           16          24</span></span><br><span class="line"><span class="comment">//CV_8S         1           9           17          25</span></span><br><span class="line"><span class="comment">//CV_16U        2          10           18          26</span></span><br><span class="line"><span class="comment">//CV_16S        3          11           19          27</span></span><br><span class="line"><span class="comment">//CV_32S        4          12           20          28</span></span><br><span class="line"><span class="comment">//CV_32F        5          13           21          29</span></span><br><span class="line"><span class="comment">//CV_64F        6          14           22          30</span></span><br></pre></td></tr></table></figure>              </div>            </details><h4 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h4><details open><summary pointer>  </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;onMouse.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">Mat image1 = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºå›¾åƒï¼›</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">setMouseCallback(<span class="string">&quot;image1&quot;</span>, onMouse, reinterpret_cast&lt;<span class="type">void</span>*&gt;(&amp;image1)); <span class="comment">//å…³è”å›¾åƒæ˜¾ç¤ºçª—å£å’ŒonMouseå‡½æ•°</span></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p><strong>æ•ˆæœ</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.6f0g2iecfm.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.6f0g2iecfm.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="è®¿é—®å›¾åƒåƒç´ "><a href="#è®¿é—®å›¾åƒåƒç´ " class="headerlink" title="è®¿é—®å›¾åƒåƒç´ "></a>è®¿é—®å›¾åƒåƒç´ </h3><h4 id="è®¿é—®ï¼ˆj-iï¼‰å¤„åƒç´ "><a href="#è®¿é—®ï¼ˆj-iï¼‰å¤„åƒç´ " class="headerlink" title="è®¿é—®ï¼ˆj,iï¼‰å¤„åƒç´ "></a>è®¿é—®ï¼ˆj,iï¼‰å¤„åƒç´ </h4><p>ä»¥8ä½ï¼ˆ0~255ï¼‰ç°åº¦å›¾åƒå’ŒBGRå½©è‰²å›¾åƒä¸ºä¾‹ï¼Œç”¨atå¯ä»¥è®¿é—®å›¾åƒåƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç°åº¦å›¾åƒï¼š</span></span><br><span class="line">image.at&lt;uchar&gt;(j, i) <span class="comment">//jä¸ºè¡Œæ•°ï¼Œiä¸ºåˆ—æ•°</span></span><br><span class="line"><span class="comment">//BGRå½©è‰²å›¾åƒ</span></span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">0</span>] <span class="comment">//Båˆ†é‡</span></span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">1</span>] <span class="comment">//Gåˆ†é‡</span></span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">2</span>] <span class="comment">//Råˆ†é‡</span></span><br></pre></td></tr></table></figure><p><strong>ä¾‹:</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">Mat image1 = imread(<span class="string">&quot;fire.jpg&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºå›¾åƒï¼›</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">50</span>, j = <span class="number">50</span>;</span><br><span class="line"><span class="type">int</span> b = image1.at&lt;Vec3b&gt;(j, i)[<span class="number">0</span>];</span><br><span class="line"><span class="type">int</span> g = image1.at&lt;Vec3b&gt;(j, i)[<span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> r = image1.at&lt;Vec3b&gt;(j, i)[<span class="number">2</span>];</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;å›¾åƒè¯¥ç‚¹çš„åƒç´ (BGR):&quot;</span>&lt;&lt;b&lt;&lt;<span class="string">&quot;,&quot;</span> &lt;&lt; g &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; r &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">waitKey(<span class="number">0</span>);  </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7p22d7s7r.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7p22d7s7r.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="åœ¨å›¾åƒä¸­åŠ å…¥ç™½è‰²æ¤’ç›å™ªå£°"><a href="#åœ¨å›¾åƒä¸­åŠ å…¥ç™½è‰²æ¤’ç›å™ªå£°" class="headerlink" title="åœ¨å›¾åƒä¸­åŠ å…¥ç™½è‰²æ¤’ç›å™ªå£°"></a>åœ¨å›¾åƒä¸­åŠ å…¥ç™½è‰²æ¤’ç›å™ªå£°</h4><h5 id="åˆ›å»ºSaltå¤´æ–‡ä»¶"><a href="#åˆ›å»ºSaltå¤´æ–‡ä»¶" class="headerlink" title="åˆ›å»ºSaltå¤´æ–‡ä»¶"></a>åˆ›å»ºSaltå¤´æ–‡ä»¶</h5><details open><summary pointer> Salt.h </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;random&gt;</span>  <span class="comment">//éšæœºæ•°å¤´æ–‡ä»¶</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Salt</span><span class="params">(Mat image, <span class="type">int</span> n)</span>; <span class="comment">//nï¼šåŠ å…¥å™ªå£°ç‚¹æ•°</span></span><br></pre></td></tr></table></figure>              </div>            </details><h5 id="åˆ›å»ºSaltæºæ–‡ä»¶"><a href="#åˆ›å»ºSaltæºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºSaltæºæ–‡ä»¶"></a>åˆ›å»ºSaltæºæ–‡ä»¶</h5><details open><summary pointer> Salt.cpp </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Salt.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Salt</span><span class="params">(Mat image, <span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//éšæœºæ•°ç”Ÿæˆå™¨</span></span><br><span class="line">default_random_engine generater;</span><br><span class="line">uniform_int_distribution&lt;<span class="type">int</span>&gt;randomRow(<span class="number">0</span>, image.rows - <span class="number">1</span>);</span><br><span class="line">uniform_int_distribution&lt;<span class="type">int</span>&gt;randomCol(<span class="number">0</span>, image.cols - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">&#123;</span><br><span class="line">i = randomCol(generater);</span><br><span class="line">j = randomRow(generater);</span><br><span class="line"><span class="keyword">if</span> (image.channels() == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">image.at&lt;uchar&gt;(j, i) = <span class="number">255</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (image.channels() == <span class="number">3</span>)</span><br><span class="line">&#123;</span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">0</span>] = <span class="number">255</span>;</span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">1</span>] = <span class="number">255</span>;</span><br><span class="line">image.at&lt;Vec3b&gt;(j, i)[<span class="number">2</span>] = <span class="number">255</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h5 id="main"><a href="#main" class="headerlink" title="main"></a>main</h5><details open><summary pointer> main.cpp </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Salt.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123; </span><br><span class="line"></span><br><span class="line">Mat image1 = imread(<span class="string">&quot;lena.png&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºåŸå›¾åƒï¼›</span></span><br><span class="line"></span><br><span class="line">Salt(image1, <span class="number">5000</span>); <span class="comment">//åŠ å…¥5000ä¸ªå™ªå£°ç‚¹</span></span><br><span class="line">imshow(<span class="string">&quot;image2&quot;</span>, image1);  <span class="comment">//æ˜¾ç¤ºå™ªå£°å›¾åƒï¼›</span></span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p><strong>æ•ˆæœ</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.231muzt7o0.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.231muzt7o0.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="éå†å›¾åƒåƒç´ "><a href="#éå†å›¾åƒåƒç´ " class="headerlink" title="éå†å›¾åƒåƒç´ "></a>éå†å›¾åƒåƒç´ </h3><h4 id="æŒ‡é’ˆæ‰«æ"><a href="#æŒ‡é’ˆæ‰«æ" class="headerlink" title="æŒ‡é’ˆæ‰«æ"></a>æŒ‡é’ˆæ‰«æ</h4><p>ä»¥ä¸‹é¢æ¨¡æ¿å¯¹å›¾åƒè¿›è¡Œæ‰«æè¿ç®—ä¸ºä¾‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2h82lv6z7m.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2h82lv6z7m.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123; </span><br><span class="line">Mat image1, output_image;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒå’Œè¾“å‡ºå›¾åƒ</span></span><br><span class="line">image1 = imread(<span class="string">&quot;lena.png&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">output_image = Mat(image1.size(), image1.type());  <span class="comment">//å®šä¹‰è¾“å‡ºå›¾åƒå¤§å°</span></span><br><span class="line">output_image = image1.clone();   <span class="comment">//å…‹éš†åŸå›¾åƒç´ å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> rows = image1.rows;    <span class="comment">//åŸå›¾è¡Œæ•°</span></span><br><span class="line"><span class="type">int</span> stepx = image1.channels();   <span class="comment">//åŸå›¾é€šé“æ•°</span></span><br><span class="line"><span class="type">int</span> cols = (image1.cols) * image1.channels();  <span class="comment">//çŸ©é˜µæ€»åˆ—æ•°ï¼Œåœ¨BGRå½©è‰²å›¾åƒä¸­ï¼Œæ¯ä¸ªåƒç´ çš„BGRé€šé“æŒ‰é¡ºåºæ’åˆ—ï¼Œå› æ­¤æ€»åˆ—æ•°=åƒç´ å®½åº¦*é€šé“æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> row =<span class="number">1</span> ; row &lt; (rows - <span class="number">1</span>); row++)   <span class="comment">//å¯¹è¡Œéå†</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">const</span> uchar* previous = image1.ptr&lt;uchar&gt;(row - <span class="number">1</span>);  <span class="comment">//åŸå›¾ä¸Šä¸€è¡ŒæŒ‡é’ˆ</span></span><br><span class="line"><span class="type">const</span> uchar* current = image1.ptr&lt;uchar&gt;(row);       <span class="comment">//åŸå›¾å½“å‰è¡ŒæŒ‡é’ˆ</span></span><br><span class="line"><span class="type">const</span> uchar* next = image1.ptr&lt;uchar&gt;(row + <span class="number">1</span>);      <span class="comment">//åŸå›¾ä¸‹ä¸€è¡ŒæŒ‡é’ˆ</span></span><br><span class="line">uchar* output = output_image.ptr&lt;uchar&gt;(row);        <span class="comment">//è¾“å‡ºå›¾åƒå½“å‰è¡ŒæŒ‡é’ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> col = stepx; col &lt; (cols- stepx); col++)  <span class="comment">//å¯¹åˆ—éå†</span></span><br><span class="line">&#123;</span><br><span class="line">            <span class="comment">//å·ç§¯è®¡ç®—</span></span><br><span class="line">output[col] = saturate_cast&lt;uchar&gt;(<span class="number">5</span>*current[col] - (previous[col]+ current[col- stepx]+ current[col + stepx]+ next[col]));</span><br><span class="line"><span class="comment">//saturate_cast&lt;uchar&gt;(a)ï¼Œå½“aåœ¨0â€”255æ—¶è¾“å‡ºaï¼Œå½“aå°äº0è¾“å‡º0ï¼Œå½“aå¤§äº255è¾“å‡º255ï¼Œä¿è¯açš„å€¼åœ¨0~255ä¹‹é—´</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);</span><br><span class="line">imshow(<span class="string">&quot;output_image&quot;</span>, output_image);</span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2a4uqfua0g.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2a4uqfua0g.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>æŠŠå·ç§¯æ ¸ä¸­é—´æ”¹æˆ4ï¼š</strong><br><strong>è¾“å‡º</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8hg8qlrb43.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8hg8qlrb43.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="opencvè‡ªå¸¦çš„å·ç§¯è¿ç®—ï¼šfilter2D"><a href="#opencvè‡ªå¸¦çš„å·ç§¯è¿ç®—ï¼šfilter2D" class="headerlink" title="opencvè‡ªå¸¦çš„å·ç§¯è¿ç®—ï¼šfilter2D"></a>opencvè‡ªå¸¦çš„å·ç§¯è¿ç®—ï¼šfilter2D</h4><p>ä¸Šé¢çš„æ–¹æ³•å¯ä»¥ç®€åŒ–ä¸º:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace cv;</span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123; </span><br><span class="line">Mat image1, output_image;   <span class="comment">//å®šä¹‰è¾“å…¥å›¾åƒå’Œè¾“å‡ºå›¾åƒ</span></span><br><span class="line">image1 = imread(<span class="string">&quot;lena.png&quot;</span>);  <span class="comment">//è¯»å–å›¾åƒï¼›</span></span><br><span class="line"><span class="keyword">if</span> (image1.empty())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;è¯»å–é”™è¯¯&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Mat kernel = (Mat_&lt;<span class="type">char</span>&gt;(<span class="number">3</span>,<span class="number">3</span>) &lt;&lt; <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">5</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);  <span class="comment">//åˆ›å»ºæ»¤æ³¢å™¨</span></span><br><span class="line">filter2D(image1, output_image, image1.depth(), kernel);  <span class="comment">//å·ç§¯</span></span><br><span class="line"></span><br><span class="line">imshow(<span class="string">&quot;image1&quot;</span>, image1);</span><br><span class="line">imshow(<span class="string">&quot;output_image&quot;</span>, output_image);</span><br><span class="line"></span><br><span class="line">waitKey(<span class="number">0</span>);  <span class="comment">//æš‚åœï¼Œä¿æŒå›¾åƒæ˜¾ç¤ºï¼Œç­‰å¾…æŒ‰é”®ç»“æŸ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨filter2Då‡½æ•°ä¸­ï¼Œimage1.depth()æ˜¯ç”¨æ¥è·å–å›¾åƒimage1çš„æ·±åº¦ï¼ˆdepthï¼‰ä¿¡æ¯çš„å‡½æ•°è°ƒç”¨ã€‚</p><p>å›¾åƒçš„æ·±åº¦è¡¨ç¤ºå›¾åƒä¸­æ¯ä¸ªåƒç´ å€¼çš„æ•°æ®ç±»å‹ã€‚åœ¨OpenCVä¸­ï¼Œå¸¸è§çš„å›¾åƒæ·±åº¦åŒ…æ‹¬ï¼š</p><ul><li>CV_8Uï¼š8ä½æ— ç¬¦å·æ•´æ•°ï¼ˆå³Unsigned charï¼‰ï¼Œå¯¹åº”äºç°åº¦å›¾åƒçš„æ·±åº¦</li><li>CV_16Uï¼š16ä½æ— ç¬¦å·æ•´æ•°</li><li>CV_16Sï¼š16ä½æœ‰ç¬¦å·æ•´æ•°</li><li>CV_32Sï¼š32ä½æœ‰ç¬¦å·æ•´æ•°</li><li>CV_32Fï¼š32ä½æµ®ç‚¹æ•°</li><li>CV_64Fï¼š64ä½æµ®ç‚¹æ•°</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cè¯­è¨€è®¡ç®—æœºäºŒçº§ç¬”è®°</title>
      <link href="/2024/03/23/c%E8%AF%AD%E8%A8%80%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BA%8C%E7%BA%A7%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/03/23/c%E8%AF%AD%E8%A8%80%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%BA%8C%E7%BA%A7%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¡ç®—æœºç³»ç»Ÿ"><a href="#è®¡ç®—æœºç³»ç»Ÿ" class="headerlink" title="è®¡ç®—æœºç³»ç»Ÿ"></a>è®¡ç®—æœºç³»ç»Ÿ</h2><h3 id="E-Rå®ä½“è”ç³»"><a href="#E-Rå®ä½“è”ç³»" class="headerlink" title="E-Rå®ä½“è”ç³»"></a>E-Rå®ä½“è”ç³»</h3><ol><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2krogi3z4f.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2krogi3z4f.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div> çŸ©å½¢è¡¨ç¤ºå®ä½“ï¼Œè±å½¢è¡¨ç¤ºå®ä½“ä¹‹é—´çš„è”ç³»</li><li>åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç”¨äºè¡¨ç¤ºå®ä½“é—´è”ç³»çš„æ˜¯<strong>äºŒç»´è¡¨</strong></li><li>å°†E-Rå›¾è½¬æ¢ä¸ºå…³ç³»æ¨¡å¼æ—¶ï¼Œå®ä½“å’Œè”ç³»éƒ½å¯ä»¥è¡¨ç¤ºä¸º<strong>å…³ç³»</strong>(å…³ç³»å°±æ˜¯äºŒç»´è¡¨)</li><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.969i7jl0dn.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.969i7jl0dn.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li></li></ol><p>å·²ç»è€ƒå®Œäº†ã€‚ã€‚ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> cè¯­è¨€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cè¯­è¨€ </tag>
            
            <tag> è®¡ç®—æœºäºŒçº§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”¶è—å¤¹</title>
      <link href="/2024/03/22/%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
      <url>/2024/03/22/%E6%94%B6%E8%97%8F%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="AI"><a href="#AI" class="headerlink" title="AI"></a>AI</h2><div class="tagLink"><a class="link-card" title="ä»å¤´å¼€å§‹å®ç°ä¸€ä¸ªç¥ç»ç½‘ç»œ" href="https://mp.weixin.qq.com/s/lk12kP2fbuSBSV5lSFKTlA"><span class="link-card-backdrop" style="background-image: url(https://picx.zhimg.com/80/v2-0b63b54fc59d235ad97530a98bc0e014_1440w.webp?source=2c26e567)"></span><div class="left"><img src="https://picx.zhimg.com/80/v2-0b63b54fc59d235ad97530a98bc0e014_1440w.webp?source=2c26e567" class="lazyload placeholder" data-srcset="https://picx.zhimg.com/80/v2-0b63b54fc59d235ad97530a98bc0e014_1440w.webp?source=2c26e567" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">ä»å¤´å¼€å§‹å®ç°ä¸€ä¸ªç¥ç»ç½‘ç»œ</p><p class="url">https://mp.weixin.qq.com/s/lk12kP2fbuSBSV5lSFKTlA</p></div></a></div><div class="tagLink"><a class="link-card" title="æ•°æ®å¤„ç†ä¹‹å½’ä¸€åŒ–ã€æ ‡å‡†åŒ–ã€æ­£åˆ™åŒ–" href="https://job.yanxishe.com/blogDetail/27604"><span class="link-card-backdrop" style="background-image: url(https://static.leiphone.com/uploads/new/sns/blogSpe/article/202110/616c488c9c69f.png)"></span><div class="left"><img src="https://static.leiphone.com/uploads/new/sns/blogSpe/article/202110/616c488c9c69f.png" class="lazyload placeholder" data-srcset="https://static.leiphone.com/uploads/new/sns/blogSpe/article/202110/616c488c9c69f.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">æ•°æ®å¤„ç†ä¹‹å½’ä¸€åŒ–ã€æ ‡å‡†åŒ–ã€æ­£åˆ™åŒ–</p><p class="url">https://job.yanxishe.com/blogDetail/27604</p></div></a></div><iframe src="//player.bilibili.com/player.html?aid=770444004&bvid=BV18r4y1M71J&cid=760424160&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><iframe src="//player.bilibili.com/player.html?aid=541842600&bvid=BV1yi4y1g7ro&cid=227677652&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h2><details ><summary pointer> å­˜ä¸€ä¸‹åŒ…ç‰ˆæœ¬ </summary>              <div class='content'>              <p>(Paddle_Py3.12) C:\Users\lxcqm&gt;pip list<br>Package                 Version</p><hr><p>absl-py                 2.1.0<br>anyio                   4.3.0<br>archspec                0.2.3<br>astor                   0.8.1<br>astunparse              1.6.3<br>boltons                 23.1.1<br>Brotli                  1.0.9<br>certifi                 2024.2.2<br>cffi                    1.16.0<br>charset-normalizer      3.3.2<br>cloudpickle             3.0.0<br>cmake                   3.28.3<br>colorama                0.4.6<br>conda                   24.1.2<br>conda-libmamba-solver   24.1.0<br>conda-package-handling  2.2.0<br>conda_package_streaming 0.9.0<br>contourpy               1.2.0<br>cycler                  0.11.0<br>Cython                  3.0.9<br>decorator               5.1.1<br>distro                  1.9.0<br>filelock                3.13.1<br>flatbuffers             24.3.7<br>fonttools               4.25.0<br>gast                    0.5.4<br>google-pasta            0.2.0<br>grpcio                  1.62.1<br>gym                     0.26.2<br>gym-notices             0.0.8<br>h11                     0.14.0<br>h5py                    3.10.0<br>httpcore                1.0.4<br>httpx                   0.27.0<br>idna                    3.6<br>Jinja2                  3.1.3<br>joblib                  1.3.2<br>jsonpatch               1.33<br>jsonpointer             2.4<br>keras                   3.1.1<br>kiwisolver              1.4.4<br>libclang                18.1.1<br>libmambapy              1.5.7<br>mamba                   1.5.7<br>Markdown                3.6<br>markdown-it-py          3.0.0<br>MarkupSafe              2.1.5<br>matplotlib              3.8.0<br>mdurl                   0.1.2<br>menuinst                2.0.2<br>meson                   1.3.2<br>mkl-fft                 1.3.8<br>mkl-random              1.2.4<br>mkl-service             2.4.0<br>ml-dtypes               0.3.2<br>mpmath                  1.3.0<br>munkres                 1.1.4<br>namex                   0.0.7<br>nes_py                  8.2.1<br>networkx                3.2.1<br>numpy                   1.26.4<br>opencv-python           4.9.0.80<br>opt-einsum              3.3.0<br>optree                  0.10.0<br>packaging               23.1<br>paddlepaddle-gpu        2.6.0.post120<br>pandas                  2.2.1<br>pillow                  10.2.0<br>pip                     24.0<br>platformdirs            4.2.0<br>pluggy                  1.4.0<br>ply                     3.11<br>protobuf                4.25.2<br>pycocotools             2.0<br>pycosat                 0.6.6<br>pycparser               2.21<br>pyglet                  1.5.21<br>Pygments                2.17.2<br>pyparsing               3.0.9<br>PyQt5                   5.15.10<br>PyQt5-sip               12.13.0<br>PySocks                 1.7.1<br>python-dateutil         2.8.2<br>pytz                    2024.1<br>PyYAML                  6.0.1<br>requests                2.31.0<br>rich                    13.7.1<br>ruamel.yaml             0.18.6<br>ruamel.yaml.clib        0.2.8<br>scipy                   1.12.0<br>setuptools              69.1.1<br>sip                     6.7.12<br>six                     1.16.0<br>sniffio                 1.3.1<br>sympy                   1.12<br>tensorboard             2.16.2<br>tensorboard-data-server 0.7.2<br>tensorflow              2.16.1<br>tensorflow-intel        2.16.1<br>termcolor               2.4.0<br>threadpoolctl           3.3.0<br>torch                   2.2.1<br>torchaudio              2.2.1<br>torchvision             0.17.1<br>tornado                 6.3.3<br>tqdm                    4.66.2<br>truststore              0.8.0<br>typing_extensions       4.10.0<br>tzdata                  2024.1<br>urllib3                 2.2.1<br>Werkzeug                3.0.1<br>wheel                   0.43.0<br>win-inet-pton           1.1.0<br>wrapt                   1.16.0<br>zstandard               0.22.0</p>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> YoloV3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>YoloV3æ¨¡å‹æ„å»º</title>
      <link href="/2024/03/21/YoloV3%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA/"/>
      <url>/2024/03/21/YoloV3%E6%A8%A1%E5%9E%8B%E6%9E%84%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<div class="tagLink"><a class="link-card" title="ã€yolov3è¯¦è§£ã€‘ä¸€æ–‡è®©ä½ è¯»æ‡‚yolov3ç›®æ ‡æ£€æµ‹åŸç†" href="https://blog.csdn.net/weixin_39615182/article/details/109752498"><span class="link-card-backdrop" style="background-image: url(https://tumytime.github.io/picx-images-hosting/image.7i057r983s.webp)"></span><div class="left"><img src="https://tumytime.github.io/picx-images-hosting/image.7i057r983s.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7i057r983s.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">ã€yolov3è¯¦è§£ã€‘ä¸€æ–‡è®©ä½ è¯»æ‡‚yolov3ç›®æ ‡æ£€æµ‹åŸç†</p><p class="url">https://blog.csdn.net/weixin_39615182/article/details/109752498</p></div></a></div><p><strong>yolov3æ£€æµ‹åˆ†ä¸¤æ­¥ï¼š</strong><br>1ã€ç¡®å®šæ£€æµ‹å¯¹è±¡ä½ç½®<br>2ã€å¯¹æ£€æµ‹å¯¹è±¡åˆ†ç±»ï¼ˆæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼‰<br>å³åœ¨è¯†åˆ«å›¾ç‰‡æ˜¯ä»€ä¹ˆçš„åŸºç¡€ä¸Šï¼Œè¿˜éœ€å®šä½è¯†åˆ«å¯¹è±¡çš„ä½ç½®ï¼Œå¹¶æ¡†å‡ºã€‚</p><p>æˆ‘ä»¬é¦–å…ˆä¸Šä¸€å¹…å›¾å®è§‚ç†è§£ä¸‹</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7i057r983s.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7i057r983s.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å›¾ä¸­çš„çº¢æ¡†æ˜¯é€šè¿‡åœ¨yolov3æ£€æµ‹æœ€åå¾—å‡ºçš„<strong>è¾¹ç•Œæ¡†</strong>ï¼ˆbounding boxï¼‰ï¼Œåˆå¦‚ä¸‹å›¾çš„é»„è‰²æ¡†ä¹Ÿæ˜¯è¾¹ç•Œæ¡†</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7smz0wp6zw.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7smz0wp6zw.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>yolov3å¤„ç†å›¾ç‰‡è¿‡ç¨‹å¦‚ä¸‹</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.pf3lakvam.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.pf3lakvam.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>é¦–å…ˆä¸€å¼ å›¾ç‰‡ä¼ è¿›yoloï¼Œyoloä¼šå°†å…¶è½¬åŒ–ä¸º416Ã—416å¤§å°çš„ç½‘æ ¼ï¼Œå¢åŠ ç°åº¦æ¡ç”¨äºé˜²æ­¢å¤±çœŸï¼Œä¹‹åå›¾ç‰‡ä¼šåˆ†æˆä¸‰ä¸ªç½‘æ ¼å›¾ç‰‡ï¼ˆ13Ã—13ï¼Œ26Ã—26ï¼Œ52Ã—52ï¼‰<br>ç”±äºå›¾åƒåœ¨å¤šæ¬¡å·ç§¯å‹ç¼©åï¼Œå°ç‰©ä½“çš„ç‰¹å¾å®¹æ˜“ä¸¢å¤±ï¼Œæ‰€ä»¥ç”¨52x52çš„ç½‘æ ¼æ£€æµ‹å°ç‰©ä½“ï¼Œç”±äºçŒ«å±äºå¤§ç‰©ä½“ï¼Œæ‰€ä»¥ç”¨13x13çš„ç½‘æ ¼æ£€æµ‹</p><h2 id="è¯¦ç»†è¿‡ç¨‹"><a href="#è¯¦ç»†è¿‡ç¨‹" class="headerlink" title="è¯¦ç»†è¿‡ç¨‹"></a>è¯¦ç»†è¿‡ç¨‹</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8ad0phujlt.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8ad0phujlt.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å…ˆä¸Šæµç¨‹å›¾ï¼Œè¯¥å›¾æ˜¯åŸºäº<strong>vocæ•°æ®é›†</strong>è®²è§£çš„ï¼Œvocæ•°æ®é›†æœ‰20ä¸ªç±»åˆ«ï¼Œæœ€ä¸‹é¢çº¢æ¡†ä¸­(13ï¼Œ13ï¼Œ75)è¡¨ç¤ºé¢„æµ‹ç»“æœçš„shapeï¼Œå®é™…ä¸Šæ˜¯13,13,3Ã—25,è¡¨ç¤ºæœ‰13*13çš„ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘æ ¼æœ‰3ä¸ªå…ˆéªŒæ¡†ï¼ˆåˆç§°é”šæ¡†ï¼Œanchorsï¼Œå…ˆéªŒæ¡†ä¸‹é¢æœ‰è§£é‡Šï¼‰ï¼Œæ¯ä¸ªå…ˆéªŒæ¡†æœ‰25ä¸ªå‚æ•°(20ä¸ªç±»åˆ«+5ä¸ªå‚æ•°)ï¼Œè¿™5ä¸ªå‚æ•°åˆ†åˆ«æ˜¯<strong>x_offset</strong>ã€<strong>y_offset</strong>ã€<strong>height</strong>ã€<strong>width</strong>ä¸<strong>ç½®ä¿¡åº¦confidence</strong>ï¼Œç”¨è¿™3ä¸ªæ¡†å»è¯•æ¢ï¼Œè¯•æ¢æ˜¯å¦æ¡†ä¸­æœ‰ç‰©ä½“ï¼Œå¦‚æœæœ‰ï¼Œå°±ä¼šæŠŠè¿™ä¸ªç‰©ä½“ç»™æ¡†èµ·æ¥ã€‚å¦‚æœæ˜¯åŸºäºcocoçš„æ•°æ®é›†å°±ä¼šæœ‰80ç§ç±»åˆ«ï¼Œæœ€åçš„ç»´åº¦åº”è¯¥ä¸º3x(80+5)&#x3D;255ï¼Œæœ€ä¸Šé¢ä¸¤ä¸ªé¢„æµ‹ç»“æœshapeåŒç†</p><p>yolov3ä¸»å¹²ç½‘ç»œä¸ºDarknet53ï¼Œé‡è¦çš„æ˜¯ä½¿ç”¨äº†<strong>æ®‹å·®ç½‘ç»œResidual</strong>ï¼Œdarknet53çš„æ¯ä¸€ä¸ªå·ç§¯éƒ¨åˆ†ä½¿ç”¨äº†ç‰¹æœ‰çš„<strong>DarknetConv2Dç»“æ„</strong>ï¼Œæ¯ä¸€æ¬¡å·ç§¯çš„æ—¶å€™è¿›è¡Œ<strong>l2æ­£åˆ™åŒ–</strong>ï¼Œå®Œæˆå·ç§¯åè¿›è¡Œ<strong>BatchNormalizationæ ‡å‡†åŒ–</strong>ä¸<strong>LeakyReLUæ¿€æ´»å‡½æ•°</strong></p><p>å¯¹åº”ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#--------------------------------------------------#</span></span><br><span class="line"><span class="comment">#   å•æ¬¡å·ç§¯</span></span><br><span class="line"><span class="comment">#--------------------------------------------------#</span></span><br><span class="line"><span class="meta">@wraps(<span class="params">Conv2D</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">DarknetConv2D</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    darknet_conv_kwargs = &#123;<span class="string">&#x27;kernel_regularizer&#x27;</span>: l2(<span class="number">5e-4</span>)&#125;</span><br><span class="line">    darknet_conv_kwargs[<span class="string">&#x27;padding&#x27;</span>] = <span class="string">&#x27;valid&#x27;</span> <span class="keyword">if</span> kwargs.get(<span class="string">&#x27;strides&#x27;</span>)==(<span class="number">2</span>,<span class="number">2</span>) <span class="keyword">else</span> <span class="string">&#x27;same&#x27;</span></span><br><span class="line">    darknet_conv_kwargs.update(kwargs)</span><br><span class="line">    <span class="keyword">return</span> Conv2D(*args, **darknet_conv_kwargs)</span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------------------------#</span></span><br><span class="line"><span class="comment">#   å·ç§¯å—</span></span><br><span class="line"><span class="comment">#   DarknetConv2D + BatchNormalization + LeakyReLU</span></span><br><span class="line"><span class="comment">#---------------------------------------------------#</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">DarknetConv2D_BN_Leaky</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    no_bias_kwargs = &#123;<span class="string">&#x27;use_bias&#x27;</span>: <span class="literal">False</span>&#125;</span><br><span class="line">    no_bias_kwargs.update(kwargs)</span><br><span class="line">    <span class="keyword">return</span> compose( </span><br><span class="line">        DarknetConv2D(*args, **no_bias_kwargs),<span class="comment">#è°ƒç”¨å•æ¬¡å·ç§¯å‡½æ•°è¿›è¡Œæ­£åˆ™åŒ–</span></span><br><span class="line">        BatchNormalization(),<span class="comment"># æ ‡å‡†åŒ–</span></span><br><span class="line">        LeakyReLU(alpha=<span class="number">0.1</span>))<span class="comment"># æ¿€æ´»å‡½æ•°</span></span><br></pre></td></tr></table></figure><details open><summary pointer> pythonè£…é¥°å™¨ </summary>              <div class='content'>              <p><strong>å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hi</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hi yasoob!&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">doSomethingBeforeHi</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing hi()&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(func())</span><br><span class="line"> </span><br><span class="line">doSomethingBeforeHi(hi)</span><br><span class="line"><span class="comment">#outputs:I am doing some boring work before executing hi()</span></span><br><span class="line"><span class="comment">#        hi yasoob!</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å·²ç»å…·å¤‡æ‰€æœ‰å¿…éœ€çŸ¥è¯†ï¼Œæ¥è¿›ä¸€æ­¥å­¦ä¹ è£…é¥°å™¨çœŸæ­£æ˜¯ä»€ä¹ˆäº†ã€‚è£…é¥°å™¨è®©ä½ åœ¨ä¸€ä¸ªå‡½æ•°çš„å‰åå»æ‰§è¡Œä»£ç ã€‚</p><p><strong>ä½ çš„ç¬¬ä¸€ä¸ªè£…é¥°å™¨</strong></p><p>åœ¨ä¸Šä¸€ä¸ªä¾‹å­é‡Œï¼Œå…¶å®æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°å™¨ï¼ç°åœ¨æˆ‘ä»¬ä¿®æ”¹ä¸‹ä¸Šä¸€ä¸ªè£…é¥°å™¨ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªç¨å¾®æ›´æœ‰ç”¨ç‚¹çš„ç¨‹åºï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">a_new_decorator</span>(<span class="params">a_func</span>):</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapTheFunction</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">        a_func()</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work after executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> wrapTheFunction</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">a_function_requiring_decoration</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to remove my foul smell&quot;</span>)</span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs: &quot;I am the function which needs some decoration to remove my foul smell&quot;</span></span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)</span><br><span class="line"><span class="comment">#now a_function_requiring_decoration is wrapped by wrapTheFunction()</span></span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs:I am doing some boring work before executing a_func()</span></span><br><span class="line"><span class="comment">#        I am the function which needs some decoration to remove my foul smell</span></span><br><span class="line"><span class="comment">#        I am doing some boring work after executing a_func()</span></span><br></pre></td></tr></table></figure><p>ä½ çœ‹æ˜ç™½äº†å—ï¼Ÿæˆ‘ä»¬åˆšåˆšåº”ç”¨äº†ä¹‹å‰å­¦ä¹ åˆ°çš„åŸç†ã€‚è¿™æ­£æ˜¯pythonä¸­è£…é¥°å™¨åšçš„äº‹æƒ…ï¼å®ƒä»¬å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ç”¨è¿™æ ·æˆ–è€…é‚£æ ·çš„æ–¹å¼æ¥ä¿®æ”¹å®ƒçš„è¡Œä¸ºã€‚ç°åœ¨ä½ ä¹Ÿè®¸ç–‘æƒ‘ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œå¹¶æ²¡æœ‰ä½¿ç”¨<code>@</code>ç¬¦å·ï¼Ÿé‚£åªæ˜¯ä¸€ä¸ªç®€çŸ­çš„æ–¹å¼æ¥ç”Ÿæˆä¸€ä¸ªè¢«è£…é¥°çš„å‡½æ•°ã€‚è¿™é‡Œæ˜¯æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨<code>@</code>æ¥è¿è¡Œä¹‹å‰çš„ä»£ç ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@a_new_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">a_function_requiring_decoration</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Hey you! Decorate me!&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to &quot;</span></span><br><span class="line">          <span class="string">&quot;remove my foul smell&quot;</span>)</span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs: I am doing some boring work before executing a_func()</span></span><br><span class="line"><span class="comment">#         I am the function which needs some decoration to remove my foul smell</span></span><br><span class="line"><span class="comment">#         I am doing some boring work after executing a_func()</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">#the @a_new_decorator is just a short way of saying:</span></span><br><span class="line">a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)</span><br></pre></td></tr></table></figure>              </div>            </details><p>è®²è§£æµç¨‹ä¹‹å‰çš„<strong>åŸºæœ¬æ¦‚å¿µ</strong>äº†è§£ä¸€ä¸‹ï¼Œåé¢ä¸è®°å¾—å›æ¥å†çœ‹çœ‹</p><p><strong>x_offset</strong>ï¼šè¡¨ç¤ºç½‘æ ¼å·¦ä¸Šè§’ç›¸å¯¹xè½´çš„è·ç¦»ï¼ˆåç§»é‡ï¼‰<br><strong>y_offset</strong>ï¼šè¡¨ç¤ºç½‘æ ¼å·¦ä¸Šè§’ç›¸å¯¹yè½´çš„è·ç¦»ï¼ˆåç§»é‡ï¼‰</p><p><strong>ä¸Šé‡‡æ ·</strong>ï¼šç¼©å°å›¾åƒï¼ˆæˆ–ç§°ä¸ºä¸‹é‡‡æ ·ï¼ˆsubsampledï¼‰ï¼Œå¦‚æ± åŒ–ï¼‰çš„ä¸»è¦ç›®çš„æœ‰ä¸¤ä¸ªï¼š1ã€ä½¿å¾—å›¾åƒç¬¦åˆæ˜¾ç¤ºåŒºåŸŸçš„å¤§å°ï¼›2ã€ç”Ÿæˆå¯¹åº”å›¾åƒçš„ç¼©ç•¥å›¾ã€‚æ”¾å¤§å›¾åƒï¼ˆæˆ–ç§°ä¸ºä¸Šé‡‡æ ·ï¼ˆupSamplingï¼‰æˆ–å›¾åƒæ’å€¼ï¼ˆinterpolatingï¼‰ï¼‰çš„ä¸»è¦ç›®çš„æ˜¯æ”¾å¤§åŸå›¾åƒ,ä»è€Œå¯ä»¥æ˜¾ç¤ºåœ¨æ›´é«˜åˆ†è¾¨ç‡çš„æ˜¾ç¤ºè®¾å¤‡ä¸Šã€‚</p><p><strong>å…ˆéªŒæ¡†</strong>ï¼ˆanchor boxï¼‰ï¼šå°±æ˜¯å¸®åŠ©æˆ‘ä»¬å®šå¥½äº†å¸¸è§ç›®æ ‡çš„å®½å’Œé«˜ï¼Œåœ¨è¿›è¡Œé¢„æµ‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå·²ç»å®šå¥½çš„å®½å’Œé«˜æ¥è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œé¢„æµ‹ï¼Œä½œç”¨å°±æ˜¯è¾…åŠ©å¤„ç†x_offsetã€y_offsetã€hå’Œwã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨çš„æ˜¯cocoæ•°æ®é›†ï¼Œè¾“å‡ºæ˜¯(13,13,(80+5)*3)ï¼Œä¹˜3è¡¨ç¤ºï¼Œæœ‰3ä¸ªå…ˆéªŒæ¡†ï¼Œæ¯ä¸ªå…ˆéªŒæ¡†éƒ½æœ‰85ä¸ªå‚æ•°ï¼Œä¸‹å›¾å°±æœ‰3ä¸ªè“è‰²æ¡†ï¼Œä¹Ÿå³å…ˆéªŒæ¡†ï¼Œå¯ä»¥ç†è§£æˆç»™ä½ çš„å»ºè®®æ¡†ï¼Œè¯†åˆ«çš„å¯¹è±¡å¯èƒ½åœ¨è¿™äº›å»ºè®®æ¡†ä¸­ï¼Œç›®çš„æ˜¯å¸¦ä½ å¾—åˆ°æ›´é«˜çš„IOUï¼Œå³æ›´é«˜ç½®ä¿¡åº¦ã€æ›´å¯èƒ½æœ‰å¯¹è±¡å¾—éƒ¨åˆ†ï¼Œé»„è‰²æ¡†ä¸ºçœŸå®æœ€åæ˜¾ç¤ºçš„è¾¹ç•Œæ¡†ï¼Œçº¢è‰²æ¡†è¡¨ç¤ºä¸­å¿ƒä½ç½®ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2kroe0h5ah.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2kroe0h5ah.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>ç½®ä¿¡åº¦</strong>ï¼ˆconfidenceï¼‰ï¼šå°±æ˜¯é¢„æµ‹çš„å…ˆéªŒæ¡†å’ŒçœŸå®æ¡†ground truth boxï¼ˆçœŸå®å¯¹è±¡çš„æ¡†ï¼‰çš„IOUå€¼ï¼Œå³å…ˆéªŒæ¡†æ˜¯å¦æœ‰å¯¹è±¡çš„æ¦‚ç‡Pr(Object)ï¼Œå¦‚è¿›è¡Œäººè„¸è¯†åˆ«ï¼Œä¸€å¼ å›¾ä¸­æœ‰æˆ¿å­ï¼Œæ ‘ï¼Œè½¦ï¼Œäººç­‰ï¼Œè¯†åˆ«æ—¶èƒŒæ™¯å’Œäººçš„èº«ä½“éƒ½æ²¡æœ‰è„¸è¿™ä¸ªéœ€è¦è¯†åˆ«çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›åœ°æ–¹çš„ç½®ä¿¡åº¦å°±æ˜¯0ï¼Œæ¡†ä¸­çš„äººè„¸è¶Šå¤šï¼Œç½®ä¿¡åº¦ï¼ˆæœ‰å¯¹è±¡æ¦‚ç‡ï¼‰å°±è¶Šå¤§ï¼Œç½®ä¿¡åº¦æ˜¯æ£€æµ‹ä¸­éå¸¸é‡è¦çš„å‚æ•°</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.5tqsao8853.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.5tqsao8853.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>IOUè¡¨ç¤ºäº¤å¹¶æ¯”</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3razmma7pz.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3razmma7pz.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ®‹å·®ï¼ˆResidualï¼‰ç¥ç»ç½‘ç»œï¼Ÿ</strong><br>ç­”ï¼šç½‘ç»œè¶Šæ·±ï¼Œæ¢¯åº¦æ¶ˆå¤±çš„ç°è±¡å°±è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œç½‘ç»œçš„è®­ç»ƒæ•ˆæœä¹Ÿä¸ä¼šå¾ˆå¥½ã€‚æ®‹å·®ç¥ç»ç½‘ç»œå°±æ˜¯ä¸ºäº†åœ¨åŠ æ·±ç½‘ç»œçš„æƒ…å†µä¸‹åˆè§£å†³æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ã€‚æ®‹å·®ç»“æ„å¯ä»¥ä¸é€šè¿‡å·ç§¯ï¼Œç›´æ¥ä»å‰é¢ä¸€ä¸ªç‰¹å¾å±‚æ˜ å°„åˆ°åé¢çš„ç‰¹å¾å±‚ï¼ˆè·³è·ƒè¿æ¥ï¼‰ï¼Œæœ‰åŠ©äºè®­ç»ƒï¼Œä¹Ÿæœ‰åŠ©äºç‰¹å¾çš„æå–ï¼Œå®¹æ˜“ä¼˜åŒ–ã€‚</p><h2 id="yolov3æ£€æµ‹æµç¨‹åŸç†"><a href="#yolov3æ£€æµ‹æµç¨‹åŸç†" class="headerlink" title="yolov3æ£€æµ‹æµç¨‹åŸç†"></a>yolov3æ£€æµ‹æµç¨‹åŸç†</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.26l8n5exyl.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.26l8n5exyl.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="ç¬¬ä¸€æ­¥ï¼šä»ç‰¹å¾è·å–é¢„æµ‹ç»“æœ"><a href="#ç¬¬ä¸€æ­¥ï¼šä»ç‰¹å¾è·å–é¢„æµ‹ç»“æœ" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šä»ç‰¹å¾è·å–é¢„æµ‹ç»“æœ"></a>ç¬¬ä¸€æ­¥ï¼šä»ç‰¹å¾è·å–é¢„æµ‹ç»“æœ</h3><ol><li><p>yolov3æå–å¤šç‰¹å¾å±‚è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œä¸€å…±æå–ä¸‰ä¸ªç‰¹å¾å±‚ï¼Œä¸‰ä¸ªç‰¹å¾å±‚ä½äºä¸»å¹²ç‰¹å¾æå–ç½‘ç»œdarknet53çš„ä¸åŒä½ç½®ï¼Œåˆ†åˆ«ä½äºä¸­é—´å±‚ï¼Œä¸­ä¸‹å±‚ï¼Œåº•å±‚ï¼Œä¸‰ä¸ªç‰¹å¾å±‚çš„shapeåˆ†åˆ«ä¸º(52,52,256)ã€(26,26,512)ã€(13,13,1024)ï¼Œè¿™ä¸‰ä¸ªç‰¹å¾å±‚åé¢ç”¨äºä¸ä¸Šé‡‡æ ·åçš„å…¶ä»–ç‰¹å¾å±‚å †å æ‹¼æ¥ï¼ˆConcatï¼‰</p></li><li><p>ç¬¬ä¸‰ä¸ªç‰¹å¾å±‚(13,13,1024)è¿›è¡Œ5æ¬¡å·ç§¯å¤„ç†ï¼ˆä¸ºäº†ç‰¹å¾æå–ï¼‰ï¼Œå¤„ç†å®Œåä¸€éƒ¨åˆ†ç”¨äºå·ç§¯+ä¸Šé‡‡æ ·UpSamplingï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºè¾“å‡ºå¯¹åº”çš„é¢„æµ‹ç»“æœï¼ˆ13,13,75ï¼‰ï¼ŒConv2D 3Ã—3å’ŒConv2D1Ã—1ä¸¤ä¸ªå·ç§¯èµ·é€šé“è°ƒæ•´çš„ä½œç”¨ï¼Œè°ƒæ•´æˆè¾“å‡ºéœ€è¦çš„å¤§å°ã€‚</p></li><li><p>å·ç§¯+ä¸Šé‡‡æ ·åå¾—åˆ°(26,26,256)çš„ç‰¹å¾å±‚ï¼Œç„¶åä¸Darknet53ç½‘ç»œä¸­çš„ç‰¹å¾å±‚(26,26,512)è¿›è¡Œæ‹¼æ¥ï¼Œå¾—åˆ°çš„shapeä¸º(26,26,768)ï¼Œå†è¿›è¡Œ5æ¬¡å·ç§¯ï¼Œå¤„ç†å®Œåä¸€éƒ¨åˆ†ç”¨äºå·ç§¯ä¸Šé‡‡æ ·ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºè¾“å‡ºå¯¹åº”çš„é¢„æµ‹ç»“æœ(26,26,75)ï¼ŒConv2D 3Ã—3å’ŒConv2D1Ã—1åŒä¸Šä¸ºé€šé“è°ƒæ•´</p></li><li><p>ä¹‹åå†å°†3ä¸­å·ç§¯+ä¸Šé‡‡æ ·çš„ç‰¹å¾å±‚ä¸shapeä¸º(52,52,256)çš„ç‰¹å¾å±‚æ‹¼æ¥ï¼ˆConcatï¼‰,å†è¿›è¡Œå·ç§¯å¾—åˆ°shapeä¸º(52,52,128)çš„ç‰¹å¾å±‚ï¼Œæœ€åå†Conv2D 3Ã—3å’ŒConv2D1Ã—1ä¸¤ä¸ªå·ç§¯ï¼Œå¾—åˆ°(52,52,75)ç‰¹å¾å±‚</p></li></ol><p>æœ€åå›¾ä¸­æœ‰ä¸‰ä¸ªçº¢æ¡†åŸå› å°±æ˜¯æœ‰äº›ç‰©ä½“ç›¸å¯¹åœ¨å›¾ä¸­è¾ƒå¤§ï¼Œå°±ç”¨13Ã—13æ£€æµ‹ï¼Œç‰©ä½“åœ¨å›¾ä¸­æ¯”è¾ƒå°ï¼Œå°±ä¼šå½’ä¸º52Ã—52æ¥æ£€æµ‹</p><h3 id="ç¬¬äºŒæ­¥ï¼šé¢„æµ‹ç»“æœçš„è§£ç "><a href="#ç¬¬äºŒæ­¥ï¼šé¢„æµ‹ç»“æœçš„è§£ç " class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé¢„æµ‹ç»“æœçš„è§£ç "></a>ç¬¬äºŒæ­¥ï¼šé¢„æµ‹ç»“æœçš„è§£ç </h3><p>é¢„æµ‹ç»“æœè§£ç åŸå› ï¼šé¢„æµ‹ç»“æœ(çº¢æ¡†)å¹¶ä¸å¯¹åº”ç€æœ€ç»ˆçš„é¢„æµ‹æ¡†åœ¨å›¾ç‰‡ä¸Šçš„ä½ç½®ï¼Œè¿˜éœ€è¦è§£ç ï¼‰</p><p>yolov3çš„é¢„æµ‹åŸç†æ˜¯åˆ†åˆ«å°†æ•´å¹…å›¾åˆ†ä¸º13x13ã€26x26ã€52x52çš„ç½‘æ ¼ï¼Œæ¯ä¸ªç½‘ç»œç‚¹è´Ÿè´£ä¸€ä¸ªåŒºåŸŸçš„æ£€æµ‹ã€‚è§£ç è¿‡ç¨‹å°±æ˜¯è®¡ç®—å¾—å‡ºæœ€åæ˜¾ç¤ºçš„è¾¹ç•Œæ¡†çš„åæ ‡bx,byï¼Œä»¥åŠå®½é«˜bw,bhï¼Œè¿™æ ·å°±å¾—å‡ºäº†è¾¹ç•Œæ¡†çš„ä½ç½®ï¼Œè®¡ç®—è¿‡ç¨‹å¦‚å›¾ï¼ˆbâ€“ä¸ºbounding box ç¼©å†™ï¼‰</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1e8d5fao6l.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1e8d5fao6l.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>(cx,cy)ï¼šè¯¥ç‚¹æ‰€åœ¨ç½‘æ ¼çš„å·¦ä¸Šè§’è·ç¦»æœ€å·¦ä¸Šè§’ç›¸å·®çš„æ ¼å­æ•°ã€‚<br>(pw,ph)ï¼šå…ˆéªŒæ¡†çš„è¾¹é•¿<br>(tx,ty)ï¼šç›®æ ‡ä¸­å¿ƒç‚¹ç›¸å¯¹äºè¯¥ç‚¹æ‰€åœ¨ç½‘æ ¼å·¦ä¸Šè§’çš„åç§»é‡<br>(tw,th)ï¼šé¢„æµ‹è¾¹æ¡†çš„å®½å’Œé«˜<br>Ïƒï¼šæ¿€æ´»å‡½æ•°ï¼Œè®ºæ–‡ä½œè€…ç”¨çš„æ˜¯sigmoidå‡½æ•°ï¼Œ[0,1]ä¹‹é—´æ¦‚ç‡ï¼Œä¹‹æ‰€ä»¥ç”¨sigmoidå–ä»£ä¹‹å‰ç‰ˆæœ¬çš„softmaxï¼ŒåŸå› æ˜¯softmaxä¼šæ‰©å¤§æœ€å¤§ç±»åˆ«æ¦‚ç‡å€¼è€ŒæŠ‘åˆ¶å…¶ä»–ç±»åˆ«æ¦‚ç‡å€¼ ï¼Œå›¾è§£å¦‚ä¸‹</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.9rj5rcytb7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.9rj5rcytb7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æ³¨ï¼šæœ€ç»ˆå¾—åˆ°çš„è¾¹æ¡†åæ ‡å€¼æ˜¯bx,by,bw,bh.è€Œç½‘ç»œå­¦ä¹ ç›®æ ‡æ˜¯txï¼Œtyï¼Œtwï¼Œthã€‚<br>å¦å¤–cyå‘ä¸‹æ­¤å¤„ä¸ºæ­£å‘</p><h3 id="ç¬¬ä¸‰æ­¥ï¼šå¯¹é¢„æµ‹å‡ºçš„è¾¹ç•Œæ¡†å¾—åˆ†æ’åºä¸éæå¤§æŠ‘åˆ¶ç­›é€‰"><a href="#ç¬¬ä¸‰æ­¥ï¼šå¯¹é¢„æµ‹å‡ºçš„è¾¹ç•Œæ¡†å¾—åˆ†æ’åºä¸éæå¤§æŠ‘åˆ¶ç­›é€‰" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå¯¹é¢„æµ‹å‡ºçš„è¾¹ç•Œæ¡†å¾—åˆ†æ’åºä¸éæå¤§æŠ‘åˆ¶ç­›é€‰"></a>ç¬¬ä¸‰æ­¥ï¼šå¯¹é¢„æµ‹å‡ºçš„è¾¹ç•Œæ¡†å¾—åˆ†æ’åºä¸éæå¤§æŠ‘åˆ¶ç­›é€‰</h3><p>è¿™æ­¥å°±æ˜¯å°†æœ€å¤§æ¦‚ç‡çš„æ¡†ç­›é€‰å‡ºæ¥<br>1ã€å–å‡ºæ¯ä¸€ç±»å¾—åˆ†å¤§äºä¸€å®šé˜ˆå€¼çš„æ¡†å’Œå¾—åˆ†è¿›è¡Œæ’åºã€‚<br>2ã€åˆ©ç”¨æ¡†çš„ä½ç½®å’Œå¾—åˆ†è¿›è¡Œéæå¤§æŠ‘åˆ¶ã€‚æœ€åå¯ä»¥å¾—å‡ºæ¦‚ç‡æœ€å¤§çš„è¾¹ç•Œæ¡†ï¼Œä¹Ÿå°±æ˜¯æœ€åæ˜¾ç¤ºå‡ºçš„æ¡†<br>å¦‚ä¸‹å‡ å¹…å›¾ï¼Œä¸€æ­¥æ­¥ç­›é€‰å¾—åˆ°æœ€ç»ˆè¾¹ç•Œæ¡†</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> YoloV3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1x1å·ç§¯æ ¸</title>
      <link href="/2024/03/21/1x1%E5%8D%B7%E7%A7%AF%E6%A0%B8/"/>
      <url>/2024/03/21/1x1%E5%8D%B7%E7%A7%AF%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7awxc3fekp.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7awxc3fekp.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><blockquote><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œçš„å·ç§¯å±‚ä¸­ï¼Œä¸åŒçš„é€šé“ä½¿ç”¨çš„å·ç§¯æ ¸å‚æ•°æ˜¯ä¸ä¸€æ ·çš„ã€‚æ¯ä¸ªé€šé“éƒ½æœ‰è‡ªå·±å¯¹åº”çš„å·ç§¯æ ¸å‚æ•°ï¼Œè¿™äº›å‚æ•°ç”¨äºåœ¨è¯¥é€šé“ä¸Šå¯¹è¾“å…¥æ•°æ®è¿›è¡Œæ»¤æ³¢æ“ä½œï¼Œæå–ç‰¹å®šçš„ç‰¹å¾ã€‚<br>é€šé“ä¹‹é—´çš„å·ç§¯æ ¸å‚æ•°æ˜¯ä¸å…±äº«çš„ï¼Œå³æ¯ä¸ªé€šé“éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„å·ç§¯æ ¸å‚æ•°ã€‚è¿™ç§è®¾è®¡å¯ä»¥è®©ç¥ç»ç½‘ç»œæ›´åŠ çµæ´»åœ°å­¦ä¹ ä¸åŒé€šé“ä¹‹é—´çš„ç‰¹å¾è¡¨ç¤ºï¼Œä»è€Œæé«˜ç½‘ç»œçš„è¡¨å¾èƒ½åŠ›ã€‚</p></blockquote><h2 id="1Ã—1-å·ç§¯æ ¸ä½œç”¨"><a href="#1Ã—1-å·ç§¯æ ¸ä½œç”¨" class="headerlink" title="$1Ã—1$å·ç§¯æ ¸ä½œç”¨"></a>$1Ã—1$å·ç§¯æ ¸ä½œç”¨</h2><p><strong>å·ç§¯å±‚ä¸­çš„å·ç§¯æ ¸æ•°é‡å†³å®šäº†è¾“å‡ºçš„é€šé“æ•°ï¼Œè€Œæ¯ä¸ªå·ç§¯æ ¸çš„é€šé“æ•°å–å†³äºè¾“å…¥æ•°æ®çš„é€šé“æ•°</strong></p><ol><li><p><strong>å·ç§¯æ ¸æ•°å†³å®šäº†è¾“å‡ºé€šé“æ•°ï¼š</strong> åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ¯ä¸ªå·ç§¯å±‚åŒ…å«å¤šä¸ªå·ç§¯æ ¸ã€‚æ¯ä¸ªå·ç§¯æ ¸åœ¨è¾“å…¥æ•°æ®ä¸Šè¿›è¡Œå·ç§¯æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„è¾“å‡ºç‰¹å¾å›¾ï¼ˆé€šé“ï¼‰ã€‚å› æ­¤ï¼Œå·ç§¯æ ¸çš„æ•°é‡å†³å®šäº†è¾“å‡ºç‰¹å¾å›¾çš„é€šé“æ•°ã€‚å¦‚æœä¸€ä¸ªå·ç§¯å±‚æœ‰nä¸ªå·ç§¯æ ¸ï¼Œé‚£ä¹ˆè¾“å‡ºå°†åŒ…å«nä¸ªé€šé“ã€‚</p></li><li><p><strong>æ¯ä¸ªå·ç§¯æ ¸çš„é€šé“æ•°å–å†³äºè¾“å…¥çš„é€šé“æ•°ï¼š</strong> å½“å·ç§¯æ ¸åœ¨è¾“å…¥æ•°æ®ä¸Šè¿›è¡Œå·ç§¯æ“ä½œæ—¶ï¼Œæ¯ä¸ªå·ç§¯æ ¸ä¼šåŒæ—¶å¤„ç†è¾“å…¥æ•°æ®çš„æ‰€æœ‰é€šé“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥æ•°æ®æ˜¯RGBå›¾åƒï¼Œæœ‰3ä¸ªé€šé“ï¼ˆçº¢è‰²ã€ç»¿è‰²ã€è“è‰²ï¼‰ï¼Œé‚£ä¹ˆæ¯ä¸ªå·ç§¯æ ¸å°†åŒæ—¶åœ¨è¿™3ä¸ªé€šé“ä¸Šè¿›è¡Œå·ç§¯æ“ä½œã€‚è¿™æ ·ï¼Œæ¯ä¸ªå·ç§¯æ ¸çš„é€šé“æ•°å°±ç­‰äºè¾“å…¥æ•°æ®çš„é€šé“æ•°ã€‚å› æ­¤ï¼Œå·ç§¯æ ¸çš„é€šé“æ•°å–å†³äºè¾“å…¥æ•°æ®çš„é€šé“æ•°ã€‚</p></li></ol><h3 id="å¢åŠ ç½‘ç»œæ·±åº¦-å¢åŠ éçº¿æ€§æ˜ å°„æ¬¡æ•°"><a href="#å¢åŠ ç½‘ç»œæ·±åº¦-å¢åŠ éçº¿æ€§æ˜ å°„æ¬¡æ•°" class="headerlink" title="å¢åŠ ç½‘ç»œæ·±åº¦(å¢åŠ éçº¿æ€§æ˜ å°„æ¬¡æ•°)"></a>å¢åŠ ç½‘ç»œæ·±åº¦(å¢åŠ éçº¿æ€§æ˜ å°„æ¬¡æ•°)</h3><iframe src="//player.bilibili.com/player.html?aid=696259725&bvid=BV11m4y1r7jK&cid=1062261407&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>é¦–å…ˆç›´æ¥ä»ç½‘ç»œæ·±åº¦æ¥ç†è§£ï¼Œ1x1 çš„å·ç§¯æ ¸è™½å°ï¼Œä½†ä¹Ÿæ˜¯å·ç§¯æ ¸ï¼ŒåŠ  1 å±‚å·ç§¯ï¼Œç½‘ç»œæ·±åº¦è‡ªç„¶ä¼šå¢åŠ ã€‚<br>1x1å·ç§¯æ ¸ï¼Œå¯ä»¥åœ¨ä¿æŒfeature mapå°ºåº¦ä¸å˜çš„ï¼ˆå³ä¸æŸå¤±åˆ†è¾¨ç‡ï¼‰çš„å‰æä¸‹å¤§å¹…å¢åŠ éçº¿æ€§ç‰¹æ€§ï¼ˆåˆ©ç”¨åæ¥çš„éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼‰ï¼ŒæŠŠç½‘ç»œåšçš„å¾ˆæ·±ã€‚å¹¶ä¸”1x1å·ç§¯æ ¸çš„å·ç§¯è¿‡ç¨‹ç›¸å½“äºå…¨è¿æ¥çš„è®¡ç®—è¿‡ç¨‹ï¼Œé€šè¿‡<strong>åŠ å…¥éçº¿æ€§æ¿€æ´»å‡½æ•°</strong>ï¼Œå¯ä»¥<strong>å¢åŠ ç½‘ç»œçš„éçº¿æ€§</strong>ï¼Œä½¿å¾—ç½‘ç»œå¯ä»¥è¡¨è¾¾æ›´å¤æ‚çš„ç‰¹å¾ã€‚</p><h4 id="feature-mapçš„å«ä¹‰"><a href="#feature-mapçš„å«ä¹‰" class="headerlink" title="feature mapçš„å«ä¹‰"></a>feature mapçš„å«ä¹‰</h4><p>åœ¨æ¯ä¸ªå·ç§¯å±‚ï¼Œæ•°æ®éƒ½æ˜¯ä»¥ä¸‰ç»´å½¢å¼å­˜åœ¨çš„ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹æˆè®¸å¤šä¸ªäºŒç»´å›¾ç‰‡å åœ¨ä¸€èµ·ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªç§°ä¸ºä¸€ä¸ªfeature mapã€‚åœ¨è¾“å…¥å±‚ï¼Œå¦‚æœæ˜¯ç°åº¦å›¾ç‰‡ï¼Œé‚£å°±åªæœ‰ä¸€ä¸ªfeature mapï¼›å¦‚æœæ˜¯å½©è‰²å›¾ç‰‡ï¼Œä¸€èˆ¬å°±æ˜¯3ä¸ªfeature mapï¼ˆçº¢ç»¿è“ï¼‰ã€‚å±‚ä¸å±‚ä¹‹é—´ä¼šæœ‰è‹¥å¹²ä¸ªå·ç§¯æ ¸ï¼ˆkernelï¼‰ï¼Œä¸Šä¸€å±‚å’Œæ¯ä¸ªfeature mapè·Ÿæ¯ä¸ªå·ç§¯æ ¸åšå·ç§¯ï¼Œéƒ½ä¼šäº§ç”Ÿä¸‹ä¸€å±‚çš„ä¸€ä¸ªfeature mapã€‚</p><p>feature mapï¼ˆä¸‹å›¾çº¢çº¿æ ‡å‡ºï¼‰ å³ï¼šè¯¥å±‚å·ç§¯æ ¸çš„ä¸ªæ•°ï¼Œæœ‰å¤šå°‘ä¸ªå·ç§¯æ ¸ï¼Œç»è¿‡å·ç§¯å°±ä¼šäº§ç”Ÿå¤šå°‘ä¸ªfeature mapï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­ <code>è±†è…çš®å„¿</code>çš„å±‚æ•°ã€åŒæ—¶ä¹Ÿæ˜¯ä¸‹å›¾<code>è±†è…å—</code>çš„æ·±åº¦ï¼ˆå®½åº¦ï¼‰ï¼ï¼è¿™ä¸ªå®½åº¦å¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼Œä¸€èˆ¬ç½‘ç»œè¶Šæ·±çš„åœ°æ–¹è¿™ä¸ªå€¼è¶Šå¤§ï¼Œå› ä¸ºéšç€ç½‘ç»œçš„åŠ æ·±ï¼Œfeature mapçš„é•¿å®½å°ºå¯¸ç¼©å°ï¼Œæœ¬å·ç§¯å±‚çš„æ¯ä¸ªmapæå–çš„ç‰¹å¾è¶Šå…·æœ‰ä»£è¡¨æ€§ï¼ˆç²¾åéƒ¨åˆ†ï¼‰ï¼Œæ‰€ä»¥åä¸€å±‚å·ç§¯å±‚éœ€è¦å¢åŠ feature mapçš„æ•°é‡ï¼Œæ‰èƒ½æ›´å……åˆ†çš„æå–å‡ºå‰ä¸€å±‚çš„ç‰¹å¾ï¼Œä¸€èˆ¬æ˜¯æˆå€å¢åŠ ï¼ˆä¸è¿‡å…·ä½“è®ºæ–‡ä¼šæ ¹æ®å®éªŒæƒ…å†µå…·ä½“è®¾ç½®ï¼‰ï¼</p><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæ¯ä¸ªå·ç§¯å±‚éƒ½åŒ…å«å¤šä¸ªå·ç§¯æ ¸ï¼ˆä¹Ÿç§°ä¸ºæ»¤æ³¢å™¨ï¼‰ï¼Œæ¯ä¸ªå·ç§¯æ ¸ç”Ÿæˆä¸€ä¸ªç‰¹å¾å›¾ã€‚å½“å‰ä¸€å±‚è¾“å‡ºçš„ç‰¹å¾å›¾ä¸åä¸€å±‚å·ç§¯æ ¸è¿›è¡Œå·ç§¯æ“ä½œæ—¶ï¼Œå¯ä»¥çœ‹ä½œæ˜¯åœ¨è¿›è¡ŒçŸ©é˜µç›¸ä¹˜æ“ä½œã€‚å¢åŠ åä¸€å±‚çš„ç‰¹å¾å›¾æ•°é‡å®é™…ä¸Šæ„å‘³ç€å¢åŠ äº†åä¸€å±‚å·ç§¯æ ¸çš„æ•°é‡ï¼Œè¿™å¯ä»¥ä½¿ç½‘ç»œåœ¨è¿›è¡Œç‰¹å¾æå–æ—¶æ‹¥æœ‰æ›´å¤šçš„â€œè¿‡æ»¤å™¨â€ï¼Œä»è€Œæ›´å…¨é¢åœ°æ•è·è¾“å…¥æ•°æ®ä¸­çš„ä¸åŒç‰¹å¾å’Œæ¨¡å¼ã€‚</p><p>å·ç§¯ç‰¹å¾çš„å¯è§†åŒ–ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°ç†è§£æ·±åº¦ç½‘ç»œã€‚å·ç§¯ç½‘ç»œåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¿æŒäº†å›¾åƒçš„ç©ºé—´ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€åä¸€å±‚çš„æ¿€æ´»å€¼ï¼ˆfeature mapï¼‰æ€»å’ŒåŸå§‹å›¾åƒå…·æœ‰ç©ºé—´ä¸Šçš„å¯¹åº”å…³ç³»ï¼Œå…·ä½“å¯¹åº”çš„ä½ç½®ä»¥åŠå¤§å°ï¼Œå¯ä»¥ç”¨æ„Ÿå—é‡æ¥åº¦é‡ã€‚åˆ©ç”¨è¿™ç‚¹æ€§è´¨å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼š</p><ol><li>å‰å‘è®¡ç®—ã€‚æˆ‘ä»¬ç›´æ¥å¯è§†åŒ–ç½‘ç»œæ¯å±‚çš„ feature mapï¼Œç„¶åè§‚å¯Ÿfeature map çš„æ•°å€¼å˜åŒ–. ä¸€ä¸ªè®­ç»ƒæˆåŠŸçš„CNN ç½‘ç»œï¼Œå…¶feature map çš„å€¼ä¼´éšç½‘ç»œæ·±åº¦çš„å¢åŠ ï¼Œä¼šè¶Šæ¥è¶Šç¨€ç–ã€‚è¿™å¯ä»¥ç†è§£ç½‘ç»œå–ç²¾å»ç‡¥ã€‚ <details open><summary pointer> WHYè¶Šæ¥è¶Šç¨€ç– </summary>              <div class='content'>              <p>åœ¨ä¸€ä¸ªè®­ç»ƒæˆåŠŸçš„CNNï¼ˆConvolutional Neural Networkï¼‰ç½‘ç»œä¸­ï¼Œéšç€ç½‘ç»œæ·±åº¦çš„å¢åŠ ï¼Œfeature map çš„å€¼ä¼šè¶Šæ¥è¶Šç¨€ç–çš„ç°è±¡å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹é¢è¿›è¡Œè¯¦ç»†è§£é‡Šï¼š</p><ol><li><p><strong>ç‰¹å¾ç¨€ç–æ€§åœ¨æ·±å±‚ç½‘ç»œä¸­çš„åŸå› </strong>ï¼š</p><ul><li><strong>æ¿€æ´»å‡½æ•°çš„éçº¿æ€§ä½œç”¨</strong>ï¼šåœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œé€šå¸¸åœ¨æ¯ä¸ªå·ç§¯å±‚ä¹‹åéƒ½ä¼šä½¿ç”¨éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼ˆå¦‚ReLUï¼‰ã€‚è¿™ç§éçº¿æ€§æ¿€æ´»ä¼šå¯¼è‡´å¤§éƒ¨åˆ†ç¥ç»å…ƒçš„è¾“å‡ºæ¥è¿‘äº0ï¼Œåªæœ‰éƒ¨åˆ†ç¥ç»å…ƒä¼šæ¿€æ´»å¹¶è¾“å‡ºéé›¶å€¼ï¼Œä»è€Œå¯¼è‡´ feature map çš„ç¨€ç–æ€§ã€‚</li><li><strong>æƒé‡æ›´æ–°å’Œç‰¹å¾é€‰æ‹©</strong>ï¼šéšç€ç½‘ç»œçš„è®­ç»ƒï¼ŒCNN ä¼šæ ¹æ®æŸå¤±å‡½æ•°è¿›è¡Œæƒé‡æ›´æ–°ï¼Œé€šè¿‡å­¦ä¹ æå–å¯¹åˆ†ç±»ä»»åŠ¡æœ‰ç”¨çš„ç‰¹å¾ã€‚åœ¨ç½‘ç»œæ·±åº¦å¢åŠ çš„è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œä¼šæ›´åŠ æ³¨é‡å¯¹å…³é”®ç‰¹å¾çš„æå–ï¼Œè€Œç›¸å¯¹ä¸é‡è¦çš„ç‰¹å¾å¾ˆå¯èƒ½è¢«æŠ‘åˆ¶ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ feature map çš„ç¨€ç–æ€§ã€‚</li></ul></li><li><p><strong>ç¨€ç–ç‰¹å¾å¯¹ç½‘ç»œæ€§èƒ½çš„å½±å“</strong>ï¼š</p><ul><li><strong>æ³›åŒ–èƒ½åŠ›æå‡</strong>ï¼šå­˜å‚¨è¾ƒå°‘çš„æ¿€æ´»å€¼å¯ä»¥å¢åŠ ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ï¼Œå‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ï¼Œå› ä¸ºç½‘ç»œæ›´å¤šåœ°å…³æ³¨äºå¯¹åŒºåˆ†æ€§é‡è¦çš„ç‰¹å¾è¿›è¡Œå­¦ä¹ ã€‚</li><li><strong>è®¡ç®—æ•ˆç‡æé«˜</strong>ï¼šç¨€ç–çš„ç‰¹å¾å›¾åœ¨åç»­çš„å±‚æ¬¡ä¸­å‡å°‘äº†è®¡ç®—é‡ï¼Œå› ä¸ºå¯¹äºå¾ˆå¤šå€¼è¾ƒå°æˆ–æ¥è¿‘äºé›¶çš„ç¥ç»å…ƒï¼Œä¸å¿…æ‰§è¡Œé¢å¤–çš„ä¹˜æ³•è¿ç®—ï¼Œä»è€Œæé«˜äº†ç½‘ç»œçš„è®¡ç®—æ•ˆç‡ã€‚</li></ul></li><li><p><strong>æ·±åº¦å¢åŠ å¯¼è‡´ç‰¹å¾å¤æ‚æ€§</strong>ï¼š</p><ul><li>éšç€ç½‘ç»œæ·±åº¦çš„å¢åŠ ï¼Œç‰¹å¾å›¾è¡¨ç¤ºçš„ç‰¹å¾ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚å’ŒæŠ½è±¡ï¼Œéœ€è¦æ›´å°‘çš„æ¿€æ´»æ¥æè¿°ä¸€ä¸ªé«˜çº§åˆ«çš„ç‰¹å¾ï¼Œè¿™ä¹Ÿé—´æ¥å¯¼è‡´ feature map çš„ç¨€ç–æ€§ã€‚</li></ul></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œéšç€ç½‘ç»œæ·±åº¦çš„å¢åŠ ï¼Œä¸€ä¸ªè®­ç»ƒæˆåŠŸçš„CNN ç½‘ç»œä¸­çš„ feature map çš„å€¼ä¼šå˜å¾—è¶Šæ¥è¶Šç¨€ç–ï¼Œè¿™ä¸»è¦æ˜¯ç”±äºéçº¿æ€§æ¿€æ´»å‡½æ•°çš„ä½œç”¨ã€æƒé‡æ›´æ–°å’Œç‰¹å¾é€‰æ‹©æœºåˆ¶ï¼Œä»¥åŠæ·±å±‚ç½‘ç»œä¸­å¤æ‚ç‰¹å¾çš„è¡¨ç¤ºæ‰€å¯¼è‡´çš„ç»“æœã€‚è¿™ç§ç¨€ç–æ€§æœ‰åŠ©äºæå‡ç½‘ç»œçš„æ³›åŒ–èƒ½åŠ›ã€è®¡ç®—æ•ˆç‡ï¼Œå¹¶åæ˜ äº†ç½‘ç»œå¯¹å…³é”®ç‰¹å¾çš„å­¦ä¹ å’ŒæŠ½è±¡èƒ½åŠ›ã€‚</p><details open><summary pointer> æ¿€æ´»ä¸€ä¸ªç¥ç»å…ƒçš„è¿‡ç¨‹ </summary>          <div class='content'>          <p>æ¿€æ´»ä¸€ä¸ªç¥ç»å…ƒçš„è¿‡ç¨‹å¯ä»¥ç®€å•æè¿°ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>åŠ æƒæ±‚å’Œï¼ˆWeighted Summationï¼‰</strong>ï¼šç¥ç»å…ƒæ¥æ”¶æ¥è‡ªä¸Šä¸€å±‚æˆ–è¾“å…¥æ•°æ®çš„è¾“å…¥ä¿¡å·ï¼Œæ¯ä¸ªè¾“å…¥ä¿¡å·éƒ½ä¼šä¹˜ä»¥å¯¹åº”çš„è¿æ¥æƒé‡ï¼ˆweightsï¼‰ï¼Œç„¶åå°†æ‰€æœ‰åŠ æƒè¾“å…¥ä¿¡å·æ±‚å’Œï¼Œå¾—åˆ°ä¸€ä¸ªåŠ æƒå’Œã€‚è¿™ä¸ªåŠ æƒå’Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š$[ z &#x3D; \sum_{i&#x3D;1}^{n} (w_i \cdot x_i) + b ]$ï¼Œå…¶ä¸­ $(w_i)$ æ˜¯ç¬¬ $(i)$ ä¸ªè¾“å…¥ä¿¡å·çš„æƒé‡ï¼Œ$(x_i)$ æ˜¯å¯¹åº”çš„è¾“å…¥å€¼ï¼Œ$(b)$ æ˜¯ç¥ç»å…ƒçš„åç½®é¡¹ï¼ˆbiasï¼‰ã€‚</p></li><li><p><strong>æ¿€æ´»å‡½æ•°ï¼ˆActivation Functionï¼‰</strong>ï¼šå°†ä¸Šä¸€æ­¥è®¡ç®—å¾—åˆ°çš„åŠ æƒå’Œ$(z)$è¾“å…¥åˆ°æ¿€æ´»å‡½æ•°ä¸­ï¼Œæ¿€æ´»å‡½æ•°ä¼šå¯¹åŠ æƒå’Œè¿›è¡Œéçº¿æ€§å˜æ¢ï¼Œä»è€Œè¾“å‡ºç¥ç»å…ƒçš„æ¿€æ´»å€¼ï¼ˆactivation valueï¼‰ã€‚å¸¸è§çš„æ¿€æ´»å‡½æ•°åŒ…æ‹¬ReLUã€Sigmoidã€Tanhç­‰ã€‚æ¿€æ´»å‡½æ•°å°†å†³å®šç¥ç»å…ƒæ˜¯å¦è¢«æ¿€æ´»ï¼Œä»¥åŠæ¿€æ´»çº§åˆ«å¦‚ä½•ã€‚</p></li><li><p><strong>è¾“å‡ºå€¼ï¼ˆOutputï¼‰</strong>ï¼šæ¿€æ´»å‡½æ•°çš„è¾“å‡ºå€¼å³ä¸ºç¥ç»å…ƒçš„æœ€ç»ˆè¾“å‡ºï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºç¥ç»å…ƒçš„æ¿€æ´»å€¼ã€‚è¿™ä¸ªè¾“å‡ºå€¼å°†ä¼šè¢«ä¼ é€’åˆ°ä¸‹ä¸€å±‚ç¥ç»å…ƒæˆ–ä½œä¸ºæœ€ç»ˆè¾“å‡ºã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œæ¿€æ´»ä¸€ä¸ªç¥ç»å…ƒçš„è¯¦ç»†è¿‡ç¨‹å°±æ˜¯é€šè¿‡åŠ æƒæ±‚å’Œå¾—åˆ°è¾“å…¥ä¿¡å·çš„åŠ æƒå’Œï¼Œç„¶åç»è¿‡æ¿€æ´»å‡½æ•°è¿›è¡Œéçº¿æ€§å˜æ¢å¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºå€¼ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚éƒ½ä¼šè¢«é‡å¤æ‰§è¡Œï¼Œç”¨äºå¤„ç†æ¥è‡ªå‰ä¸€å±‚ç¥ç»å…ƒçš„ä¿¡å·å¹¶ç”Ÿæˆæ–°çš„è¡¨ç¤ºã€‚</p>          </div>        </details>               </div>            </details></li><li>åå‘è®¡ç®—ã€‚æ ¹æ®ç½‘ç»œæœ€åä¸€å±‚æœ€å¼ºçš„æ¿€æ´»å€¼ï¼Œåˆ©ç”¨æ„Ÿå—é‡æ±‚å‡ºåŸå§‹è¾“å…¥å›¾åƒçš„åŒºåŸŸã€‚å¯ä»¥è§‚å¯Ÿè¾“å…¥å›¾åƒçš„é‚£äº›åŒºåŸŸæ¿€æ´»äº†ç½‘ç»œï¼Œåˆ©ç”¨è¿™ä¸ªæ€è·¯å¯ä»¥åšä¸€äº›ç‰©ä½“å®šä½ã€‚</li></ol><h4 id="1x1å·ç§¯æ ¸å¢åŠ ç½‘ç»œæ·±åº¦çš„åŸå› "><a href="#1x1å·ç§¯æ ¸å¢åŠ ç½‘ç»œæ·±åº¦çš„åŸå› " class="headerlink" title="1x1å·ç§¯æ ¸å¢åŠ ç½‘ç»œæ·±åº¦çš„åŸå› "></a>1x1å·ç§¯æ ¸å¢åŠ ç½‘ç»œæ·±åº¦çš„åŸå› </h4><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œ1x1å·ç§¯æ ¸é€šè¿‡åœ¨é€šé“ç»´åº¦ä¸Šè¿›è¡Œå·ç§¯æ“ä½œï¼Œå¯ä»¥èµ·åˆ°å¢åŠ ç½‘ç»œæ·±åº¦çš„ä½œç”¨ã€‚è¿™æ˜¯å› ä¸º1x1å·ç§¯æ ¸å¯ä»¥åœ¨ä¸æ”¹å˜ç©ºé—´å°ºå¯¸çš„æƒ…å†µä¸‹ï¼Œå¢åŠ é€šé“æ•°é‡ï¼Œä»è€Œå¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œæä¾›æ›´å¤šçš„éçº¿æ€§å˜æ¢å’Œè¡¨è¾¾èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯1x1å·ç§¯æ ¸å¦‚ä½•å¢åŠ ç½‘ç»œæ·±åº¦çš„åŸç†ï¼š</p><ol><li><p><strong>é€šé“ç»´åº¦çš„å˜æ¢ï¼š</strong> 1x1å·ç§¯æ ¸çš„ä½œç”¨æ˜¯åœ¨æ¯ä¸ªç©ºé—´ä½ç½®å¯¹è¾“å…¥æ•°æ®çš„é€šé“è¿›è¡Œçº¿æ€§å˜æ¢ã€‚é€šè¿‡å¯¹è¾“å…¥æ•°æ®çš„æ¯ä¸ªé€šé“åˆ†åˆ«è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¯ä»¥ç”Ÿæˆæ–°çš„ç‰¹å¾è¡¨ç¤ºã€‚è¿™æ ·ï¼Œåœ¨1x1å·ç§¯å±‚ä¹‹åï¼Œè¾“å‡ºå°†å…·æœ‰æ›´å¤šçš„é€šé“æ•°ï¼Œå› æ­¤ç½‘ç»œçš„æ·±åº¦ä¹Ÿä¼šå¢åŠ ã€‚</p></li><li><p><strong>å¼•å…¥éçº¿æ€§å˜æ¢ï¼š</strong> å°½ç®¡1x1å·ç§¯æ ¸æ˜¯åœ¨é€šé“ç»´åº¦ä¸Šè¿›è¡Œå·ç§¯æ“ä½œï¼Œä½†å…¶å¼•å…¥çš„éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼ˆå¦‚ReLUï¼‰ä¼šä½¿è¾“å‡ºå…·æœ‰æ›´ä¸°å¯Œçš„ç‰¹å¾è¡¨ç¤ºèƒ½åŠ›ã€‚è¿™ç§éçº¿æ€§å˜æ¢æœ‰åŠ©äºå¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œä½¿ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ åˆ°æ›´å¤æ‚çš„ç‰¹å¾ã€‚</p></li><li><p><strong>å¢åŠ ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›ï¼š</strong> é€šè¿‡1x1å·ç§¯æ ¸å¢åŠ ç½‘ç»œçš„æ·±åº¦ï¼Œç½‘ç»œå¯ä»¥æ›´å¥½åœ°æ•è·ä¸åŒæŠ½è±¡çº§åˆ«çš„ç‰¹å¾ã€‚æ¯ä¸ª1x1å·ç§¯å±‚éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå«æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„å…¨è¿æ¥å±‚ï¼Œå› æ­¤å¯ä»¥æé«˜ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›å’Œå­¦ä¹ èƒ½åŠ›ã€‚</p></li></ol><h4 id="WHYä½¿ç”¨1x1å·ç§¯æ ¸"><a href="#WHYä½¿ç”¨1x1å·ç§¯æ ¸" class="headerlink" title="WHYä½¿ç”¨1x1å·ç§¯æ ¸"></a>WHYä½¿ç”¨1x1å·ç§¯æ ¸</h4><p><strong>å¢åŠ ç½‘ç»œæ·±åº¦æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿä¸ºä»€ä¹ˆéè¦ç”¨ 1x1 æ¥å¢åŠ æ·±åº¦å‘¢ï¼Ÿå…¶å®ƒçš„ä¸å¯ä»¥å—ï¼Ÿ</strong></p><p>å…¶å®ï¼Œè¿™æ¶‰åŠåˆ°<code>æ„Ÿå—é‡</code>(æ„Ÿå—é‡ï¼ˆReceptive Fieldï¼‰çš„å®šä¹‰æ˜¯å·ç§¯ç¥ç»ç½‘ç»œæ¯ä¸€å±‚è¾“å‡ºçš„ç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ä¸Šçš„åƒç´ ç‚¹åœ¨è¾“å…¥å›¾ç‰‡ä¸Šæ˜ å°„çš„åŒºåŸŸå¤§å°)çš„é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“<strong>å·ç§¯æ ¸è¶Šå¤§ï¼Œå®ƒç”Ÿæˆçš„ featuremap ä¸Šå•ä¸ªèŠ‚ç‚¹çš„æ„Ÿå—é‡å°±è¶Šå¤§</strong>ï¼Œéšç€ç½‘ç»œæ·±åº¦çš„å¢åŠ ï¼Œ<strong>è¶Šé åçš„ featuremap ä¸Šçš„èŠ‚ç‚¹æ„Ÿå—é‡ä¹Ÿè¶Šå¤§ã€‚å› æ­¤ç‰¹å¾ä¹Ÿè¶Šæ¥è¶ŠæŠ½è±¡</strong>ã€‚</p><p>ä½†æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åœ¨ä¸å¢åŠ æ„Ÿå—é‡çš„æƒ…å†µä¸‹ï¼Œè®©ç½‘ç»œåŠ æ·±ï¼Œä¸ºçš„å°±æ˜¯å¼•å…¥æ›´å¤šçš„éçº¿æ€§ã€‚</p><p>è€Œ 1x1 å·ç§¯æ ¸ï¼Œæ°å·§å¯ä»¥åŠåˆ°ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå·ç§¯åç”Ÿæˆå›¾ç‰‡çš„å°ºå¯¸å—å·ç§¯æ ¸çš„å¤§å°å’Œè·¨åº¦å½±å“ï¼Œä½†å¦‚æœå·ç§¯æ ¸æ˜¯ 1x1 ï¼Œè·¨åº¦ä¹Ÿæ˜¯ 1ï¼Œé‚£ä¹ˆç”Ÿæˆåçš„å›¾åƒå¤§å°å°±å¹¶æ²¡æœ‰å˜åŒ–ã€‚</p><p>ä½†é€šå¸¸ä¸€ä¸ªå·ç§¯è¿‡ç¨‹åŒ…æ‹¬ä¸€ä¸ªæ¿€æ´»å‡½æ•°ï¼Œæ¯”å¦‚ Sigmoid å’Œ Reluã€‚</p><p>æ‰€ä»¥ï¼Œ<strong>åœ¨è¾“å…¥ä¸å‘ç”Ÿå°ºå¯¸çš„å˜åŒ–ä¸‹ï¼Œå´å¼•å…¥äº†æ›´å¤šçš„éçº¿æ€§</strong>ï¼Œè¿™å°†å¢å¼ºç¥ç»ç½‘ç»œçš„è¡¨è¾¾èƒ½åŠ›</p><h3 id="å‡ç»´-é™ç»´"><a href="#å‡ç»´-é™ç»´" class="headerlink" title="å‡ç»´&#x2F;é™ç»´"></a>å‡ç»´&#x2F;é™ç»´</h3><p>å…¶å®è¿™é‡Œçš„å‡ç»´ã€é™ç»´å…·ä½“æŒ‡çš„æ˜¯é€šé“æ•°çš„å˜åŒ–ï¼Œå½“æˆ‘ä»¬ç¡®å®šäº†å·ç§¯æ ¸å°ºå¯¸åï¼Œæˆ‘ä»¬çš„heightã€widthéƒ½ä¸å˜ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ç»´åº¦å…·ä½“æŒ‡çš„å°±æ˜¯channelsã€‚æˆ‘ä»¬é€šè¿‡æ”¹å˜å·ç§¯æ ¸çš„æ•°é‡æ¥æ”¹å˜å·ç§¯åç‰¹å¾å›¾çš„é€šé“channelsæ¥å®ç°å‡ç»´ã€é™ç»´çš„æ•ˆæœã€‚è¿™æ ·å¯ä»¥å°†åŸæœ¬çš„æ•°æ®é‡è¿›è¡Œå¢åŠ æˆ–è€…å‡å°‘<br>ä¸‹é¢åˆ†åˆ«ä¸¾ä¸¤ä¸ªä¾‹å­å°±èƒ½æ˜æ˜¾çœ‹åˆ°æ•ˆæœ</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4ckn8pum0v.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4ckn8pum0v.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å‡ç»´"><a href="#å‡ç»´" class="headerlink" title="å‡ç»´"></a>å‡ç»´</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3nrdop8yvr.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3nrdop8yvr.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="é™ç»´"><a href="#é™ç»´" class="headerlink" title="é™ç»´"></a>é™ç»´</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2ruw98zwjt.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2ruw98zwjt.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1e8d57p5wp.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1e8d57p5wp.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å…¶å®å¾ˆæ˜æ˜¾çš„èƒ½çœ‹å‡ºæ¥ï¼Œæ— è®ºæ˜¯å‡ç»´è¿˜æ˜¯é™ç»´ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡æ”¹å˜å·ç§¯æ ¸çš„æ•°é‡å®ç°çš„ï¼Œå·ç§¯åçš„ç‰¹å¾å›¾çš„é€šé“æ•°channelsåŒå·ç§¯æ ¸çš„æ•°é‡ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œå…¶å®ä¸ä»…ä»…æ˜¯1x1å·ç§¯æ ¸èƒ½å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå…¶ä»–å°ºå¯¸çš„å·ç§¯æ ¸ä¹Ÿå¯ä»¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦é€‰ç”¨1x1å·ç§¯æ ¸å‘¢</p><h4 id="ä½¿ç”¨1x1å·ç§¯æ ¸å‡ç»´-é™ç»´çš„åŸå› "><a href="#ä½¿ç”¨1x1å·ç§¯æ ¸å‡ç»´-é™ç»´çš„åŸå› " class="headerlink" title="ä½¿ç”¨1x1å·ç§¯æ ¸å‡ç»´&#x2F;é™ç»´çš„åŸå› "></a>ä½¿ç”¨1x1å·ç§¯æ ¸å‡ç»´&#x2F;é™ç»´çš„åŸå› </h4><p>å½“æˆ‘ä»¬ä»…ä»…åªæ˜¯æƒ³è¦æ”¹å˜é€šé“æ•°çš„æƒ…å†µä¸‹ï¼Œ1x1å·ç§¯æ ¸æ˜¯æœ€å°çš„é€‰æ‹©ï¼Œå› ä¸ºå¤§äº1x1çš„å·ç§¯æ ¸æ— ç–‘ä¼šå¢åŠ è®¡ç®—çš„å‚æ•°é‡ï¼Œå†…å­˜ä¹Ÿä¼šéšä¹‹å¢å¤§ï¼Œæ‰€ä»¥åªæƒ³å•çº¯çš„å»æå‡æˆ–è€…é™ä½ç‰¹å¾å›¾çš„é€šé“ï¼Œé€‰ç”¨1x1å·ç§¯æ ¸æœ€ä¸ºåˆé€‚ï¼Œ 1x1å·ç§¯æ ¸ä¼šä½¿ç”¨æ›´å°‘çš„æƒé‡å‚æ•°æ•°é‡ã€‚</p><h3 id="è·¨é€šé“çš„ä¿¡æ¯äº¤äº’"><a href="#è·¨é€šé“çš„ä¿¡æ¯äº¤äº’" class="headerlink" title="è·¨é€šé“çš„ä¿¡æ¯äº¤äº’"></a>è·¨é€šé“çš„ä¿¡æ¯äº¤äº’</h3><p>1x1å·ç§¯æ ¸åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå½“å®ƒä½œç”¨åœ¨å¤šé€šé“çš„feature mapä¸Šæ—¶ï¼Œç›¸å½“äºä¸åŒé€šé“ä¸Šçš„ä¸€ä¸ªçº¿æ€§ç»„åˆï¼Œå®é™…ä¸Šå°±æ˜¯ä¹˜ä»¥ä¸€ä¸ªç³»æ•°å†åŠ èµ·æ¥ï¼Œä½†æ˜¯è¿™æ ·è¾“å‡ºçš„feature mapå°±æ˜¯å¤šä¸ªé€šé“çš„æ•´åˆä¿¡æ¯äº†ï¼Œèƒ½å¤Ÿä½¿ç½‘ç»œæå–çš„ç‰¹å¾æ›´åŠ ä¸°å¯Œã€‚</p><p>ä½¿ç”¨1x1å·ç§¯æ ¸ï¼Œå®ç°é™ç»´å’Œå‡ç»´çš„æ“ä½œå…¶å®å°±æ˜¯ channel é—´ä¿¡æ¯çš„çº¿æ€§ç»„åˆå˜åŒ–ã€‚</p><p>æ¯”å¦‚ï¼šåœ¨å°ºå¯¸ 3x3ï¼Œ64é€šé“ä¸ªæ•°çš„å·ç§¯æ ¸åé¢æ·»åŠ ä¸€ä¸ªå°ºå¯¸1x1ï¼Œ28é€šé“ä¸ªæ•°çš„å·ç§¯æ ¸ï¼Œå°±å˜æˆäº†å°ºå¯¸3x3ï¼Œ28å°ºå¯¸çš„å·ç§¯æ ¸ã€‚ åŸæ¥çš„64ä¸ªé€šé“å°±å¯ä»¥ç†è§£ä¸ºè·¨é€šé“çº¿æ€§ç»„åˆå˜æˆäº†28é€šé“ï¼Œè¿™å°±æ˜¯é€šé“é—´çš„ä¿¡æ¯äº¤äº’ã€‚</p><p>æ³¨æ„ï¼šåªæ˜¯åœ¨é€šé“ç»´åº¦ä¸Šåšçº¿æ€§ç»„åˆï¼ŒWå’ŒHä¸Šæ˜¯å…±äº«æƒå€¼çš„æ»‘åŠ¨çª—å£ã€‚</p><h3 id="å‡å°‘å·ç§¯æ ¸å‚æ•°ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰"><a href="#å‡å°‘å·ç§¯æ ¸å‚æ•°ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰" class="headerlink" title="å‡å°‘å·ç§¯æ ¸å‚æ•°ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰"></a>å‡å°‘å·ç§¯æ ¸å‚æ•°ï¼ˆç®€åŒ–æ¨¡å‹ï¼‰</h3><p>ä¸‹é¢ä»…ä»¥è®¡ç®—æƒé‡æ•°ä¸ºä¾‹å­è¿›è¡Œè®¡ç®—ï¼ˆä¸æ·»åŠ åå·®biasï¼‰</p><h4 id="ä¸€å±‚å·ç§¯æ·»åŠ 1x1å·ç§¯æ ¸ï¼Œåˆ†åˆ«è®¡ç®—æƒé‡æ•°"><a href="#ä¸€å±‚å·ç§¯æ·»åŠ 1x1å·ç§¯æ ¸ï¼Œåˆ†åˆ«è®¡ç®—æƒé‡æ•°" class="headerlink" title="ä¸€å±‚å·ç§¯æ·»åŠ 1x1å·ç§¯æ ¸ï¼Œåˆ†åˆ«è®¡ç®—æƒé‡æ•°"></a>ä¸€å±‚å·ç§¯æ·»åŠ 1x1å·ç§¯æ ¸ï¼Œåˆ†åˆ«è®¡ç®—æƒé‡æ•°</h4><ul><li><p>ä¸ä½¿ç”¨1x1å·ç§¯æ ¸</p>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.839stz0ial.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.839stz0ial.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><p>ä½¿ç”¨1x1å·ç§¯æ ¸</p>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.73tpgsyher.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.73tpgsyher.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul><p>å¯ä»¥çœ‹åˆ°ä¸ä½¿ç”¨1x1çš„å·ç§¯æ ¸æ˜¯ä½¿ç”¨å·ç§¯æ ¸çš„10å€å·¦å³</p><h4 id="GoogLeNetçš„3aæ¨¡å—"><a href="#GoogLeNetçš„3aæ¨¡å—" class="headerlink" title="GoogLeNetçš„3aæ¨¡å—"></a>GoogLeNetçš„3aæ¨¡å—</h4><ul><li>ä¸ä½¿ç”¨1x1å·ç§¯æ ¸  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.58h4o6olfv.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.58h4o6olfv.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.13ljc2ryvv.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.13ljc2ryvv.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>æƒé‡æ•°ï¼š192 Ã— (1Ã—1Ã—64) +192 Ã— (3Ã—3Ã—128) + 192 Ã— (5Ã—5Ã—32) &#x3D; 387072<br>è¿™ä¸ªç½‘ç»œçš„è¯´æ˜å¦‚ä¸‹</li></ul><ol><li>é‡‡ç”¨ä¸åŒå¤§å°çš„å·ç§¯æ ¸æ„å‘³ç€ä¸åŒå¤§å°çš„æ„Ÿå—é‡ï¼Œæœ€åæ‹¼æ¥æ„å‘³ç€ä¸åŒå°ºåº¦ç‰¹å¾çš„èåˆï¼›</li><li>ä¹‹æ‰€ä»¥å·ç§¯æ ¸å¤§å°é‡‡ç”¨1ã€3å’Œ5ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿å¯¹é½ã€‚è®¾å®šå·ç§¯æ­¥é•¿stride&#x3D;1ä¹‹åï¼Œåªè¦åˆ†åˆ«è®¾å®špad&#x3D;0ã€1ã€2ï¼Œé‚£ä¹ˆå·ç§¯ä¹‹åä¾¿å¯ä»¥å¾—åˆ°ç›¸åŒç»´åº¦çš„ç‰¹å¾ï¼Œç„¶åè¿™äº›ç‰¹å¾å°±å¯ä»¥ç›´æ¥æ‹¼æ¥åœ¨ä¸€èµ·äº†ï¼›</li><li>æ–‡ç« è¯´å¾ˆå¤šåœ°æ–¹éƒ½è¡¨æ˜poolingæŒºæœ‰æ•ˆï¼Œæ‰€ä»¥Inceptioné‡Œé¢ä¹ŸåµŒå…¥äº†ã€‚</li><li>ç½‘ç»œè¶Šåˆ°åé¢ï¼Œç‰¹å¾è¶ŠæŠ½è±¡ï¼Œè€Œä¸”æ¯ä¸ªç‰¹å¾æ‰€æ¶‰åŠçš„æ„Ÿå—é‡ä¹Ÿæ›´å¤§äº†ï¼Œå› æ­¤éšç€å±‚æ•°çš„å¢åŠ ï¼Œ3x3å’Œ5x5å·ç§¯çš„æ¯”ä¾‹ä¹Ÿè¦å¢åŠ ã€‚</li></ol><ul><li>ä½¿ç”¨1x1å·ç§¯æ ¸  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2a4ukoith5.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2a4ukoith5.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7zq6w9eiya.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7zq6w9eiya.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul><p>æƒé‡æ•°ï¼š192 Ã— (1Ã—1Ã—64) +ï¼ˆ192Ã—1Ã—1Ã—96+ 96 Ã— 3Ã—3Ã—128ï¼‰+ï¼ˆ192Ã—1Ã—1Ã—16+16Ã—5Ã—5Ã—32ï¼‰&#x3D; 157184</p><p>ä¸ä½¿ç”¨1x1çš„å·ç§¯æ ¸æ˜¯ä½¿ç”¨1x1å·ç§¯æ ¸çš„æƒé‡æ•°2å€</p><h4 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h4><p>ResNetåŒæ ·ä¹Ÿåˆ©ç”¨äº†1Ã—1å·ç§¯ï¼Œå¹¶ä¸”æ˜¯åœ¨3Ã—3å·ç§¯å±‚çš„å‰åéƒ½ä½¿ç”¨äº†ï¼Œä¸ä»…è¿›è¡Œäº†é™ç»´ï¼Œè¿˜è¿›è¡Œäº†å‡ç»´ï¼Œå‚æ•°æ•°é‡è¿›ä¸€æ­¥å‡å°‘</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8ojgga406k.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8ojgga406k.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å…¶ä¸­å³å›¾åˆç§°ä¸º<code>bottleneck design</code>ï¼Œç›®çš„ä¸€ç›®äº†ç„¶ï¼Œå°±æ˜¯ä¸ºäº†é™ä½å‚æ•°çš„æ•°ç›®ï¼Œç¬¬ä¸€ä¸ª1x1çš„å·ç§¯æŠŠ256ç»´channelé™åˆ°64ç»´ï¼Œç„¶ååœ¨æœ€åé€šè¿‡1x1å·ç§¯æ¢å¤ï¼Œ<br>å½“æˆ‘ä»¬çš„ç‰¹å¾å›¾é€šé“æ•°ä¸º256æ—¶ï¼Œå˜å¾—å¾ˆå¤§ï¼Œå‡ºç°çš„é—®é¢˜æ˜¯è®¡ç®—å¤æ‚åº¦ä¼šå¾ˆé«˜ï¼Œè¿™é‡Œåšæ³•æ˜¯é€šè¿‡1Ã—1å·ç§¯æŠ•å½±æ˜ å°„å›64ç»´ï¼Œå†åšä¸€ä¸ª3Ã—3é€šé“æ•°ä¸å˜çš„å·ç§¯ï¼Œç„¶åå†é€šè¿‡1Ã—1å·ç§¯æŠ•å½±å›å»256ç»´ï¼Œå› ä¸ºè¾“å…¥æ˜¯256ç»´ï¼Œè¾“å‡ºè¦åŒ¹é…ä¸Šï¼Œè¿™æ ·è®¾è®¡ä¹‹åå¤æ‚åº¦å°±è·Ÿå·¦å›¾å·®ä¸å¤šäº†ã€‚<br>å·¦å›¾å‚æ•°é‡ï¼š64 x ( 3 x 3 x 64)+64 x ( 3 x 3 x 64 ) &#x3D; 73728<br>å½“é€šé“æ•°å¢åŠ åˆ° 256æ—¶ï¼š256 x ( 3 x 3 x 256 ) + 256 x ( 3 x 3 x 256 ) &#x3D; 1179648<br>å³å›¾å‚æ•°é‡ï¼š256 x ( 1 x 1 x 64) + 64 x ( 3 x 3 x 64 ) + 256 x ( 1 x 1 x 64) &#x3D; 69632</p><p>å½“é€šé“æ•°å¢åŠ ä¸º256æ—¶ï¼Œå¯ä»¥å‘ç°æ·»åŠ ä¸¤å±‚1x1çš„å·ç§¯çš„å‚æ•°é‡å’Œ64ä¸ºåŸæœ‰æ®‹å·®å—å‚æ•°é‡å·®ä¸å¤šã€‚</p><p>å¯¹äºå¸¸è§„ResNetï¼Œå¯ä»¥ç”¨äº34å±‚æˆ–è€…æ›´å°‘çš„ç½‘ç»œä¸­ï¼Œå¯¹äºBottleneck Designçš„ResNeté€šå¸¸ç”¨äºæ›´æ·±çš„ç½‘ç»œä¸­ï¼Œç›®çš„æ˜¯å‡å°‘è®¡ç®—å’Œå‚æ•°é‡ï¼ˆå®ç”¨ç›®çš„ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ®‹å·®ç½‘ç»œ</title>
      <link href="/2024/03/21/%E6%AE%8B%E5%B7%AE%E7%BD%91%E7%BB%9C/"/>
      <url>/2024/03/21/%E6%AE%8B%E5%B7%AE%E7%BD%91%E7%BB%9C/</url>
      
        <content type="html"><![CDATA[<div class="tagLink"><a class="link-card" title="è¯¦è§£æ®‹å·®ç½‘ç»œ" href="https://zhuanlan.zhihu.com/p/42706477"><span class="link-card-backdrop" style="background-image: url(https://pic2.zhimg.com/80/v2-bd76d0f10f84d74f90505eababd3d4a1_1440w.webp)"></span><div class="left"><img src="https://pic2.zhimg.com/80/v2-bd76d0f10f84d74f90505eababd3d4a1_1440w.webp" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-bd76d0f10f84d74f90505eababd3d4a1_1440w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">è¯¦è§£æ®‹å·®ç½‘ç»œ</p><p class="url">https://zhuanlan.zhihu.com/p/42706477</p></div></a></div><h2 id="WHYè¦æœ‰æ®‹å·®ç½‘ç»œ"><a href="#WHYè¦æœ‰æ®‹å·®ç½‘ç»œ" class="headerlink" title="WHYè¦æœ‰æ®‹å·®ç½‘ç»œ"></a><strong>WHYè¦æœ‰æ®‹å·®ç½‘ç»œ</strong></h2><blockquote><ul><li><p>é¦–å…ˆï¼Œå½“ç½‘ç»œå‘ç”Ÿé€€åŒ–æ—¶ï¼Œæ„å‘³ç€éšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ ï¼Œæ¨¡å‹çš„æ€§èƒ½å¹¶æ²¡æœ‰ç›¸åº”åœ°æé«˜ï¼Œç”šè‡³å¯èƒ½å˜å¾—æ›´å·®ã€‚è¿™é€šå¸¸æ˜¯ç”±äºæ¢¯åº¦æ¶ˆå¤±ã€æ¢¯åº¦çˆ†ç‚¸æˆ–è€…æ¨¡å‹ä¼˜åŒ–éš¾åº¦å¢åŠ å¯¼è‡´çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ…å±‚çš„ç½‘ç»œç”±äºæ¨¡å‹å¤æ‚åº¦è¾ƒä½ï¼Œå¯èƒ½æ›´å®¹æ˜“ä¼˜åŒ–ï¼Œå› æ­¤èƒ½å¤Ÿè¾¾åˆ°æ›´å¥½çš„è®­ç»ƒæ•ˆæœã€‚</p></li><li><p>æ¥ä¸‹æ¥ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿ<strong>å°†ä½å±‚çš„ç‰¹å¾æœ‰æ•ˆåœ°ä¼ é€’åˆ°é«˜å±‚</strong>ï¼Œé‚£ä¹ˆé«˜å±‚ç½‘ç»œå°±æœ‰å¯èƒ½åˆ©ç”¨è¿™äº›æœ‰ç”¨çš„ç‰¹å¾æ¥æé«˜æ€§èƒ½ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>ä½å±‚ç½‘ç»œ</strong>é€šå¸¸å­¦ä¹ ä¸€äº›<strong>åŸºæœ¬çš„ã€é€šç”¨çš„ç‰¹å¾</strong>ï¼ˆå¦‚è¾¹ç¼˜ã€çº¹ç†ç­‰ï¼‰ï¼Œè€Œé«˜å±‚ç½‘ç»œåˆ™åœ¨æ­¤åŸºç¡€ä¸Šå­¦ä¹ æ›´å¤æ‚çš„ç‰¹å¾ã€‚å¦‚æœ<strong>é«˜å±‚ç½‘ç»œèƒ½å¤Ÿé‡ç”¨è¿™äº›ä½å±‚çš„ç‰¹å¾ï¼Œé‚£ä¹ˆå®ƒå°±æœ‰å¯èƒ½è¾¾åˆ°ç”šè‡³è¶…è¿‡æµ…å±‚ç½‘ç»œçš„æ€§èƒ½</strong>ã€‚</p></li><li><p>ä»¥VGG-100å’ŒVGG-16ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬åœ¨VGG-100çš„ç¬¬98å±‚å’Œç¬¬14å±‚ä¹‹é—´<strong>æ·»åŠ ä¸€æ¡ç›´æ¥æ˜ å°„</strong>ï¼ˆIdentity Mappingï¼‰ã€‚è¿™æ„å‘³ç€ç¬¬98å±‚çš„è¾“å‡ºå°†åŒ…å«ç¬¬14å±‚çš„è¾“å‡ºä½œä¸ºå…¶ä¸€éƒ¨åˆ†ã€‚<strong>å¦‚æœè¿™æ¡ç›´æ¥æ˜ å°„èƒ½å¤Ÿæœ‰æ•ˆåœ°ä¼ é€’æœ‰ç”¨çš„ç‰¹å¾ï¼Œå¹¶ä¸”é«˜å±‚ç½‘ç»œèƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ©ç”¨è¿™äº›ç‰¹å¾ï¼Œé‚£ä¹ˆVGG-100çš„æ€§èƒ½ç†è®ºä¸Šåº”è¯¥è‡³å°‘ä¸VGG-16ç›¸å½“ï¼Œç”šè‡³å¯èƒ½æ›´å¥½ã€‚</strong></p></li><li><p>ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥æ˜ å°„å¹¶ä¸æ„å‘³ç€ç®€å•åœ°å¤åˆ¶å’Œç²˜è´´ç‰¹å¾ã€‚å®ƒéœ€è¦ä»¥ä¸€ç§æœ‰æ•ˆçš„æ–¹å¼å°†ä½å±‚ç‰¹å¾æ•´åˆåˆ°é«˜å±‚ç½‘ç»œä¸­ï¼Œä»¥ç¡®ä¿é«˜å±‚ç½‘ç»œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨è¿™äº›ç‰¹å¾ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘å¦‚ä½•å¹³è¡¡æ–°æ—§ç‰¹å¾ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠå¦‚ä½•å¤„ç†ç‰¹å¾ç»´åº¦ä¸åŒ¹é…ç­‰é—®é¢˜ã€‚</p></li><li><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç›´æ¥æ˜ å°„çš„ç­–ç•¥å·²ç»åœ¨ä¸€äº›æ·±åº¦å­¦ä¹ æ¶æ„ä¸­å¾—åˆ°äº†åº”ç”¨ï¼Œå¦‚<strong>æ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰å’Œå¯†é›†è¿æ¥ç½‘ç»œï¼ˆDenseNetï¼‰</strong>ã€‚è¿™äº›ç½‘ç»œé€šè¿‡å¼•å…¥æ®‹å·®å—æˆ–å¯†é›†è¿æ¥æ¥å®ç°ç›´æ¥æ˜ å°„ï¼Œä»è€Œæœ‰æ•ˆåœ°ç¼“è§£äº†ç½‘ç»œé€€åŒ–çš„é—®é¢˜ï¼Œå¹¶æé«˜äº†æ¨¡å‹çš„æ€§èƒ½ã€‚</p></li></ul></blockquote><details open><summary pointer> é«˜å±‚ç½‘ç»œ </summary>              <div class='content'>              <blockquote><p>åœ¨ä¸€ä¸ªç¥ç»ç½‘ç»œä¸­ï¼Œç¦»è¾“å…¥å±‚æ›´è¿œçš„ç½‘ç»œå±‚é€šå¸¸è¢«ç§°ä¸ºâ€œæ·±å±‚ç½‘ç»œâ€æˆ–â€œé«˜å±‚ç½‘ç»œâ€ï¼Œå› ä¸ºå®ƒä»¬åœ¨ç½‘ç»œä¸­çš„ä½ç½®æ›´æ·±æˆ–æ›´é è¿‘ç½‘ç»œçš„ä¸­é—´éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¸è¾“å‡ºå±‚ç›¸è¿ã€‚è¿™äº›æ·±å±‚ç½‘ç»œé€šå¸¸åŒ…æ‹¬å¤šä¸ªéšè—å±‚ï¼Œå¹¶ä¸”åœ¨ç½‘ç»œçš„å±‚æ¬¡ç»“æ„ä¸­æ‰®æ¼”é‡è¦çš„è§’è‰²ï¼Œç”¨äºæå–æ›´åŠ æŠ½è±¡å’Œé«˜çº§çš„ç‰¹å¾ä¿¡æ¯ã€‚<br>ä¸€ä¸ªç¥ç»ç½‘ç»œçš„å±‚æ¬¡ç»“æ„é€šå¸¸åŒ…æ‹¬è¾“å…¥å±‚ã€å¤šä¸ªéšè—å±‚ï¼ˆåŒ…æ‹¬æ·±å±‚ç½‘ç»œï¼‰å’Œè¾“å‡ºå±‚ã€‚æ·±å±‚ç½‘ç»œåœ¨éšè—å±‚ä¸­é—´ä½ç½®ï¼Œè¿œç¦»è¾“å…¥å±‚ä½†ä¸æ˜¯é è¿‘è¾“å‡ºå±‚ï¼Œå› ä¸ºæ·±å±‚ç½‘ç»œé€šå¸¸åœ¨å¤šå±‚ç¥ç»ç½‘ç»œçš„ç»“æ„ä¸­å¤„äºä¸­é—´ä½ç½®ã€‚<br>å› æ­¤ï¼Œæ·±å±‚ç½‘ç»œä½äºè¾“å…¥å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´ï¼Œé€šè¿‡å¤šä¸ªéšè—å±‚å¤„ç†è¾“å…¥æ•°æ®ï¼Œé€æ­¥æå–å’Œå­¦ä¹ ç‰¹å¾ï¼Œæœ€ç»ˆä¸ºè¾“å‡ºå±‚æä¾›ç»è¿‡å¤šæ¬¡éçº¿æ€§å˜æ¢åçš„è¡¨ç¤ºä»¥å®Œæˆå…·ä½“ä»»åŠ¡ã€‚æ·±åº¦å­¦ä¹ æ¨¡å‹çš„æ·±åº¦é€šå¸¸æŒ‡çš„æ˜¯éšè—å±‚çš„å±‚æ•°ï¼Œè€Œæ·±å±‚ç½‘ç»œåˆ™æ˜¯æŒ‡åŒ…å«å¤šä¸ªéšè—å±‚çš„éƒ¨åˆ†ã€‚</p></blockquote><blockquote><p>é«˜å±‚ç½‘ç»œï¼ˆå³æ·±å±‚ç½‘ç»œï¼‰åœ¨æ·±åº¦å­¦ä¹ ä¸­å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li><p><strong>å¤šå±‚ç»“æ„</strong>ï¼šé«˜å±‚ç½‘ç»œç”±å¤šä¸ªéšè—å±‚ç»„æˆï¼Œæ¯ä¸€å±‚éƒ½åŒ…å«å¤§é‡çš„ç¥ç»å…ƒã€‚é€šè¿‡å¤šå±‚ç»“æ„ï¼Œç½‘ç»œå¯ä»¥å­¦ä¹ å’Œè¡¨ç¤ºæ›´åŠ å¤æ‚å’ŒæŠ½è±¡çš„ç‰¹å¾ã€‚</p></li><li><p><strong>å±‚é—´è¿æ¥</strong>ï¼šä¸åŒå±‚ä¹‹é—´çš„ç¥ç»å…ƒç›¸äº’è¿æ¥ï¼Œä¿¡æ¯é€å±‚ä¼ é€’ã€‚æ¯ä¸€å±‚çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥ï¼Œé€šè¿‡å±‚é—´è¿æ¥å®ç°ç‰¹å¾çš„ç»„åˆå’ŒæŠ½è±¡ã€‚</p></li><li><p><strong>ç‰¹å¾æå–</strong>ï¼šé«˜å±‚ç½‘ç»œå¯ä»¥é€šè¿‡å¤šä¸ªéšè—å±‚é€æ­¥æå–æ•°æ®ä¸­çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»ä½çº§ç‰¹å¾åˆ°é«˜çº§ç‰¹å¾çš„é€æ¸æŠ½è±¡è¿‡ç¨‹æœ‰åŠ©äºç½‘ç»œå­¦ä¹ æ›´æ·±å±‚æ¬¡çš„è¡¨ç¤ºã€‚</p></li><li><p><strong>è¡¨å¾å­¦ä¹ </strong>ï¼šé€šè¿‡æ·±åº¦å­¦ä¹ ï¼Œé«˜å±‚ç½‘ç»œå¯ä»¥è‡ªåŠ¨å­¦ä¹ è¡¨ç¤ºæ•°æ®çš„ç‰¹å¾ï¼Œè€Œæ— éœ€æ‰‹å·¥è®¾è®¡ç‰¹å¾æå–å™¨ã€‚è¿™ç§è¡¨å¾å­¦ä¹ çš„æ–¹å¼èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒç±»å‹çš„æ•°æ®å’Œä»»åŠ¡ã€‚</p></li><li><p><strong>éçº¿æ€§å˜æ¢</strong>ï¼šé«˜å±‚ç½‘ç»œé€šè¿‡æ¿€æ´»å‡½æ•°å¼•å…¥éçº¿æ€§å˜æ¢ï¼Œä½¿ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å’Œè¡¨ç¤ºæ›´åŠ å¤æ‚çš„å‡½æ•°å…³ç³»ã€‚éçº¿æ€§æ¿€æ´»å‡½æ•°å¦‚ReLUã€Sigmoidç­‰æœ‰åŠ©äºç½‘ç»œå­¦ä¹ éçº¿æ€§æ¨¡å¼ã€‚</p></li><li><p><strong>ç«¯å¯¹ç«¯å­¦ä¹ </strong>ï¼šé«˜å±‚ç½‘ç»œæ”¯æŒç«¯å¯¹ç«¯å­¦ä¹ ï¼Œå³ä»åŸå§‹è¾“å…¥æ•°æ®ç«¯åˆ°æœ€ç»ˆè¾“å‡ºç»“æœç«¯çš„å…¨è¿‡ç¨‹è®­ç»ƒã€‚è¿™ç§ç«¯å¯¹ç«¯å­¦ä¹ èƒ½å¤Ÿæ›´å¥½åœ°ä¼˜åŒ–æ•´ä¸ªæ¨¡å‹ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›å’Œæ€§èƒ½ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œé«˜å±‚ç½‘ç»œçš„ç‰¹ç‚¹åŒ…æ‹¬å¤šå±‚ç»“æ„ã€ç‰¹å¾æå–ã€è¡¨å¾å­¦ä¹ ã€éçº¿æ€§å˜æ¢ç­‰ï¼Œä½¿å¾—æ·±åº¦å­¦ä¹ æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”å’Œè§£å†³å¤æ‚çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ã€‚</p></blockquote><blockquote><p>åœ¨æ·±åº¦ç¥ç»ç½‘ç»œä¸­ï¼Œä¸€æ—¦åˆ°è¾¾æœ€æ·±å±‚çº§ï¼Œé€šå¸¸ä¼šå¯¹ç½‘ç»œè¿›è¡Œä¸€äº›æ“ä½œï¼Œä»¥é™ä½ç½‘ç»œçš„æ·±åº¦æˆ–å‡å°‘å‚æ•°æ•°é‡ï¼Œä½¿æ¥ä¸‹æ¥çš„å±‚çº§é€æ¸å˜æµ…ã€‚è¿™äº›æ“ä½œåŒ…æ‹¬ï¼š</p><ol><li><p><strong>é™é‡‡æ ·ï¼ˆDownsamplingï¼‰</strong>ï¼šé€šè¿‡æ± åŒ–æ“ä½œï¼ˆå¦‚æœ€å¤§æ± åŒ–æˆ–å¹³å‡æ± åŒ–ï¼‰æˆ–æ­¥é•¿è¾ƒå¤§çš„å·ç§¯æ“ä½œæ¥å‡å°‘ç‰¹å¾å›¾çš„å®½åº¦å’Œé«˜åº¦ï¼Œä»è€Œå‡å°‘ä¸‹ä¸€å±‚çš„ç¥ç»å…ƒæ•°é‡ã€‚</p></li><li><p><strong>ç‰¹å¾åˆå¹¶ï¼ˆFeature Concatenationï¼‰</strong>ï¼šå°†å‰å‡ å±‚æå–çš„é«˜çº§ç‰¹å¾ä¸æµ…å±‚ç‰¹å¾è¿›è¡Œè¿æ¥æˆ–æ‹¼æ¥ï¼Œä½¿å¾—ç½‘ç»œåœ¨æ¥ä¸‹æ¥å±‚çº§ä¸­ä¸éœ€è¦å†å­¦ä¹ è¿™äº›é«˜çº§ç‰¹å¾ï¼Œä»è€Œå‡å°‘ç½‘ç»œçš„æ·±åº¦ã€‚</p></li><li><p><strong>ç‰¹å¾é€‰æ‹©ï¼ˆFeature Selectionï¼‰</strong>ï¼šå¯¹äºæŸäº›ç‰¹å¾è¿›è¡Œç­›é€‰æˆ–é™ç»´ï¼Œåªä¿ç•™æœ€é‡è¦çš„ç‰¹å¾ï¼Œå¯ä»¥é€šè¿‡é™ç»´æŠ€æœ¯ï¼ˆå¦‚ä¸»æˆåˆ†åˆ†æï¼‰æ¥å®ç°ã€‚</p></li><li><p><strong>æ®‹å·®è¿æ¥ï¼ˆResidual Connectionsï¼‰</strong>ï¼šåœ¨æ®‹å·®ç½‘ç»œï¼ˆResNetï¼‰ä¸­ä½¿ç”¨æ®‹å·®è¿æ¥ï¼Œä½¿å¾—æ·±å±‚ç½‘ç»œå¯ä»¥é€šè¿‡è·³è¿‡è¿æ¥è·å¾—æµ…å±‚ç½‘ç»œçš„ä¿¡æ¯ï¼Œä»è€Œå‡å°‘æ·±å±‚ç½‘ç»œçš„å †å å±‚æ•°ã€‚</p></li><li><p><strong>ç‰¹å¾æ˜ å°„ï¼ˆFeature Mappingï¼‰</strong>ï¼šé€šè¿‡å¯¹ç‰¹å¾å›¾è¿›è¡Œé€å±‚æ˜ å°„æˆ–æŠ½å–è¡¨ç¤ºï¼Œå¯ä»¥å°†åŸå§‹çš„æ·±å±‚ç‰¹å¾æ˜ å°„åˆ°æµ…å±‚ç½‘ç»œä¸­ï¼Œå‡å°‘ç½‘ç»œçš„æ·±åº¦ã€‚</p></li></ol><p>è¿™äº›æ“ä½œæ—¨åœ¨æé«˜ç½‘ç»œçš„æ•ˆç‡å’Œæ³›åŒ–èƒ½åŠ›ï¼Œé¿å…æ·±åº¦è¿‡æ·±å¯¼è‡´çš„æ¢¯åº¦æ¶ˆå¤±ã€è®¡ç®—é‡å¢åŠ å’Œè¿‡æ‹Ÿåˆç­‰é—®é¢˜ã€‚é€šè¿‡é€‚å½“çš„æ“ä½œï¼Œå¯ä»¥ä½¿æ·±åº¦ç¥ç»ç½‘ç»œåœ¨ä¿æŒè‰¯å¥½æ€§èƒ½çš„åŒæ—¶ï¼Œå‡å°‘æ·±åº¦æˆ–å±‚çº§ï¼Œæé«˜ç½‘ç»œçš„è®­ç»ƒæ•ˆç‡å’Œæ€§èƒ½ã€‚</p></blockquote>              </div>            </details><details open><summary pointer> CNNä¸­çš„åº•å±‚ã€é«˜å±‚ç‰¹å¾ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ã€å¤šå°ºåº¦ </summary>              <div class='content'>              <ol><li><p><strong>CNNä¸­çš„åº•å±‚ã€é«˜å±‚ç‰¹å¾:</strong></p><p> ç®€çŸ­æ€»ç»“ï¼š åˆ†ç±»è¦æ±‚ç‰¹å¾æœ‰è¾ƒå¤šçš„é«˜çº§ä¿¡æ¯ï¼Œå›å½’ï¼ˆå®šä½ï¼‰è¦æ±‚ç‰¹å¾åŒ…å«æ›´å¤šçš„ç»†èŠ‚ä¿¡æ¯</p><ul><li><p><strong>å›¾åƒçš„ä½å±‚ç‰¹å¾</strong>ï¼ˆå¯¹å®šä½ä»»åŠ¡å¸®åŠ©å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³æƒ³æ¯”å¦‚è½®å»“ä¿¡æ¯éƒ½ä¸å‡†é‚£æ€ä¹ˆå»è‰¯å¥½å®šä½ï¼‰:</p><p>  å›¾åƒåº•å±‚ç‰¹å¾æŒ‡çš„æ˜¯ï¼šè½®å»“ã€è¾¹ç¼˜ã€é¢œè‰²ã€çº¹ç†ã€æ£±è§’å’Œå½¢çŠ¶ç‰¹å¾ã€‚</p><p>  è¾¹ç¼˜å’Œè½®å»“èƒ½åæ˜ å›¾åƒå†…å®¹ï¼›å¦‚æœèƒ½å¯¹è¾¹ç¼˜å’Œå…³é”®ç‚¹è¿›è¡Œå¯é æå–çš„è¯ï¼Œå¾ˆå¤šè§†è§‰é—®é¢˜å°±åŸºæœ¬ä¸Šå¾—åˆ°äº†è§£å†³ã€‚å›¾åƒçš„ä½å±‚çš„ç‰¹å¾è¯­ä¹‰ä¿¡æ¯æ¯”è¾ƒå°‘ï¼Œä½†è¶Šæµ…çš„å±‚ç‰¹å¾è¶Šç»†èŠ‚ï¼ˆä½çº§ï¼‰ä¸”ç‰¹å¾å›¾åˆ†è¾¨ç‡å¤§ï¼Œæ‰€ä»¥ä½ç½®ä¿¡æ¯å¾ˆå……è¶³ï¼Œç›®æ ‡ä½ç½®å‡†ç¡®ã€‚å†ä»å¦ä¸€ä¸ªæ–¹é¢è®²ï¼Œè¶Šæµ…å±‚çš„ç‰¹å¾æ„Ÿå—é‡è¶Šå°ï¼ˆæ¯ä¸ªåƒç´ ç‚¹æ˜ å°„å›åŸå›¾çš„è¦†ç›–é¢ç§¯å°ï¼‰ï¼Œæ•…ç”¨æµ…å±‚ç‰¹å¾å›¾æ£€æµ‹å¤§ç›®æ ‡æ—¶å°±æœ‰ç‚¹åƒçå­æ‘¸è±¡çš„æ„Ÿè§‰æ•ˆæœå¹¶ä¸å¥½ï¼Œå› ä¸ºå…‰èƒ½çœ‹åˆ°è±¡è…¿ä¹Ÿä¸çŸ¥é“è¿™æ˜¯å•¥ä¸œè¥¿ã€‚å½“ç„¶å¯¹äºå°ç›®æ ‡æ£€æµ‹æ¥è¯´å¦‚æœèƒ½åˆ©ç”¨è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¹Ÿæ˜¯æœ‰å¥½å¤„çš„ï¼ä¾‹å¦‚ï¼Œé€šè¿‡åªçœ‹å›¾ä¸­çš„ä¸€ä¸ªå°ç›®æ ‡æ‰€åœ¨çš„é‚£ä¸ªä½ç½®ï¼Œäººç±»ç”šè‡³å¾ˆéš¾è¯†åˆ«è¿™äº›ç‰©ä½“ã€‚ç„¶è€Œï¼Œé€šè¿‡è€ƒè™‘åˆ°å®ƒä½äºå¤©ç©ºä¸­çš„èƒŒæ™¯ï¼Œè¿™ä¸ªç‰©ä½“å¯ä»¥è¢«è¯†åˆ«ä¸ºé¸Ÿç±»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®å–å†³äºæˆ‘ä»¬å¦‚ä½•å°†ä¸Šä¸‹æ–‡ä½œä¸ºé¢å¤–ä¿¡æ¯æ¥å¸®åŠ©æ£€æµ‹å°ç›®æ ‡ã€‚</p></li><li><p><strong>å›¾åƒçš„é«˜å±‚ç‰¹å¾</strong>ä¹Ÿå«è¯­ä¹‰ç‰¹å¾ï¼ˆé«˜å±‚ç‰¹å¾å³CNNä¸­ç½‘ç»œè¶Šæ·±çš„å±‚å¾—åˆ°çš„ç‰¹å¾ï¼Œé«˜å±‚çš„ç‰¹å¾åŒ…å«å¾ˆä¸°å¯Œçš„ç»„åˆä¿¡æ¯ï¼Œè±¡å¾ç€äººå¯¹å®ƒçš„åˆ†è¾¨èƒ½åŠ›ï¼Œè¶Šé«˜å±‚è¶Šå¥½åˆ†è¾¨å‡ºæ˜¯å•¥ä¸œè¥¿ï¼Œå¦‚è¡¨å¾ç€ç±»åˆ«å•¥çš„ï¼Œå¯¹è¯†åˆ«ä»»åŠ¡å¸®åŠ©å¤§ï¼‰:</p></li></ul><p> å›¾åƒçš„é«˜å±‚è¯­ä¹‰ç‰¹å¾å€¼å¾—æ˜¯æˆ‘ä»¬æ‰€èƒ½çœ‹çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¯¹ä¸€å¼ äººè„¸æå–ä½å±‚ç‰¹å¾æˆ‘ä»¬å¯ä»¥æå–åˆ°è¿çš„è½®å»“ã€é¼»å­ã€çœ¼ç›ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆé«˜å±‚çš„ç‰¹å¾å°±æ˜¾ç¤ºä¸ºä¸€å¼ äººè„¸ã€‚é«˜å±‚çš„ç‰¹å¾è¯­ä¹‰ä¿¡æ¯æ¯”è¾ƒä¸°å¯Œï¼Œä½†æ˜¯ç›®æ ‡ä½ç½®æ¯”è¾ƒç²—ç•¥ã€‚</p><p> æ„ˆæ·±å±‚ç‰¹å¾åŒ…å«çš„é«˜å±‚è¯­ä¹‰æ€§æ„ˆå¼ºã€åˆ†è¾¨èƒ½åŠ›ä¹Ÿæ„ˆå¼ºã€‚æˆ‘ä»¬æŠŠå›¾åƒçš„è§†è§‰ç‰¹å¾ç§°ä¸ºè§†è§‰ç©ºé—´ (visual space)ï¼ŒæŠŠç§ç±»çš„è¯­ä¹‰ä¿¡æ¯ç§°ä¸ºè¯­ä¹‰ç©ºé—´ (semantic space)</p></li><li><p><strong>ä¸Šä¸‹æ–‡ä¿¡æ¯</strong></p><p> åšå›¾åƒçš„ï¼Œä¸Šä¸‹æ–‡ç‰¹å¾æ˜¯å¾ˆå¸¸è§çš„ï¼Œå…¶å®ä¸Šä¸‹æ–‡å¤§æ¦‚å»ç†è§£å°±æ˜¯å›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹ä¸å¯èƒ½æ˜¯å­¤ç«‹çš„ï¼Œä¸€ä¸ªåƒç´ ä¸€å®šå’Œå‘¨å›´åƒç´ æ˜¯æœ‰ä¸€å®šçš„å…³ç³»çš„ï¼Œå¤§é‡åƒç´ çš„äº’ç›¸è”ç³»æ‰äº§ç”Ÿäº†å›¾åƒä¸­çš„å„ç§ç‰©ä½“ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡ç‰¹å¾å°±æŒ‡åƒç´ ä»¥åŠå‘¨è¾¹åƒç´ çš„æŸç§è”ç³»ã€‚</p><p> å…·ä½“åˆ°å›¾åƒè¯­ä¹‰åˆ†å‰²ï¼Œä¸€èˆ¬è®ºæ–‡ä¼šè¯´æˆ‘ä»¬çš„XXXç®—æ³•å……åˆ†ç»“åˆäº†ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ„æ€ä¹Ÿå°±æ˜¯åœ¨åˆ¤æ–­æŸä¸€ä¸ªä½ç½®ä¸Šçš„åƒç´ å±äºå“ªç§ç±»åˆ«çš„æ—¶å€™ï¼Œä¸ä»…è€ƒå¯Ÿåˆ°è¯¥åƒç´ çš„ç°åº¦å€¼ï¼Œè¿˜å……åˆ†è€ƒè™‘å’Œå®ƒä¸´è¿‘çš„åƒç´ ã€‚</p><p> ç„¶åä¸Šä¸‹æ–‡ä¿¡æ¯è¿˜åˆ†å…¨å±€å’Œå±€éƒ¨ï¼Œæ„æ€å°±æ˜¯è€ƒè™‘å…¨å›¾ä¸åŒèŒƒå›´å†…çš„åƒç´ å’Œåªè€ƒè™‘é‚»è¿‘çš„ä¸€äº›åƒç´ ã€‚</p><p> å…¨å±€ä¸Šä¸‹æ–‡ä¿¡æ¯ ä¹Ÿå¯ä»¥ç†è§£ä¸ºèƒ½å¤Ÿæ•æ‰æ¥è‡ªæ›´å¤šçš„ä¸åŒå°ºåº¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¸åŒå°ºåº¦å°±æ˜¯æŒ‡ä¸åŒæ„Ÿå—é‡ã€‚</p></li><li><p><strong>å¤šå°ºåº¦</strong></p><p> ä¸ªäººæ„Ÿè§‰ï¼Œå¤šå°ºåº¦ å°±æ˜¯ ä½ èƒ½çœ‹åˆ°çš„èŒƒå›´ï¼ˆçœ‹åˆ°å°ºåº¦å°±ç†è§£ä¸ºCNNçš„æ„Ÿå—é‡å°±å®Œäº‹äº†ï¼ï¼ï¼ï¼‰ã€‚</p><p> å›¾åƒä¸­ä¸€ä¸ªä¸œè¥¿çš„å°ºåº¦è¶Šå¤§ï¼Œå°±æŒ‡è·ç¦»è¶Šè¿‘ç›¸å½“äºè¢«æ”¾å¤§äº†ï¼Œé‚£ä¹ˆç»™äººæ„Ÿè§‰å°±è¶Šæ¨¡ç³Šã€‚ä¾‹å¦‚ï¼š</p><ul><li><p>è®­ç»ƒçš„æ—¶å€™ï¼ŒæŠŠå›¾ç‰‡ç¼©æ”¾åˆ°ä¸åŒå¤§å°è¾“å…¥ç»™åŒä¸€ä¸ªç½‘ç»œï¼Œç½‘ç»œå°±èƒ½çœ‹åˆ°ä¸ä¸€æ ·å¤§å°èŒƒå›´çš„å†…å®¹ï¼Œç¼©æ”¾å¾—åˆ†è¾¨ç‡è¶Šé«˜å°±æŒ‡å°ºåº¦è¶Šå¤§ï¼Œå› ä¸ºå¯¹å›¾ä¸­çš„æŸä¸€ä¸ªç‰©ä½“æ¥è®²å°±æ˜¯è¢«æ”¾å¤§çš„æ„Ÿè§‰ã€‚ç„¶åå°±æ˜¯å› ä¸ºç¼©æ”¾åï¼Œæ¯”å¦‚ä¸­é—´ç‰¹å¾å›¾ä¸Šçš„æŸä¸ªåƒç´ ç‚¹éƒ½åªèƒ½çœ‹åˆ°åŸå›¾3ä¹˜3çš„åŒºåŸŸï¼Œå¯éšç€è¾“å…¥çš„å›¾ç‰‡å°ºåº¦ä¸ä¸€æ ·ï¼ŒåŒæ ·æ˜¯çœ‹åˆ°çš„3ä¹˜3åŒºåŸŸï¼Œä½†ç›¸å¯¹äºæ•´å¼ å›¾çš„èŒƒå›´ä¹Ÿè‡ªç„¶å°±ä¸ä¸€æ ·äº†ï¼Œç„¶åå°±å«åšå¤šå°ºåº¦è®­ç»ƒï¼›å¥½å¤„æ˜¯å¯ä»¥é€‚åº”ä¸åŒå°ºåº¦çš„è¾“å…¥ï¼Œæ³›åŒ–æ€§å¥½ã€‚</p></li><li><p>æŠŠä¸€ä¸ªç‰¹å¾å±‚ç”¨ç”±ä¸åŒæ„Ÿå—é‡çš„å·ç§¯æ ¸ç»„æˆçš„ç½‘ç»œå±‚ï¼ˆä¾‹å¦‚SPPï¼‰å¤„ç†ï¼Œè¿™å±‚ç½‘ç»œçš„åŒä¸€ä¸ªåƒç´ ä½ç½®å°±èƒ½çœ‹åˆ°ä¸åŒèŒƒå›´çš„ä¸Šå±‚ç‰¹å¾ï¼Œå°±å«åšå¤šå°ºåº¦ç‰¹å¾èåˆï¼›å¥½å¤„æ˜¯èƒ½è€ƒè™‘åˆ°ä¸åŒèŒƒå›´çš„ç©ºé—´ç‰¹å¾ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚å¤´å‘ä¸‹é¢ä¸€èˆ¬ä¼šæœ‰ä¸€å¼ è„¸ï¼‰ã€‚</p></li><li><p>æŠŠä¸€ä¸ªç½‘ç»œä¸­ä¸åŒæ·±åº¦çš„å±‚åšèåˆï¼šæµ…å±‚æ„Ÿå—é‡å°ï¼Œåˆ†è¾¨ç‡å¤§ï¼Œèƒ½å¤Ÿå¤„ç†å¹¶ä¿å­˜å°å°ºåº¦çš„å‡ ä½•ç‰¹å¾ï¼›é«˜å±‚æ„Ÿå—é‡å¤§ï¼Œåˆ†è¾¨ç‡å°ï¼Œèƒ½å¤Ÿå¤„ç†å¹¶ä¿å­˜å¤§å°ºåº¦çš„è¯­ä¹‰ç‰¹å¾ã€‚è¿™ä¹Ÿå«åšå¤šå°ºåº¦ç‰¹å¾èåˆï¼›å¥½å¤„æ˜¯èƒ½å¤Ÿå°†è¯­ä¹‰ç‰¹å¾å’Œå‡ ä½•ç‰¹å¾è¿›è¡Œèåˆï¼ˆä¾‹å¦‚è¿™å—åŒºåŸŸæ˜¯å¤´å‘ï¼Œä½åˆ†è¾¨ç‡å›¾ä¸Šçš„åˆ†ç•Œçº¿ä¸€èˆ¬æ˜¯çº¿çŠ¶ç‰¹å¾å’Œéçº¿çŠ¶ç‰¹å¾çš„è¾¹ç•Œï¼‰ã€‚</p></li></ul></li></ol>              </div>            </details><blockquote><p>ä»ä¿¡æ¯è®ºçš„è§’åº¦è®²ï¼Œç”±äºDPI(æ•°æ®å¤„ç†ä¸ç­‰å¼)çš„å­˜åœ¨ï¼Œåœ¨å‰å‘ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œéšç€å±‚æ•°çš„åŠ æ·±ï¼ŒFeature MapåŒ…å«çš„å›¾åƒä¿¡æ¯ä¼šé€å±‚å‡å°‘ï¼Œè€ŒResNetçš„ç›´æ¥æ˜ å°„çš„åŠ å…¥ï¼Œä¿è¯äº†$l+1$å±‚çš„ç½‘ç»œä¸€å®šæ¯”$l$å±‚åŒ…å«æ›´å¤šçš„å›¾åƒä¿¡æ¯ã€‚</p><details open><summary pointer> è§£é‡Š </summary>              <div class='content'>              <p>ä¿è¯äº†$l+1$å±‚çš„ç½‘ç»œä¸€å®šæ¯”lå±‚åŒ…å«æ›´å¤šçš„å›¾åƒä¿¡æ¯ï¼Œè¿™æ˜¯å› ä¸ºç›´æ¥æ˜ å°„ï¼ˆæ’ç­‰æ˜ å°„ï¼‰å°†å‰ä¸€å±‚çš„ä¿¡æ¯æ— æŸåœ°ä¼ é€’åˆ°äº†åä¸€å±‚ï¼Œç¡®ä¿äº†ä¿¡æ¯çš„å®Œæ•´æ€§ã€‚åŒæ—¶ï¼Œç”±äºæ®‹å·®éƒ¨åˆ†çš„å­˜åœ¨ï¼Œç½‘ç»œå¯ä»¥å­¦ä¹ è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å·®å€¼ï¼Œå³æ®‹å·®ã€‚è¿™ä¸ªæ®‹å·®éƒ¨åˆ†å¯èƒ½ä¼šå¼•å…¥ä¸€äº›æ–°çš„ã€æœ‰ç”¨çš„ç‰¹å¾æˆ–æ¨¡å¼ï¼Œè¿™äº›ç‰¹å¾æˆ–æ¨¡å¼åœ¨ä¹‹å‰çš„å±‚ä¸­å¯èƒ½å¹¶ä¸å­˜åœ¨ã€‚è¿™äº›æ–°å¢çš„ç‰¹å¾æˆ–æ¨¡å¼ä¼šä¸ç›´æ¥æ˜ å°„çš„ä¿¡æ¯ç›¸ç»“åˆï¼Œå¯¼è‡´$l+1$å±‚çš„ä¿¡æ¯é‡å®é™…ä¸Šæ¯”$l$å±‚æ›´å¤šã€‚<br>æ¢å¥è¯è¯´ï¼Œç›´æ¥æ˜ å°„ä¿è¯äº†ä¿¡æ¯é‡çš„ä¸‹é™ï¼ˆå³è‡³å°‘ä¸å‰ä¸€å±‚ç›¸åŒï¼‰ï¼Œè€Œæ®‹å·®éƒ¨åˆ†åˆ™æœ‰å¯èƒ½å¢åŠ é¢å¤–çš„ä¿¡æ¯é‡ã€‚å› æ­¤ï¼Œç»¼åˆè¿™ä¸¤éƒ¨åˆ†ï¼Œ$l+1$å±‚çš„ç½‘ç»œåŒ…å«çš„ä¿¡æ¯é‡ä¸€å®šä¼šæ¯”$l$å±‚æ›´å¤šã€‚è¿™ä¹Ÿæ˜¯ResNetèƒ½å¤Ÿåœ¨å¢åŠ ç½‘ç»œæ·±åº¦çš„åŒæ—¶ä¿æŒç”šè‡³æé«˜æ€§èƒ½çš„å…³é”®åŸå› ä¹‹ä¸€ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„â€œæ›´å¤šâ€å¹¶ä¸æ„å‘³ç€ç»å¯¹çš„ä¿¡æ¯é‡ä¸€å®šæ›´å¤§ï¼Œè€Œæ˜¯æŒ‡ç›¸å¯¹äºå‰ä¸€å±‚ï¼Œåä¸€å±‚æœ‰å¯èƒ½åŒ…å«æ›´å¤šçš„æœ‰ç”¨ç‰¹å¾æˆ–æ¨¡å¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¶ä»–å› ç´ ï¼Œå¦‚ç½‘ç»œçš„è®­ç»ƒæ–¹å¼ã€æ•°æ®é›†çš„è´¨é‡ç­‰ï¼Œæ¥ç»¼åˆè¯„ä¼°ç½‘ç»œæ€§èƒ½ã€‚</p>              </div>            </details><p>åŸºäºè¿™ç§ä½¿ç”¨ç›´æ¥æ˜ å°„æ¥è¿æ¥ç½‘ç»œä¸åŒå±‚ç›´æ¥çš„æ€æƒ³ï¼Œæ®‹å·®ç½‘ç»œåº”è¿è€Œç”Ÿã€‚</p></blockquote><h2 id="æ®‹å·®ç½‘ç»œ"><a href="#æ®‹å·®ç½‘ç»œ" class="headerlink" title="æ®‹å·®ç½‘ç»œ"></a>æ®‹å·®ç½‘ç»œ</h2><h3 id="æ®‹å·®å—"><a href="#æ®‹å·®å—" class="headerlink" title="æ®‹å·®å—"></a>æ®‹å·®å—</h3><p>æ®‹å·®ç½‘ç»œæ˜¯ç”±ä¸€ç³»åˆ—æ®‹å·®å—ç»„æˆçš„ï¼ˆå›¾1ï¼‰ã€‚ä¸€ä¸ªæ®‹å·®å—å¯ä»¥ç”¨è¡¨ç¤ºä¸ºï¼š</p><p class='p center'>$x_{l+1}=x_l+F(x_lï¼ŒW_l)$</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.969i4oz9f9.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.969i4oz9f9.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="å›¾1:æ®‹å·®å—"/></div><span class="image-caption">å›¾1:æ®‹å·®å—</span></div><blockquote><p>å›¾1ä¸­çš„Weightåœ¨å·ç§¯ç½‘ç»œä¸­æ˜¯æŒ‡å·ç§¯æ“ä½œï¼ŒadditionæŒ‡çš„æ˜¯å•ä½åŠ æ“ä½œï¼Œå³åœ¨å·ç§¯è®¡ç®—ä¸­çš„ç›¸åŠ æ­¥éª¤ã€‚<br>å·ç§¯è®¡ç®—çš„4ä¸ªæ­¥éª¤ä¸ºåæŠ˜ã€å¹³ç§»ã€ç›¸ä¹˜ã€ç›¸åŠ ã€‚å°†ä¸¤ç»„æ•°è¿›è¡Œå·ç§¯åï¼Œå˜æˆç¬¬ä¸‰ç»„æ•°ï¼Œå…¶ä¸­ç›¸åŠ å°±æ˜¯additionã€‚</p></blockquote><p><strong>æ®‹å·®å—åˆ†æˆä¸¤éƒ¨åˆ†-ç›´æ¥æ˜ å°„éƒ¨åˆ†å’Œæ®‹å·®éƒ¨åˆ†ã€‚</strong></p><ul><li>$h(x_l)$æ˜¯ç›´æ¥æ˜ å°„ï¼Œååº”åœ¨å›¾1ä¸­æ˜¯å·¦è¾¹çš„æ›²çº¿</li><li>$F(x_lï¼ŒW_l)$æ˜¯æ®‹å·®éƒ¨åˆ†ï¼Œä¸€èˆ¬ç”±ä¸¤ä¸ªæˆ–è€…ä¸‰ä¸ªå·ç§¯æ“ä½œæ„æˆï¼Œå³å›¾1ä¸­å³ä¾§åŒ…å«å·ç§¯çš„éƒ¨åˆ†ã€‚</li></ul><p>åœ¨å·ç§¯ç½‘ç»œä¸­,$x_l$å¯èƒ½å’Œ$x_{l+1}$çš„Feature Mapçš„æ•°é‡ä¸ä¸€æ ·ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨$1Ã—1$å·ç§¯è¿›è¡Œå‡ç»´æˆ–è€…é™ç»´ï¼ˆå›¾2ï¼‰ã€‚</p><div class="tagLink"><a class="link-card" title="$1Ã—1$å·ç§¯æ ¸" href="https://tumytime.space/2024/03/21/1x1%E5%8D%B7%E7%A7%AF%E6%A0%B8/"><span class="link-card-backdrop" style="background-image: url(https://tumytime.github.io/picx-images-hosting/image.7awxc3fekp.webp)"></span><div class="left"><img src="https://tumytime.github.io/picx-images-hosting/image.7awxc3fekp.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7awxc3fekp.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">$1Ã—1$å·ç§¯æ ¸</p><p class="url">https://tumytime.space/2024/03/21/1x1%E5%8D%B7%E7%A7%AF%E6%A0%B8/</p></div></a></div><p>è¿™æ—¶ï¼Œæ®‹å·®å—è¡¨ç¤ºä¸ºï¼š</p><p class='p center'>$x_{l+1}=h(x_l)+F(x_lï¼ŒW_l)$</p><p>å…¶ä¸­$h(x_l)&#x3D;W_l^{â€˜}x$ã€‚å…¶ä¸­$W_l^{â€˜}$æ˜¯$1Ã—1$å·ç§¯æ“ä½œï¼Œä½†æ˜¯å®éªŒç»“æœ$1Ã—1$å·ç§¯å¯¹æ¨¡å‹æ€§èƒ½æå‡æœ‰é™ï¼Œæ‰€ä»¥ä¸€èˆ¬æ˜¯åœ¨å‡ç»´æˆ–è€…é™ç»´æ—¶æ‰ä¼šä½¿ç”¨ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.54xiqiz1jd.webp ,alt=$1Ã—1$æ®‹å·®å—" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.54xiqiz1jd.webp ,alt=$1Ã—1$æ®‹å·®å—" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¸€èˆ¬ï¼Œè¿™ç§ç‰ˆæœ¬çš„æ®‹å·®å—å«åšresnet_v1ï¼Œkerasä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">res_block_v1</span>(<span class="params">x, input_filter, output_filter</span>):</span><br><span class="line">    res_x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(x)</span><br><span class="line">    res_x = BatchNormalization()(res_x)</span><br><span class="line">    res_x = Activation(<span class="string">&#x27;relu&#x27;</span>)(res_x)</span><br><span class="line">    res_x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(res_x)</span><br><span class="line">    res_x = BatchNormalization()(res_x)</span><br><span class="line">    <span class="keyword">if</span> input_filter == output_filter:</span><br><span class="line">        identity = x</span><br><span class="line">    <span class="keyword">else</span>: <span class="comment">#éœ€è¦å‡ç»´æˆ–è€…é™ç»´</span></span><br><span class="line">        identity = Conv2D(kernel_size=(<span class="number">1</span>,<span class="number">1</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(x)</span><br><span class="line">    x = keras.layers.add([identity, res_x])</span><br><span class="line">    output = Activation(<span class="string">&#x27;relu&#x27;</span>)(x)</span><br><span class="line">    <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„æ®‹å·®å—ï¼ˆresidual blockï¼‰ï¼Œç”¨äºæ„å»ºæ®‹å·®ç¥ç»ç½‘ç»œï¼ˆResNetï¼‰ä¸­çš„ä¸€ä¸ªåŸºæœ¬å•å…ƒã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>res_block_v1</code>å‡½æ•°æ¥å—è¾“å…¥ç‰¹å¾<code>x</code>ï¼Œè¾“å…¥çš„å·ç§¯æ ¸æ•°é‡<code>input_filter</code>å’Œè¾“å‡ºçš„å·ç§¯æ ¸æ•°é‡<code>output_filter</code>ä½œä¸ºå‚æ•°ï¼Œç„¶åæ„å»ºä¸€ä¸ªæ®‹å·®å—ï¼Œå¹¶è¿”å›å¤„ç†åçš„è¾“å‡ºç‰¹å¾ã€‚</p><p>å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ä¸€ä¸ª3x3å¤§å°çš„å·ç§¯æ ¸ï¼Œè¾“å‡ºé€šé“æ•°ä¸º<code>output_filter</code>ï¼Œæ­¥é•¿ä¸º1ï¼Œå¡«å……æ–¹å¼ä¸ºâ€™sameâ€™è¿›è¡Œå·ç§¯æ“ä½œï¼Œå¹¶æ¥ä¸ŠBatchNormalizationå±‚å’ŒReLUæ¿€æ´»å‡½æ•°ã€‚</li><li>å†æ¬¡ä½¿ç”¨ä¸€ä¸ª3x3å¤§å°çš„å·ç§¯æ ¸ï¼Œè¾“å‡ºé€šé“æ•°ä¸º<code>output_filter</code>ï¼Œæ­¥é•¿ä¸º1ï¼Œå¡«å……æ–¹å¼ä¸ºâ€™sameâ€™è¿›è¡Œå·ç§¯æ“ä½œï¼Œå¹¶æ¥ä¸ŠBatchNormalizationå±‚ã€‚</li><li>æ ¹æ®è¾“å…¥å·ç§¯æ ¸æ•°é‡å’Œè¾“å‡ºå·ç§¯æ ¸æ•°é‡æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œç»´åº¦åŠ å‡å˜æ¢ï¼Œå¦‚æœç›¸ç­‰åˆ™ç›´æ¥å°†è¾“å…¥ç‰¹å¾ä½œä¸ºæ’ç­‰æ˜ å°„ï¼ˆidentityï¼‰ï¼Œå¦åˆ™ä½¿ç”¨1x1çš„å·ç§¯æ ¸è¿›è¡Œç»´åº¦å˜æ¢ã€‚</li><li>å°†æ’ç­‰æ˜ å°„å’Œç»è¿‡ä¸¤æ¬¡å·ç§¯æ“ä½œçš„ç‰¹å¾ç›¸åŠ ï¼Œå¾—åˆ°æ®‹å·®è¿æ¥ã€‚</li><li>å¯¹æ®‹å·®è¿æ¥çš„ç»“æœè¿›è¡ŒReLUæ¿€æ´»å‡½æ•°æ“ä½œï¼Œæœ€ç»ˆè¾“å‡ºå¤„ç†åçš„ç‰¹å¾ã€‚</li></ol><p>è¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„æ®‹å·®å—ï¼Œç”¨äºæ­å»ºæ·±åº¦æ®‹å·®ç¥ç»ç½‘ç»œï¼Œé€šè¿‡æ®‹å·®è¿æ¥æ¥è§£å†³æ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œå¸®åŠ©ç½‘ç»œæ›´å¥½åœ°è®­ç»ƒå’Œä¼˜åŒ–ã€‚</p><h3 id="æ®‹å·®ç½‘ç»œçš„æ­å»º"><a href="#æ®‹å·®ç½‘ç»œçš„æ­å»º" class="headerlink" title="æ®‹å·®ç½‘ç»œçš„æ­å»º"></a>æ®‹å·®ç½‘ç»œçš„æ­å»º</h3><p>æ®‹å·®ç½‘ç»œçš„æ­å»ºåˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li>ä½¿ç”¨VGGå…¬å¼æ­å»ºPlain VGGç½‘ç»œ</li><li>åœ¨Plain VGGçš„å·ç§¯ç½‘ç»œä¹‹é—´æ’å…¥Identity Mappingï¼Œæ³¨æ„éœ€è¦å‡ç»´æˆ–è€…é™ç»´çš„æ—¶å€™åŠ å…¥$1Ã—1$å·ç§¯ã€‚<br>åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬æ˜¯ç›´æ¥stackæ®‹å·®å—çš„æ–¹å¼ã€‚<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">resnet_v1</span>(<span class="params">x</span>):</span><br><span class="line">    x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=<span class="number">16</span>, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>, activation=<span class="string">&#x27;relu&#x27;</span>)(x)</span><br><span class="line">    x = res_block_v1(x, <span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">    x = res_block_v1(x, <span class="number">16</span>, <span class="number">32</span>)</span><br><span class="line">    x = Flatten()(x)</span><br><span class="line">    outputs = Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_normal&#x27;</span>)(x)</span><br><span class="line">    <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure></li></ol><h3 id="ä¸ºä»€ä¹ˆå«æ®‹å·®ç½‘ç»œ"><a href="#ä¸ºä»€ä¹ˆå«æ®‹å·®ç½‘ç»œ" class="headerlink" title="ä¸ºä»€ä¹ˆå«æ®‹å·®ç½‘ç»œ"></a>ä¸ºä»€ä¹ˆå«æ®‹å·®ç½‘ç»œ</h3><p>åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œæ®‹å·®å’Œè¯¯å·®æ˜¯éå¸¸å®¹æ˜“æ··æ·†çš„ä¸¤ä¸ªæ¦‚å¿µã€‚è¯¯å·®æ˜¯è¡¡é‡è§‚æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œæ®‹å·®æ˜¯æŒ‡é¢„æµ‹å€¼å’Œè§‚æµ‹å€¼ä¹‹é—´çš„å·®è·ã€‚å¯¹äºæ®‹å·®ç½‘ç»œçš„å‘½ååŸå› ï¼Œä½œè€…ç»™å‡ºçš„è§£é‡Šæ˜¯ï¼Œç½‘ç»œçš„ä¸€å±‚é€šå¸¸å¯ä»¥çœ‹åš$y&#x3D;H(x)$, è€Œæ®‹å·®ç½‘ç»œçš„ä¸€ä¸ªæ®‹å·®å—å¯ä»¥è¡¨ç¤ºä¸º$H(x)&#x3D;F(x)+x$ï¼Œä¹Ÿå°±æ˜¯$F(x)&#x3D;H(x)-x$ï¼Œåœ¨å•ä½æ˜ å°„ä¸­ï¼Œ$y&#x3D;x$ä¾¿æ˜¯è§‚æµ‹å€¼ï¼Œè€Œ$H(x)$æ˜¯é¢„æµ‹å€¼ï¼Œæ‰€ä»¥$F(x)$ä¾¿å¯¹åº”ç€æ®‹å·®ï¼Œå› æ­¤å«åšæ®‹å·®ç½‘ç»œã€‚</p><h3 id="ç•¥"><a href="#ç•¥" class="headerlink" title="ç•¥"></a>ç•¥</h3><h3 id="å°†æ¿€æ´»å‡½æ•°ç§»åŠ¨åˆ°æ®‹å·®éƒ¨åˆ†å¯ä»¥æé«˜æ¨¡å‹çš„ç²¾åº¦"><a href="#å°†æ¿€æ´»å‡½æ•°ç§»åŠ¨åˆ°æ®‹å·®éƒ¨åˆ†å¯ä»¥æé«˜æ¨¡å‹çš„ç²¾åº¦" class="headerlink" title="å°†æ¿€æ´»å‡½æ•°ç§»åŠ¨åˆ°æ®‹å·®éƒ¨åˆ†å¯ä»¥æé«˜æ¨¡å‹çš„ç²¾åº¦"></a>å°†æ¿€æ´»å‡½æ•°ç§»åŠ¨åˆ°æ®‹å·®éƒ¨åˆ†å¯ä»¥æé«˜æ¨¡å‹çš„ç²¾åº¦</h3><p>è¯¥ç½‘ç»œä¸€èˆ¬å°±åœ¨resnet_v2ï¼Œkeraså®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">res_block_v2</span>(<span class="params">x, input_filter, output_filter</span>):</span><br><span class="line">    res_x = BatchNormalization()(x)</span><br><span class="line">    res_x = Activation(<span class="string">&#x27;relu&#x27;</span>)(res_x)</span><br><span class="line">    res_x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(res_x)</span><br><span class="line">    res_x = BatchNormalization()(res_x)</span><br><span class="line">    res_x = Activation(<span class="string">&#x27;relu&#x27;</span>)(res_x)</span><br><span class="line">    res_x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(res_x)</span><br><span class="line">    <span class="keyword">if</span> input_filter == output_filter:</span><br><span class="line">        identity = x</span><br><span class="line">    <span class="keyword">else</span>: <span class="comment">#éœ€è¦å‡ç»´æˆ–è€…é™ç»´</span></span><br><span class="line">        identity = Conv2D(kernel_size=(<span class="number">1</span>,<span class="number">1</span>), filters=output_filter, strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>)(x)</span><br><span class="line">    output= keras.layers.add([identity, res_x])</span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">resnet_v2</span>(<span class="params">x</span>):</span><br><span class="line">    x = Conv2D(kernel_size=(<span class="number">3</span>,<span class="number">3</span>), filters=<span class="number">16</span> , strides=<span class="number">1</span>, padding=<span class="string">&#x27;same&#x27;</span>, activation=<span class="string">&#x27;relu&#x27;</span>)(x)</span><br><span class="line">    x = res_block_v2(x, <span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">    x = res_block_v2(x, <span class="number">16</span>, <span class="number">32</span>)</span><br><span class="line">    x = BatchNormalization()(x)</span><br><span class="line">    y = Flatten()(x)</span><br><span class="line">    outputs = Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>, kernel_initializer=<span class="string">&#x27;he_normal&#x27;</span>)(y)</span><br><span class="line">    <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure><h2 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿*******************"></a>åˆ†å‰²çº¿*******************</h2>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šæ¨¡æ•°è½¬æ¢ADC</title>
      <link href="/2024/03/18/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E6%A8%A1%E6%95%B0%E8%BD%AC%E6%8D%A2ADC/"/>
      <url>/2024/03/18/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E6%A8%A1%E6%95%B0%E8%BD%AC%E6%8D%A2ADC/</url>
      
        <content type="html"><![CDATA[<h3 id="CubeMXé…ç½®"><a href="#CubeMXé…ç½®" class="headerlink" title="CubeMXé…ç½®"></a>CubeMXé…ç½®</h3><h4 id="é…ç½®å¼•è„š"><a href="#é…ç½®å¼•è„š" class="headerlink" title="é…ç½®å¼•è„š"></a>é…ç½®å¼•è„š</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2h82d2oxha.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2h82d2oxha.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æˆ‘ä»¬è¿™é‡Œå…ˆåªç”¨R37</p><p>é…ç½®<code>PB15</code>ä¸º<code>ADC2_IN15</code></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.6t6vkmcqb6.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.6t6vkmcqb6.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>é€‰æ‹©<code>Single_ended</code></p><h4 id="ç”Ÿæˆå·¥ç¨‹"><a href="#ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹"></a>ç”Ÿæˆå·¥ç¨‹</h4><p><strong>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</strong></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="aadc-c"><a href="#aadc-c" class="headerlink" title="aadc.c"></a>aadc.c</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;aadc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">getADC</span><span class="params">(ADC_HandleTypeDef *pin)</span></span><br><span class="line">&#123;</span><br><span class="line">uint adc;</span><br><span class="line">HAL_ADC_Start (pin);</span><br><span class="line">adc = HAL_ADC_GetValue(pin);</span><br><span class="line"><span class="keyword">return</span> adc*<span class="number">3.3</span>/<span class="number">4096</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="aadc-h"><a href="#aadc-h" class="headerlink" title="aadc.h"></a>aadc.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="title function_">getADC</span><span class="params">(ADC_HandleTypeDef *pin)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•° <code>getADC</code> æ˜¯ä¸€ä¸ªç”¨äºä»ADCï¼ˆæ¨¡æ‹Ÿåˆ°æ•°å­—è½¬æ¢å™¨ï¼‰è¯»å–æ¨¡æ‹Ÿä¿¡å·å¹¶å°†å…¶è½¬æ¢ä¸ºç”µå‹å€¼çš„å‡½æ•°ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥åœ°åˆ†æè¿™ä¸ªå‡½æ•°ï¼š</p><ol><li><strong>å‡½æ•°ç­¾å</strong>:</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="title function_">getADC</span><span class="params">(ADC_HandleTypeDef *pin)</span></span><br></pre></td></tr></table></figure><ul><li><code>double</code>: å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯<code>double</code>ï¼Œè¿™æ„å‘³ç€å®ƒå°†è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚</li><li><code>ADC_HandleTypeDef *pin</code>: å‡½æ•°æ¥å—ä¸€ä¸ªæŒ‡å‘<code>ADC_HandleTypeDef</code>ç±»å‹çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªADCå¥æŸ„ï¼Œå®ƒåŒ…å«äº†ADCçš„é…ç½®ä¿¡æ¯å’ŒçŠ¶æ€ä¿¡æ¯ã€‚</li></ul><ol start="2"><li><strong>å‡½æ•°ä½“</strong>:</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> uint adc;</span><br><span class="line"> HAL_ADC_Start (pin);</span><br><span class="line"> adc = HAL_ADC_GetValue(pin);</span><br><span class="line"> <span class="keyword">return</span> adc*<span class="number">3.3</span>/<span class="number">4096</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>uint adc;</code>: å®šä¹‰äº†ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°å˜é‡<code>adc</code>ï¼Œç”¨äºå­˜å‚¨ä»ADCè¯»å–çš„åŸå§‹å€¼ã€‚</li><li><code>HAL_ADC_Start (pin);</code>: è°ƒç”¨HALåº“ï¼ˆç¡¬ä»¶æŠ½è±¡å±‚åº“ï¼‰ä¸­çš„<code>HAL_ADC_Start</code>å‡½æ•°æ¥å¯åŠ¨æŒ‡å®šçš„ADCã€‚è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªADCå¥æŸ„ï¼ˆå³<code>pin</code>ï¼‰ä½œä¸ºå‚æ•°ã€‚</li><li><code>adc = HAL_ADC_GetValue(pin);</code>: åœ¨ADCè½¬æ¢å®Œæˆåï¼Œè°ƒç”¨<code>HAL_ADC_GetValue</code>å‡½æ•°æ¥è·å–è½¬æ¢åçš„ADCå€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨<code>adc</code>å˜é‡ä¸­ã€‚</li><li><code>return adc*3.3/4096;</code>: è¿”å›è½¬æ¢åçš„ç”µå‹å€¼ã€‚è¿™é‡Œå‡è®¾ADCæ˜¯ä¸€ä¸ª12ä½çš„ADCï¼ˆå› æ­¤æœ€å¤§å€¼æ˜¯4095æˆ–4096ï¼Œå–å†³äºå…·ä½“çš„å®ç°å’Œè®¡æ•°æ–¹å¼ï¼‰ï¼Œå…¶å‚è€ƒç”µå‹æ˜¯3.3Vã€‚å› æ­¤ï¼Œ<code>adc*3.3/4096</code>è¿™ä¸ªå…¬å¼å°†ADCçš„åŸå§‹è¯»æ•°è½¬æ¢æˆäº†ç›¸åº”çš„ç”µå‹å€¼ã€‚</li></ul><p>æ€»ä¹‹ï¼Œè¿™ä¸ªå‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä»æŒ‡å®šçš„ADCè¯»å–æ¨¡æ‹Ÿä¿¡å·ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªè¡¨ç¤ºç”µå‹çš„æµ®ç‚¹æ•°ã€‚è¿™ä¸ªç”µå‹å€¼æ˜¯åŸºäºADCçš„å‚è€ƒç”µå‹ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯3.3Vï¼‰å’ŒADCçš„ä½æ•°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯12ä½ï¼‰æ¥è®¡ç®—çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šè¾“å…¥æ•è·ï¼ˆé¢‘ç‡ï¼Œå ç©ºæ¯”æµ‹é‡ï¼‰</title>
      <link href="/2024/03/18/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E8%BE%93%E5%85%A5%E6%8D%95%E8%8E%B7%EF%BC%88%E9%A2%91%E7%8E%87%EF%BC%8C%E5%8D%A0%E7%A9%BA%E6%AF%94%E6%B5%8B%E9%87%8F%EF%BC%89/"/>
      <url>/2024/03/18/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E8%BE%93%E5%85%A5%E6%8D%95%E8%8E%B7%EF%BC%88%E9%A2%91%E7%8E%87%EF%BC%8C%E5%8D%A0%E7%A9%BA%E6%AF%94%E6%B5%8B%E9%87%8F%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·³çº¿å¸½æ‹”äº†ä¸èƒ½çƒ§å·¥ç¨‹ã€‚ã€‚ã€‚ã€‚(å¥½åƒå¯ä»¥ã€‚ã€‚ã€‚é‚£å¤©ä¸çŸ¥é“æ€ä¹ˆäº†æ¿å­æŠ½é£)</p></blockquote><h3 id="CubeMXé…ç½®"><a href="#CubeMXé…ç½®" class="headerlink" title="CubeMXé…ç½®"></a>CubeMXé…ç½®</h3><h4 id="é…ç½®å¼•è„š"><a href="#é…ç½®å¼•è„š" class="headerlink" title="é…ç½®å¼•è„š"></a>é…ç½®å¼•è„š</h4><p><strong>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨<code>PA7</code>è¿›è¡Œæ•è·</strong></p><p><strong>é…ç½®<code>PA7</code>ä¸º<code>TIM17_CH1</code></strong><br>(åªæœ‰ä¸€ä¸ªé€šé“æ²¡å…³ç³»ï¼Œæˆ‘çš„é¢˜ç›®é‡Œä¸ç”¨æµ‹å ç©ºæ¯”ï¼Œä½†æ˜¯æˆ‘åé¢ä¼šå†™åŠ ä¸Šæµ‹å ç©ºæ¯”çš„å¼•è„šå’Œç¨‹åºçš„)</p><ul><li>é…ç½®ä¸€ä¸‹å¼•è„š  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.5j3yd4e8d4.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.5j3yd4e8d4.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li>ä½¿èƒ½å®šæ—¶å™¨ä¸­æ–­  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7awx810hqy.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7awx810hqy.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul><h4 id="ç”Ÿæˆå·¥ç¨‹"><a href="#ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹"></a>ç”Ÿæˆå·¥ç¨‹</h4><p><strong>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</strong></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="ä¸­æ–­å‡½æ•°"><a href="#ä¸­æ–­å‡½æ•°" class="headerlink" title="ä¸­æ–­å‡½æ•°"></a>ä¸­æ–­å‡½æ•°</h4><p><strong>interrupt.cä¸­ï¼š</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">uint ccrl_val=<span class="number">0</span>;</span><br><span class="line">uint frq=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_IC_CaptureCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸­æ–­å›è°ƒå‡½æ•°åè®°ä¸ä½çš„è¯å’ŒæŒ‰é”®é‚£ä¸€ç« ä¸€æ ·ï¼Œåœ¨tim.hæ–‡ä»¶é‡Œæ‰¾</p><details open><summary pointer> ä¸­æ–­å›è°ƒå‡½æ•° </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_IC_CaptureCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM17)</span><br><span class="line">&#123;</span><br><span class="line">ccrl_val = HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_1);</span><br><span class="line">frq=(<span class="number">80000000</span>/<span class="number">80</span>)/ccrl_val;</span><br><span class="line">__HAL_TIM_SetCounter(htim,<span class="number">0</span>);</span><br><span class="line">HAL_TIM_IC_Start(htim,TIM_CHANNEL_1);<span class="comment">//IC:Input Capture</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><blockquote><p>æ³¨æ„è‡ªå·±å†™çš„ä¸­æ–­å›è°ƒå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Œå¦‚æœä¸å†™è‡ªå·±çš„å›è°ƒå‡½æ•°ï¼Œå·²è®¾ç½®çš„ä¸­æ–­ç…§æ ·æ­£å¸¸è¿è¡Œï¼Œè‡ªå·±çš„å‡½æ•°æ˜¯ç”¨æ¥ç‰¹æ®ŠåŒ–ä¸€äº›ä¸­æ–­æµç¨‹çš„ï¼Œæ²¡æœ‰ç‰¹æ®ŠåŒ–çš„ä»æ—§æŒ‰ç…§é»˜è®¤æ­£å¸¸è¿è¡Œ</p></blockquote><blockquote><p><strong>åŸç†è§£é‡Š:</strong><br>å½“TIM17çš„ä¸­æ–­è§¦å‘(å› ä¸ºé…ç½®äº†ä¸Šå‡æ²¿è§¦å‘ï¼Œå³å½“æ£€æµ‹åˆ°ä¸Šå‡æ²¿æ—¶)<br>è¿›å…¥ä¸­æ–­å›è°ƒå‡½æ•°<br>å› ä¸ºæœ€åä¸€è¡Œæ‰å¯åŠ¨å®šæ—¶å™¨çš„è¾“å…¥æ•è·é€šé“1<br>æ‰€ä»¥ç¬¬ä¸€æ¬¡è§¦å‘åï¼Œè®¡æ•°å™¨å½’0(__HAL_TIM_SetCounter(htim,0);)<br>å¯åŠ¨å®šæ—¶å™¨çš„è¾“å…¥æ•è·é€šé“1,å¼€å§‹è®¡æ•°<br>ç¬¬äºŒæ¬¡è§¦å‘ä¸­æ–­(å³ç¬¬äºŒæ¬¡ä¸Šå‡æ²¿)<br>ccrl_valè¯»å–åˆ°ä¸¤ä¸ªä¸Šå‡æ²¿é—´éš”(å› ä¸ºç¬¬ä¸€ä¸ªä¸Šå‡æ²¿æ‰å¼€å§‹è®¡æ•°)<br>æ‰€ä»¥é¢‘ç‡ç­‰äºæ—¶é’Ÿä¸»é¢‘é™¤ä»¥åˆ†é¢‘ç³»æ•°é™¤ä»¥å‘¨æœŸè®¡æ•°<br>é‡æ–°å¯åŠ¨å®šæ—¶å™¨çš„è¾“å…¥æ•è·é€šé“1</p></blockquote><h4 id="main-cä¸­é…ç½®"><a href="#main-cä¸­é…ç½®" class="headerlink" title="main.cä¸­é…ç½®"></a>main.cä¸­é…ç½®</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> uint frq;</span><br><span class="line">uchar pa1_duty=<span class="number">10</span>;<span class="comment">//åˆå§‹åŒ–å ç©ºæ¯”</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>mainå‡½æ•°é‡Œçš„åˆå§‹åŒ–:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HAL_TIM_Base_Start_IT(&amp;htim4 );<span class="comment">//æŒ‰é”®çš„å®šæ—¶å™¨</span></span><br><span class="line">HAL_TIM_PWM_Start(&amp;htim2,TIM_CHANNEL_2);<span class="comment">//PA1çš„PWMè¾“å‡ºå¼€å¯</span></span><br><span class="line"></span><br><span class="line">HAL_TIM_IC_Start_IT(&amp;htim17,TIM_CHANNEL_1);<span class="comment">//é¢‘ç‡æµ‹é‡æ•è·å®šæ—¶å™¨å¼€å¯</span></span><br><span class="line"></span><br><span class="line">__HAL_TIM_SetCompare(&amp;htim2,TIM_CHANNEL_2,pa1_duty);<span class="comment">//è®¾ç½®åˆå§‹pwmé¢‘ç‡</span></span><br></pre></td></tr></table></figure><h3 id="åŒæ—¶æµ‹é¢‘ç‡å’Œå ç©ºæ¯”ï¼š"><a href="#åŒæ—¶æµ‹é¢‘ç‡å’Œå ç©ºæ¯”ï¼š" class="headerlink" title="åŒæ—¶æµ‹é¢‘ç‡å’Œå ç©ºæ¯”ï¼š"></a>åŒæ—¶æµ‹é¢‘ç‡å’Œå ç©ºæ¯”ï¼š</h3><h4 id="å¼•è„šé…ç½®"><a href="#å¼•è„šé…ç½®" class="headerlink" title="å¼•è„šé…ç½®"></a>å¼•è„šé…ç½®</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.41xtci74hr.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.41xtci74hr.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/////////////////////////////æµ‹é‡é¢‘ç‡+å ç©ºæ¯”///////////////////</span></span><br><span class="line"><span class="type">double</span> ccr1_val1a=<span class="number">0</span>,ccr1_val2a=<span class="number">0</span>;</span><br><span class="line">uint ccr1_val1b=<span class="number">0</span>,ccr1_val2b=<span class="number">0</span>;</span><br><span class="line">uint frq1=<span class="number">0</span>,frq2=<span class="number">0</span>;<span class="comment">//é¢‘ç‡</span></span><br><span class="line"><span class="type">float</span> duty1=<span class="number">0</span>,duty2=<span class="number">0</span>;<span class="comment">//å ç©ºæ¯”</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_IC_CaptureCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM17)<span class="comment">//PA7</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//if(htim-&gt;Channel==HAL_TIM_ACTIVE_CHANNEL_1)//ä¸­æ–­æ¶ˆæ¯æ¥æº é€‰æ‹©ç›´æ¥è¾“å…¥çš„é€šé“</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line">ccr1_val1a=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_1);<span class="comment">//ç›´æ¥</span></span><br><span class="line"><span class="comment">//ccr1_val1b=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_2);//é—´æ¥</span></span><br><span class="line">__HAL_TIM_SetCounter(htim,<span class="number">0</span>);</span><br><span class="line">frq1=(<span class="number">80000000</span>/<span class="number">80</span>)/ccr1_val1a;</span><br><span class="line"><span class="comment">//duty1=(ccr1_val1b/ccr1_val1a)*100;</span></span><br><span class="line">HAL_TIM_IC_Start(htim,TIM_CHANNEL_1);</span><br><span class="line"><span class="comment">//HAL_TIM_IC_Start(htim,TIM_CHANNEL_2);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM3)<span class="comment">//PB4</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Channel==HAL_TIM_ACTIVE_CHANNEL_1)<span class="comment">//ä¸­æ–­æ¶ˆæ¯æ¥æº é€‰æ‹©ç›´æ¥è¾“å…¥çš„é€šé“</span></span><br><span class="line">&#123;</span><br><span class="line">ccr1_val2a=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_1);</span><br><span class="line">ccr1_val2b=HAL_TIM_ReadCapturedValue(htim,TIM_CHANNEL_2);</span><br><span class="line">__HAL_TIM_SetCounter(htim,<span class="number">0</span>);</span><br><span class="line">frq2=(<span class="number">80000000</span>/<span class="number">80</span>)/ccr1_val2a;</span><br><span class="line">duty2=(ccr1_val2b/ccr1_val2a)*<span class="number">100</span>;</span><br><span class="line">HAL_TIM_IC_Start(htim,TIM_CHANNEL_1);</span><br><span class="line">HAL_TIM_IC_Start(htim,TIM_CHANNEL_2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šPWMè¾“å‡º</title>
      <link href="/2024/03/17/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9APWM%E8%BE%93%E5%87%BA/"/>
      <url>/2024/03/17/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9APWM%E8%BE%93%E5%87%BA/</url>
      
        <content type="html"><![CDATA[<blockquote><p>PWMçš„å ç©ºæ¯”æ”¹å˜çš„æ˜¯CCRå¯„å­˜å™¨çš„å€¼ï¼ˆä¸åŒé€šé“å¯¹åº”ä¸åŒçš„CCRï¼‰ï¼Œé¢‘ç‡çš„æ”¹å˜å¯¹åº”çš„æ˜¯ARRå¯„å­˜å™¨çš„å€¼</p></blockquote><h3 id="CubeMXé…ç½®"><a href="#CubeMXé…ç½®" class="headerlink" title="CubeMXé…ç½®"></a>CubeMXé…ç½®</h3><h4 id="é…ç½®å¼•è„š"><a href="#é…ç½®å¼•è„š" class="headerlink" title="é…ç½®å¼•è„š"></a>é…ç½®å¼•è„š</h4><blockquote><p>é¢‘ç‡æ˜¯æŒ‡PWMä¿¡å·çš„å‘¨æœŸæ€§é‡å¤é¢‘ç‡ï¼Œå³PWMä¿¡å·åœ¨ä¸€æ®µæ—¶é—´å†…å®Œæ•´å‘¨æœŸé‡å¤çš„æ¬¡æ•°ã€‚é¢‘ç‡ä¸å ç©ºæ¯”å’Œè‡ªåŠ¨é‡è½½å€¼ä¹‹é—´å­˜åœ¨ä»¥ä¸‹å…³ç³»ï¼š</p><ol><li>PWMä¿¡å·çš„é¢‘ç‡ &#x3D; 1 &#x2F; PWMä¿¡å·çš„å‘¨æœŸ</li><li>PWMä¿¡å·çš„å‘¨æœŸ &#x3D; è‡ªåŠ¨é‡è½½å€¼ + 1</li><li>PWMä¿¡å·çš„å ç©ºæ¯” &#x3D; é«˜ç”µå¹³æ—¶é—´ &#x2F; PWMä¿¡å·çš„å‘¨æœŸ</li></ol></blockquote><p><strong>æˆ‘ä»¬è¿™é‡Œé…ç½®PC9è¾“å‡ºPWMæ³¢</strong><br>é…ç½®<code>PC9</code>å¼•è„šä¸º<code>TIM3_CH4</code>,é€‰æ‹©å®šæ—¶å™¨<code>TIM3</code>çš„é€šé“4(æœ‰å“ªä¸ªç”¨å“ªä¸ª)<br>(åé¢å¸¦<code>N</code>çš„æ˜¯äº’è¡¥PWMæ³¢)</p><blockquote><p>PWMé¢‘ç‡ &#x3D; 1 &#x2F; (å‘¨æœŸæ—¶é—´)<br>å•ä¸ªè„‰å†²å®½åº¦ &#x3D; (å ç©ºæ¯”) * (å‘¨æœŸæ—¶é—´)</p></blockquote><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.ibvk6580f.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.ibvk6580f.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="ç”Ÿæˆå·¥ç¨‹"><a href="#ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹"></a>ç”Ÿæˆå·¥ç¨‹</h4><p><strong>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</strong></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="æ‰“å¼€å®šæ—¶å™¨"><a href="#æ‰“å¼€å®šæ—¶å™¨" class="headerlink" title="æ‰“å¼€å®šæ—¶å™¨"></a>æ‰“å¼€å®šæ—¶å™¨</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HAL_TIM_PWM_Start(&amp;htim3,TIM_CHANNEL_4);</span><br></pre></td></tr></table></figure><h4 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h4><details open><summary pointer> while(1) </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">LED_Disp(<span class="number">0x00</span>);<span class="comment">//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">2</span>].single_flag==<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">w+=<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">if</span>(w&gt;<span class="number">10000</span>)</span><br><span class="line">&#123;</span><br><span class="line">w=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">TIM3-&gt;CCR4 = w;</span><br><span class="line">key[<span class="number">2</span>].single_flag=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šæŒ‰é”®</title>
      <link href="/2024/03/16/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E6%8C%89%E9%94%AE/"/>
      <url>/2024/03/16/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9A%E6%8C%89%E9%94%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="çŸ­æŒ‰é”®"><a href="#çŸ­æŒ‰é”®" class="headerlink" title="çŸ­æŒ‰é”®"></a>çŸ­æŒ‰é”®</h2><h3 id="ç”µè·¯å›¾"><a href="#ç”µè·¯å›¾" class="headerlink" title="ç”µè·¯å›¾"></a>ç”µè·¯å›¾</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1lbkuno8bo.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1lbkuno8bo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æŒ‰é”®æŒ‰ä¸‹åæ¥åœ°å˜ä¸ºä½ç”µå¹³ï¼ŒæœªæŒ‰ä¸‹ä¸ºé«˜ç”µå¹³ï¼›</p><h4 id="ä¸ç”¨å®šæ—¶å™¨çš„ç®€å•æŒ‰é”®ï¼š"><a href="#ä¸ç”¨å®šæ—¶å™¨çš„ç®€å•æŒ‰é”®ï¼š" class="headerlink" title="ä¸ç”¨å®šæ—¶å™¨çš„ç®€å•æŒ‰é”®ï¼š"></a>ä¸ç”¨å®šæ—¶å™¨çš„ç®€å•æŒ‰é”®ï¼š</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_0)==GPIO_PIN_RESET ) &#123;</span><br><span class="line">HAL_GPIO_WritePin(GPIOC,GPIO_PIN_8,GPIO_PIN_RESET );</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_SET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">HAL_GPIO_WritePin(GPIOC,GPIO_PIN_8,GPIO_PIN_SET );</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_SET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CubeMXé…ç½®"><a href="#CubeMXé…ç½®" class="headerlink" title="CubeMXé…ç½®"></a>CubeMXé…ç½®</h3><h4 id="å¼•è„šé…ç½®"><a href="#å¼•è„šé…ç½®" class="headerlink" title="å¼•è„šé…ç½®"></a>å¼•è„šé…ç½®</h4><p>é…ç½®<code>PB0-2</code>å’Œ<code>PA0</code>ä¸º<code>GPIO_Input</code><br>å¹¶å°†<code>GPIO Pull-up/Pull-down</code>é…ç½®ä¸º<code>Pull-up</code></p><h4 id="å®šæ—¶å™¨é…ç½®"><a href="#å®šæ—¶å™¨é…ç½®" class="headerlink" title="å®šæ—¶å™¨é…ç½®"></a>å®šæ—¶å™¨é…ç½®</h4><p>é€‰ä¸€ä¸ªå®šæ—¶å™¨ï¼ˆè¿™é‡Œé€‰æ‹©TIM4ï¼‰</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7smyutv65f.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7smyutv65f.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>é…ç½®æ—¶é’Ÿæºä¸ºå†…éƒ¨æ—¶é’Ÿ</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.wibapqvqk.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.wibapqvqk.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><details open><summary pointer> é€‰é¡¹è§£é‡Š </summary>              <div class='content'>              <ol><li><p><strong>Prescaler (PSC-16 bits value)</strong>:</p><ul><li>Prescaleræ˜¯ç”¨äºå°†è¾“å…¥æ—¶é’Ÿé¢‘ç‡è¿›è¡Œåˆ†é¢‘çš„å‚æ•°ï¼Œä»¥é™ä½è®¡æ•°å™¨çš„å·¥ä½œé¢‘ç‡ã€‚16ä½å€¼è¡¨ç¤ºäº†åˆ†é¢‘æ¯”ï¼Œç”¨äºæ§åˆ¶è®¡æ•°å™¨æ¯æ¬¡è®¡æ•°ä¹‹å‰å¦‚ä½•åˆ†é¢‘è¾“å…¥æ—¶é’Ÿã€‚è¾ƒå¤§çš„åˆ†é¢‘æ¯”ä¼šä½¿è®¡æ•°å™¨å·¥ä½œåœ¨è¾ƒä½çš„é¢‘ç‡ä¸‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç³»ç»Ÿçš„è¾“å…¥æ—¶é’Ÿé¢‘ç‡ä¸º10 MHzï¼Œè€Œè®¡æ•°å™¨éœ€è¦ä»¥1 kHzçš„é¢‘ç‡è¿›è¡Œè®¡æ•°ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è®¾ç½®é€‚å½“çš„é¢„åˆ†é¢‘å™¨å€¼æ¥å®ç°è¿™ä¸€è¦æ±‚ã€‚å‡è®¾æˆ‘ä»¬è®¾ç½®é¢„åˆ†é¢‘å™¨çš„16ä½å€¼ä¸º10000ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥æ—¶é’Ÿåœ¨è¿›å…¥è®¡æ•°å™¨ä¹‹å‰ä¼šå…ˆè¿›è¡Œ10,000å€çš„åˆ†é¢‘ã€‚è¿™æ ·ï¼Œæ¯10,000ä¸ªè¾“å…¥æ—¶é’Ÿå‘¨æœŸï¼Œè®¡æ•°å™¨æ‰ä¼šè®¡æ•°ä¸€æ¬¡ï¼Œä»è€Œä½¿å¾—è®¡æ•°å™¨çš„å·¥ä½œé¢‘ç‡ä¸º1 kHzã€‚ä¸åŒçš„åº”ç”¨åœºæ™¯ä¼šæœ‰ä¸åŒçš„è®¡æ•°éœ€æ±‚ã€‚ä¾‹å¦‚ï¼ŒæŸäº›åº”ç”¨å¯èƒ½éœ€è¦é«˜é€Ÿè®¡æ•°ï¼Œä¸€ç§è®¡æ•°å™¨çš„é¢‘ç‡å¯èƒ½éœ€è¦è¾¾åˆ°å‡ åMHzç”šè‡³æ›´é«˜çš„é¢‘ç‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®¡æ•°å™¨éœ€è¦ä»¥æ›´é«˜çš„é€Ÿç‡è¿›è¡Œè®¡æ•°ï¼Œä»¥æ»¡è¶³å¯¹è®¡æ•°ç²¾åº¦å’Œé€Ÿåº¦çš„è¦æ±‚ã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€äº›åº”ç”¨å¯èƒ½åªéœ€è¦ä½é€Ÿè®¡æ•°ï¼Œæ¯”å¦‚åœ¨ä¸€äº›ä¼ æ„Ÿå™¨ç›‘æµ‹ç³»ç»Ÿä¸­ï¼Œè®¡æ•°å™¨å¯ä»¥ä»¥è¾ƒä½çš„é¢‘ç‡è¿›è¡Œè®¡æ•°ï¼Œä»¥å®æ—¶ç›‘æµ‹å¹¶è®°å½•äº‹ä»¶å‘ç”Ÿçš„æ¬¡æ•°ã€‚</li></ul></li><li><p><strong>Counter Mode</strong>:</p><ul><li>æ­¤å¤„è®¾ç½®è®¡æ•°å™¨çš„å·¥ä½œæ¨¡å¼ä¸ºâ€Upâ€ï¼Œå³è®¡æ•°å™¨ä¼šä»0å¼€å§‹é€’å¢è®¡æ•°ï¼Œè®¡æ•°åˆ°æœ€å¤§å€¼åé‡æ–°ä»0å¼€å§‹ã€‚</li></ul></li><li><p><strong>Dithering</strong>:</p><ul><li>åœ¨è¿™é‡Œè®¾ç½®äº†ç¦ç”¨æŠ–åŠ¨ï¼ˆDitheringï¼‰ï¼ŒæŠ–åŠ¨æ˜¯æŒ‡é€šè¿‡å¾®å°çš„éšæœºå˜åŒ–æ¥å‡å°é‡åŒ–è¯¯å·®çš„ä¸€ç§æŠ€æœ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŠ–åŠ¨è¢«ç¦ç”¨ï¼Œå³ä¸ä¼šåœ¨è®¡æ•°å™¨ä¸­å¼•å…¥è¿™ç§å¾®å°çš„å˜åŒ–ã€‚</li></ul></li><li><p><strong>Counter Period (AutoReload Register)</strong>:</p><ul><li>è®¾ç½®è®¡æ•°å™¨çš„è®¡æ•°å‘¨æœŸï¼Œé€šå¸¸é€šè¿‡AutoReload Registerï¼ˆè‡ªåŠ¨é‡è£…è½½å¯„å­˜å™¨ï¼‰æ¥å®ç°ã€‚åœ¨è¿™é‡Œè®¾ç½®äº†è®¡æ•°å™¨çš„å‘¨æœŸä¸º0åˆ°65535ä¹‹é—´çš„å€¼ï¼Œå½“è®¡æ•°å™¨è¾¾åˆ°æœ€å¤§å€¼æ—¶ä¼šé‡æ–°åŠ è½½åˆå§‹å€¼ã€‚</li></ul></li><li><p><strong>Internal Clock Division (CKD)</strong>:</p><ul><li>è®¾ç½®å†…éƒ¨æ—¶é’Ÿåˆ†é¢‘ï¼ˆCKDï¼‰ï¼Œåœ¨è¿™é‡Œé€‰æ‹©äº†â€No Divisionâ€ï¼Œè¡¨ç¤ºè®¡æ•°å™¨çš„æ—¶é’Ÿä¸ä¼šè¢«åˆ†é¢‘ï¼Œä»¥ç¡®ä¿è®¡æ•°å™¨è¿è¡Œåœ¨è¾“å…¥æ—¶é’Ÿçš„æœ€é«˜é¢‘ç‡ä¸‹ã€‚</li></ul></li><li><p><strong>Auto-reload preload</strong>:</p><ul><li>åœ¨è¿™é‡Œç¦ç”¨äº†è‡ªåŠ¨åŠ è½½é¢„è®¾å€¼åŠŸèƒ½ï¼Œå³ä¸ä¼šåœ¨è®¡æ•°å™¨è‡ªåŠ¨é‡æ–°åŠ è½½æ—¶é¢„å…ˆè£…è½½æ–°çš„å€¼ã€‚</li></ul></li></ol><p>è¿™äº›è®¾ç½®æœ‰åŠ©äºè°ƒæ•´è®¡æ—¶å™¨&#x2F;è®¡æ•°å™¨çš„è¡Œä¸ºå’Œæ€§èƒ½ï¼Œä¾‹å¦‚è°ƒæ•´è®¡æ•°æ¨¡å¼ã€å‘¨æœŸä»¥åŠæ—¶é’Ÿåˆ†é¢‘ç­‰ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„åº”ç”¨éœ€æ±‚ã€‚é€šè¿‡åˆç†è®¾ç½®è¿™äº›å‚æ•°ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶è®¡æ—¶å™¨&#x2F;è®¡æ•°å™¨çš„åŠŸèƒ½ï¼Œç¡®ä¿å…¶åœ¨ç³»ç»Ÿä¸­æ­£ç¡®ã€ç¨³å®šåœ°è¿è¡Œã€‚</p>              </div>            </details><ol><li><p><strong>Prescaler</strong>:åˆ†é¢‘ç³»æ•°ï¼Œå†³å®šå®šæ—¶å™¨çš„å·¥ä½œé¢‘ç‡<br> å®šæ—¶å™¨å·¥ä½œé¢‘ç‡&#x3D;å¤–éƒ¨æ€»çº¿é¢‘ç‡(80MHz)&#x2F;(PSC+1)<br> è¿™é‡Œè®¾ç½®ä¸º80-1,å³å®šæ—¶å™¨å·¥ä½œé¢‘ç‡&#x3D;80ï¼Œ000ï¼Œ000&#x2F;80&#x3D;1ï¼Œ000ï¼Œ000</p></li><li><p><strong>Counter Period</strong>:<br> å®šæ—¶é¢‘ç‡&#x3D;å®šæ—¶å™¨å·¥ä½œé¢‘ç‡&#x2F;counter<br> è¿™é‡Œè®¾ç½®ä¸º10000-1,å³å®šæ—¶é¢‘ç‡&#x3D;1ï¼Œ000ï¼Œ000&#x2F;10ï¼Œ000&#x3D;100Hzï¼Œå³å®šæ—¶å‘¨æœŸ10ms;<br> 10msä¸­æ–­ä¸€æ¬¡ï¼›</p></li></ol><p><strong>ä½¿èƒ½ä¸­æ–­</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4n7gvyvfe6.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4n7gvyvfe6.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="ç”Ÿæˆå·¥ç¨‹"><a href="#ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹"></a>ç”Ÿæˆå·¥ç¨‹</h4><p><strong>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</strong></p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="æ–°å»ºä¸¤ä¸ªæ–‡ä»¶"><a href="#æ–°å»ºä¸¤ä¸ªæ–‡ä»¶" class="headerlink" title="æ–°å»ºä¸¤ä¸ªæ–‡ä»¶"></a>æ–°å»ºä¸¤ä¸ªæ–‡ä»¶</h4><p>ä¿å­˜<code>interrupt.c</code>å’Œ<code>interrupt.h</code>åˆ°<code>bsp</code>æ–‡ä»¶å¤¹<br>ç„¶åæ·»åŠ <code>interrupt.c</code>åˆ°é¡¹ç›®<code>bsp</code>æ–‡ä»¶å¤¹é‡Œ</p><h4 id="å†™ä¸­æ–­å›è°ƒå‡½æ•°"><a href="#å†™ä¸­æ–­å›è°ƒå‡½æ•°" class="headerlink" title="å†™ä¸­æ–­å›è°ƒå‡½æ•°"></a>å†™ä¸­æ–­å›è°ƒå‡½æ•°</h4><p>è®°ä¸ä½å‡½æ•°åå¤åˆ¶è¿™ä¸ª:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.wibaqozwy.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.wibaqozwy.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="interrupt-h"><a href="#interrupt-h" class="headerlink" title="interrupt.h"></a>interrupt.h</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _INTERRUPT_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _INTERRUPT_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdbool.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">keys</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">uchar judge;</span><br><span class="line"><span class="type">bool</span> status;</span><br><span class="line"><span class="type">bool</span> single_flag;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><h4 id="interrupt-c"><a href="#interrupt-c" class="headerlink" title="interrupt.c"></a>interrupt.c</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;interrupt.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">keys</span> <span class="title">key</span>[4]=</span> &#123;&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_PeriodElapsedCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span> &#123;</span><br><span class="line"></span><br><span class="line">key[<span class="number">0</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_0);</span><br><span class="line">key[<span class="number">1</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_1);</span><br><span class="line">key[<span class="number">2</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_2);</span><br><span class="line">key[<span class="number">3</span>].status=HAL_GPIO_ReadPin (GPIOA,GPIO_PIN_0);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM4) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">switch</span>(key[i].judge)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">key[i].judge=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">key[i].judge=<span class="number">2</span>;</span><br><span class="line">key[i].single_flag=<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;key[i].judge=<span class="number">0</span>;&#125;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">key[i].judge=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="main-cä¸­externç»“æ„ä½“-æ‰“å¼€ä¸­æ–­"><a href="#main-cä¸­externç»“æ„ä½“-æ‰“å¼€ä¸­æ–­" class="headerlink" title="main.cä¸­externç»“æ„ä½“&#x2F;æ‰“å¼€ä¸­æ–­"></a>main.cä¸­externç»“æ„ä½“&#x2F;æ‰“å¼€ä¸­æ–­</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="class"><span class="keyword">struct</span> <span class="title">keys</span> <span class="title">key</span>[];</span></span><br></pre></td></tr></table></figure><p><strong>mainå‡½æ•°é‡Œï¼š</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HAL_TIM_Base_Start_IT(&amp;htim4 );</span><br></pre></td></tr></table></figure><blockquote><p>ä¸€å®šè¦æ”¾åœ¨<code>MX_TIM4_Init();</code>åé¢ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p></blockquote><blockquote><p>å¯åŠ¨å®šæ—¶å™¨ TIM4 çš„åŸºæœ¬å®šæ—¶å™¨æ¨¡å¼å¹¶ä½¿èƒ½å®šæ—¶å™¨ä¸­æ–­.</p></blockquote><h2 id="é•¿æŒ‰é”®"><a href="#é•¿æŒ‰é”®" class="headerlink" title="é•¿æŒ‰é”®"></a>é•¿æŒ‰é”®</h2><h3 id="interrupt-h-1"><a href="#interrupt-h-1" class="headerlink" title="interrupt.h"></a>interrupt.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _INTERRUPT_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _INTERRUPT_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdbool.h&quot;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">keys</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">uchar judge;</span><br><span class="line"><span class="type">bool</span> status;</span><br><span class="line"><span class="type">bool</span> single_flag;</span><br><span class="line"><span class="type">bool</span> long_flag;</span><br><span class="line">uint time;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><h3 id="interrupt-c-1"><a href="#interrupt-c-1" class="headerlink" title="interrupt.c"></a>interrupt.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;interrupt.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">keys</span> <span class="title">key</span>[4]=</span> &#123;&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="literal">false</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HAL_TIM_PeriodElapsedCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span> &#123;</span><br><span class="line"></span><br><span class="line">key[<span class="number">0</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_0);</span><br><span class="line">key[<span class="number">1</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_1);</span><br><span class="line">key[<span class="number">2</span>].status=HAL_GPIO_ReadPin (GPIOB,GPIO_PIN_2);</span><br><span class="line">key[<span class="number">3</span>].status=HAL_GPIO_ReadPin (GPIOA,GPIO_PIN_0);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM4) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">switch</span>(key[i].judge) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>: &#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">0</span>) &#123;</span><br><span class="line">key[i].judge=<span class="number">1</span>;</span><br><span class="line">key[i].time =<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>: &#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">0</span>) &#123;</span><br><span class="line">key[i].judge=<span class="number">2</span>;</span><br><span class="line"><span class="comment">//key[i].single_flag=1;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">key[i].judge=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>: &#123;</span><br><span class="line"><span class="keyword">if</span>(key[i].status==<span class="number">1</span>) &#123;</span><br><span class="line">key[i].judge=<span class="number">0</span>;</span><br><span class="line">key[i].single_flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(key[i].time&lt;<span class="number">200</span>)</span><br><span class="line">&#123;</span><br><span class="line">key[i].long_flag=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">key[i].time++;</span><br><span class="line"><span class="keyword">if</span>(key[i].time&gt;<span class="number">200</span>)</span><br><span class="line">&#123;</span><br><span class="line">key[i].long_flag=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>key[i].time&gt;200:</strong><br>ä¹‹å‰é…ç½®çš„å®šæ—¶å™¨ä¸€ä¸ªå‘¨æœŸ10ms,<strong>200ä¹Ÿå°±æ˜¯2s</strong></p><h2 id="å‡½æ•°å°è£…"><a href="#å‡½æ•°å°è£…" class="headerlink" title="å‡½æ•°å°è£…"></a>å‡½æ•°å°è£…</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="type">char</span>  view=<span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">key_proc</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">disp_proc</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">key_proc</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">0</span>].single_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">key[<span class="number">0</span>].single_flag =<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">1</span>].single_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">view++;</span><br><span class="line"><span class="keyword">if</span>(view&gt;<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">view=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">key[<span class="number">1</span>].single_flag =<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">2</span>].single_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">key[<span class="number">2</span>].single_flag =<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">3</span>].single_flag==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">key[<span class="number">3</span>].single_flag =<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">disp_proc</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> text[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(text,<span class="string">&quot;  view=0      &quot;</span>);</span><br><span class="line">LCD_DisplayStringLine(Line9, (<span class="type">uint8_t</span> *)text);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> text[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(text,<span class="string">&quot;  view=1      &quot;</span>);</span><br><span class="line">LCD_DisplayStringLine(Line9, (<span class="type">uint8_t</span> *)text);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> text[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">sprintf</span>(text,<span class="string">&quot;  view=2      &quot;</span>);</span><br><span class="line">LCD_DisplayStringLine(Line9, (<span class="type">uint8_t</span> *)text);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32ç¬¬äºŒæ¬¡è€ƒæ ¸</title>
      <link href="/2024/03/14/STM32%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%80%83%E6%A0%B8/"/>
      <url>/2024/03/14/STM32%E7%AC%AC%E4%BA%8C%E6%AC%A1%E8%80%83%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<p>è¦æ±‚ï¼š</p><h2 id="åŠŸèƒ½å¼•è„šæ¦‚è¿°"><a href="#åŠŸèƒ½å¼•è„šæ¦‚è¿°" class="headerlink" title="åŠŸèƒ½å¼•è„šæ¦‚è¿°"></a>åŠŸèƒ½å¼•è„šæ¦‚è¿°</h2><h3 id="PA1"><a href="#PA1" class="headerlink" title="PA1"></a>PA1</h3><p>PA1:PWMï¼ˆé¢‘ç‡ã€å ç©ºæ¯”å¯è°ƒèŠ‚ï¼‰</p><ol><li>ä½é¢‘æ¨¡å¼: è¾“å‡ºä¿¡å·é¢‘ç‡ä¸º4KHzã€‚</li><li>é«˜é¢‘æ¨¡å¼: è¾“å‡ºä¿¡å·é¢‘ç‡ä¸º8KHzã€‚<br>PA1è¾“å‡ºä¿¡å·å ç©ºæ¯”å¯ä»¥é€šè¿‡ç”µä½å™¨R37è¿›è¡Œè°ƒèŠ‚ï¼Œå…³ç³»å¦‚å›¾2æ‰€ç¤ºã€‚<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡1.jpg" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡1.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ol><p>å½“æ¨¡å¼åˆ‡æ¢æ—¶ï¼Œåœ¨ä¿è¯å ç©ºæ¯”ä¸å˜çš„å‰æä¸‹ï¼Œé¢‘ç‡åœ¨5ç§’å†…å‡åŒ€çš„å‡é«˜æˆ–é™ä½åˆ°ç›®æ ‡é¢‘ç‡ï¼Œè¦æ±‚é¢‘ç‡æ­¥è¿›å€¼å°äº200Hz</p><h3 id="PA7-é¢‘ç‡æµ‹é‡"><a href="#PA7-é¢‘ç‡æµ‹é‡" class="headerlink" title="PA7(é¢‘ç‡æµ‹é‡)"></a>PA7(é¢‘ç‡æµ‹é‡)</h3><p>PA7:è„‰å†²æ•è·<br>æµ‹é‡è¾“å…¥åˆ°PA7 å¼•è„šçš„ä¿¡å·é¢‘ç‡ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºé€Ÿåº¦å€¼ï¼Œé€Ÿåº¦å€¼(v) ä¸é¢‘ç‡å€¼(f)çš„å¯¹åº”å…³ç³»:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡2.jpg" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡2.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å…¶ä¸­få•ä½ä¸ºHzï¼ŒRå’ŒKä½œä¸ºå‚æ•°ï¼Œå¯ä»¥é€šè¿‡æŒ‰é”®è¿›è¡Œè°ƒæ•´ï¼ŒÏ€å–å°æ•°ç‚¹å2ä½æœ‰æ•ˆæ•°å­—ã€‚</p><h3 id="ADC"><a href="#ADC" class="headerlink" title="ADC"></a>ADC</h3><p>ADC:æ£€æµ‹ç”µä½å™¨R37ä¸Šè¾“å‡ºçš„æ¨¡æ‹Ÿç”µå‹ä¿¡å·</p><h2 id="æ˜¾ç¤º"><a href="#æ˜¾ç¤º" class="headerlink" title="æ˜¾ç¤º"></a>æ˜¾ç¤º</h2><blockquote><p>æ˜¾ç¤ºèƒŒæ™¯è‰² (BackColor):é»‘è‰²<br>æ˜¾ç¤ºå‰æ™¯è‰²(TextColor):ç™½è‰².<br>æ•°æ®é¡¹ä¸å¯¹åº”çš„æ•°æ®ä¹‹é—´ä½¿ç”¨â€œ&#x3D;â€é—´éš”å¼€ã€‚</p></blockquote><h3 id="æ•°æ®ç•Œé¢"><a href="#æ•°æ®ç•Œé¢" class="headerlink" title="æ•°æ®ç•Œé¢"></a>æ•°æ®ç•Œé¢</h3><ol><li>LD1:å¤„äºæ•°æ®ç•Œé¢ï¼ŒæŒ‡ç¤ºç¯LD1ç‚¹äº®ï¼Œå¦åˆ™ç†„ç­ã€‚</li><li>LD2: ä½é¢‘æ¨¡å¼ã€é«˜é¢‘æ¨¡å¼åˆ‡æ¢æœŸé—´ï¼ŒæŒ‡ç¤ºç¯LD2ä»¥0.1ç§’ä¸ºé—´éš”åˆ‡æ¢äº®ã€ç­çŠ¶æ€ï¼Œæ¨¡å¼åˆ‡æ¢å®Œæˆåç†„ç­ã€‚</li><li>LD3:å ç©ºæ¯”è°ƒæ•´å¤„äº â€œé”å®šâ€çŠ¶æ€æ—¶ï¼ŒæŒ‡ç¤ºç¯LD3ç‚¹äº®ï¼Œå¦åˆ™ç†„ç­ã€‚</li></ol><blockquote><p>æ˜¾ç¤ºè¦ç´ åŒ…æ‹¬ç•Œé¢åç§°(DATA)ã€PWM è¾“å‡ºæ¨¡å¼(M)ã€ å®æ—¶å ç©ºæ¯”(P)ã€ å®æ—¶é€Ÿåº¦(V)ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡3.jpg" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡3.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å®æ—¶é€Ÿåº¦å–å°æ•°ç‚¹å1ä½æœ‰æ•ˆæ•°å­—ã€‚<br>è¾“å‡ºæ¨¡å¼ä»¥â€œHâ€è¡¨ç¤ºé«˜é¢‘æ¨¡å¼ã€â€œLâ€è¡¨ç¤ºä½é¢‘æ¨¡å¼ï¼Œæ¨¡å¼åˆ‡æ¢æœªå®Œæˆå‰ï¼Œå±å¹•æ˜¾ç¤ºçš„è¾“å‡ºæ¨¡å¼ä¿æŒä¸å˜ã€‚</p></blockquote><h3 id="å‚æ•°ç•Œé¢"><a href="#å‚æ•°ç•Œé¢" class="headerlink" title="å‚æ•°ç•Œé¢"></a>å‚æ•°ç•Œé¢</h3><p>æ˜¾ç¤ºè¦ç´ åŒ…æ‹¬ç•Œé¢åç§°(PARA)ã€å‚æ•°Rå’ŒKçš„å½“å‰å€¼ï¼ŒRå€¼å’ŒKå€¼æœ‰æ•ˆèŒƒå›´1-10,æ•´æ•°ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡4.jpg" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡4.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="ç»Ÿè®¡ç•Œé¢"><a href="#ç»Ÿè®¡ç•Œé¢" class="headerlink" title="ç»Ÿè®¡ç•Œé¢"></a>ç»Ÿè®¡ç•Œé¢</h3><p>æ˜¾ç¤ºè¦ç´ åŒ…æ‹¬:ç•Œé¢åç§°( RECD)ã€PWMè¾“å‡ºæ¨¡å¼åˆ‡æ¢æ¬¡æ•°(N)ã€é«˜é¢‘å’Œä½é¢‘æ¨¡å¼ä¸‹çš„é€Ÿåº¦æœ€å¤§å€¼ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡5.jpg" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡5.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>MH:é«˜é¢‘æ¨¡å¼æœ€å¤§é€Ÿåº¦ï¼ŒML: ä½é¢‘æ¨¡å¼æœ€å¤§é€Ÿåº¦ï¼Œæ˜¾ç¤ºä¿ç•™å°æ•°ç‚¹å1ä½æœ‰æ•ˆæ•°å­—ã€‚</p><h2 id="æŒ‰é”®åŠŸèƒ½"><a href="#æŒ‰é”®åŠŸèƒ½" class="headerlink" title="æŒ‰é”®åŠŸèƒ½"></a>æŒ‰é”®åŠŸèƒ½</h2><h3 id="B1"><a href="#B1" class="headerlink" title="B1"></a>B1</h3><p>å®šä¹‰ä¸ºâ€œç•Œé¢â€æŒ‰é”®ï¼ŒæŒ‰ä¸‹B1æŒ‰é”®å¯ä»¥å¾€å¤åˆ‡æ¢æ•°æ®ã€å‚æ•°å’Œè®°å½•ä¸‰ä¸ªç•Œé¢ï¼Œåˆ‡æ¢æ¨¡å¼å¦‚å›¾6æ‰€ç¤ºã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/img/å›¾ç‰‡6.png" class="lazyload placeholder" data-srcset="/img/å›¾ç‰‡6.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="B2"><a href="#B2" class="headerlink" title="B2"></a>B2</h3><p>å®šä¹‰ä¸º â€œé€‰æ‹©â€æŒ‰é”®ã€‚</p><ol><li>åœ¨æ•°æ®ç•Œé¢ä¸‹ï¼Œç”¨äºåˆ‡æ¢é€‰æ‹©ä½é¢‘æˆ–é«˜é¢‘æ¨¡å¼ã€‚æŒ‰é”®æŒ‰ä¸‹åï¼Œ5ç§’å†…ä¸å¯å†æ¬¡è§¦å‘åˆ‡æ¢åŠŸèƒ½ã€‚</li><li>åœ¨å‚æ•°ç•Œé¢ä¸‹ï¼ŒæŒ‰ä¸‹B2æŒ‰é”®ï¼Œåˆ‡æ¢é€‰æ‹©Ræˆ–Kå‚æ•°ã€‚æ¯æ¬¡ä»æ•°æ®ç•Œé¢è¿›å…¥å‚æ•°ç•Œé¢ï¼Œé»˜è®¤å½“å‰å¯è°ƒæ•´çš„å‚æ•°ä¸ºRå‚æ•°;ä»å‚æ•°ç•Œé¢é€€å‡ºæ—¶ï¼Œæ–°çš„Rå‚æ•°å’ŒKå‚æ•°ç”Ÿæ•ˆã€‚</li></ol><h3 id="B3"><a href="#B3" class="headerlink" title="B3"></a>B3</h3><p>å®šä¹‰ä¸º â€œåŠ â€æŒ‰é”®ã€‚<br>åœ¨å‚æ•°ç•Œé¢ä¸‹ï¼ŒæŒ‰ä¸‹B3æŒ‰é”®ï¼Œå½“å‰å¯è°ƒæ•´çš„å‚æ•°åŠ 1ï¼Œå‚æ•°è°ƒæ•´æ¨¡å¼:<br>â€¦ 1 2 3 4 â€¦ 10 1 2 3 â€¦</p><h3 id="B4"><a href="#B4" class="headerlink" title="B4"></a>B4</h3><ol><li>åœ¨å‚æ•°ç•Œé¢ä¸‹ï¼ŒæŒ‰ä¸‹B4æŒ‰é”®ï¼Œå½“å‰å¯è°ƒæ•´çš„å‚æ•°å‡1,å‚æ•°è°ƒæ•´æ¨¡å¼Â· Â· Â·1  10  9 Â· Â· Â· 2  1  10  9  Â·Â·Â· Â· Â·</li><li>åœ¨æ•°æ®ç•Œé¢ä¸‹ï¼Œé•¿æŒ‰B4æŒ‰é”®è¶…è¿‡2ç§’åæ¾å¼€(é•¿æŒ‰é”®)ï¼Œå¯ä»¥â€œé”å®šâ€œå ç©ºæ¯”è°ƒæ•´åŠŸèƒ½ï¼Œæ­¤æ—¶è¾“å‡ºä¿¡å·å ç©ºæ¯”ä¿æŒä¸å˜ï¼Œä¸å—R37ç”µä½å™¨è¾“å‡ºç”µå‹æ§åˆ¶;å¤„äºâ€œé”å®šâ€çŠ¶æ€åï¼Œå†æ¬¡æŒ‰ä¸‹B4æŒ‰é”®(çŸ­æŒ‰é”®),å®ç°â€œè§£é”â€åŠŸèƒ½ï¼Œæ¢å¤R37ç”µä½å™¨å¯¹è¾“å‡ºä¿¡å·å ç©ºæ¯”çš„æ§åˆ¶ã€‚.</li></ol><p><strong>è¦æ±‚:</strong></p><ul><li>æŒ‰é”®åº”è¿›è¡Œæœ‰æ•ˆçš„é˜²æŠ–å¤„ç†ï¼Œé¿å…å‡ºç°ä¸€æ¬¡æŒ‰é”®åŠ¨ä½œ è§¦å‘å¤šæ¬¡åŠŸèƒ½ç­‰æƒ…å½¢ã€‚</li><li>æŒ‰é”®åŠ¨ä½œä¸åº”å½±å“æ•°æ®é‡‡é›†è¿‡ç¨‹å’Œå±å¹•æ˜¾ç¤ºæ•ˆæœã€‚</li><li>æœ‰æ•ˆåŒºåˆ†é•¿ã€çŸ­æŒ‰é”®åŠŸèƒ½ï¼Œäº’ä¸å½±å“ã€‚</li><li>å‚æ•°è°ƒæ•´åº”è€ƒè™‘è¾¹ç•Œå€¼ï¼Œä¸å‡ºç°æ— æ•ˆå‚æ•°ã€‚</li><li>å½“å‰ç•Œé¢ä¸‹æ— åŠŸèƒ½çš„æŒ‰é”®æŒ‰ä¸‹ï¼Œä¸è§¦å‘å…¶å®ƒç•Œé¢çš„åŠŸèƒ½ã€‚</li></ul><h2 id="ç»Ÿè®¡åŠŸèƒ½"><a href="#ç»Ÿè®¡åŠŸèƒ½" class="headerlink" title="ç»Ÿè®¡åŠŸèƒ½"></a>ç»Ÿè®¡åŠŸèƒ½</h2><ol><li>ä½é¢‘æ¨¡å¼ã€é«˜é¢‘æ¨¡å¼åˆ‡æ¢æ¬¡æ•°(N)ã€‚</li><li>é«˜é¢‘ã€ä½é¢‘è¾“å‡ºæ¨¡å¼ä¸‹çš„æœ€å¤§é€Ÿåº¦åˆ†å¼€ç»Ÿè®¡,ä¿æŒæ—¶é—´ä¸è¶³2ç§’çš„é€Ÿåº¦å€¼ä¸çº³å…¥ç»Ÿè®¡ã€‚</li></ol><h2 id="LED"><a href="#LED" class="headerlink" title="LED"></a>LED</h2><p>LD4-LD8 æŒ‡ç¤ºç¯å§‹ç»ˆå¤„äºç†„ç­çŠ¶æ€ã€‚</p><h2 id="åˆå§‹çŠ¶æ€è¯´æ˜"><a href="#åˆå§‹çŠ¶æ€è¯´æ˜" class="headerlink" title="åˆå§‹çŠ¶æ€è¯´æ˜"></a>åˆå§‹çŠ¶æ€è¯´æ˜</h2><ol><li>å‚æ•°Rä¸º1ã€‚</li><li>å‚æ•°Kä¸º1ã€‚</li><li>åˆ‡æ¢æ¬¡æ•°N ä¸º0ã€‚</li><li>PWMè¾“å‡ºæ¨¡å¼ä¸ºä½é¢‘æ¨¡å¼ã€‚</li><li>å¤„äºâ€œè§£é”â€çŠ¶æ€ï¼ŒR37ç”µä½å™¨å¯ä»¥æ§åˆ¶ä¿¡å·å ç©ºæ¯”ã€‚</li><li>å¤„äºæ•°æ®æ˜¾ç¤ºç•Œé¢ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€.ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹Paddleç‰ˆç¬”è®°-ä½¿ç”¨Tensoræ¥å¤„ç†æ•°æ®</title>
      <link href="/2024/03/14/%E4%B8%80.%E3%80%8A%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8BPaddle%E7%89%88%E7%AC%94%E8%AE%B0-%E4%BD%BF%E7%94%A8Tensor%E6%9D%A5%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/"/>
      <url>/2024/03/14/%E4%B8%80.%E3%80%8A%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8BPaddle%E7%89%88%E7%AC%94%E8%AE%B0-%E4%BD%BF%E7%94%A8Tensor%E6%9D%A5%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è®°å½•ä¸€ä¸‹ï¼Œå¦‚æœæ–‡ç« åœ¨æ–‡ä»¶å¤¹é‡Œæ”¹åå­—äº†ï¼Œè¦å†æ‰“å¼€ä¸€æ¬¡ï¼Œè¦ä¸ç„¶vscodeé‡Œæ”¹çš„bugä¸å½±å“è¿™ä¸ªæ–‡ä»¶ã€‚ã€‚ã€‚</p></blockquote><h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><h2 id="ä½¿ç”¨Tensoræ¥å¤„ç†æ•°æ®"><a href="#ä½¿ç”¨Tensoræ¥å¤„ç†æ•°æ®" class="headerlink" title="ä½¿ç”¨Tensoræ¥å¤„ç†æ•°æ®"></a>ä½¿ç”¨Tensoræ¥å¤„ç†æ•°æ®</h2><blockquote><p>â€œtensorâ€è¿™ä¸ªå•è¯ä¸€èˆ¬å¯è¯‘ä½œâ€œå¼ é‡â€ï¼Œå¼ é‡å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå¤šç»´æ•°ç»„ã€‚æ ‡é‡å¯ä»¥çœ‹ä½œæ˜¯0ç»´å¼ é‡ï¼Œå‘é‡å¯ä»¥çœ‹ä½œ1ç»´å¼ é‡ï¼ŒçŸ©é˜µå¯ä»¥çœ‹ä½œæ˜¯äºŒç»´å¼ é‡ã€‚</p></blockquote><h3 id="Tensoræ¦‚å¿µè§£é‡Š"><a href="#Tensoræ¦‚å¿µè§£é‡Š" class="headerlink" title="Tensoræ¦‚å¿µè§£é‡Š"></a>Tensoræ¦‚å¿µè§£é‡Š</h3><ul><li>é£æ¡¨ä½¿ç”¨å¼ é‡ï¼ˆTensorï¼‰ æ¥è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­ä¼ é€’çš„æ•°æ®</li><li>Tensor å¯ä»¥ç†è§£ä¸ºå¤šç»´æ•°ç»„ï¼Œç±»ä¼¼äº Numpy æ•°ç»„ï¼ˆndarrayï¼‰ çš„æ¦‚å¿µ</li><li>ä¸ Numpy æ•°ç»„ç›¸æ¯”ï¼ŒTensor é™¤äº†æ”¯æŒè¿è¡Œåœ¨ CPU ä¸Šï¼Œè¿˜æ”¯æŒè¿è¡Œåœ¨ GPU åŠå„ç§ AI èŠ¯ç‰‡ä¸Šï¼Œä»¥å®ç°è®¡ç®—åŠ é€Ÿ</li><li>é£æ¡¨åŸºäº Tensorï¼Œå®ç°äº†æ·±åº¦å­¦ä¹ æ‰€å¿…é¡»çš„åå‘ä¼ æ’­åŠŸèƒ½å’Œå¤šç§å¤šæ ·çš„ç»„ç½‘ç®—å­ï¼Œä»è€Œå¯æ›´å¿«æ·åœ°å®ç°æ·±åº¦å­¦ä¹ ç»„ç½‘ä¸è®­ç»ƒç­‰åŠŸèƒ½</li></ul><h3 id="Tensorçš„åˆ›å»º"><a href="#Tensorçš„åˆ›å»º" class="headerlink" title="Tensorçš„åˆ›å»º"></a>Tensorçš„åˆ›å»º</h3><h4 id="æŒ‡å®šæ•°æ®åˆ›å»º"><a href="#æŒ‡å®šæ•°æ®åˆ›å»º" class="headerlink" title="æŒ‡å®šæ•°æ®åˆ›å»º"></a>æŒ‡å®šæ•°æ®åˆ›å»º</h4><p>ä¸ Numpy åˆ›å»ºæ•°ç»„æ–¹å¼ç±»ä¼¼ï¼Œé€šè¿‡ç»™å®š Python åºåˆ—ï¼ˆå¦‚åˆ—è¡¨ listã€å…ƒç»„ tupleï¼‰ï¼Œå¯ä½¿ç”¨ paddle.to_tensor åˆ›å»ºä»»æ„ç»´åº¦çš„ Tensor</p><ol><li><p><strong>åˆ›å»ºç±»ä¼¼å‘é‡çš„1ç»´Tensor</strong></p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> paddle</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ndim_1_Tensor = paddle.to_tensor([<span class="number">2.0</span>, <span class="number">3.0</span>, <span class="number">4.0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(ndim_1_Tensor)</span><br><span class="line">Tensor(shape=[<span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [<span class="number">2.</span>, <span class="number">3.</span>, <span class="number">4.</span>])</span><br></pre></td></tr></table></figure><p> ndim:ç»´åº¦<br> <strong>å¦‚æœä»…è¾“å…¥å•ä¸ªæ ‡é‡ï¼ˆscalarï¼‰æ•°æ®ï¼ˆä¾‹å¦‚ float&#x2F;int&#x2F;bool ç±»å‹çš„å•ä¸ªå…ƒç´ ï¼‰ï¼Œåˆ™ä¼šåˆ›å»ºå½¢çŠ¶ä¸º [1] çš„ Tensorï¼Œå³ 0 ç»´ Tensorï¼š</strong></p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.to_tensor(<span class="number">2</span>)</span><br><span class="line">Tensor(shape=[], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.to_tensor([<span class="number">2</span>])</span><br><span class="line">Tensor(shape=[<span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [<span class="number">2</span>])</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸¤ä¸ªæœ‰åŒºåˆ«ï¼Œç»´åº¦ä¸åŒï¼Œä¸€ä¸ª0ç»´ï¼Œä¸€ä¸ª1ç»´</p></blockquote></li><li><p><strong>åˆ›å»ºç±»ä¼¼çŸ©é˜µçš„2ç»´Tensor</strong></p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ndim_2_Tensor = paddle.to_tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(ndim_2_Tensor)</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">3</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ndim_2_Tensor = paddle.to_tensor([[<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(ndim_2_Tensor)</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>],</span><br><span class="line">        [<span class="number">2.</span>, <span class="number">3.</span>, <span class="number">4.</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ndim_2_Tensor = paddle.to_tensor([[<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>],[<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(ndim_2_Tensor)</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[<span class="number">1.</span>, <span class="number">2.</span>, <span class="number">3.</span>],</span><br><span class="line">        [<span class="number">2.</span>, <span class="number">3.</span>, <span class="number">4.</span>]])</span><br></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»º3ç»´Tensor</strong></p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ndim_3_Tensor = paddle.to_tensor([[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]],[[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(ndim_3_Tensor)</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">        [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]])</span><br></pre></td></tr></table></figure><p> ä¸Šè¿°ä¸åŒç»´åº¦çš„ Tensor å¯è§†åŒ–çš„è¡¨ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤º(æ•°æ®å¯èƒ½ä¸åŒï¼Œçœ‹ä¸ªå›¾ç¤ºå°±è¡Œ)ï¼š</p> <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.9rj5gz3k7w.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.9rj5gz3k7w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTensor å¿…é¡»å½¢å¦‚çŸ©å½¢ï¼Œå³åœ¨ä»»ä½•ä¸€ä¸ªç»´åº¦ä¸Šï¼Œå…ƒç´ çš„æ•°é‡å¿…é¡»ç›¸ç­‰ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = paddle.to_tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>]])</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">File <span class="string">&quot;C:\Users\lxcqm\anaconda3\envs\Paddle_Py3.12\Lib\site-packages\paddle\tensor\creation.py&quot;</span>, line <span class="number">794</span>, <span class="keyword">in</span> to_tensor</span><br><span class="line">    <span class="keyword">return</span> _to_tensor_non_static(data, dtype, place, stop_gradient)</span><br><span class="line">        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">File <span class="string">&quot;C:\Users\lxcqm\anaconda3\envs\Paddle_Py3.12\Lib\site-packages\paddle\tensor\creation.py&quot;</span>, line <span class="number">577</span>, <span class="keyword">in</span> _to_tensor_non_static</span><br><span class="line">    data = np.array(data)</span><br><span class="line">        ^^^^^^^^^^^^^^</span><br><span class="line">ValueError: setting an array element <span class="keyword">with</span> a sequence. The requested array has an inhomogeneous shape after <span class="number">1</span> dimensions. The detected shape was (<span class="number">2</span>,) + inhomogeneous part.</span><br></pre></td></tr></table></figure><br><strong>è¯´æ˜ï¼š</strong></p><ul><li>é£æ¡¨ä¹Ÿæ”¯æŒå°† Tensor è½¬æ¢ä¸º Python åºåˆ—æ•°æ®ï¼Œå¯é€šè¿‡ paddle.tolist å®ç°ï¼Œé£æ¡¨å®é™…çš„è½¬æ¢å¤„ç†è¿‡ç¨‹æ˜¯ Python åºåˆ— &lt;-&gt; Numpy æ•°ç»„ &lt;-&gt; Tensorã€‚</li><li>åŸºäºç»™å®šæ•°æ®åˆ›å»º Tensor æ—¶ï¼Œé£æ¡¨æ˜¯é€šè¿‡æ‹·è´æ–¹å¼åˆ›å»ºï¼Œä¸åŸå§‹æ•°æ®ä¸å…±äº«å†…å­˜ã€‚</li></ul></blockquote></li></ol><h4 id="æŒ‡å®šå½¢çŠ¶åˆ›å»º"><a href="#æŒ‡å®šå½¢çŠ¶åˆ›å»º" class="headerlink" title="æŒ‡å®šå½¢çŠ¶åˆ›å»º"></a>æŒ‡å®šå½¢çŠ¶åˆ›å»º</h4><p>å¦‚æœè¦åˆ›å»ºä¸€ä¸ªæŒ‡å®šå½¢çŠ¶çš„ Tensorï¼Œå¯ä»¥ä½¿ç”¨ paddle.zerosã€paddle.onesã€paddle.full å®ç°ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.zeros([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">W0314 <span class="number">17</span>:<span class="number">10</span>:<span class="number">06.231387</span>  <span class="number">9012</span> gpu_resources.cc:<span class="number">119</span>] Please NOTE: device: <span class="number">0</span>, GPU Compute Capability: <span class="number">8.9</span>, Driver API Version: <span class="number">12.4</span>, Runtime API Version: <span class="number">12.0</span></span><br><span class="line">W0314 <span class="number">17</span>:<span class="number">10</span>:<span class="number">08.771996</span>  <span class="number">9012</span> gpu_resources.cc:<span class="number">164</span>] device: <span class="number">0</span>, cuDNN Version: <span class="number">8.9</span>.</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>],</span><br><span class="line">        [<span class="number">0.</span>, <span class="number">0.</span>, <span class="number">0.</span>]])</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.ones([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.twos([<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: module <span class="string">&#x27;paddle&#x27;</span> has no attribute <span class="string">&#x27;twos&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.full([<span class="number">2</span>,<span class="number">4</span>],<span class="number">4</span>)</span><br><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>],</span><br><span class="line">        [<span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>, <span class="number">4.</span>]])</span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šåŒºé—´åˆ›å»º"><a href="#æŒ‡å®šåŒºé—´åˆ›å»º" class="headerlink" title="æŒ‡å®šåŒºé—´åˆ›å»º"></a>æŒ‡å®šåŒºé—´åˆ›å»º</h4><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">paddle.arange(start, end, step)  <span class="comment"># åˆ›å»ºä»¥æ­¥é•¿ step å‡åŒ€åˆ†éš”åŒºé—´[start, end)çš„ Tensor</span></span><br><span class="line">paddle.linspace(start, stop, num) <span class="comment"># åˆ›å»ºä»¥å…ƒç´ ä¸ªæ•° num å‡åŒ€åˆ†éš”åŒºé—´[start, stop)çš„ Tensor</span></span><br></pre></td></tr></table></figure><p>å®ä¾‹:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.arange(start=<span class="number">1</span>, end=<span class="number">10</span>, step = <span class="number">2</span>)</span><br><span class="line">Tensor(shape=[<span class="number">5</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.linspace(start=<span class="number">1</span>,stop=<span class="number">10</span>,num=<span class="number">3</span>)</span><br><span class="line">Tensor(shape=[<span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">1.</span>        , <span class="number">5.50000000</span>, <span class="number">10.</span>       ])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>paddle.linspace(start=<span class="number">0</span>,stop=<span class="number">10</span>,num=<span class="number">3</span>)</span><br><span class="line">Tensor(shape=[<span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">0.</span> , <span class="number">5.</span> , <span class="number">10.</span>])</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¯´æ˜ï¼š</strong><br>é™¤äº†ä»¥ä¸ŠæŒ‡å®šæ•°æ®ã€å½¢çŠ¶ã€åŒºé—´åˆ›å»º Tensor çš„æ–¹æ³•ï¼Œé£æ¡¨è¿˜æ”¯æŒå¦‚ä¸‹ç±»ä¼¼çš„åˆ›å»ºæ–¹å¼ï¼Œå¦‚ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªç©º Tensorï¼Œå³æ ¹æ® shape å’Œ dtype åˆ›å»ºå°šæœªåˆå§‹åŒ–å…ƒç´ å€¼çš„ Tensorï¼Œå¯é€šè¿‡ paddle.empty å®ç°ã€‚</li><li>åˆ›å»ºä¸€ä¸ªä¸å…¶ä»– Tensor å…·æœ‰ç›¸åŒ <strong>shape</strong> ä¸ <strong>dtype</strong> çš„ Tensorï¼Œå¯é€šè¿‡ paddle.ones_like ã€ paddle.zeros_like ã€ paddle.full_like ã€paddle.empty_like å®ç°ã€‚</li><li>æ‹·è´å¹¶åˆ›å»ºä¸€ä¸ªä¸å…¶ä»– Tensor å®Œå…¨ç›¸åŒçš„ Tensorï¼Œå¯é€šè¿‡ paddle.<strong>clone</strong> å®ç°ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæ»¡è¶³ç‰¹å®šåˆ†å¸ƒçš„ Tensorï¼Œå¦‚ paddle.rand, paddle.randn , paddle.randint ç­‰ã€‚</li><li>é€šè¿‡è®¾ç½®éšæœºç§å­åˆ›å»º Tensorï¼Œå¯æ¯æ¬¡ç”Ÿæˆç›¸åŒå…ƒç´ å€¼çš„éšæœºæ•° Tensorï¼Œå¯é€šè¿‡ paddle.seed å’Œ paddle.rand ç»„åˆå®ç°ã€‚</li></ul></blockquote><h4 id="æŒ‡å®šå›¾åƒ-æ–‡æœ¬æ•°æ®åˆ›å»º"><a href="#æŒ‡å®šå›¾åƒ-æ–‡æœ¬æ•°æ®åˆ›å»º" class="headerlink" title="æŒ‡å®šå›¾åƒ&#x2F;æ–‡æœ¬æ•°æ®åˆ›å»º"></a>æŒ‡å®šå›¾åƒ&#x2F;æ–‡æœ¬æ•°æ®åˆ›å»º</h4><p>åœ¨å¸¸è§æ·±åº¦å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæ•°æ®æ ·æœ¬å¯èƒ½æ˜¯å›¾ç‰‡ï¼ˆimageï¼‰ã€æ–‡æœ¬ï¼ˆtextï¼‰ã€è¯­éŸ³ï¼ˆaudioï¼‰ç­‰å¤šç§ç±»å‹ï¼Œåœ¨é€å…¥ç¥ç»ç½‘ç»œè®­ç»ƒæˆ–æ¨ç†å‰ï¼Œè¿™äº›æ•°æ®å’Œå¯¹åº”çš„æ ‡ç­¾å‡éœ€è¦åˆ›å»ºä¸º Tensorã€‚ä»¥ä¸‹æ˜¯å›¾åƒåœºæ™¯å’Œ NLP(è‡ªç„¶è¯­è¨€å¤„ç†) åœºæ™¯ä¸­æ‰‹åŠ¨è½¬æ¢ Tensor æ–¹æ³•çš„ä»‹ç»ã€‚</p><ul><li><p>å¯¹äºå›¾åƒåœºæ™¯ï¼Œå¯ä½¿ç”¨ paddle.vision.transforms.ToTensor ç›´æ¥å°† PIL.Image æ ¼å¼çš„æ•°æ®è½¬ä¸º Tensorï¼Œä½¿ç”¨ paddle.to_tensor å°†å›¾åƒçš„æ ‡ç­¾ï¼ˆLabelï¼Œé€šå¸¸æ˜¯ Python æˆ– Numpy æ ¼å¼çš„æ•°æ®ï¼‰è½¬ä¸º Tensorã€‚</p></li><li><p>å¯¹äºæ–‡æœ¬åœºæ™¯ï¼Œéœ€å°†æ–‡æœ¬æ•°æ®è§£ç ä¸ºæ•°å­—åï¼Œå†é€šè¿‡ paddle.to_tensor è½¬ä¸º Tensorã€‚ä¸åŒæ–‡æœ¬ä»»åŠ¡æ ‡ç­¾å½¢å¼ä¸ä¸€æ ·ï¼Œæœ‰çš„ä»»åŠ¡æ ‡ç­¾ä¹Ÿæ˜¯æ–‡æœ¬ï¼Œæœ‰çš„åˆ™æ˜¯æ•°å­—ï¼Œå‡éœ€æœ€ç»ˆé€šè¿‡ paddle.to_tensor è½¬ä¸º Tensorã€‚</p></li></ul><p>ä¸‹é¢ä»¥å›¾åƒåœºæ™¯ä¸ºä¾‹ä»‹ç»ï¼Œä»¥ä¸‹ç¤ºä¾‹ä»£ç ä¸­å°†éšæœºç”Ÿæˆçš„å›¾ç‰‡è½¬æ¢ä¸º Tensor:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> paddle.vision.transforms <span class="keyword">as</span> T</span><br><span class="line"><span class="keyword">import</span> paddle.vision.transforms.functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line">fake_img = Image.fromarray((np.random.rand(<span class="number">224</span>, <span class="number">224</span>, <span class="number">3</span>) * <span class="number">255.</span>).astype(np.uint8)) <span class="comment"># åˆ›å»ºéšæœºå›¾ç‰‡</span></span><br><span class="line">fake_img.show()</span><br><span class="line">transform = T.ToTensor()</span><br><span class="line">tensor = transform(fake_img) <span class="comment"># ä½¿ç”¨ ToTensor()å°†å›¾ç‰‡è½¬æ¢ä¸º Tensor</span></span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4g48waay9i.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4g48waay9i.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3<span class="number">.12</span>) C:\Users\lxcqm&gt;python D:\PyTorch\Pytorch1\main.py</span><br><span class="line">W0314 <span class="number">17</span>:<span class="number">25</span>:<span class="number">22.979338</span> <span class="number">34280</span> gpu_resources.cc:<span class="number">119</span>] Please NOTE: device: <span class="number">0</span>, GPU Compute Capability: <span class="number">8.9</span>, Driver API Version: <span class="number">12.4</span>, Runtime API Version: <span class="number">12.0</span></span><br><span class="line">W0314 <span class="number">17</span>:<span class="number">25</span>:<span class="number">22.984452</span> <span class="number">34280</span> gpu_resources.cc:<span class="number">164</span>] device: <span class="number">0</span>, cuDNN Version: <span class="number">8.9</span>.</span><br><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">224</span>, <span class="number">224</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[[<span class="number">0.05098040</span>, <span class="number">0.00392157</span>, <span class="number">0.09019608</span>, ..., <span class="number">0.48627454</span>,</span><br><span class="line">          <span class="number">0.25882354</span>, <span class="number">0.21960786</span>],</span><br><span class="line">         [<span class="number">0.77254909</span>, <span class="number">0.82352948</span>, <span class="number">0.12549020</span>, ..., <span class="number">0.29411766</span>,</span><br><span class="line">          <span class="number">0.47450984</span>, <span class="number">0.99215692</span>],</span><br><span class="line">         [<span class="number">0.50980395</span>, <span class="number">0.90588242</span>, <span class="number">0.86666673</span>, ..., <span class="number">0.94509810</span>,</span><br><span class="line">          <span class="number">0.73725492</span>, <span class="number">0.40784317</span>],</span><br><span class="line">         ...,</span><br><span class="line">         [<span class="number">0.59215689</span>, <span class="number">0.96470594</span>, <span class="number">0.12549020</span>, ..., <span class="number">0.43529415</span>,</span><br><span class="line">          <span class="number">0.34117648</span>, <span class="number">0.25490198</span>],</span><br><span class="line">         [<span class="number">0.27843139</span>, <span class="number">0.50196081</span>, <span class="number">0.22745100</span>, ..., <span class="number">0.70588237</span>,</span><br><span class="line">          <span class="number">0.95294124</span>, <span class="number">0.57647061</span>],</span><br><span class="line">         [<span class="number">0.20784315</span>, <span class="number">0.70588237</span>, <span class="number">0.88235301</span>, ..., <span class="number">0.55294120</span>,</span><br><span class="line">          <span class="number">0.77254909</span>, <span class="number">0.16078432</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">0.28235295</span>, <span class="number">0.54117650</span>, <span class="number">0.21960786</span>, ..., <span class="number">0.47450984</span>,</span><br><span class="line">          <span class="number">0.32941177</span>, <span class="number">0.95294124</span>],</span><br><span class="line">         [<span class="number">0.22352943</span>, <span class="number">0.68627453</span>, <span class="number">0.76470596</span>, ..., <span class="number">0.51764709</span>,</span><br><span class="line">          <span class="number">0.55294120</span>, <span class="number">0.96470594</span>],</span><br><span class="line">         [<span class="number">0.23921570</span>, <span class="number">0.79607850</span>, <span class="number">0.48627454</span>, ..., <span class="number">0.51764709</span>,</span><br><span class="line">          <span class="number">0.20000002</span>, <span class="number">0.80392164</span>],</span><br><span class="line">         ...,</span><br><span class="line">         [<span class="number">0.09411766</span>, <span class="number">0.49019611</span>, <span class="number">0.83529419</span>, ..., <span class="number">0.43137258</span>,</span><br><span class="line">          <span class="number">0.76862752</span>, <span class="number">0.26666668</span>],</span><br><span class="line">         [<span class="number">0.99607849</span>, <span class="number">0.09411766</span>, <span class="number">0.81960791</span>, ..., <span class="number">0.54117650</span>,</span><br><span class="line">          <span class="number">0.27843139</span>, <span class="number">0.92549026</span>],</span><br><span class="line">         [<span class="number">0.20000002</span>, <span class="number">0.47058827</span>, <span class="number">0.05882353</span>, ..., <span class="number">0.41176474</span>,</span><br><span class="line">          <span class="number">0.41960788</span>, <span class="number">0.30196080</span>]],</span><br><span class="line"></span><br><span class="line">        [[<span class="number">0.86666673</span>, <span class="number">0.46274513</span>, <span class="number">0.13333334</span>, ..., <span class="number">0.80000007</span>,</span><br><span class="line">          <span class="number">0.34509805</span>, <span class="number">0.13333334</span>],</span><br><span class="line">         [<span class="number">0.47843140</span>, <span class="number">0.14509805</span>, <span class="number">0.41960788</span>, ..., <span class="number">0.73725492</span>,</span><br><span class="line">          <span class="number">0.18823531</span>, <span class="number">0.42745101</span>],</span><br><span class="line">         [<span class="number">0.11372550</span>, <span class="number">0.73725492</span>, <span class="number">0.65490198</span>, ..., <span class="number">0.86666673</span>,</span><br><span class="line">          <span class="number">0.25490198</span>, <span class="number">0.83137262</span>],</span><br><span class="line">         ...,</span><br><span class="line">         [<span class="number">0.94901967</span>, <span class="number">0.45490199</span>, <span class="number">0.08235294</span>, ..., <span class="number">0.85882360</span>,</span><br><span class="line">          <span class="number">0.14901961</span>, <span class="number">0.14117648</span>],</span><br><span class="line">         [<span class="number">0.03137255</span>, <span class="number">0.72549021</span>, <span class="number">0.51372552</span>, ..., <span class="number">0.35686275</span>,</span><br><span class="line">          <span class="number">0.24313727</span>, <span class="number">0.01176471</span>],</span><br><span class="line">         [<span class="number">0.12941177</span>, <span class="number">0.24705884</span>, <span class="number">0.97254908</span>, ..., <span class="number">0.65098041</span>,</span><br><span class="line">          <span class="number">0.00784314</span>, <span class="number">0.96470594</span>]]])</span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼š<br>å®é™…ç¼–ç æ—¶ï¼Œç”±äºé£æ¡¨æ•°æ®åŠ è½½çš„ paddle.io.DataLoader API èƒ½å¤Ÿå°†åŸå§‹ paddle.io.Dataset å®šä¹‰çš„æ•°æ®è‡ªåŠ¨è½¬æ¢ä¸º Tensorï¼Œæ‰€ä»¥å¯ä»¥ä¸åšæ‰‹åŠ¨è½¬æ¢ã€‚å…·ä½“å¦‚ä¸‹èŠ‚ä»‹ç»ã€‚</p></blockquote><h4 id="è‡ªåŠ¨åˆ›å»ºTensorçš„åŠŸèƒ½ä»‹ç»"><a href="#è‡ªåŠ¨åˆ›å»ºTensorçš„åŠŸèƒ½ä»‹ç»" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºTensorçš„åŠŸèƒ½ä»‹ç»"></a>è‡ªåŠ¨åˆ›å»ºTensorçš„åŠŸèƒ½ä»‹ç»</h4><p>é™¤äº†æ‰‹åŠ¨åˆ›å»º Tensor å¤–ï¼Œå®é™…åœ¨é£æ¡¨æ¡†æ¶ä¸­æœ‰ä¸€äº› API å°è£…äº† Tensor åˆ›å»ºçš„æ“ä½œï¼Œä»è€Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨åˆ›å»º Tensorã€‚ä¾‹å¦‚ paddle.io.DataLoader èƒ½å¤ŸåŸºäºåŸå§‹ Datasetï¼Œè¿”å›è¯»å– Dataset æ•°æ®çš„è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨è¿”å›çš„æ•°æ®ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª Tensorã€‚å¦å¤–åœ¨ä¸€äº›é«˜å±‚ APIï¼Œå¦‚ paddle.Model.fit ã€paddle.Model.predict ï¼Œå¦‚æœä¼ å…¥çš„æ•°æ®ä¸æ˜¯ Tensorï¼Œä¼šè‡ªåŠ¨è½¬ä¸º Tensor å†è¿›è¡Œæ¨¡å‹è®­ç»ƒæˆ–æ¨ç†ã€‚</p><blockquote><p><strong>è¯´æ˜ï¼š</strong><br>paddle.Model.fitã€paddle.Model.predict ç­‰é«˜å±‚ API æ”¯æŒä¼ å…¥ Dataset æˆ– DataLoaderï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ Datasetï¼Œé‚£ä¹ˆä¼šç”¨ DataLoader å°è£…è½¬ä¸º Tensor æ•°æ®ï¼›å¦‚æœä¼ å…¥çš„æ˜¯ DataLoaderï¼Œåˆ™ç›´æ¥ä» DataLoader è¿­ä»£è¯»å– Tensor æ•°æ®é€å…¥æ¨¡å‹è®­ç»ƒæˆ–æ¨ç†ã€‚å› æ­¤å³ä½¿æ²¡æœ‰å†™å°†æ•°æ®è½¬ä¸º Tensor çš„ä»£ç ï¼Œä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œæå‡äº†ç¼–ç¨‹æ•ˆç‡å’Œå®¹é”™æ€§ã€‚</p></blockquote><p>ä»¥ä¸‹ç¤ºä¾‹ä»£ç ä¸­ï¼Œåˆ†åˆ«æ‰“å°äº†åŸå§‹æ•°æ®é›†çš„æ•°æ®ï¼Œå’Œé€å…¥ DataLoader åè¿”å›çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®ç»“æ„ç”± Python list è½¬ä¸ºäº† Tensor:</p><details open><summary pointer> Compose&Normalize </summary>              <div class='content'>              <ol><li><p><strong>Compose</strong>:</p><ul><li><code>Compose</code> æ˜¯ä¸€ä¸ªç»„åˆå¤šä¸ªå›¾åƒå˜æ¢çš„å·¥å…·ã€‚ä½ å¯ä»¥å°†å¤šä¸ªå˜æ¢ï¼ˆtransformsï¼‰æ”¾å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åä¼ é€’ç»™ <code>Compose</code>ã€‚å½“ä½ åº”ç”¨è¿™ä¸ªç»„åˆå˜æ¢åˆ°ä¸€ä¸ªå›¾åƒä¸Šæ—¶ï¼Œè¿™äº›å˜æ¢ä¼šæŒ‰ç…§åˆ—è¡¨ä¸­çš„é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åº”ç”¨åˆ°å›¾åƒä¸Šã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å…ˆå¯¹å›¾åƒè¿›è¡Œå½’ä¸€åŒ–ï¼Œç„¶åå†å°†å…¶è½¬æ¢ä¸º Tensorï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transforms = Compose([</span><br><span class="line">    Normalize(mean=[<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], std=[<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>]),</span><br><span class="line">    ToTensor()</span><br><span class="line">])</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>Normalize</strong>:</p><ul><li><code>Normalize</code> ç”¨äºå¯¹å›¾åƒè¿›è¡Œæ ‡å‡†åŒ–ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯¹è¾“å…¥æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ï¼Œä½¿å…¶å…·æœ‰é›¶å‡å€¼å’Œå•ä½æ–¹å·®ï¼Œè¿™æœ‰åŠ©äºæ¨¡å‹çš„è®­ç»ƒã€‚</li><li><code>Normalize</code> éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼š<code>mean</code> å’Œ <code>std</code>ï¼Œåˆ†åˆ«ä»£è¡¨æ¯ä¸ªé€šé“çš„å‡å€¼å’Œæ ‡å‡†å·®ã€‚å¯¹äº RGB å›¾åƒï¼Œè¿™ä¸‰ä¸ªé€šé“åˆ†åˆ«æ˜¯çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ã€‚</li><li>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>[0.5, 0.5, 0.5]</code> ä½œä¸ºå‡å€¼å’Œ <code>[0.5, 0.5, 0.5]</code> ä½œä¸ºæ ‡å‡†å·®ï¼Œè¿™å®é™…ä¸Šæ˜¯å°†å›¾åƒçš„åƒç´ å€¼ä» [0, 1] èŒƒå›´è½¬æ¢åˆ° [-1, 1] èŒƒå›´ã€‚</li></ul></li></ol><p>æ€»ä¹‹ï¼Œ<code>Compose</code> å’Œ <code>Normalize</code> æ˜¯ PaddlePaddle ä¸­éå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºå›¾åƒé¢„å¤„ç†å’Œå¢å¼ºã€‚</p>              </div>            </details><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> Compose,Normalize</span><br><span class="line"></span><br><span class="line">transform = Compose([Normalize(mean=[<span class="number">127.5</span>], std=[<span class="number">127.5</span>], data_format=<span class="string">&#x27;CHW&#x27;</span>)])</span><br><span class="line">test_dataset = paddle.vision.datasets.MNIST(mode=<span class="string">&#x27;test&#x27;</span>, transform=transform)</span><br><span class="line"><span class="built_in">print</span>(test_dataset[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line">loader = paddle.io.DataLoader(test_dataset)</span><br><span class="line"><span class="keyword">for</span> data <span class="keyword">in</span> <span class="built_in">enumerate</span>(loader):</span><br><span class="line">    x, label = data[<span class="number">1</span>]</span><br><span class="line">    <span class="built_in">print</span>(label)</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º:</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3<span class="number">.12</span>) C:\Users\lxcqm&gt;python D:\PyTorch\Pytorch1\main.py</span><br><span class="line">[<span class="number">7</span>]  <span class="comment"># åŸå§‹æ•°æ®ä¸­ label ä¸º Python list</span></span><br><span class="line">Tensor(shape=[<span class="number">1</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu_pinned), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">7</span>]])   <span class="comment"># ç”± DataLoader è½¬æ¢åï¼Œlabel ä¸º Tensor</span></span><br></pre></td></tr></table></figure><h3 id="Tensorçš„å±æ€§"><a href="#Tensorçš„å±æ€§" class="headerlink" title="Tensorçš„å±æ€§"></a>Tensorçš„å±æ€§</h3><p>åœ¨å‰æ–‡ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å° Tensor æ—¶æœ‰ shapeã€dtypeã€place ç­‰ä¿¡æ¯ï¼Œè¿™äº›éƒ½æ˜¯ Tensor çš„é‡è¦å±æ€§ï¼Œæƒ³è¦äº†è§£å¦‚ä½•æ“ä½œ Tensor éœ€è¦å¯¹å…¶å±æ€§æœ‰ä¸€å®šäº†è§£ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«å±•å¼€ä»‹ç» Tensor çš„å±æ€§ç›¸å…³æ¦‚å¿µ:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">2.</span>, <span class="number">3.</span>, <span class="number">4.</span>])</span><br></pre></td></tr></table></figure><h4 id="Tensorçš„å½¢çŠ¶"><a href="#Tensorçš„å½¢çŠ¶" class="headerlink" title="Tensorçš„å½¢çŠ¶"></a>Tensorçš„å½¢çŠ¶</h4><ol><li><p>å½¢çŠ¶çš„ä»‹ç»<br> å½¢çŠ¶æ˜¯ Tensor çš„ä¸€ä¸ªé‡è¦çš„åŸºç¡€å±æ€§ï¼Œå¯ä»¥é€šè¿‡ Tensor.shape æŸ¥çœ‹ä¸€ä¸ª Tensor çš„å½¢çŠ¶ï¼Œä»¥ä¸‹ä¸ºç›¸å…³æ¦‚å¿µï¼š</p><ul><li><p>shapeï¼šæè¿°äº† Tensor æ¯ä¸ªç»´åº¦ä¸Šå…ƒç´ çš„æ•°é‡ã€‚</p></li><li><p>ndimï¼š Tensor çš„ç»´åº¦æ•°é‡ï¼Œä¾‹å¦‚<strong>å‘é‡çš„ç»´åº¦ä¸º 1ï¼ŒçŸ©é˜µçš„ç»´åº¦ä¸º 2</strong>ï¼ŒTensor å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ç»´åº¦ã€‚</p></li><li><p>axis æˆ–è€… dimensionï¼šTensor çš„è½´ï¼Œ<strong>å³æŸä¸ªç‰¹å®šçš„ç»´åº¦</strong>ã€‚</p></li><li><p>sizeï¼šTensor ä¸­å…¨éƒ¨å…ƒç´ çš„ä¸ªæ•°ã€‚</p></li></ul><p> åˆ›å»º 1 ä¸ªå››ç»´ Tensor ï¼Œå¹¶é€šè¿‡å›¾å½¢æ¥ç›´è§‚è¡¨è¾¾ä»¥ä¸Šå‡ ä¸ªæ¦‚å¿µä¹‹é—´çš„å…³ç³»ï¼š</p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ndim_4_Tensor = paddle.ones([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure> <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7p1mhwgcx.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7p1mhwgcx.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p> axis0:2çš„æ„æ€æ˜¯0è½´ï¼Œæ•°å€¼ä¸º2<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">ndim_4_Tensor = paddle.ones([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Data Type of every element:&quot;</span>, ndim_4_Tensor.dtype)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Number of dimensions:&quot;</span>, ndim_4_Tensor.ndim)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Shape of Tensor:&quot;</span>, ndim_4_Tensor.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Elements number along axis 0 of Tensor:&quot;</span>, ndim_4_Tensor.shape[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Elements number along the last axis of Tensor:&quot;</span>, ndim_4_Tensor.shape[-<span class="number">1</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure><br> è¾“å‡º:<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3<span class="number">.12</span>) C:\Users\lxcqm&gt;python D:\PyTorch\Pytorch1\main.py</span><br><span class="line">W0314 <span class="number">18</span>:05:<span class="number">09.299489</span>  <span class="number">8612</span> gpu_resources.cc:<span class="number">119</span>] Please NOTE: device: <span class="number">0</span>, GPU Compute Capability: <span class="number">8.9</span>, Driver API Version: <span class="number">12.4</span>, Runtime API Version: <span class="number">12.0</span></span><br><span class="line">W0314 <span class="number">18</span>:05:<span class="number">09.303498</span>  <span class="number">8612</span> gpu_resources.cc:<span class="number">164</span>] device: <span class="number">0</span>, cuDNN Version: <span class="number">8.9</span>.</span><br><span class="line">Data <span class="type">Type</span> of every element: paddle.float32</span><br><span class="line">Number of dimensions: <span class="number">4</span></span><br><span class="line">Shape of Tensor: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">Elements number along axis <span class="number">0</span> of Tensor: <span class="number">2</span></span><br><span class="line">Elements number along the last axis of Tensor: <span class="number">5</span></span><br></pre></td></tr></table></figure></p></li><li><p>é‡ç½® Tensor å½¢çŠ¶ï¼ˆReshapeï¼‰ çš„æ–¹æ³•</p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">ndim_1_Tensor = paddle.to_tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;origina:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(ndim_1_Tensor)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;the shape of ndim_1_Tensor:&quot;</span>, ndim_1_Tensor.shape)</span><br><span class="line"></span><br><span class="line">reshape_Tensor = paddle.reshape(ndim_1_Tensor, [<span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[3, 1]:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(reshape_Tensor)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;After reshape:&quot;</span>, reshape_Tensor.shape)</span><br><span class="line"></span><br><span class="line">reshape_Tensor = paddle.reshape(ndim_1_Tensor, [<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;[1, 3]:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(reshape_Tensor)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;After reshape:&quot;</span>, reshape_Tensor.shape)</span><br></pre></td></tr></table></figure><p> è¾“å‡º:</p> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">original:</span><br><span class="line">Tensor(shape=[<span class="number">3</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">the shape of ndim_1_Tensor: [<span class="number">3</span>]</span><br><span class="line">[<span class="number">3</span>, <span class="number">1</span>]:</span><br><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>],</span><br><span class="line">        [<span class="number">3</span>]])</span><br><span class="line">After reshape: [<span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>]:</span><br><span class="line">Tensor(shape=[<span class="number">1</span>, <span class="number">3</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">    [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line">After reshape: [<span class="number">1</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æŒ‡å®šæ–°çš„ <code>shape</code> æ—¶å­˜åœ¨ä¸€äº›æŠ€å·§ï¼š<br><code>-1</code>è¡¨ç¤ºè¿™ä¸ªç»´åº¦çš„å€¼æ˜¯ä» <code>Tensor</code> çš„å…ƒç´ æ€»æ•°å’Œå‰©ä½™ç»´åº¦è‡ªåŠ¨æ¨æ–­å‡ºæ¥çš„ã€‚å› æ­¤ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªç»´åº¦å¯ä»¥è¢«è®¾ç½®ä¸º <code>-1</code>ã€‚<br><code>0</code> è¡¨ç¤ºè¯¥ç»´åº¦çš„å…ƒç´ æ•°é‡ä¸åŸå€¼ç›¸åŒï¼Œå› æ­¤ <code>shape</code> ä¸­ <code>0</code> çš„ç´¢å¼•å€¼å¿…é¡»å°äº <code>Tensor</code> çš„ç»´åº¦ï¼ˆç´¢å¼•å€¼ä» <code>0</code> å¼€å§‹è®¡ï¼Œå¦‚ç¬¬ <code>1</code> ç»´çš„ç´¢å¼•å€¼æ˜¯ <code>0</code>ï¼Œç¬¬äºŒç»´çš„ç´¢å¼•å€¼æ˜¯ <code>1</code>ï¼‰ã€‚<br>é€šè¿‡å‡ ä¸ªä¾‹å­æ¥è¯¦ç»†äº†è§£ï¼š<br> originä»£è¡¨åŸå§‹å½¢çŠ¶<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">origin:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>] reshape:[<span class="number">3</span>, <span class="number">10</span>]      actual: [<span class="number">3</span>, <span class="number">10</span>] <span class="comment"># ç›´æ¥æŒ‡å®šç›®æ ‡ shape</span></span><br><span class="line"></span><br><span class="line">origin:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>] reshape:[-<span class="number">1</span>]         actual: [<span class="number">30</span>] <span class="comment"># è½¬æ¢ä¸º 1 ç»´ï¼Œç»´åº¦æ ¹æ®å…ƒç´ æ€»æ•°æ¨æ–­å‡ºæ¥æ˜¯ 3*2*5=30</span></span><br><span class="line"></span><br><span class="line">origin:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>] reshape:[-<span class="number">1</span>, <span class="number">5</span>]      actual: [<span class="number">6</span>, <span class="number">5</span>] <span class="comment"># è½¬æ¢ä¸º 2 ç»´ï¼Œå›ºå®šä¸€ä¸ªç»´åº¦ 5ï¼Œå¦ä¸€ä¸ªç»´åº¦æ ¹æ®å…ƒç´ æ€»æ•°æ¨æ–­å‡ºæ¥æ˜¯ 30Ã·5=6</span></span><br><span class="line"></span><br><span class="line">origin:[<span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>] reshape:[<span class="number">0</span>, -<span class="number">1</span>]      actual: [<span class="number">3</span>, <span class="number">10</span>] <span class="comment"># reshape:[0, -1]ä¸­ 0 çš„ç´¢å¼•å€¼ä¸º 0ï¼ŒæŒ‰ç…§è§„åˆ™ï¼Œè½¬æ¢åç¬¬ 0 ç»´çš„å…ƒç´ æ•°é‡ä¸åŸå§‹ Tensor ç¬¬ 0 ç»´çš„å…ƒç´ æ•°é‡ç›¸åŒï¼Œä¸º 3ï¼›ç¬¬ 1 ç»´çš„å…ƒç´ æ•°é‡æ ¹æ®å…ƒç´ æ€»å€¼è®¡ç®—å¾—å‡ºä¸º 30Ã·3=10ã€‚</span></span><br><span class="line"></span><br><span class="line">origin:[<span class="number">3</span>, <span class="number">2</span>]    reshape:[<span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>]    errorï¼š <span class="comment"># reshape:[3, 1, 0]ä¸­ 0 çš„ç´¢å¼•å€¼ä¸º 2ï¼Œä½†åŸ Tensor åªæœ‰ 2 ç»´ï¼Œæ— æ³•æ‰¾åˆ°ä¸ç¬¬ 3 ç»´å¯¹åº”çš„å…ƒç´ æ•°é‡ï¼Œå› æ­¤å‡ºé”™ã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><br> ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ reshape:[-1] ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°† Tensor æŒ‰å…¶åœ¨è®¡ç®—æœºä¸Šçš„å†…å­˜åˆ†å¸ƒå±•å¹³ä¸ºä¸€ç»´ã€‚<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">ndim_3_Tensor = paddle.to_tensor([[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">                                [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]],</span><br><span class="line">                                [[<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">                                [<span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>]]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Tensor flattened to Vector:&quot;</span>, paddle.reshape(ndim_3_Tensor, [-<span class="number">1</span>]).numpy())</span><br></pre></td></tr></table></figure><br> è¾“å‡º:<br> <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tensor flattened to Vector: [ <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span> <span class="number">20</span>]</span><br></pre></td></tr></table></figure><br><strong>è¯´æ˜ï¼š</strong><br>é™¤äº† paddle.reshape å¯é‡ç½® Tensor çš„å½¢çŠ¶ï¼Œè¿˜å¯é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ”¹å˜ shapeï¼š</p><ul><li>paddle.squeezeï¼Œå¯å®ç° Tensor çš„é™ç»´æ“ä½œï¼Œå³æŠŠ Tensor ä¸­å°ºå¯¸ä¸º 1 çš„ç»´åº¦åˆ é™¤ã€‚</li><li>paddle.unsqueezeï¼Œå¯å®ç° Tensor çš„å‡ç»´æ“ä½œï¼Œå³å‘ Tensor ä¸­æŸä¸ªä½ç½®æ’å…¥å°ºå¯¸ä¸º 1 çš„ç»´åº¦ã€‚</li><li>paddle.flattenï¼Œå°† Tensor çš„æ•°æ®åœ¨æŒ‡å®šçš„è¿ç»­ç»´åº¦ä¸Šå±•å¹³ã€‚</li><li>paddle.transposeï¼Œå¯¹ Tensor çš„æ•°æ®è¿›è¡Œé‡æ’ã€‚</li></ul></blockquote></li><li><p>åŸä½ï¼ˆInplaceï¼‰æ“ä½œå’ŒéåŸä½æ“ä½œçš„åŒºåˆ«</p></li></ol><h2 id="è¯¾ç¨‹ç¬”è®°"><a href="#è¯¾ç¨‹ç¬”è®°" class="headerlink" title="è¯¾ç¨‹ç¬”è®°"></a>è¯¾ç¨‹ç¬”è®°</h2><h3 id="åˆ›å»ºä¸€ä¸ªtensor"><a href="#åˆ›å»ºä¸€ä¸ªtensor" class="headerlink" title="åˆ›å»ºä¸€ä¸ªtensor"></a>åˆ›å»ºä¸€ä¸ªtensor</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(x.shape)  <span class="comment">#the shape of the tensor</span></span><br><span class="line"><span class="built_in">print</span>(x.numel())    <span class="comment">#the num element of the tensor</span></span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">12</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">0</span> , <span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span> , <span class="number">4</span> , <span class="number">5</span> , <span class="number">6</span> , <span class="number">7</span> , <span class="number">8</span> , <span class="number">9</span> , <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line">[<span class="number">12</span>]</span><br><span class="line">Tensor(shape=[], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       <span class="number">12</span>)</span><br></pre></td></tr></table></figure><h3 id="æ”¹å˜å¼ é‡å½¢çŠ¶"><a href="#æ”¹å˜å¼ é‡å½¢çŠ¶" class="headerlink" title="æ”¹å˜å¼ é‡å½¢çŠ¶"></a>æ”¹å˜å¼ é‡å½¢çŠ¶</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">y = paddle.reshape(x, [<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(y)</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">4</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span> , <span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span> ],</span><br><span class="line">        [<span class="number">4</span> , <span class="number">5</span> , <span class="number">6</span> , <span class="number">7</span> ],</span><br><span class="line">        [<span class="number">8</span> , <span class="number">9</span> , <span class="number">10</span>, <span class="number">11</span>]])</span><br></pre></td></tr></table></figure><h3 id="tensorçš„è®¡ç®—"><a href="#tensorçš„è®¡ç®—" class="headerlink" title="tensorçš„è®¡ç®—"></a>tensorçš„è®¡ç®—</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.to_tensor([<span class="number">1.0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>])</span><br><span class="line">y = paddle.to_tensor([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x + y)</span><br><span class="line"><span class="built_in">print</span>(x - y)</span><br><span class="line"><span class="built_in">print</span>(x * y)</span><br><span class="line"><span class="built_in">print</span>(x / y)</span><br><span class="line"><span class="built_in">print</span>(x ** y)  <span class="comment"># æ±‚å¹‚</span></span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">3.</span> , <span class="number">4.</span> , <span class="number">6.</span> , <span class="number">10.</span>])</span><br><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [-<span class="number">1.</span>,  <span class="number">0.</span>,  <span class="number">2.</span>,  <span class="number">6.</span>])</span><br><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">2.</span> , <span class="number">4.</span> , <span class="number">8.</span> , <span class="number">16.</span>])</span><br><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">0.50000000</span>, <span class="number">1.</span>        , <span class="number">2.</span>        , <span class="number">4.</span>        ])</span><br><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">1.</span> , <span class="number">4.</span> , <span class="number">16.</span>, <span class="number">64.</span>])</span><br></pre></td></tr></table></figure><h3 id="tensorçš„è¿ç»“"><a href="#tensorçš„è¿ç»“" class="headerlink" title="tensorçš„è¿ç»“"></a>tensorçš„è¿ç»“</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>, dtype=paddle.float32).reshape([<span class="number">3</span>, <span class="number">4</span>])<span class="comment">#[]ä¹Ÿå¯ä»¥å†™æˆ()</span></span><br><span class="line">y = paddle.to_tensor([[<span class="number">2.0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(paddle.concat((x, y), axis=<span class="number">0</span>))<span class="comment">#ç¬¬ä¸€ä¸ªç»´åº¦</span></span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">6</span>, <span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0.</span> , <span class="number">1.</span> , <span class="number">2.</span> , <span class="number">3.</span> ],</span><br><span class="line">        [<span class="number">4.</span> , <span class="number">5.</span> , <span class="number">6.</span> , <span class="number">7.</span> ],</span><br><span class="line">        [<span class="number">8.</span> , <span class="number">9.</span> , <span class="number">10.</span>, <span class="number">11.</span>],</span><br><span class="line">        [<span class="number">2.</span> , <span class="number">1.</span> , <span class="number">4.</span> , <span class="number">3.</span> ],</span><br><span class="line">        [<span class="number">1.</span> , <span class="number">2.</span> , <span class="number">3.</span> , <span class="number">4.</span> ],</span><br><span class="line">        [<span class="number">4.</span> , <span class="number">3.</span> , <span class="number">2.</span> , <span class="number">1.</span> ]])</span><br></pre></td></tr></table></figure><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>, dtype=paddle.float32).reshape([<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">y = paddle.to_tensor([[<span class="number">2.0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(paddle.concat((x, y), axis=-<span class="number">1</span>))<span class="comment">#æœ€åä¸€ä¸ªç»´åº¦</span></span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">8</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0.</span> , <span class="number">1.</span> , <span class="number">2.</span> , <span class="number">3.</span> , <span class="number">2.</span> , <span class="number">1.</span> , <span class="number">4.</span> , <span class="number">3.</span> ],</span><br><span class="line">        [<span class="number">4.</span> , <span class="number">5.</span> , <span class="number">6.</span> , <span class="number">7.</span> , <span class="number">1.</span> , <span class="number">2.</span> , <span class="number">3.</span> , <span class="number">4.</span> ],</span><br><span class="line">        [<span class="number">8.</span> , <span class="number">9.</span> , <span class="number">10.</span>, <span class="number">11.</span>, <span class="number">4.</span> , <span class="number">3.</span> , <span class="number">2.</span> , <span class="number">1.</span> ]])</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡é€»è¾‘è¿ç®—ç¬¦æ„å»ºäºŒç»´tensor"><a href="#é€šè¿‡é€»è¾‘è¿ç®—ç¬¦æ„å»ºäºŒç»´tensor" class="headerlink" title="é€šè¿‡é€»è¾‘è¿ç®—ç¬¦æ„å»ºäºŒç»´tensor"></a>é€šè¿‡é€»è¾‘è¿ç®—ç¬¦æ„å»ºäºŒç»´tensor</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>, dtype=paddle.float32).reshape([<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">y = paddle.to_tensor([[<span class="number">2.0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line">z = x == y</span><br><span class="line"><span class="built_in">print</span>(z)</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">4</span>], dtype=<span class="built_in">bool</span>, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="literal">False</span>, <span class="literal">True</span> , <span class="literal">False</span>, <span class="literal">True</span> ],</span><br><span class="line">        [<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">        [<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>]])</span><br></pre></td></tr></table></figure><h3 id="æ±‚å’Œäº§ç”Ÿä¸€ä¸ªå…ƒç´ çš„å¼ é‡"><a href="#æ±‚å’Œäº§ç”Ÿä¸€ä¸ªå…ƒç´ çš„å¼ é‡" class="headerlink" title="æ±‚å’Œäº§ç”Ÿä¸€ä¸ªå…ƒç´ çš„å¼ é‡"></a>æ±‚å’Œäº§ç”Ÿä¸€ä¸ªå…ƒç´ çš„å¼ é‡</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>, dtype=paddle.float32).reshape([<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x.<span class="built_in">sum</span>())</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       <span class="number">66.</span>)</span><br></pre></td></tr></table></figure><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = paddle.to_tensor([[<span class="number">2.0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>(y))</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">4</span>], dtype=float32, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [<span class="number">7.</span>, <span class="number">6.</span>, <span class="number">9.</span>, <span class="number">8.</span>])</span><br></pre></td></tr></table></figure><h3 id="å¹¿æ’­æœºåˆ¶"><a href="#å¹¿æ’­æœºåˆ¶" class="headerlink" title="å¹¿æ’­æœºåˆ¶"></a>å¹¿æ’­æœºåˆ¶</h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">3</span>).reshape([<span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line">y = paddle.arange(<span class="number">2</span>).reshape([<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(y)</span><br><span class="line"><span class="built_in">print</span>(x+y)</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]])</span><br><span class="line">Tensor(shape=[<span class="number">1</span>, <span class="number">2</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>, <span class="number">1</span>]])</span><br><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">2</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">3</span>]])</span><br></pre></td></tr></table></figure><h3 id="è®¿é—®å…ƒç´ "><a href="#è®¿é—®å…ƒç´ " class="headerlink" title="è®¿é—®å…ƒç´ "></a>è®¿é—®å…ƒç´ </h3><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">3</span>).reshape([<span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x[<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">2</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>]])</span><br></pre></td></tr></table></figure><h3 id="èµ‹å€¼çŸ©é˜µä¸­çš„å…ƒç´ "><a href="#èµ‹å€¼çŸ©é˜µä¸­çš„å…ƒç´ " class="headerlink" title="èµ‹å€¼çŸ©é˜µä¸­çš„å…ƒç´ "></a>èµ‹å€¼çŸ©é˜µä¸­çš„å…ƒç´ </h3><h4 id="èµ‹å€¼å•ä¸ªå…ƒç´ "><a href="#èµ‹å€¼å•ä¸ªå…ƒç´ " class="headerlink" title="èµ‹å€¼å•ä¸ªå…ƒç´ "></a>èµ‹å€¼å•ä¸ªå…ƒç´ </h4><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">3</span>).reshape([<span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">x[<span class="number">1</span>, <span class="number">0</span>] = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>],</span><br><span class="line">        [<span class="number">2</span>]])</span><br><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">1</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span>],</span><br><span class="line">        [<span class="number">5</span>],</span><br><span class="line">        [<span class="number">2</span>]])</span><br></pre></td></tr></table></figure><h4 id="èµ‹å€¼å¤šä¸ªå…ƒç´ "><a href="#èµ‹å€¼å¤šä¸ªå…ƒç´ " class="headerlink" title="èµ‹å€¼å¤šä¸ªå…ƒç´ "></a>èµ‹å€¼å¤šä¸ªå…ƒç´ </h4><p><strong>IN</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"></span><br><span class="line">x = paddle.arange(<span class="number">12</span>).reshape([<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">x[<span class="number">0</span>:<span class="number">2</span>, :] = <span class="number">99</span></span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><p><strong>OUT</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">4</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">0</span> , <span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span> ],</span><br><span class="line">        [<span class="number">4</span> , <span class="number">5</span> , <span class="number">6</span> , <span class="number">7</span> ],</span><br><span class="line">        [<span class="number">8</span> , <span class="number">9</span> , <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line">Tensor(shape=[<span class="number">3</span>, <span class="number">4</span>], dtype=int64, place=Place(gpu:<span class="number">0</span>), stop_gradient=<span class="literal">True</span>,</span><br><span class="line">       [[<span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>],</span><br><span class="line">        [<span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>, <span class="number">99</span>],</span><br><span class="line">        [<span class="number">8</span> , <span class="number">9</span> , <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä¸ºæ–°ç»“æœåˆ†é…å†…å­˜"><a href="#ä¸ºæ–°ç»“æœåˆ†é…å†…å­˜" class="headerlink" title="ä¸ºæ–°ç»“æœåˆ†é…å†…å­˜"></a>ä¸ºæ–°ç»“æœåˆ†é…å†…å­˜</h4>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äººå·¥æ™ºèƒ½è€ƒæ ¸</title>
      <link href="/2024/03/11/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E8%80%83%E6%A0%B8/"/>
      <url>/2024/03/11/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E8%80%83%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="task1-1"><a href="#task1-1" class="headerlink" title="task1.1"></a>task1.1</h1><blockquote><p>å¯¹äºä½ ç»™å‡ºçš„è§£é‡Šï¼Œè¯·ç»™å‡ºç›¸åº”çš„PaddlePaddleå¯¹åº”çš„å‡½æ•°ï¼Œå¹¶å°½å¯èƒ½çš„è§£é‡Šå‡½æ•°å‚æ•°çš„æ„ä¹‰</p><ol><li>è§£é‡Šç¥ç»ç½‘ç»œä¸­<strong>å·ç§¯å±‚</strong>çš„ä½œç”¨ã€‚<blockquote><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.39kxm747di.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.39kxm747di.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7zq6klz9it.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7zq6klz9it.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><ul><li>æŠŠå·ç§¯æ ¸ä¸­å¿ƒç‚¹å‘¨å›´çš„åƒç´ æŒ‰æ¯”ä¾‹é™„åŠ åˆ°(å¯¹å…¶äº§ç”Ÿå½±å“)å·ç§¯æ ¸ä¸­å¿ƒå¯¹åº”çš„åƒç´ ;</li><li>å·ç§¯æ ¸ä»£è¡¨ä¸€ä¸ªç‰¹å¾ï¼Œç”¨æ¥æå–è¾“å…¥æ•°æ®çš„ç‰¹å®šç‰¹å¾<br><strong>paddle.nn.Conv2D()</strong></li><li><code>in_channels</code>ï¼šè¾“å…¥ç‰¹å¾å›¾çš„é€šé“æ•°ã€‚</li><li><code>out_channels</code>ï¼šè¾“å‡ºç‰¹å¾å›¾çš„é€šé“æ•°ã€‚</li><li><code>kernel_size</code>ï¼šå·ç§¯æ ¸å¤§å°ã€‚</li><li><code>stride</code>ï¼šå·ç§¯æ­¥é•¿ã€‚</li><li><code>padding</code>ï¼šå¡«å……å¤§å°ã€‚</li></ul></blockquote></li><li>è§£é‡Šç¥ç»ç½‘ç»œä¸­<strong>æ± åŒ–å±‚</strong>çš„ä½œç”¨ã€‚<blockquote><p>è¿‡æ»¤ç‰¹å¾(å‡å°ç‰¹å¾å›¾çš„ç»´åº¦)<br><strong>paddle.nn.MaxPool2D(æœ€å¤§æ± åŒ–)   paddle.nn.AvgPool2D(å¹³å‡æ± åŒ–)</strong></p><ul><li><code>kernel_size</code>ï¼šæ± åŒ–æ ¸å¤§å°ã€‚</li><li><code>stride</code>ï¼šæ± åŒ–æ­¥é•¿ã€‚</li><li><code>padding</code>ï¼šå¡«å……å¤§å°ã€‚</li></ul></blockquote></li><li>è§£é‡Šç¥ç»ç½‘ç»œä¸­<strong>è¿æ¥å±‚</strong>çš„ä½œç”¨ã€‚<blockquote><p>å°†è¾“å…¥çš„å¤šç»´å‘é‡æ•°æ®å±•å¹³ä¸ºä¸€ç»´å‘é‡ï¼Œç„¶åçº¿æ€§å¤„ç†ï¼Œä¸æƒé‡çŸ©é˜µç›¸ä¹˜ï¼Œå†åŠ ä¸Šåç½®é¡¹ï¼Œé€šè¿‡æ¿€æ´»å‡½æ•°è¾“å‡ºç»“æ„ï¼Œå¯ä»¥è¿›è¡Œåˆ†ç±»&#x2F;é¢„æµ‹<br><strong>paddle.nn.Linear()</strong></p><ul><li><code>in_features</code>ï¼šè¾“å…¥ç‰¹å¾çš„å¤§å°ã€‚</li><li><code>out_features</code>ï¼šè¾“å‡ºç‰¹å¾çš„å¤§å°ã€‚</li></ul></blockquote></li><li>è§£é‡Šç¥ç»ç½‘ç»œä¸­<strong>æ¿€æ´»å‡½æ•°å±‚</strong>çš„ä½œç”¨ã€‚<blockquote><p>æŠŠè¿æ¥å±‚å¾—åˆ°çš„çº¿æ€§ç»“æ„è½¬åŒ–ä¸ºéçº¿æ€§ç»“æœï¼Œä»è€Œæ›´å¥½åœ°æ‹Ÿåˆæ•°æ®å¹¶æé«˜æ¨¡å‹çš„æ€§èƒ½<br><strong>paddle.nn.ReLU  paddle.nn.Sigmoid   paddle.tanh</strong></p><ul><li>æ²¡æœ‰å‚æ•°</li></ul></blockquote></li><li>è§£é‡Šç¥ç»ç½‘ç»œä¸­<strong>Dropoutå±‚</strong>çš„ä½œç”¨ã€‚<blockquote><p>æ­£åˆ™åŒ–ï¼Œéšæœºä¸¢å¼ƒç¥ç»å…ƒï¼Œå‡å°‘å‚æ•°ï¼Œé™ä½æ¨¡å‹å¤æ‚åº¦ï¼Œå‡å°‘è¿‡æ‹Ÿåˆæƒ…å†µ<br><strong>paddle.nn.Dropout</strong></p><ul><li><code>dropout_prob</code>ï¼šä¸¢å¼ƒæ¦‚ç‡ï¼Œå³è¦ä¸¢å¼ƒçš„ç¥ç»å…ƒçš„æ¯”ä¾‹ã€‚</li></ul></blockquote></li></ol></blockquote><h1 id="task2-1"><a href="#task2-1" class="headerlink" title="task2.1"></a>task2.1</h1><p>åœ¨ä¸€ä¸ªå•å±‚æ„ŸçŸ¥å™¨ä¸­ï¼Œå‡è®¾æœ‰ä¸¤ä¸ªè¾“å…¥ç‰¹å¾å’Œä¸€ä¸ªè¾“å‡ºã€‚</p><p>æƒé‡åˆ†åˆ«æ˜¯w1 &#x3D; 0.5ï¼Œw2 &#x3D; -0.3ï¼Œåå·®ä¸ºb &#x3D; 0.1ã€‚</p><p>è¾“å…¥ç‰¹å¾ä¸ºx1 &#x3D; 2ï¼Œx2 &#x3D; -1ã€‚</p><p>è®¡ç®—è¾“å‡ºï¼ˆå‡è®¾æ¿€æ´»å‡½æ•°æ˜¯é˜¶è·ƒå‡½æ•°ï¼‰ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰æƒé‡/åå·®/è¾“å…¥ç‰¹å¾</span></span><br><span class="line">w1 = <span class="number">0.5</span></span><br><span class="line">w2 = -<span class="number">0.3</span></span><br><span class="line">b = <span class="number">0.1</span></span><br><span class="line">x1 = <span class="number">2</span></span><br><span class="line">x2 = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æ¿€æ´»å‡½æ•°(é˜¶è·ƒå‡½æ•°)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">step_function</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">perceptron_output</span>(<span class="params">w1, w2, b, x1, x2</span>):</span><br><span class="line">    result = w1 * x1 + w2 * x2 + b</span><br><span class="line">    <span class="keyword">return</span> step_function(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">output = perceptron_output(w1, w2, b, x1, x2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Output:&quot;</span>, output)</span><br></pre></td></tr></table></figure><h1 id="task2-2ï¼ˆä»£ç å®ç°ï¼‰"><a href="#task2-2ï¼ˆä»£ç å®ç°ï¼‰" class="headerlink" title="task2.2ï¼ˆä»£ç å®ç°ï¼‰"></a>task2.2ï¼ˆä»£ç å®ç°ï¼‰</h1><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªéšè—å±‚çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œæ¯ä¸ªéšè—å±‚åˆ†åˆ«æœ‰3ä¸ªç¥ç»å…ƒã€‚</p><p>è¾“å…¥å±‚æœ‰4ä¸ªç‰¹å¾ï¼Œè¾“å‡ºå±‚æœ‰2ä¸ªç¥ç»å…ƒã€‚</p><p>æ‰€æœ‰çš„æ¿€æ´»å‡½æ•°éƒ½æ˜¯ReLUã€‚</p><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—æ•´ä¸ªç½‘ç»œçš„è¾“å‡ºï¼Œç»™å®šè¾“å…¥å’Œç½‘ç»œå‚æ•°ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">IP = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">W1 = [[<span class="number">0.32361505</span>, -<span class="number">1.08053636</span>, <span class="number">1.94312927</span>],</span><br><span class="line">      [<span class="number">1.87599918</span>, <span class="number">0.09333858</span>, -<span class="number">0.54394708</span>],</span><br><span class="line">      [<span class="number">0.31721595</span>, <span class="number">0.15919131</span>, <span class="number">0.75238423</span>],</span><br><span class="line">      [<span class="number">0.52593422</span>, <span class="number">0.39281801</span>, <span class="number">0.47263081</span>]]</span><br><span class="line">B1 = [[-<span class="number">0.95059911</span>, -<span class="number">0.78673449</span>, -<span class="number">0.27075615</span>]]</span><br><span class="line">W2 = [[-<span class="number">1.11562289</span>, -<span class="number">1.05667625</span>, <span class="number">1.17330918</span>],</span><br><span class="line">      [<span class="number">1.15682221</span>, <span class="number">0.30359694</span>, -<span class="number">0.32633211</span>],</span><br><span class="line">      [<span class="number">0.44536135</span>, <span class="number">0.31302144</span>, -<span class="number">1.16012537</span>]]</span><br><span class="line">B2 = [[<span class="number">1.48936813</span>, -<span class="number">0.50073038</span>, -<span class="number">0.16725209</span>]]</span><br><span class="line">W3 = [[-<span class="number">0.06277751</span>, -<span class="number">0.52103597</span>],</span><br><span class="line">      [-<span class="number">0.29022904</span>, <span class="number">1.55451498</span>],</span><br><span class="line">      [-<span class="number">0.80766273</span>, -<span class="number">0.24495497</span>]]</span><br><span class="line">B3 = [[<span class="number">0.97822396</span>, <span class="number">1.32775756</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰reluå‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">relu</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> np.maximum(<span class="number">0</span>, x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Feedforward_neural_network</span>(<span class="params">IP, W1, B1, W2, B2, W3, B3</span>):</span><br><span class="line">    IP = np.array(IP)</span><br><span class="line">    W1 = np.array(W1)</span><br><span class="line">    B1 = np.array(B1)</span><br><span class="line">    W2 = np.array(W2)</span><br><span class="line">    B2 = np.array(B2)</span><br><span class="line">    W3 = np.array(W3)</span><br><span class="line">    B3 = np.array(B3)</span><br><span class="line"></span><br><span class="line">    out1 = np.dot(IP, W1) + B1</span><br><span class="line">    in2 = relu(out1)</span><br><span class="line">    out2 = np.dot(in2, W2) + B2</span><br><span class="line">    in3 = relu(out2)</span><br><span class="line">    out3 = np.dot(in3, W3) + B3</span><br><span class="line">    output = out3</span><br><span class="line">    <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›è¡Œå‰å‘ä¼ æ’­</span></span><br><span class="line">result = Feedforward_neural_network(IP, W1, B1, W2, B2, W3, B3)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h1 id="task3-1ï¼ˆä»£ç å®ç°ï¼‰"><a href="#task3-1ï¼ˆä»£ç å®ç°ï¼‰" class="headerlink" title="task3.1ï¼ˆä»£ç å®ç°ï¼‰"></a>task3.1ï¼ˆä»£ç å®ç°ï¼‰</h1><h3 id="é¢˜ç›®ï¼šçº¿æ€§å›å½’æ¨¡å‹"><a href="#é¢˜ç›®ï¼šçº¿æ€§å›å½’æ¨¡å‹" class="headerlink" title="é¢˜ç›®ï¼šçº¿æ€§å›å½’æ¨¡å‹"></a>é¢˜ç›®ï¼šçº¿æ€§å›å½’æ¨¡å‹</h3><p>ä½¿ç”¨PaddlePaddleæ¡†æ¶ï¼ˆPaddle Pytorch Tensorflowï¼Œæˆ–è€…è‡ªå·±æ‰‹å†™çº¿æ€§å›å½’ç½‘ç»œéƒ½å¯ï¼‰æ­å»ºä¸€ä¸ªç®€å•çš„çº¿æ€§å›å½’æ¨¡å‹ï¼Œå¯¹data.csvæ•°æ®é›†ä¸­çš„æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œå¹¶é¢„æµ‹æ–°æ•°æ®ç‚¹çš„å€¼ã€‚</p><h4 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h4><p>ä½¿ç”¨paddle.nn.Linearåˆ›å»ºä¸€ä¸ªå…·æœ‰å•ä¸ªè¾“å…¥å’Œå•ä¸ªè¾“å‡ºçš„çº¿æ€§å±‚ã€‚<br>å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ã€‚<br>è®­ç»ƒæ¨¡å‹ä»¥æ‹Ÿåˆæ•°æ®ã€‚<br>å¯¹æ–°æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.nn <span class="keyword">import</span> Linear</span><br><span class="line"><span class="keyword">import</span> paddle.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data</span>():</span><br><span class="line">    <span class="comment"># ä»æ–‡ä»¶å¯¼å…¥æ•°æ®</span></span><br><span class="line">    datafile = pd.read_csv(<span class="string">&quot;C:/Users/lxcqm/Desktop/äººå·¥æ™ºèƒ½è€ƒæ ¸/è®­ç»ƒæ•°æ®/data.csv&quot;</span>)</span><br><span class="line">    X = datafile[<span class="string">&quot;X&quot;</span>].values.astype(<span class="string">&quot;float32&quot;</span>)</span><br><span class="line">    Y = datafile[<span class="string">&quot;y&quot;</span>].values.astype(<span class="string">&quot;float32&quot;</span>)</span><br><span class="line">    data_matrix = np.column_stack((X, Y))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç¡®ä¿æ•°æ®çš„æ€»å…ƒç´ æ•°é‡ä¸º 100000</span></span><br><span class="line">    num_rows = <span class="number">50000</span></span><br><span class="line">    num_cols = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    data_matrix = data_matrix.reshape((num_rows, num_cols))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸæ•°æ®é›†æ‹†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨80%çš„æ•°æ®åšè®­ç»ƒï¼Œ20%çš„æ•°æ®åšæµ‹è¯•</span></span><br><span class="line">    <span class="comment"># æµ‹è¯•é›†å’Œè®­ç»ƒé›†å¿…é¡»æ˜¯æ²¡æœ‰äº¤é›†çš„</span></span><br><span class="line">    ratio = <span class="number">0.8</span></span><br><span class="line">    offset = <span class="built_in">int</span>(data_matrix.shape[<span class="number">0</span>] * ratio)</span><br><span class="line">    training_data = data_matrix[:offset]</span><br><span class="line">    test_data = data_matrix[offset:]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—trainæ•°æ®é›†çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼</span></span><br><span class="line">    maximums, minimums = training_data.<span class="built_in">max</span>(axis=<span class="number">0</span>), training_data.<span class="built_in">min</span>(axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®°å½•æ•°æ®çš„å½’ä¸€åŒ–å‚æ•°ï¼Œåœ¨é¢„æµ‹æ—¶å¯¹æ•°æ®åšå½’ä¸€åŒ–</span></span><br><span class="line">    <span class="keyword">global</span> max_values</span><br><span class="line">    <span class="keyword">global</span> min_values</span><br><span class="line"></span><br><span class="line">    max_values = maximums</span><br><span class="line">    min_values = minimums</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">    training_data = (training_data - min_values) / (maximums - minimums)</span><br><span class="line">    test_data = (test_data - min_values) / (maximums - minimums)</span><br><span class="line">    <span class="keyword">return</span> training_data, test_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># # éªŒè¯æ•°æ®é›†è¯»å–ç¨‹åºçš„æ­£ç¡®æ€§</span></span><br><span class="line"><span class="comment"># training_data, test_data = load_data()</span></span><br><span class="line"><span class="comment"># print(training_data.shape)</span></span><br><span class="line"><span class="comment"># print(training_data)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Regressor</span>(paddle.nn.Layer):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># selfä»£è¡¨ç±»çš„å®ä¾‹è‡ªèº«</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–çˆ¶ç±»ä¸­çš„ä¸€äº›å‚æ•°</span></span><br><span class="line">        <span class="built_in">super</span>(Regressor, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œè¾“å…¥ç»´åº¦æ˜¯1ï¼Œè¾“å‡ºç»´åº¦æ˜¯1</span></span><br><span class="line">        self.fc = Linear(in_features=<span class="number">1</span>, out_features=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç½‘ç»œçš„å‰å‘è®¡ç®—</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        x = self.fc(inputs)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜å®šä¹‰å¥½çš„çº¿æ€§å›å½’æ¨¡å‹</span></span><br><span class="line">model = Regressor()</span><br><span class="line"><span class="comment"># å¼€å¯æ¨¡å‹è®­ç»ƒæ¨¡å¼</span></span><br><span class="line">model.train()</span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®</span></span><br><span class="line">training_data, test_data = load_data()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¼˜åŒ–ç®—æ³•ï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGD</span></span><br><span class="line"><span class="comment"># å­¦ä¹ ç‡è®¾ç½®ä¸º0.01</span></span><br><span class="line">opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.01</span>, parameters=model.parameters())</span><br><span class="line"></span><br><span class="line">EPOCH_NUM = <span class="number">10</span>  <span class="comment"># è®¾ç½®å¤–å±‚å¾ªç¯æ¬¡æ•°</span></span><br><span class="line">BATCH_SIZE = <span class="number">100</span>  <span class="comment"># è®¾ç½®batchå¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¤–å±‚å¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">    <span class="comment"># åœ¨æ¯è½®è¿­ä»£å¼€å§‹ä¹‹å‰ï¼Œå°†è®­ç»ƒæ•°æ®çš„é¡ºåºéšæœºçš„æ‰“ä¹±</span></span><br><span class="line">    np.random.shuffle(training_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†è®­ç»ƒæ•°æ®è¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªbatchåŒ…å«10æ¡æ•°æ®</span></span><br><span class="line">    mini_batches = [training_data[k:k + BATCH_SIZE] <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(training_data), BATCH_SIZE)]</span><br><span class="line"><span class="comment"># print(mini_batches)</span></span><br><span class="line">    <span class="comment"># å®šä¹‰å†…å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">for</span> iter_id, mini_batch <span class="keyword">in</span> <span class="built_in">enumerate</span>(mini_batches):</span><br><span class="line">        x = np.array(mini_batch[:, :-<span class="number">1</span>])  <span class="comment"># è·å¾—å½“å‰æ‰¹æ¬¡è®­ç»ƒX</span></span><br><span class="line">        y = np.array(mini_batch[:, -<span class="number">1</span>:])  <span class="comment"># è·å¾—å½“å‰æ‰¹æ¬¡è®­ç»ƒY</span></span><br><span class="line"><span class="comment"># print(mini_batch, x, y)</span></span><br><span class="line">        <span class="comment"># å°†numpyæ•°æ®è½¬ä¸ºé£æ¡¨åŠ¨æ€å›¾tensorçš„æ ¼å¼</span></span><br><span class="line">        X = paddle.to_tensor(x)</span><br><span class="line">        Y = paddle.to_tensor(y)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å‰å‘è®¡ç®—</span></span><br><span class="line">        predicts = model(X)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">        loss = F.square_error_cost(predicts, label=Y)</span><br><span class="line">        avg_loss = paddle.mean(loss)</span><br><span class="line">        <span class="keyword">if</span> iter_id % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, iter: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, iter_id, avg_loss.numpy()))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åå‘ä¼ æ’­ï¼Œè®¡ç®—æ¯å±‚å‚æ•°çš„æ¢¯åº¦å€¼</span></span><br><span class="line">        avg_loss.backward()</span><br><span class="line">        <span class="comment"># æ›´æ–°å‚æ•°ï¼Œæ ¹æ®è®¾ç½®å¥½çš„å­¦ä¹ ç‡è¿­ä»£ä¸€æ­¥</span></span><br><span class="line">        opt.step()</span><br><span class="line">        <span class="comment"># æ¸…ç©ºæ¢¯åº¦å˜é‡ï¼Œä»¥å¤‡ä¸‹ä¸€è½®è®¡ç®—</span></span><br><span class="line">        opt.clear_grad()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_one_example</span>():</span><br><span class="line">    <span class="comment"># ä»ä¸Šè¾¹å·²åŠ è½½çš„æµ‹è¯•é›†ä¸­ï¼Œéšæœºé€‰æ‹©ä¸€æ¡ä½œä¸ºæµ‹è¯•æ•°æ®</span></span><br><span class="line">    idx = np.random.randint(<span class="number">0</span>, test_data.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># idx = -10</span></span><br><span class="line">    x0, y0 = test_data[idx, <span class="number">0</span>], test_data[idx, -<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    x0 = x0.reshape([<span class="number">1</span>, -<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> x0, y0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ¨¡å‹å‚æ•°ï¼Œæ–‡ä»¶åä¸ºLR_model.pdparams</span></span><br><span class="line">paddle.save(model.state_dict(), <span class="string">&#x27;C:/Users/lxcqm/Desktop/model/model1.pdmodel&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ¨¡å‹ä¿å­˜æˆåŠŸï¼Œæ¨¡å‹å‚æ•°ä¿å­˜åœ¨C:/Users/lxcqm/Desktop/model/model1.pdmodel&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸ºä¿å­˜æ¨¡å‹å‚æ•°çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line">model_dict = paddle.load(<span class="string">&#x27;C:/Users/lxcqm/Desktop/model/model1.pdmodel&#x27;</span>)</span><br><span class="line">model.load_dict(model_dict)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸ºæ•°æ®é›†çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line">xn, yn = load_one_example()</span><br><span class="line"><span class="comment"># å°†æ•°æ®è½¬ä¸ºåŠ¨æ€å›¾çš„variableæ ¼å¼</span></span><br><span class="line">xn = paddle.to_tensor(xn)</span><br><span class="line">predict = model(xn)</span><br><span class="line"><span class="comment"># print(&quot;xn&quot;, xn,&quot;predict&quot;,predict, &quot;yn&quot;, yn)</span></span><br><span class="line"><span class="comment"># å¯¹ç»“æœåšåå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">predict = predict * (max_values[-<span class="number">1</span>] - min_values[-<span class="number">1</span>]) + min_values[-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># å¯¹Yæ•°æ®åšåå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">yn = yn * (max_values[-<span class="number">1</span>] - min_values[-<span class="number">1</span>]) + min_values[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Inference result is &#123;&#125;, the corresponding Y is &#123;&#125;&quot;</span>.<span class="built_in">format</span>(predict.numpy(), yn))</span><br></pre></td></tr></table></figure><h1 id="task3-2ï¼ˆä»£ç å®ç°ï¼‰"><a href="#task3-2ï¼ˆä»£ç å®ç°ï¼‰" class="headerlink" title="task3.2ï¼ˆä»£ç å®ç°ï¼‰"></a>task3.2ï¼ˆä»£ç å®ç°ï¼‰</h1><h3 id="é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»"><a href="#é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»" class="headerlink" title="é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»"></a>é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»</h3><p>ä½¿ç”¨PaddlePaddleæ¡†æ¶æ„å»ºä¸€ä¸ªç®€å•çš„å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œç”¨äºå¯¹MNISTæ‰‹å†™æ•°å­—æ•°æ®é›†è¿›è¡Œåˆ†ç±»ã€‚</p><p>(Paddle Pytorch Tensorflowç­‰æ¡†æ¶éƒ½å¯)</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> Normalize</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å›¾åƒå½’ä¸€åŒ–å¤„ç†æ–¹æ³•,è¿™é‡Œçš„CHWæŒ‡å›¾åƒæ ¼å¼éœ€ä¸º [Cé€šé“æ•°,Hå›¾åƒé«˜åº¦,Wå›¾åƒå®½åº¦]</span></span><br><span class="line"><span class="comment"># å‡å‡å€¼,é™¤ä»¥æ ‡å‡†å·®</span></span><br><span class="line"><span class="comment"># å‡è®¾åƒç´ å€¼èŒƒå›´æ˜¯ [0, 255]</span></span><br><span class="line"><span class="comment"># å½“æ¯ä¸ªåƒç´ å€¼å‡å» 127.5 å</span></span><br><span class="line"><span class="comment"># èŒƒå›´å˜ä¸º [-127.5, 127.5]</span></span><br><span class="line"><span class="comment"># å†é™¤ä»¥ 127.5ï¼ˆæˆ–è€…æ˜¯åŸå§‹æ•°æ®èŒƒå›´çš„ä¸€åŠï¼‰</span></span><br><span class="line"><span class="comment"># å°±å¾—åˆ°äº† [-1, 1] çš„èŒƒå›´</span></span><br><span class="line">transform = Normalize(mean=[<span class="number">127.5</span>], std=[<span class="number">127.5</span>], data_format=<span class="string">&#x27;CHW&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNISTDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datafile, mode=<span class="string">&#x27;train&#x27;</span>, transform=<span class="literal">None</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.transform = transform</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;loading mnist dataset from &#123;&#125; ......&#x27;</span>.<span class="built_in">format</span>(datafile))</span><br><span class="line"></span><br><span class="line">        data = json.load(gzip.<span class="built_in">open</span>(datafile))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;mnist dataset load done&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯»å–åˆ°çš„æ•°æ®åŒºåˆ†è®­ç»ƒé›†,éªŒè¯é›†,æµ‹è¯•é›†</span></span><br><span class="line">        train_set, val_set, eval_set = data</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—è®­ç»ƒæ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">&#x27;valid&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—éªŒè¯æ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = val_set[<span class="number">0</span>], val_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">&#x27;test&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—æµ‹è¯•æ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = eval_set[<span class="number">0</span>], eval_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;mode can only be one of [&#x27;train&#x27;, &#x27;valid&#x27;, &#x27;test&#x27;]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å®ç°__getitem__æ–¹æ³•ï¼Œå®šä¹‰æŒ‡å®šindexæ—¶å¦‚ä½•è·å–æ•°æ®</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        data = self.imgs[index]</span><br><span class="line">        label = self.labels[index]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.transform(data), label</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å®ç°__len__æ–¹æ³•ï¼Œè¿”å›æ•°æ®é›†æ€»æ•°ç›®</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.imgs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">datafile = <span class="string">&#x27;D:/paddlepaddle/paddlepaddleæ‰‹å†™æ•°å­—/mnist.json.gz&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½æ•°æ®é›†å¹¶åˆå§‹åŒ– DataSet</span></span><br><span class="line">train_dataset = MNISTDataset(datafile, mode=<span class="string">&#x27;train&#x27;</span>, transform=transform)</span><br><span class="line">test_dataset = MNISTDataset(datafile, mode=<span class="string">&#x27;test&#x27;</span>, transform=transform)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&#x27;train images: &#x27;, train_dataset.__len__(), &#x27;, test images: &#x27;, test_dataset.__len__())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># from matplotlib import pyplot as plt</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># for data in train_dataset:</span></span><br><span class="line"><span class="comment">#     image, label = data</span></span><br><span class="line"><span class="comment">#     print(&#x27;shape of image: &#x27;, image.shape)</span></span><br><span class="line"><span class="comment">#     plt.title(str(label))</span></span><br><span class="line"><span class="comment">#     plt.imshow(image[0])</span></span><br><span class="line"><span class="comment">#     break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¹¶åˆå§‹åŒ–æ•°æ®è¯»å–å™¨</span></span><br><span class="line">train_loader = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)</span><br><span class="line">test_loader = paddle.io.DataLoader(test_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">False</span>, num_workers=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># print(&#x27;step num:&#x27;, len(train_loader))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class MNIST_CNN(paddle.nn.Layer):</span></span><br><span class="line"><span class="comment">#     def __init__(self):</span></span><br><span class="line"><span class="comment">#         super(MNIST_CNN, self).__init__()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#         # å®šä¹‰ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œè¾“å‡ºç»´åº¦ä¸ºä¸€</span></span><br><span class="line"><span class="comment">#         self.fc = paddle.nn.Linear(in_features=784, out_features=1)</span></span><br><span class="line"><span class="comment">#         # å›¾ç‰‡åƒç´ 28*28=784ä¸ªåƒç´ ç‚¹</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     def forward(self, inputs):</span></span><br><span class="line"><span class="comment">#         outputs = self.fc(inputs)</span></span><br><span class="line"><span class="comment">#         return outputs</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNIST_CNN</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MNIST_CNN, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å·ç§¯å±‚</span></span><br><span class="line">        self.conv1 = paddle.nn.Conv2D(in_channels=<span class="number">1</span>, out_channels=<span class="number">16</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.pool1 = paddle.nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        self.conv2 = paddle.nn.Conv2D(in_channels=<span class="number">16</span>, out_channels=<span class="number">32</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.pool2 = paddle.nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—å…¨è¿æ¥å±‚çš„è¾“å…¥ç»´åº¦</span></span><br><span class="line">        self.fc_input_dim = <span class="number">32</span> * <span class="number">7</span> * <span class="number">7</span>  <span class="comment"># æ ¹æ®å·ç§¯å±‚å’Œæ± åŒ–å±‚è¾“å‡ºçš„ç»´åº¦è®¡ç®—</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å…¨è¿æ¥å±‚</span></span><br><span class="line">        self.fc1 = paddle.nn.Linear(in_features=self.fc_input_dim, out_features=<span class="number">128</span>)</span><br><span class="line">        self.fc2 = paddle.nn.Linear(in_features=<span class="number">128</span>, out_features=<span class="number">10</span>)  <span class="comment"># è¾“å‡ºç±»åˆ«æ•°é‡ä¸º10ï¼Œé€‚ç”¨äºMNISTæ•°æ®é›†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        x = paddle.to_tensor(inputs)</span><br><span class="line">        x = paddle.reshape(x, [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>])</span><br><span class="line">        <span class="comment"># x = paddle.unsqueeze(x, axis=1)  # Add channel dimension</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.pool1(x)</span><br><span class="line"></span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.pool2(x)</span><br><span class="line"></span><br><span class="line">        x = paddle.flatten(x, start_axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model = MNIST_CNN()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;train:&#x27;</span>)</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨ï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™SGDä¼˜åŒ–å™¨ï¼Œå­¦ä¹ ç‡è®¾ç½®ä¸º0.001</span></span><br><span class="line">    <span class="comment"># SGDçš„åŸºæœ¬åŸç†æ˜¯åœ¨æ¯ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨éšæœºé€‰æ‹©çš„å°æ‰¹é‡è®­ç»ƒæ•°æ®æ¥è®¡ç®—æ¢¯åº¦ï¼Œå¹¶æ›´æ–°æ¨¡å‹å‚æ•°</span></span><br><span class="line">    opt = paddle.optimizer.SGD(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    EPOCH_NUM = <span class="number">5</span></span><br><span class="line">    <span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;epoch:&#x27;</span>, epoch_id)</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            images, labels = data</span><br><span class="line">            images = paddle.to_tensor(images).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            labels = paddle.to_tensor(labels).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            images = paddle.reshape(images, [images.shape[<span class="number">0</span>], images.shape[<span class="number">2</span>] * images.shape[<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å‰å‘è®¡ç®—çš„è¿‡ç¨‹</span></span><br><span class="line">            predicts = model(images)</span><br><span class="line">            <span class="comment"># Convert labels data type to integer</span></span><br><span class="line">            labels_int = paddle.cast(labels, dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Convert labels to one-hot encoding</span></span><br><span class="line">            labels_onehot = paddle.nn.functional.one_hot(labels_int, num_classes=<span class="number">10</span>)</span><br><span class="line">            <span class="comment"># è®¡ç®—æŸå¤±ï¼Œå–ä¸€ä¸ªæ‰¹æ¬¡æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼</span></span><br><span class="line"></span><br><span class="line">            loss = paddle.nn.functional.square_error_cost(predicts, labels_onehot)</span><br><span class="line">            avg_loss = paddle.mean(loss)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ¯è®­ç»ƒäº†200æ‰¹æ¬¡çš„æ•°æ®ï¼Œæ‰“å°ä¸‹å½“å‰Lossçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch: &#123;&#125;, loss is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, batch_id, avg_loss.numpy()))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># åå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°çš„è¿‡ç¨‹</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;create model:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">train(model)</span><br><span class="line"><span class="comment"># # ä¿å­˜æ¨¡å‹å‚æ•°ï¼Œæ–‡ä»¶åä¸ºLR_model.pdparams</span></span><br><span class="line"><span class="comment"># paddle.save(model.state_dict(), &#x27;C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&#x27;)</span></span><br><span class="line"><span class="comment"># print(&quot;æ¨¡å‹ä¿å­˜æˆåŠŸï¼Œæ¨¡å‹å‚æ•°ä¿å­˜åœ¨C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&quot;)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # å‚æ•°ä¸ºä¿å­˜æ¨¡å‹å‚æ•°çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line"><span class="comment"># model_dict = paddle.load(&#x27;C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&#x27;)</span></span><br><span class="line"><span class="comment"># model.load_dict(model_dict)</span></span><br><span class="line"><span class="comment"># model.eval()</span></span><br></pre></td></tr></table></figure><h1 id="task3-2ï¼ˆä»£ç å®ç°ï¼‰-1"><a href="#task3-2ï¼ˆä»£ç å®ç°ï¼‰-1" class="headerlink" title="task3.2ï¼ˆä»£ç å®ç°ï¼‰"></a>task3.2ï¼ˆä»£ç å®ç°ï¼‰</h1><h3 id="é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»-1"><a href="#é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»-1" class="headerlink" title="é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»"></a>é¢˜ç›®ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åˆ†ç±»</h3><p>ä½¿ç”¨PaddlePaddleæ¡†æ¶æ„å»ºä¸€ä¸ªç®€å•çš„å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œç”¨äºå¯¹MNISTæ‰‹å†™æ•°å­—æ•°æ®é›†è¿›è¡Œåˆ†ç±»ã€‚</p><p>(Paddle Pytorch Tensorflowç­‰æ¡†æ¶éƒ½å¯)</p><h4 id="æç¤º-1"><a href="#æç¤º-1" class="headerlink" title="æç¤º"></a>æç¤º</h4><p>æ„å»ºä¸€ä¸ªåŒ…å«å·ç§¯å±‚ã€æ± åŒ–å±‚å’Œå…¨è¿æ¥å±‚çš„CNNæ¨¡å‹ã€‚<br>åŠ è½½MNISTæ•°æ®é›†ï¼Œå¯ä»¥ä½¿ç”¨paddle.vision.datasets.MNISTã€‚<br>å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ã€‚<br>è®­ç»ƒæ¨¡å‹ä»¥å¯¹æ‰‹å†™æ•°å­—è¿›è¡Œåˆ†ç±»ã€‚<br>è¯„ä¼°æ¨¡å‹æ€§èƒ½å¹¶è¿›è¡Œé¢„æµ‹ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> gzip</span><br><span class="line"><span class="keyword">import</span> paddle</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> Normalize</span><br><span class="line"><span class="keyword">from</span> paddle.io <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> paddle.vision.transforms <span class="keyword">import</span> functional <span class="keyword">as</span> F</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å›¾åƒå½’ä¸€åŒ–å¤„ç†æ–¹æ³•,è¿™é‡Œçš„CHWæŒ‡å›¾åƒæ ¼å¼éœ€ä¸º [Cé€šé“æ•°,Hå›¾åƒé«˜åº¦,Wå›¾åƒå®½åº¦]</span></span><br><span class="line"></span><br><span class="line">transform = Normalize(mean=[<span class="number">127.5</span>], std=[<span class="number">127.5</span>], data_format=<span class="string">&#x27;CHW&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNISTDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, datafile, mode=<span class="string">&#x27;train&#x27;</span>, transform=<span class="literal">None</span></span>):</span><br><span class="line"></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.transform = transform</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;loading mnist dataset from &#123;&#125; ......&#x27;</span>.<span class="built_in">format</span>(datafile))</span><br><span class="line"></span><br><span class="line">        data = json.load(gzip.<span class="built_in">open</span>(datafile))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;mnist dataset load done&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯»å–åˆ°çš„æ•°æ®åŒºåˆ†è®­ç»ƒé›†,éªŒè¯é›†,æµ‹è¯•é›†</span></span><br><span class="line">        train_set, val_set, eval_set = data</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—è®­ç»ƒæ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = train_set[<span class="number">0</span>], train_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">&#x27;valid&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—éªŒè¯æ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = val_set[<span class="number">0</span>], val_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">&#x27;test&#x27;</span>:</span><br><span class="line">            <span class="comment"># è·å¾—æµ‹è¯•æ•°æ®é›†</span></span><br><span class="line">            self.imgs, self.labels = eval_set[<span class="number">0</span>], eval_set[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;mode can only be one of [&#x27;train&#x27;, &#x27;valid&#x27;, &#x27;test&#x27;]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å®ç°__getitem__æ–¹æ³•ï¼Œå®šä¹‰æŒ‡å®šindexæ—¶å¦‚ä½•è·å–æ•°æ®</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        data = self.imgs[index]</span><br><span class="line">        label = self.labels[index]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.transform(data), label</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å®ç°__len__æ–¹æ³•ï¼Œè¿”å›æ•°æ®é›†æ€»æ•°ç›®</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.imgs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">datafile = <span class="string">&#x27;D:/paddlepaddle/paddlepaddleæ‰‹å†™æ•°å­—/mnist.json.gz&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½æ•°æ®é›†å¹¶åˆå§‹åŒ– DataSet</span></span><br><span class="line">train_dataset = MNISTDataset(datafile, mode=<span class="string">&#x27;train&#x27;</span>, transform=transform)</span><br><span class="line">test_dataset = MNISTDataset(datafile, mode=<span class="string">&#x27;test&#x27;</span>, transform=transform)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¹¶åˆå§‹åŒ–æ•°æ®è¯»å–å™¨</span></span><br><span class="line">train_loader = paddle.io.DataLoader(train_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>, num_workers=<span class="number">0</span>)</span><br><span class="line">test_loader = paddle.io.DataLoader(test_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">False</span>, num_workers=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># train_loader = paddle.io.DataLoader(train_dataset, batch_size=128, shuffle=True, num_workers=0)</span></span><br><span class="line"><span class="comment"># test_loader = paddle.io.DataLoader(test_dataset, batch_size=128, shuffle=False, num_workers=0)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MNIST_CNN</span>(paddle.nn.Layer):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(MNIST_CNN, self).__init__()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å·ç§¯å±‚</span></span><br><span class="line">        self.conv1 = paddle.nn.Conv2D(in_channels=<span class="number">1</span>, out_channels=<span class="number">16</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.pool1 = paddle.nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        self.conv2 = paddle.nn.Conv2D(in_channels=<span class="number">16</span>, out_channels=<span class="number">32</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.pool2 = paddle.nn.MaxPool2D(kernel_size=<span class="number">2</span>, stride=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—å…¨è¿æ¥å±‚çš„è¾“å…¥ç»´åº¦</span></span><br><span class="line">        self.fc_input_dim = <span class="number">32</span> * <span class="number">7</span> * <span class="number">7</span>  <span class="comment"># æ ¹æ®å·ç§¯å±‚å’Œæ± åŒ–å±‚è¾“å‡ºçš„ç»´åº¦è®¡ç®—</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰å…¨è¿æ¥å±‚</span></span><br><span class="line">        self.fc1 = paddle.nn.Linear(in_features=self.fc_input_dim, out_features=<span class="number">128</span>)</span><br><span class="line">        self.fc2 = paddle.nn.Linear(in_features=<span class="number">128</span>, out_features=<span class="number">10</span>)  <span class="comment"># è¾“å‡ºç±»åˆ«æ•°é‡ä¸º10ï¼Œé€‚ç”¨äºMNISTæ•°æ®é›†</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        x = paddle.to_tensor(inputs)</span><br><span class="line">        x = paddle.reshape(x, [-<span class="number">1</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>])</span><br><span class="line">        <span class="comment"># x = paddle.unsqueeze(x, axis=1)  # Add channel dimension</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.pool1(x)</span><br><span class="line"></span><br><span class="line">        x = self.conv2(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.pool2(x)</span><br><span class="line"></span><br><span class="line">        x = paddle.flatten(x, start_axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        x = self.fc1(x)</span><br><span class="line">        x = paddle.nn.functional.relu(x)</span><br><span class="line">        x = self.fc2(x)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model = MNIST_CNN()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;train:&#x27;</span>)</span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># å®šä¹‰ä¼˜åŒ–å™¨</span></span><br><span class="line">    <span class="comment"># opt = paddle.optimizer.SGD(learning_rate=0.001, parameters=model.parameters())</span></span><br><span class="line">    <span class="comment"># opt = paddle.optimizer.Momentum(learning_rate=0.001, momentum=0.9, parameters=model.parameters())</span></span><br><span class="line">    <span class="comment"># opt = paddle.optimizer.Adagrad(learning_rate=0.001, parameters=model.parameters())</span></span><br><span class="line">    opt = paddle.optimizer.Adam(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    EPOCH_NUM = <span class="number">40</span></span><br><span class="line">    total_losses = []  <span class="comment"># å­˜å‚¨æ¯ä¸ªbatchçš„æŸå¤±å€¼</span></span><br><span class="line">    <span class="keyword">for</span> epoch_id <span class="keyword">in</span> <span class="built_in">range</span>(EPOCH_NUM):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;epoch:&#x27;</span>, epoch_id)</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            images, labels = data</span><br><span class="line">            images = paddle.to_tensor(images).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">            labels = paddle.to_tensor(labels).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            images = paddle.reshape(images, [images.shape[<span class="number">0</span>], images.shape[<span class="number">2</span>] * images.shape[<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å‰å‘è®¡ç®—çš„è¿‡ç¨‹</span></span><br><span class="line">            predicts = model(images)</span><br><span class="line">            <span class="comment"># Convert labels data type to integer</span></span><br><span class="line">            labels_int = paddle.cast(labels, dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Convert labels to one-hot encoding</span></span><br><span class="line">            labels_onehot = paddle.nn.functional.one_hot(labels_int, num_classes=<span class="number">10</span>)</span><br><span class="line">            <span class="comment"># è®¡ç®—æŸå¤±ï¼Œå–ä¸€ä¸ªæ‰¹æ¬¡æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼</span></span><br><span class="line"></span><br><span class="line">            loss = paddle.nn.functional.square_error_cost(predicts, labels_onehot)</span><br><span class="line">            avg_loss = paddle.mean(loss)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># è®¡ç®—é¢„æµ‹ç»“æœ</span></span><br><span class="line">            probs = paddle.nn.functional.softmax(predicts, axis=<span class="number">1</span>)</span><br><span class="line">            predictions = paddle.argmax(probs, axis=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># è®¡ç®—å‡†ç¡®ç‡</span></span><br><span class="line">            correct = paddle.<span class="built_in">sum</span>(paddle.cast(paddle.equal(predictions, labels_int), dtype=<span class="string">&#x27;float32&#x27;</span>))</span><br><span class="line">            accuracy = correct / images.shape[<span class="number">0</span>] * <span class="number">100</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> batch_id % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;&#125;, batch: &#123;&#125;, loss is: &#123;&#125;, accuracy is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>(epoch_id, batch_id,</span><br><span class="line">                                                                                  avg_loss.numpy(),</span><br><span class="line">                                                                                  accuracy.numpy()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment"># åå‘ä¼ æ’­ï¼Œæ›´æ–°å‚æ•°çš„è¿‡ç¨‹</span></span><br><span class="line">            avg_loss.backward()</span><br><span class="line">            opt.step()</span><br><span class="line">            opt.clear_grad()</span><br><span class="line">            <span class="comment"># ä¿å­˜æ¯ä¸ªbatchçš„æŸå¤±å€¼</span></span><br><span class="line">            total_losses.append(avg_loss.numpy())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»˜åˆ¶æ€»çš„æŸå¤±æ›²çº¿å›¾</span></span><br><span class="line">    plt.plot(total_losses)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Batch&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Loss&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Training Loss Curve&#x27;</span>)</span><br><span class="line">    plt.ylim(<span class="number">0</span>, <span class="number">0.1</span>)  <span class="comment"># è®¾ç½®yè½´èŒƒå›´ä¸º0åˆ°0.1</span></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¨¡å‹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;create model:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨è®­ç»ƒè¿‡ç¨‹</span></span><br><span class="line">train(model)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜æ¨¡å‹å‚æ•°ï¼Œæ–‡ä»¶åä¸ºmodelhn.pdmodel</span></span><br><span class="line">paddle.save(model.state_dict(), <span class="string">&#x27;C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ¨¡å‹ä¿å­˜æˆåŠŸï¼Œæ¨¡å‹å‚æ•°ä¿å­˜åœ¨C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸ºä¿å­˜æ¨¡å‹å‚æ•°çš„æ–‡ä»¶åœ°å€</span></span><br><span class="line"></span><br><span class="line">model_dict = paddle.load(<span class="string">&#x27;C:/Users/lxcqm/Desktop/model/modelhn.pdmodel&#x27;</span>)</span><br><span class="line">model.load_dict(model_dict)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">test_loader = paddle.io.DataLoader(test_dataset, batch_size=<span class="number">64</span>, shuffle=<span class="literal">False</span>, num_workers=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_loader):</span><br><span class="line">    images, labels = data</span><br><span class="line">    images = paddle.to_tensor(images).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    labels = paddle.to_tensor(labels).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    images = paddle.reshape(images, [images.shape[<span class="number">0</span>], images.shape[<span class="number">2</span>] * images.shape[<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‰å‘è®¡ç®—çš„è¿‡ç¨‹</span></span><br><span class="line">    predicts = model(images)</span><br><span class="line">    <span class="comment">#########################</span></span><br><span class="line">    <span class="comment"># è®¾ç½®æ•°æ®è¯»å–å™¨ï¼ŒAPIè‡ªåŠ¨è¯»å–MNISTæ•°æ®æµ‹è¯•é›†</span></span><br><span class="line">    test_dataset = paddle.vision.datasets.MNIST(mode=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">    test_data0 = np.array(test_dataset[batch_id][<span class="number">0</span>])</span><br><span class="line">    test_label_0 = np.array(test_dataset[batch_id][<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># plt.figure(&quot;Image&quot;)  # å›¾åƒçª—å£åç§°</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line">    plt.imshow(test_data0, cmap=plt.cm.binary)</span><br><span class="line">    plt.axis(<span class="string">&#x27;on&#x27;</span>)  <span class="comment"># å…³æ‰åæ ‡è½´ä¸º off</span></span><br><span class="line">    plt.title(<span class="string">&#x27;image&#x27;</span>)  <span class="comment"># å›¾åƒé¢˜ç›®</span></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test_loader = paddle.io.DataLoader(test_dataset, batch_size=64, shuffle=False, num_workers=0)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å°æµ‹è¯•ç»“æœ</span></span><br><span class="line"><span class="comment"># print(&quot;Inference result is &#123;&#125;, the corresponding label is &#123;&#125;&quot;.format(predicts, labels))</span></span><br><span class="line"></span><br><span class="line">predicts_np = predicts.numpy()</span><br><span class="line">labels_np = labels.numpy()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;é¢„æµ‹å„æ ‡ç­¾æ¦‚ç‡:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(predicts_np[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å®é™…æ ‡ç­¾:&quot;</span>, labels_np[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨ç†ç»“æœå‘é‡</span></span><br><span class="line">predictions = np.array(predicts_np[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°æ¦‚ç‡æœ€é«˜çš„æ ‡ç­¾</span></span><br><span class="line">predicted_label = np.argmax(predictions)</span><br><span class="line"><span class="comment"># print(predictions)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ¨¡å‹è®¤ä¸ºæ¦‚ç‡æœ€é«˜çš„æ ‡ç­¾æ˜¯:&quot;</span>, predicted_label)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># for batch_id, data in enumerate(test_loader):</span></span><br><span class="line"><span class="comment">#     images, labels = data</span></span><br><span class="line"><span class="comment">#     images = paddle.to_tensor(images).astype(&#x27;float32&#x27;)</span></span><br><span class="line"><span class="comment">#     labels = paddle.to_tensor(labels).astype(&#x27;float32&#x27;)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     images = paddle.reshape(images, [images.shape[0], images.shape[2] * images.shape[3]])</span></span><br><span class="line"></span><br><span class="line">total_accuracy = <span class="number">0.0</span></span><br><span class="line">total_samples = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_loader()):</span><br><span class="line">    images, labels = data</span><br><span class="line">    images = paddle.to_tensor(images).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line">    labels = paddle.to_tensor(labels).astype(<span class="string">&#x27;float32&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    images = paddle.reshape(images, [images.shape[<span class="number">0</span>], images.shape[<span class="number">2</span>] * images.shape[<span class="number">3</span>]])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‰å‘è®¡ç®—</span></span><br><span class="line">    predicts = model(images)</span><br><span class="line">    <span class="comment"># Convert labels data type to integer</span></span><br><span class="line">    labels_int = paddle.cast(labels, dtype=<span class="string">&#x27;int64&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Convert labels to one-hot encoding</span></span><br><span class="line">    labels_onehot = paddle.nn.functional.one_hot(labels_int, num_classes=<span class="number">10</span>)</span><br><span class="line">    <span class="comment"># è®¡ç®—æŸå¤±ï¼Œå–ä¸€ä¸ªæ‰¹æ¬¡æ ·æœ¬æŸå¤±çš„å¹³å‡å€¼</span></span><br><span class="line"></span><br><span class="line">    loss = paddle.nn.functional.square_error_cost(predicts, labels_onehot)</span><br><span class="line">    avg_loss = paddle.mean(loss)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—é¢„æµ‹ç»“æœ</span></span><br><span class="line">    probs = paddle.nn.functional.softmax(predicts, axis=<span class="number">1</span>)</span><br><span class="line">    predictions = paddle.argmax(probs, axis=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># è®¡ç®—å‡†ç¡®ç‡</span></span><br><span class="line">    correct = paddle.<span class="built_in">sum</span>(paddle.cast(paddle.equal(predictions, labels_int), dtype=<span class="string">&#x27;float32&#x27;</span>))</span><br><span class="line">    accuracy = correct / images.shape[<span class="number">0</span>] * <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> batch_id % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot; batch: &#123;&#125;, loss is: &#123;&#125;, accuracy is: &#123;&#125;&quot;</span>.<span class="built_in">format</span>( batch_id,</span><br><span class="line">                                                                          avg_loss.numpy(),</span><br><span class="line">                                                                          accuracy.numpy()))</span><br><span class="line">    <span class="comment"># ç´¯åŠ å‡†ç¡®ç‡å€¼å’Œæ ·æœ¬æ•°é‡</span></span><br><span class="line">    total_accuracy += accuracy.numpy() * images.shape[<span class="number">0</span>]</span><br><span class="line">    total_samples += images.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å¹³å‡å‡†ç¡®ç‡</span></span><br><span class="line">accuracy_total = total_accuracy / total_samples</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;- Total Accuracy: &#123;:.5f&#125;%&quot;</span>.<span class="built_in">format</span>(accuracy_total))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
            <tag> è€ƒæ ¸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonç¨‹åºæ§åˆ¶ç»“æ„</title>
      <link href="/2024/03/10/Python%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84/"/>
      <url>/2024/03/10/Python%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†æ”¯è¯­å¥"><a href="#åˆ†æ”¯è¯­å¥" class="headerlink" title="åˆ†æ”¯è¯­å¥"></a>åˆ†æ”¯è¯­å¥</h2><h3 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a>ifè¯­å¥</h3><p><strong>é€»è¾‘éï¼š</strong><br>not x</p><h4 id="éå†å¾ªç¯"><a href="#éå†å¾ªç¯" class="headerlink" title="éå†å¾ªç¯"></a>éå†å¾ªç¯</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8z69tiu27o.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8z69tiu27o.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.86tebsepob.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.86tebsepob.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="æ¡ä»¶å¾ªç¯"><a href="#æ¡ä»¶å¾ªç¯" class="headerlink" title="æ¡ä»¶å¾ªç¯"></a>æ¡ä»¶å¾ªç¯</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> x &lt; <span class="number">10</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    x+=<span class="number">3</span></span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4xuaf4vpql.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4xuaf4vpql.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å¾ªç¯ä¿ç•™å­—-breakå’Œcontinue"><a href="#å¾ªç¯ä¿ç•™å­—-breakå’Œcontinue" class="headerlink" title="å¾ªç¯ä¿ç•™å­—: breakå’Œcontinue"></a>å¾ªç¯ä¿ç•™å­—: breakå’Œcontinue</h4><ul><li><p>ä½œç”¨ï¼šè¾…åŠ©æ§åˆ¶å¾ªç¯æ‰§è¡Œï¼š</p><ul><li><p>Breakï¼šæ¥è·³å‡ºå½“å‰å±‚å¾ªç¯ï¼Œè„±ç¦»è¯¥å¾ªç¯åç¨‹åºä»å¾ªç¯<br>  åä»£ç ç»§ç»­æ‰§è¡Œ(å¤šå±‚å¾ªç¯ä¸­breakè¯­å¥åªèƒ½è·³å‡ºæœ€å†…å±‚å¾ªç¯)</p></li><li><p>Continueï¼šç»“æŸå½“å‰å±‚å½“æ¬¡å¾ªç¯ï¼Œå³è·³è¿‡å¾ªç¯ä½“ä¸­ä¸‹<br>  é¢å°šæœªæ‰§è¡Œçš„è¯­å¥ï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œä½†ä¸è·³å‡ºå½“å‰å±‚<br>  å¾ªç¯ã€‚</p></li></ul></li><li><p>åœ¨forå¾ªç¯å’Œwhileå¾ªç¯ä¸­çš„elseæ‰©å±•ç”¨æ³•ä¸­ï¼š</p><ul><li><p>Breakå’Œreturnè¯­å¥è¢«æ‰§è¡Œå¯¹elseæœ‰å½±å“</p></li><li><p>continueä¿ç•™å­—å¯¹elseæ²¡æœ‰å½±å“</p></li></ul></li></ul><h2 id="ç¨‹åºçš„å¼‚å¸¸å¤„ç†"><a href="#ç¨‹åºçš„å¼‚å¸¸å¤„ç†" class="headerlink" title="ç¨‹åºçš„å¼‚å¸¸å¤„ç†"></a>ç¨‹åºçš„å¼‚å¸¸å¤„ç†</h2><h3 id="try-except-è¯­å¥"><a href="#try-except-è¯­å¥" class="headerlink" title="try-except()è¯­å¥"></a>try-except()è¯­å¥</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.99t3mopr9a.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.99t3mopr9a.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.39kxhygpgc.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.39kxhygpgc.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    &lt;è¯­å¥å—<span class="number">1</span>&gt;</span><br><span class="line"><span class="keyword">except</span> &lt;å¼‚å¸¸ç±»å‹&gt;:</span><br><span class="line">    &lt;è¯­å¥å—<span class="number">2</span>&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æœ‰å¤šä¸ªexcept<br>exceptè¯­å¥æ²¡æœ‰æŒ‡å®šä»»ä½•é”™è¯¯ç±»å‹æ—¶ï¼Œè¡¨ç¤ºå®ƒå¯¹åº”çš„è¯­å¥å—å¯ä»¥å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸<br><strong>ç¤ºä¾‹</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Vol = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”µæ± ç”µå‹ï¼Œå•ä½V:&quot;</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç”µæ± ç”µå‹å€¼ï¼š&quot;</span>, <span class="built_in">float</span>(Vol))</span><br><span class="line">        <span class="keyword">if</span> Vol &lt; <span class="number">10</span> <span class="keyword">or</span> Vol &gt; <span class="number">13</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ç”µå‹å€¼ä¸æ­£å¸¸ï¼Œè¯·å³ä½¿æ£€æŸ¥ï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> NameError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥é”™è¯¯ï¼è¯·è¾“å…¥ä¸€ä¸ªæ•°å€¼ï¼&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="randomåº“"><a href="#randomåº“" class="headerlink" title="randomåº“"></a>randomåº“</h2><p>randomåº“æ˜¯ä½¿ç”¨éšæœºæ•°çš„Pythonæ ‡å‡†åº“</p><ul><li>randomåº“ä¸»è¦ç”¨äºç”Ÿæˆéšæœºæ•°</li><li>ä¼ªéšæœºæ•°: é‡‡ç”¨æ¢…æ£®æ—‹è½¬ç®—æ³•ç”Ÿæˆçš„(ä¼ª)éšæœºåºåˆ—ä¸­å…ƒç´ <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2ob9votxz1.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2ob9votxz1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>ç”Ÿæˆéšæœºæ•°ä¹‹å‰å¯ä»¥é€šè¿‡seed()å‡½æ•°æŒ‡å®šéšæœºæ•°ç§å­ï¼Œéšæœºç§å­ä¸€èˆ¬æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåªè¦ç§å­ç›¸åŒï¼Œæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°åºåˆ—ä¹Ÿç›¸åŒï¼Œè¿™ç§æ–¹æ³•ä¾¿äºæµ‹è¯•å’ŒåŒæ­¥æ•°æ®ã€‚</li></ul><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> random <span class="keyword">import</span> *</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>seed(<span class="number">125</span>) <span class="comment"># éšæœºç§å­èµ‹å€¼125</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&#123;&#125;.&#123;&#125;.&#123;&#125;&quot;</span>.<span class="built_in">format</span>(randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="string">&#x27;4.4.10&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&#123;&#125;.&#123;&#125;.&#123;&#125;&quot;</span>.<span class="built_in">format</span>(randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="string">&#x27;5.10.3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>seed(<span class="number">125</span>) <span class="comment"># å†æ¬¡ç»™éšæœºç§å­èµ‹å€¼125</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;&#123;&#125;.&#123;&#125;.&#123;&#125;&quot;</span>.<span class="built_in">format</span>(randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>),randint(<span class="number">1</span>,<span class="number">10</span>))</span><br><span class="line"><span class="string">&#x27;4.4.10&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonåŸºæœ¬è¯­æ³•å…ƒç´ åŠæ•°æ®ç±»å‹</title>
      <link href="/2024/03/09/Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%85%83%E7%B4%A0%E5%8F%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2024/03/09/Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%85%83%E7%B4%A0%E5%8F%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¨‹åºåŸºæœ¬è®¾è®¡æ–¹æ³•"><a href="#ç¨‹åºåŸºæœ¬è®¾è®¡æ–¹æ³•" class="headerlink" title="ç¨‹åºåŸºæœ¬è®¾è®¡æ–¹æ³•"></a>ç¨‹åºåŸºæœ¬è®¾è®¡æ–¹æ³•</h2><h3 id="RELUæ¿€æ´»å‡½æ•°"><a href="#RELUæ¿€æ´»å‡½æ•°" class="headerlink" title="RELUæ¿€æ´»å‡½æ•°"></a>RELUæ¿€æ´»å‡½æ•°</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8ad0871gq2.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8ad0871gq2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ•°å€¼x:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">eval</span>(x) &gt; <span class="number">0</span>: <span class="comment"># ä»é”®ç›˜è¾“å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼Œeval() å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ•°å­—è¡¨è¾¾å¼ä½œä¸ºå‚æ•°</span></span><br><span class="line">                <span class="comment"># è¾“å‡ºè¡¨è¾¾å¼çš„å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">0</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸€ç§è¾“å‡ºï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ•°å€¼x:<span class="number">1</span>+<span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><h3 id="æ™ºèƒ½è½¦å·®é€Ÿè½¬å‘"><a href="#æ™ºèƒ½è½¦å·®é€Ÿè½¬å‘" class="headerlink" title="æ™ºèƒ½è½¦å·®é€Ÿè½¬å‘"></a>æ™ºèƒ½è½¦å·®é€Ÿè½¬å‘</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3nrd7ii95k.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3nrd7ii95k.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line">speed = <span class="number">20</span>  <span class="comment">#è®¾å®šè½¦è½®ç›´çº¿å½¢å¼é€Ÿåº¦</span></span><br><span class="line">kx = <span class="number">0.85</span>   <span class="comment">#è°ƒèŠ‚å‚æ•°</span></span><br><span class="line"></span><br><span class="line">left_wheel = speed</span><br><span class="line">right_wheel = speed</span><br><span class="line"></span><br><span class="line">angle = <span class="built_in">eval</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å½’ä¸€åŒ–åçš„è§’åº¦:&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; <span class="built_in">eval</span>(angle) &lt;= <span class="number">1</span>:    <span class="comment">#å³è½¬å‘</span></span><br><span class="line">    right_wheel = (<span class="number">1</span> - angle * kx) * speed </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;right_wheel:&#123;&#125;;left_wheel:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(right_wheel,left_wheel)) </span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> -<span class="number">1</span> &lt;= <span class="built_in">eval</span>(angle) &lt;= <span class="number">0</span>ï¼š <span class="comment">#å·¦è½¬å‘å’Œç›´è¡Œ</span></span><br><span class="line">    left_wheel = (<span class="number">1</span> - <span class="built_in">abs</span>(angle * kx)) * speed</span><br><span class="line">    <span class="comment"># abs() å‡½æ•°è¿”å›æ•°å­—çš„ç»å¯¹å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;right_wheel:&#123;&#125;;left_wheel:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(right_wheel,left_wheel))</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„è½¬è§’ä¿¡æ¯ä¸æ˜¯å½’ä¸€åŒ–æ•°æ®&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="pythonåŸºæœ¬è¯­æ³•å…ƒç´ "><a href="#pythonåŸºæœ¬è¯­æ³•å…ƒç´ " class="headerlink" title="pythonåŸºæœ¬è¯­æ³•å…ƒç´ "></a>pythonåŸºæœ¬è¯­æ³•å…ƒç´ </h2><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p>â€˜#â€™:å•è¡Œæ³¨é‡Š<br>â€˜â€™â€™å¼€å¤´â€™â€™â€™ç»“å°¾:å¤šè¡Œæ³¨é‡Š</p><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>å¤§å°å†™æ•æ„Ÿ  é¦–å­—ç¬¦ä¸å¯ä¸ºæ•°å­—</p><h3 id="èµ‹å€¼è¯­å¥"><a href="#èµ‹å€¼è¯­å¥" class="headerlink" title="èµ‹å€¼è¯­å¥"></a>èµ‹å€¼è¯­å¥</h3><p>x, y &#x3D; y, x</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span></span><br><span class="line">y = <span class="number">2</span></span><br><span class="line">x, y = y, x</span><br><span class="line"><span class="built_in">print</span>(x, y)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">2 </span><span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬è¾“å…¥è¾“å‡ºå‡½æ•°"><a href="#åŸºæœ¬è¾“å…¥è¾“å‡ºå‡½æ•°" class="headerlink" title="åŸºæœ¬è¾“å…¥è¾“å‡ºå‡½æ•°"></a>åŸºæœ¬è¾“å…¥è¾“å‡ºå‡½æ•°</h3><p>&lt;å˜é‡&gt; &#x3D; input(&lt;æç¤ºæ€§æ–‡å­—&gt;)<br>è·å–åˆ°çš„å˜é‡æ˜¯å­—ç¬¦ä¸²å½¢å¼(ä¸è¾“å…¥æŒ‰å›è½¦æ˜¯ç©ºå­—ç¬¦ä¸²)<br>å¯ä»¥è½¬æ¢ï¼šfloat(a)</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.54xiafsp9p.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.54xiafsp9p.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>endå‚æ•°</strong></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=<span class="number">54</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a,end=<span class="string">&quot;.&quot;</span>)</span><br><span class="line"><span class="number">54.</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(a,end=<span class="string">&quot;%&quot;</span>)</span><br><span class="line"><span class="number">54</span>%</span><br></pre></td></tr></table></figure><h3 id="eval"><a href="#eval" class="headerlink" title="eval()"></a>eval()</h3><p>å»æ‰å­—ç¬¦ä¸²æœ€å¤–å±‚çš„å¼•å·ï¼š<br>eval(â€˜1+2â€™) &#x3D; 3<br>eval(â€˜â€œ1+2â€â€˜) &#x3D; â€œ1+2â€<br>eval(â€˜print(â€œHelloâ€)â€™) &#x3D; print(â€œHelloâ€) #è¾“å‡ºHello</p><h3 id="åŠŸèƒ½åº“å¼•ç”¨"><a href="#åŠŸèƒ½åº“å¼•ç”¨" class="headerlink" title="åŠŸèƒ½åº“å¼•ç”¨"></a>åŠŸèƒ½åº“å¼•ç”¨</h3><ol><li><p>import&lt;åº“å&gt;<br> ä½¿ç”¨ï¼š&lt;åº“å&gt;.&lt;å‡½æ•°å&gt;(&lt;å‡½æ•°å‚æ•°&gt;)</p></li><li><ul><li>from&lt;åº“å&gt;import&lt;å‡½æ•°åï¼Œå‡½æ•°åï¼Œâ€¦&gt;</li><li>from&lt;åº“å&gt;import*  #*æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰å‡½æ•°<br> ä½¿ç”¨ï¼š&lt;å‡½æ•°å&gt;(&lt;å‡½æ•°å‚æ•°&gt;)</li></ul></li></ol><h2 id="pythonåŸºæœ¬æ•°æ®ç±»å‹"><a href="#pythonåŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="pythonåŸºæœ¬æ•°æ®ç±»å‹"></a>pythonåŸºæœ¬æ•°æ®ç±»å‹</h2><h3 id="æ•°å­—ç±»å‹"><a href="#æ•°å­—ç±»å‹" class="headerlink" title="æ•°å­—ç±»å‹"></a>æ•°å­—ç±»å‹</h3><ol><li><p>æ•´æ•°ç±»å‹<br>æ²¡æœ‰å–å€¼èŒƒå›´é™åˆ¶</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8hg84tnby2.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8hg84tnby2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><p>æµ®ç‚¹æ•°ç±»å‹</p><ul><li><p>å°æ•°ç‚¹ä¸€èˆ¬å½¢å¼<br> 123.456</p></li><li><p>ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤º<br> 1.23456e2</p></li></ul> <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4g48qfnog8.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4g48qfnog8.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><p>å¤æ•°ç±»å‹</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8ad09e8xe1.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8ad09e8xe1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ol><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.39kxhu48yc.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.39kxhu48yc.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="æ•°å€¼è¿ç®—æ“ä½œç¬¦"><a href="#æ•°å€¼è¿ç®—æ“ä½œç¬¦" class="headerlink" title="æ•°å€¼è¿ç®—æ“ä½œç¬¦"></a>æ•°å€¼è¿ç®—æ“ä½œç¬¦</h3><ol><li>x&#x2F;y &#x3D; 0.3333333</li><li>x&#x2F;&#x2F;y xä¸yä¹‹æ•´æ•°å•†</li><li>x%y  xä¸yä¹‹å•†çš„ä½™æ•°</li><li>x**y xçš„yæ¬¡å¹‚</li></ol><h3 id="æ··åˆè¿ç®—è§„åˆ™"><a href="#æ··åˆè¿ç®—è§„åˆ™" class="headerlink" title="æ··åˆè¿ç®—è§„åˆ™"></a>æ··åˆè¿ç®—è§„åˆ™</h3><p>æ•°å­—ç±»å‹ä¹‹é—´ç›¸äº’è¿ç®—æ‰€ç”Ÿæˆçš„ç»“æœæ˜¯â€œæ›´å®½â€çš„ç±»å‹ï¼ŒåŸºæœ¬è§„åˆ™æ˜¯ï¼š<br>â—†æ•´æ•°ä¹‹é—´è¿ç®—ï¼Œå¦‚æœæ•°å­¦æ„ä¹‰ä¸Šçš„ç»“æœæ˜¯å°æ•°ç»“æœæ˜¯æµ®ç‚¹æ•°ï¼›<br>â—†æ•´æ•°ä¹‹é—´è¿ç®—ï¼Œå¦‚æœæ•°å­¦æ„ä¹‰ä¸Šçš„ç»“æœæ˜¯æ•´æ•°ç»“æœæ˜¯æ•´æ•°ï¼›<br>â—†æ•´æ•°å’Œæµ®ç‚¹æ•°æ··åˆè¿ç®—ï¼Œè¾“å‡ºç»“æœæ˜¯æµ®ç‚¹æ•°;<br>â—†æ•´æ•°å’Œæµ®ç‚¹æ•°æ··åˆè¿ç®—ï¼Œè¾“å‡ºç»“æœæ˜¯æµ®ç‚¹æ•°;</p><h3 id="pythonå†…ç½®æ•°å€¼è¿ç®—å‡½æ•°"><a href="#pythonå†…ç½®æ•°å€¼è¿ç®—å‡½æ•°" class="headerlink" title="pythonå†…ç½®æ•°å€¼è¿ç®—å‡½æ•°"></a>pythonå†…ç½®æ•°å€¼è¿ç®—å‡½æ•°</h3><ul><li>abs()<br>  ç»å¯¹å€¼</li><li>divmod(x,y)<br>  (x&#x2F;&#x2F;y,x%y) è¾“å‡ºä¸ºäºŒå…ƒç»„å½¢å¼(ä¹Ÿç§°ä¸ºå…ƒç»„ç±»å‹)<br>  divmod(10, 3) &#x3D; 3, 1</li><li>pow(x,y[,z])<br>  å¹‚ä½™ï¼š(x**y)%z,[â€¦]è¡¨ç¤ºè¯¥å‚æ•°å¯ä»¥çœç•¥</li><li>round(x[,ndigits])<br>  å¯¹xå››èˆäº”å…¥ï¼Œä¿ç•™ndigitsä½å°æ•°<br>  round(x)è¿”å›å››èˆäº”å…¥åçš„æ•´æ•°å€¼</li><li>max(xâ‚,xâ‚‚,â€¦.xâ‚™)<br>  næ²¡æœ‰é™å®š</li><li>min(xâ‚,xâ‚‚,â€¦.xâ‚™)<br>  næ²¡æœ‰é™å®š</li></ul><h3 id="æ•°å­—ç±»å‹çš„åˆ¤æ–­"><a href="#æ•°å­—ç±»å‹çš„åˆ¤æ–­" class="headerlink" title="æ•°å­—ç±»å‹çš„åˆ¤æ–­"></a>æ•°å­—ç±»å‹çš„åˆ¤æ–­</h3><p><strong>type(x)</strong><br>è¿”å›xçš„ç±»å‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Python <span class="number">3.12</span><span class="number">.1</span> (tags/v3<span class="number">.12</span><span class="number">.1</span>:2305ca5, Dec  <span class="number">7</span> <span class="number">2023</span>, <span class="number">22</span>:03:<span class="number">25</span>) [MSC v<span class="number">.1937</span> <span class="number">64</span> bit (AMD64)] on win32</span><br><span class="line"><span class="type">Type</span> <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> <span class="keyword">or</span> <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(x)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="number">0.1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(x)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;float&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(x=<span class="number">1</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="built_in">type</span>() takes <span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span> arguments</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="string">&#x27;a&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(x)</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;str&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=a</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">&#x27;a&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure><h3 id="mathåº“"><a href="#mathåº“" class="headerlink" title="mathåº“"></a>mathåº“</h3><ul><li>ä¸æ”¯æŒå¤æ•°ç±»å‹</li><li>ä¸€å…±æä¾›äº†4ä¸ªæ•°å­¦å¸¸æ•°å’Œ44ä¸ªå‡½æ•°<ul><li>å››ä¸ªæ•°å­¦å¸¸æ•°  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7egitz8onh.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7egitz8onh.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li>44ä¸ªå‡½æ•°å…±åˆ†ä¸ºå››ç±»ï¼š<ol><li>16ä¸ªæ•°å€¼è¡¨ç¤ºå‡½æ•°</li><li>8ä¸ªå¹‚å¯¹æ•°å‡½æ•°</li><li>16ä¸ªä¸‰è§’å¯¹æ•°å‡½æ•°</li><li>4ä¸ªé«˜ç­‰ç‰¹æ®Šå‡½æ•°  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.5xads8ai47.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.5xads8ai47.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.wib0o7nkk.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.wib0o7nkk.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4xuaf2dena.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4xuaf2dena.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4jnuo75s7e.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4jnuo75s7e.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ol></li></ul></li></ul><h3 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4ckmsrqxrn.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4ckmsrqxrn.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦ä¸²çš„å®šä½"><a href="#å­—ç¬¦ä¸²çš„å®šä½" class="headerlink" title="å­—ç¬¦ä¸²çš„å®šä½"></a>å­—ç¬¦ä¸²çš„å®šä½</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.231m9a8aoo.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.231m9a8aoo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦ä¸²çš„åˆ‡ç‰‡"><a href="#å­—ç¬¦ä¸²çš„åˆ‡ç‰‡" class="headerlink" title="å­—ç¬¦ä¸²çš„åˆ‡ç‰‡"></a>å­—ç¬¦ä¸²çš„åˆ‡ç‰‡</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.101wyefd6w.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.101wyefd6w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="è½¬ä¹‰ç¬¦"><a href="#è½¬ä¹‰ç¬¦" class="headerlink" title="è½¬ä¹‰ç¬¦"></a>è½¬ä¹‰ç¬¦</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvh7j96v8.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvh7j96v8.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.26l870bw9g.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.26l870bw9g.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦ä¸²å¤„ç†å‡½æ•°"><a href="#å­—ç¬¦ä¸²å¤„ç†å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†å‡½æ•°"></a>å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4jnuo7sgoa.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4jnuo7sgoa.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.9dcpkceonf.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.9dcpkceonf.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦çš„éå†"><a href="#å­—ç¬¦çš„éå†" class="headerlink" title="å­—ç¬¦çš„éå†"></a>å­—ç¬¦çš„éå†</h4><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.101wyez3tw.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.101wyez3tw.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•"><a href="#å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•"></a>å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•</h4><p>å­—ç¬¦ä¸²å˜é‡è‡ªå¸¦çš„ä¸€äº›æ–¹æ³•(å³å‡½æ•°)</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.9rj5b7wvg3.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.9rj5b7wvg3.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7w6kilsc7t.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7w6kilsc7t.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;10,20,30&quot;</span>.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">[<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;30&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;* 12.3* &quot;</span>.strip(<span class="string">&quot;* &quot;</span>)</span><br><span class="line"><span class="string">&#x27;12.3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&quot;* 12*3* &quot;</span>.strip(<span class="string">&quot;* &quot;</span>)</span><br><span class="line"><span class="string">&#x27;12*3&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²ç±»å‹æ ¼å¼åŒ–æ§åˆ¶"><a href="#å­—ç¬¦ä¸²ç±»å‹æ ¼å¼åŒ–æ§åˆ¶" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹æ ¼å¼åŒ–æ§åˆ¶"></a>å­—ç¬¦ä¸²ç±»å‹æ ¼å¼åŒ–æ§åˆ¶</h3><p><strong>format()æ–¹æ³•çš„æ ¼å¼æ§åˆ¶</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7ljqpgljeu.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7ljqpgljeu.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4n7glygggs.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4n7glygggs.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvh7kdb3m.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvh7kdb3m.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8dwm7796st.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8dwm7796st.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="timeåº“"><a href="#timeåº“" class="headerlink" title="timeåº“"></a>timeåº“</h3><h4 id="æ—¶é—´è·å–"><a href="#æ—¶é—´è·å–" class="headerlink" title="æ—¶é—´è·å–"></a>æ—¶é—´è·å–</h4><ol><li><p><strong>time()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šè¿”å›å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆä»¥è‡ª1970å¹´1æœˆ1æ—¥é›¶æ—¶èµ·çš„ç§’æ•°æµ®ç‚¹æ•°å½¢å¼ï¼‰ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.time()</code></li></ul></li><li><p><strong>ctime()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šå°†ç»™å®šæ—¶é—´æˆ³è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼çš„å¯è¯»æ—¶é—´ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.ctime(time.time())</code></li></ul></li><li><p><strong>gmtime()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šå°†ç»™å®šæ—¶é—´æˆ³è½¬æ¢ä¸ºUTCæ—¶åŒºçš„æ—¶é—´å…ƒç»„ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.gmtime(time.time())</code></li></ul></li></ol><h4 id="æ—¶é—´æ ¼å¼åŒ–"><a href="#æ—¶é—´æ ¼å¼åŒ–" class="headerlink" title="æ—¶é—´æ ¼å¼åŒ–"></a>æ—¶é—´æ ¼å¼åŒ–</h4><ol><li><p><strong>strftime()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šå°†æ—¶é—´å…ƒç»„æ ¼å¼åŒ–ä¸ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())</code></li></ul></li><li><p><strong>strptime()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šå°†å­—ç¬¦ä¸²è§£æä¸ºæ—¶é—´å…ƒç»„ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.strptime(&quot;2024-03-09 19:36:30&quot;, &quot;%Y-%m-%d %H:%M:%S&quot;)</code></li></ul></li></ol><h4 id="ç¨‹åºè®¡æ—¶"><a href="#ç¨‹åºè®¡æ—¶" class="headerlink" title="ç¨‹åºè®¡æ—¶"></a>ç¨‹åºè®¡æ—¶</h4><ol><li><p><strong>sleep()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šæš‚åœç¨‹åºæ‰§è¡ŒæŒ‡å®šçš„ç§’æ•°ï¼Œå¯ä»¥ç”¨äºæ¨¡æ‹Ÿå»¶è¿Ÿã€å®šæ—¶ä»»åŠ¡ç­‰ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time time.sleep(5)</code></li></ul></li><li><p><strong>perf_counter()</strong>:</p><ul><li>å‡½æ•°æè¿°ï¼šè¿”å›ä¸€ä¸ªæ€§èƒ½è®¡æ•°å™¨çš„å€¼ï¼Œå¯ç”¨äºæµ‹é‡ç¬æ—¶æ—¶é—´ã€‚</li><li>ç¤ºä¾‹ï¼š<code>import time start_time = time.perf_counter() # æ‰§è¡Œä»£ç  end_time = time.perf_counter() elapsed_time = end_time - start_time</code></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>paddle.nn.Layer</title>
      <link href="/2024/03/09/paddle-nn-Layer/"/>
      <url>/2024/03/09/paddle-nn-Layer/</url>
      
        <content type="html"><![CDATA[<p><strong>class paddle.nn.Layer(name_scope&#x3D;None, dtype&#x3D;â€™float32â€™)</strong></p><p><a href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Layer_cn.html">https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Layer_cn.html</a></p><div class="tagLink"><a class="link-card" title="APIå®˜æ–¹æ–‡æ¡£" href="https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Layer_cn.html"><span class="link-card-backdrop" style="background-image: url(https://tumytime.github.io/picx-images-hosting/image.1754pq86xn.webp)"></span><div class="left"><img src="https://tumytime.github.io/picx-images-hosting/image.1754pq86xn.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1754pq86xn.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">APIå®˜æ–¹æ–‡æ¡£</p><p class="url">https://www.paddlepaddle.org.cn/documentation/docs/zh/api/paddle/nn/Layer_cn.html</p></div></a></div>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> paddlepaddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>paddlepaddleæŠ¥é”™è§£å†³åˆé›†</title>
      <link href="/2024/03/09/paddlepaddle%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/"/>
      <url>/2024/03/09/paddlepaddle%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3%E5%90%88%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h2 id="â€œThe-device-should-not-be-â€˜gpuâ€™-â€œ"><a href="#â€œThe-device-should-not-be-â€˜gpuâ€™-â€œ" class="headerlink" title="â€œThe device should not be â€˜gpuâ€™, â€œ"></a>â€œThe device should not be â€˜gpuâ€™, â€œ</h2><p>â€œThe device should not be â€˜gpuâ€™, â€œ<br>ValueError: The device should not be â€˜gpuâ€™, since PaddlePaddle is not compiled with CUDA<br>å½“å‰æƒ…å†µï¼šç¯å¢ƒå·²ä¸ºGPUï¼Œpaddle.utils.run.checks()æ˜¾ç¤ºGPUæ­£å¸¸ï¼Œä»£ç è®¾ç½®æ— è¯¯<br>é—®é¢˜ï¼š<br>åœ¨ç»ˆç«¯è¾“å…¥pip list<br>å¯ä»¥çœ‹åˆ°<br>åŒæ—¶è£…äº†paddlepaddleå’Œpaddlepaddle-gpu<br>è§£å†³æ–¹æ³•ï¼š<br>å…ˆpip uninstall paddlepaddleå’Œpaddlepaddle-gpu(å¿…é¡»ä¸¤ä¸ªéƒ½åˆ æ‰ï¼Œåªåˆ paddlepaddleæ˜¯ä¸ç®¡ç”¨çš„)<br>ç„¶åé‡æ–°pip install paddlepaddle-gpu<br>ç¨‹åºè¿è¡Œæ­£å¸¸ï¼›<br>èƒ½è·‘é€šçš„listç‰ˆæœ¬ï¼š<br>å®åœ¨æ‰¾ä¸åˆ°åŸå› å°±æŠŠè·Ÿè¿™ä¸ªç‰ˆæœ¬ä¸ä¸€æ ·çš„åŒ…uninstallå†install</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br></pre></td><td class="code"><pre><span class="line">aistudio@<span class="keyword">jupyter-9311933-7542288:~$ </span>pip list</span><br><span class="line">Package                        Version</span><br><span class="line">------------------------------ ---------------</span><br><span class="line">absl-py                        <span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line">aiofiles                       <span class="number">23</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line">aiohttp                        <span class="number">3</span>.<span class="number">8</span>.<span class="number">6</span></span><br><span class="line">aiosignal                      <span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line">alembic                        <span class="number">1</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line">altair                         <span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">annotated-types                <span class="number">0</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">anyio                          <span class="number">3</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line">argon2-cffi                    <span class="number">21</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line">argon2-cffi-<span class="keyword">bindings </span>          <span class="number">21</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">aspy.yaml                      <span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line">astor                          <span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line">astroid                        <span class="number">2</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">async-generator                <span class="number">1</span>.<span class="number">10</span></span><br><span class="line">async-timeout                  <span class="number">4</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line">asynctest                      <span class="number">0</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line">attrs                          <span class="number">22</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">audioread                      <span class="number">2</span>.<span class="number">1</span>.<span class="number">8</span></span><br><span class="line">autopep8                       <span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">Babel </span>                         <span class="number">2</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">backcall </span>                      <span class="number">0</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">backports.zoneinfo </span>            <span class="number">0</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">bce-python-sdk </span>                <span class="number">0</span>.<span class="number">8</span>.<span class="number">53</span></span><br><span class="line"><span class="keyword">beautifulsoup4 </span>                <span class="number">4</span>.<span class="number">11</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">bleach </span>                        <span class="number">5</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">blinker </span>                       <span class="number">1</span>.<span class="number">6</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">cachetools </span>                    <span class="number">4</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">certifi                        <span class="number">2019</span>.<span class="number">9</span>.<span class="number">11</span></span><br><span class="line">certipy                        <span class="number">0</span>.<span class="number">1</span>.<span class="number">3</span></span><br><span class="line">cffi                           <span class="number">1</span>.<span class="number">15</span>.<span class="number">1</span></span><br><span class="line">cfgv                           <span class="number">2</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">chardet                        <span class="number">3</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">charset-<span class="keyword">normalizer </span>            <span class="number">3</span>.<span class="number">3</span>.<span class="number">2</span></span><br><span class="line">Click                          <span class="number">7</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">cloudpickle </span>                   <span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br><span class="line">cma                            <span class="number">2</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line">colorama                       <span class="number">0</span>.<span class="number">4</span>.<span class="number">4</span></span><br><span class="line">colorlog                       <span class="number">4</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">cryptography                   <span class="number">38</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">cycler                         <span class="number">0</span>.<span class="number">10</span>.<span class="number">0</span></span><br><span class="line">Cython                         <span class="number">0</span>.<span class="number">29</span></span><br><span class="line">debugpy                        <span class="number">1</span>.<span class="number">6</span>.<span class="number">0</span></span><br><span class="line">decorator                      <span class="number">4</span>.<span class="number">4</span>.<span class="number">2</span></span><br><span class="line">defusedxml                     <span class="number">0</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">dill </span>                          <span class="number">0</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">easydict                       <span class="number">1</span>.<span class="number">9</span></span><br><span class="line">entrypoints                    <span class="number">0</span>.<span class="number">4</span></span><br><span class="line">et-xmlfile                     <span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">exceptiongroup                 <span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">fastapi                        <span class="number">0</span>.<span class="number">85</span>.<span class="number">1</span></span><br><span class="line">fastjsonschema                 <span class="number">2</span>.<span class="number">16</span>.<span class="number">1</span></span><br><span class="line">ffmpy                          <span class="number">0</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line">filelock                       <span class="number">3</span>.<span class="number">0</span>.<span class="number">12</span></span><br><span class="line">flake8                         <span class="number">4</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">Flask                          <span class="number">1</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">Flask-<span class="keyword">Babel </span>                   <span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">Flask-Cors                     <span class="number">3</span>.<span class="number">0</span>.<span class="number">8</span></span><br><span class="line">forbiddenfruit                 <span class="number">0</span>.<span class="number">1</span>.<span class="number">3</span></span><br><span class="line">frozenlist                     <span class="number">1</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">fsspec                         <span class="number">2023</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">funcsigs                       <span class="number">1</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line">future                         <span class="number">0</span>.<span class="number">18</span>.<span class="number">0</span></span><br><span class="line">gast                           <span class="number">0</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">gitdb                          <span class="number">4</span>.<span class="number">0</span>.<span class="number">5</span></span><br><span class="line">GitPython                      <span class="number">3</span>.<span class="number">1</span>.<span class="number">14</span></span><br><span class="line">google-auth                    <span class="number">1</span>.<span class="number">10</span>.<span class="number">0</span></span><br><span class="line">google-auth-oauthlib           <span class="number">0</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">gradio                         <span class="number">3</span>.<span class="number">34</span>.<span class="number">0</span></span><br><span class="line">gradio_client                  <span class="number">0</span>.<span class="number">2</span>.<span class="number">6</span></span><br><span class="line">graphviz                       <span class="number">0</span>.<span class="number">13</span></span><br><span class="line">greenlet                       <span class="number">1</span>.<span class="number">1</span>.<span class="number">3</span></span><br><span class="line">grpcio                         <span class="number">1</span>.<span class="number">35</span>.<span class="number">0</span></span><br><span class="line">gunicorn                       <span class="number">20</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">gym                            <span class="number">0</span>.<span class="number">12</span>.<span class="number">1</span></span><br><span class="line">h11                            <span class="number">0</span>.<span class="number">14</span>.<span class="number">0</span></span><br><span class="line">h5py                           <span class="number">2</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">httpcore                       <span class="number">0</span>.<span class="number">17</span>.<span class="number">3</span></span><br><span class="line">httpx                          <span class="number">0</span>.<span class="number">24</span>.<span class="number">1</span></span><br><span class="line">huggingface-hub                <span class="number">0</span>.<span class="number">16</span>.<span class="number">4</span></span><br><span class="line">identify                       <span class="number">1</span>.<span class="number">4</span>.<span class="number">10</span></span><br><span class="line">idna                           <span class="number">2</span>.<span class="number">8</span></span><br><span class="line">imageio                        <span class="number">2</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line">imageio-ffmpeg                 <span class="number">0</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line">imgaug                         <span class="number">0</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">importlib-metadata             <span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">importlib-resources            <span class="number">5</span>.<span class="number">9</span>.<span class="number">0</span></span><br><span class="line">ipykernel                      <span class="number">6</span>.<span class="number">9</span>.<span class="number">1</span></span><br><span class="line">ipython                        <span class="number">7</span>.<span class="number">34</span>.<span class="number">0</span></span><br><span class="line">ipython-genutils               <span class="number">0</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">ipywidgets                     <span class="number">7</span>.<span class="number">6</span>.<span class="number">5</span></span><br><span class="line">isort                          <span class="number">4</span>.<span class="number">3</span>.<span class="number">21</span></span><br><span class="line">itsdangerous                   <span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">jdcal </span>                         <span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">jedi </span>                          <span class="number">0</span>.<span class="number">17</span>.<span class="number">2</span></span><br><span class="line"><span class="keyword">jieba </span>                         <span class="number">0</span>.<span class="number">42</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">Jinja2 </span>                        <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">joblib </span>                        <span class="number">0</span>.<span class="number">14</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">JPype1 </span>                        <span class="number">0</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line"><span class="keyword">json5 </span>                         <span class="number">0</span>.<span class="number">9</span>.<span class="number">5</span></span><br><span class="line"><span class="keyword">jsonschema </span>                    <span class="number">4</span>.<span class="number">16</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">jupyter-archive </span>               <span class="number">3</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">jupyter_client </span>                <span class="number">7</span>.<span class="number">3</span>.<span class="number">5</span></span><br><span class="line"><span class="keyword">jupyter-core </span>                  <span class="number">4</span>.<span class="number">11</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">jupyter-lsp </span>                   <span class="number">1</span>.<span class="number">5</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">jupyter-server </span>                <span class="number">1</span>.<span class="number">16</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">jupyter-telemetry </span>             <span class="number">0</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">jupyterhub </span>                    <span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">jupyterlab </span>                    <span class="number">3</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line"><span class="keyword">jupyterlab-language-pack-zh-CN </span><span class="number">3</span>.<span class="number">4</span>.post1</span><br><span class="line"><span class="keyword">jupyterlab-pygments </span>           <span class="number">0</span>.<span class="number">2</span>.<span class="number">2</span></span><br><span class="line"><span class="keyword">jupyterlab-server </span>             <span class="number">2</span>.<span class="number">10</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">jupyterlab-widgets </span>            <span class="number">3</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line">kiwisolver                     <span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">lap                            <span class="number">0</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">lazy-object-proxy              <span class="number">1</span>.<span class="number">4</span>.<span class="number">3</span></span><br><span class="line">librosa                        <span class="number">0</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line">lightgbm                       <span class="number">3</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">linkify-it-py                  <span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="keyword">llvmlite </span>                      <span class="number">0</span>.<span class="number">31</span>.<span class="number">0</span></span><br><span class="line">lxml                           <span class="number">4</span>.<span class="number">9</span>.<span class="number">1</span></span><br><span class="line">Mako                           <span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span></span><br><span class="line">Markdown                       <span class="number">3</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">markdown-it-py                 <span class="number">2</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">MarkupSafe                     <span class="number">2</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">matplotlib                     <span class="number">2</span>.<span class="number">2</span>.<span class="number">3</span></span><br><span class="line">matplotlib-inline              <span class="number">0</span>.<span class="number">1</span>.<span class="number">6</span></span><br><span class="line">mccabe                         <span class="number">0</span>.<span class="number">6</span>.<span class="number">1</span></span><br><span class="line">mdit-py-plugins                <span class="number">0</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">mdurl                          <span class="number">0</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">mistune                        <span class="number">0</span>.<span class="number">8</span>.<span class="number">4</span></span><br><span class="line">more-itertools                 <span class="number">7</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">motmetrics                     <span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">moviepy                        <span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">multidict </span>                     <span class="number">6</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line"><span class="keyword">multiprocess </span>                  <span class="number">0</span>.<span class="number">70</span>.<span class="number">11</span>.<span class="number">1</span></span><br><span class="line">nbclassic                      <span class="number">0</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line">nbclient                       <span class="number">0</span>.<span class="number">5</span>.<span class="number">13</span></span><br><span class="line">nbconvert                      <span class="number">6</span>.<span class="number">4</span>.<span class="number">4</span></span><br><span class="line">nbformat                       <span class="number">5</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">nest-asyncio                   <span class="number">1</span>.<span class="number">5</span>.<span class="number">5</span></span><br><span class="line">netifaces                      <span class="number">0</span>.<span class="number">10</span>.<span class="number">9</span></span><br><span class="line">networkx                       <span class="number">2</span>.<span class="number">4</span></span><br><span class="line">nltk                           <span class="number">3</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line">nodeenv                        <span class="number">1</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line">notebook                       <span class="number">5</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line">numba                          <span class="number">0</span>.<span class="number">48</span>.<span class="number">0</span></span><br><span class="line">numpy                          <span class="number">1</span>.<span class="number">20</span>.<span class="number">3</span></span><br><span class="line">oauthlib                       <span class="number">3</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">objgraph                       <span class="number">3</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">opencv-python                  <span class="number">4</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">26</span></span><br><span class="line">openpyxl                       <span class="number">3</span>.<span class="number">0</span>.<span class="number">5</span></span><br><span class="line">opt-<span class="keyword">einsum </span>                    <span class="number">3</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">orjson </span>                        <span class="number">3</span>.<span class="number">9</span>.<span class="number">7</span></span><br><span class="line">packaging                      <span class="number">21</span>.<span class="number">3</span></span><br><span class="line">paddlehub                      <span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">paddlenlp                      <span class="number">2</span>.<span class="number">0</span>.<span class="number">7</span></span><br><span class="line">paddlepaddle-gpu               <span class="number">2</span>.<span class="number">5</span>.<span class="number">2</span></span><br><span class="line">pamela                         <span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">pandas                         <span class="number">1</span>.<span class="number">1</span>.<span class="number">5</span></span><br><span class="line">pandocfilters                  <span class="number">1</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">parl                           <span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">parso                          <span class="number">0</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line">pathlib                        <span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">pexpect                        <span class="number">4</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line">pickleshare                    <span class="number">0</span>.<span class="number">7</span>.<span class="number">5</span></span><br><span class="line">Pillow                         <span class="number">8</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">pip                            <span class="number">22</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line">pkgutil_resolve_name           <span class="number">1</span>.<span class="number">3</span>.<span class="number">10</span></span><br><span class="line">plotly                         <span class="number">5</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line">pluggy                         <span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">pre-commit                     <span class="number">1</span>.<span class="number">21</span>.<span class="number">0</span></span><br><span class="line">prettytable                    <span class="number">0</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line">proglog                        <span class="number">0</span>.<span class="number">1</span>.<span class="number">9</span></span><br><span class="line">prometheus-client              <span class="number">0</span>.<span class="number">14</span>.<span class="number">1</span></span><br><span class="line">prompt-toolkit                 <span class="number">2</span>.<span class="number">0</span>.<span class="number">10</span></span><br><span class="line">protobuf                       <span class="number">4</span>.<span class="number">24</span>.<span class="number">4</span></span><br><span class="line">psutil                         <span class="number">5</span>.<span class="number">7</span>.<span class="number">2</span></span><br><span class="line">ptyprocess                     <span class="number">0</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line">py4j                           <span class="number">0</span>.<span class="number">10</span>.<span class="number">9</span>.<span class="number">2</span></span><br><span class="line">pyarrow                        <span class="number">12</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">pyasn1                         <span class="number">0</span>.<span class="number">4</span>.<span class="number">8</span></span><br><span class="line">pyasn1-modules                 <span class="number">0</span>.<span class="number">2</span>.<span class="number">7</span></span><br><span class="line">pycocotools                    <span class="number">2</span>.<span class="number">0</span>.<span class="number">7</span></span><br><span class="line">pycodestyle                    <span class="number">2</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line">pycparser                      <span class="number">2</span>.<span class="number">21</span></span><br><span class="line">pycryptodome                   <span class="number">3</span>.<span class="number">9</span>.<span class="number">9</span></span><br><span class="line">pydantic                       <span class="number">1</span>.<span class="number">10</span>.<span class="number">13</span></span><br><span class="line">pydantic_core                  <span class="number">2</span>.<span class="number">14</span>.<span class="number">6</span></span><br><span class="line">pydeck                         <span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span>b0</span><br><span class="line">pydocstyle                     <span class="number">5</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line">pydub                          <span class="number">0</span>.<span class="number">25</span>.<span class="number">1</span></span><br><span class="line">pyflakes                       <span class="number">2</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">pyglet                         <span class="number">1</span>.<span class="number">4</span>.<span class="number">5</span></span><br><span class="line">Pygments                       <span class="number">2</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line">pylint                         <span class="number">2</span>.<span class="number">5</span>.<span class="number">2</span></span><br><span class="line">Pympler                        <span class="number">1</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">pynvml                         <span class="number">8</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">pyOpenSSL                      <span class="number">22</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">pyparsing                      <span class="number">3</span>.<span class="number">0</span>.<span class="number">9</span></span><br><span class="line">pypmml                         <span class="number">0</span>.<span class="number">9</span>.<span class="number">11</span></span><br><span class="line">pyrsistent                     <span class="number">0</span>.<span class="number">18</span>.<span class="number">1</span></span><br><span class="line">python-dateutil                <span class="number">2</span>.<span class="number">8</span>.<span class="number">2</span></span><br><span class="line">python-<span class="keyword">json-logger </span>            <span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">python-<span class="keyword">jsonrpc-server </span>         <span class="number">0</span>.<span class="number">3</span>.<span class="number">4</span></span><br><span class="line">python-language-server         <span class="number">0</span>.<span class="number">33</span>.<span class="number">0</span></span><br><span class="line">python-lsp-<span class="keyword">jsonrpc </span>            <span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">python-lsp-server              <span class="number">1</span>.<span class="number">5</span>.<span class="number">0</span></span><br><span class="line">python-<span class="keyword">multipart </span>              <span class="number">0</span>.<span class="number">0</span>.<span class="number">6</span></span><br><span class="line">pytz                           <span class="number">2019</span>.<span class="number">3</span></span><br><span class="line">PyWavelets                     <span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">PyYAML                         <span class="number">5</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line">pyzmq                          <span class="number">23</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line">rarfile                        <span class="number">3</span>.<span class="number">1</span></span><br><span class="line">recordio                       <span class="number">0</span>.<span class="number">1</span>.<span class="number">7</span></span><br><span class="line">requests                       <span class="number">2</span>.<span class="number">22</span>.<span class="number">0</span></span><br><span class="line">requests-oauthlib              <span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line">resampy                        <span class="number">0</span>.<span class="number">2</span>.<span class="number">2</span></span><br><span class="line">rich                           <span class="number">13</span>.<span class="number">7</span>.<span class="number">0</span></span><br><span class="line">rope                           <span class="number">0</span>.<span class="number">17</span>.<span class="number">0</span></span><br><span class="line">rsa                            <span class="number">4</span>.<span class="number">0</span></span><br><span class="line">ruamel.yaml                    <span class="number">0</span>.<span class="number">17</span>.<span class="number">21</span></span><br><span class="line">ruamel.yaml.clib               <span class="number">0</span>.<span class="number">2</span>.<span class="number">6</span></span><br><span class="line"><span class="keyword">scikit-image </span>                  <span class="number">0</span>.<span class="number">19</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">scikit-learn </span>                  <span class="number">0</span>.<span class="number">24</span>.<span class="number">2</span></span><br><span class="line"><span class="keyword">scipy </span>                         <span class="number">1</span>.<span class="number">6</span>.<span class="number">3</span></span><br><span class="line">seaborn                        <span class="number">0</span>.<span class="number">10</span>.<span class="number">0</span></span><br><span class="line">semantic-version               <span class="number">2</span>.<span class="number">10</span>.<span class="number">0</span></span><br><span class="line">semver                         <span class="number">3</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line">Send2Trash                     <span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span></span><br><span class="line">sentencepiece                  <span class="number">0</span>.<span class="number">1</span>.<span class="number">85</span></span><br><span class="line">seqeval                        <span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span></span><br><span class="line">setuptools                     <span class="number">56</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"><span class="keyword">shapely </span>                       <span class="number">2</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">shellcheck-py </span>                 <span class="number">0</span>.<span class="number">7</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">simplegeneric                  <span class="number">0</span>.<span class="number">8</span>.<span class="number">1</span></span><br><span class="line">six                            <span class="number">1</span>.<span class="number">16</span>.<span class="number">0</span></span><br><span class="line">sklearn                        <span class="number">0</span>.<span class="number">0</span></span><br><span class="line">smmap                          <span class="number">3</span>.<span class="number">0</span>.<span class="number">5</span></span><br><span class="line">sniffio                        <span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line">snowballstemmer                <span class="number">2</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">SoundFile                      <span class="number">0</span>.<span class="number">10</span>.<span class="number">3</span>.post1</span><br><span class="line">soupsieve                      <span class="number">2</span>.<span class="number">3</span>.<span class="number">2</span>.post1</span><br><span class="line">SQLAlchemy                     <span class="number">1</span>.<span class="number">4</span>.<span class="number">41</span></span><br><span class="line">starlette                      <span class="number">0</span>.<span class="number">20</span>.<span class="number">4</span></span><br><span class="line">streamlit                      <span class="number">1</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line">streamlit-image-comparison     <span class="number">0</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line">tabulate                       <span class="number">0</span>.<span class="number">8</span>.<span class="number">3</span></span><br><span class="line">tb-nightly                     <span class="number">1</span>.<span class="number">15</span>.<span class="number">0</span>a20190801</span><br><span class="line">tb-paddle                      <span class="number">0</span>.<span class="number">3</span>.<span class="number">6</span></span><br><span class="line">tenacity                       <span class="number">8</span>.<span class="number">0</span>.<span class="number">1</span></span><br><span class="line">tensorboard                    <span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">tensorboardX                   <span class="number">1</span>.<span class="number">8</span></span><br><span class="line">termcolor                      <span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">terminado                      <span class="number">0</span>.<span class="number">15</span>.<span class="number">0</span></span><br><span class="line">testpath                       <span class="number">0</span>.<span class="number">4</span>.<span class="number">2</span></span><br><span class="line">threadpoolctl                  <span class="number">2</span>.<span class="number">1</span>.<span class="number">0</span></span><br><span class="line">tifffile                       <span class="number">2021</span>.<span class="number">11</span>.<span class="number">2</span></span><br><span class="line">tinycss2                       <span class="number">1</span>.<span class="number">1</span>.<span class="number">1</span></span><br><span class="line">toml                           <span class="number">0</span>.<span class="number">10</span>.<span class="number">0</span></span><br><span class="line">toolz                          <span class="number">0</span>.<span class="number">12</span>.<span class="number">0</span></span><br><span class="line">tornado                        <span class="number">6</span>.<span class="number">2</span></span><br><span class="line">tqdm                           <span class="number">4</span>.<span class="number">66</span>.<span class="number">1</span></span><br><span class="line">traitlets                      <span class="number">5</span>.<span class="number">4</span>.<span class="number">0</span></span><br><span class="line">typed-ast                      <span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">typeguard                      <span class="number">4</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line">typing_extensions              <span class="number">4</span>.<span class="number">7</span>.<span class="number">1</span></span><br><span class="line">tzlocal                        <span class="number">5</span>.<span class="number">1</span></span><br><span class="line">uc-micro-py                    <span class="number">1</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line">ujson                          <span class="number">1</span>.<span class="number">35</span></span><br><span class="line">urllib3                        <span class="number">1</span>.<span class="number">25</span>.<span class="number">6</span></span><br><span class="line">uvicorn                        <span class="number">0</span>.<span class="number">22</span>.<span class="number">0</span></span><br><span class="line">validators                     <span class="number">0</span>.<span class="number">20</span>.<span class="number">0</span></span><br><span class="line">virtualenv                     <span class="number">16</span>.<span class="number">7</span>.<span class="number">9</span></span><br><span class="line">visualdl                       <span class="number">2</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">watchdog                       <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">wcwidth                        <span class="number">0</span>.<span class="number">1</span>.<span class="number">7</span></span><br><span class="line">webencodings                   <span class="number">0</span>.<span class="number">5</span>.<span class="number">1</span></span><br><span class="line">websocket-client               <span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line">websockets                     <span class="number">11</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line">Werkzeug                       <span class="number">0</span>.<span class="number">16</span>.<span class="number">0</span></span><br><span class="line">whatthepatch                   <span class="number">1</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line">wheel                          <span class="number">0</span>.<span class="number">36</span>.<span class="number">2</span></span><br><span class="line">widgetsnbextension             <span class="number">3</span>.<span class="number">5</span>.<span class="number">2</span></span><br><span class="line">wrapt                          <span class="number">1</span>.<span class="number">12</span>.<span class="number">1</span></span><br><span class="line">xarray                         <span class="number">0</span>.<span class="number">16</span>.<span class="number">2</span></span><br><span class="line">xgboost                        <span class="number">1</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">xlrd                           <span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line">xmltodict                      <span class="number">0</span>.<span class="number">13</span>.<span class="number">0</span></span><br><span class="line">yapf                           <span class="number">0</span>.<span class="number">26</span>.<span class="number">0</span></span><br><span class="line">yarl                           <span class="number">1</span>.<span class="number">9</span>.<span class="number">4</span></span><br><span class="line">zipp                           <span class="number">3</span>.<span class="number">8</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="ModuleNotFoundError-No-module-named-â€˜paddle-profilerâ€™"><a href="#ModuleNotFoundError-No-module-named-â€˜paddle-profilerâ€™" class="headerlink" title="ModuleNotFoundError: No module named â€˜paddle.profilerâ€™"></a>ModuleNotFoundError: No module named â€˜paddle.profilerâ€™</h2><p>é—®é¢˜ï¼špaddlepaddle-gpuç‰ˆæœ¬ä½ï¼Œuninstallå†installå°±ok</p><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> paddlepaddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>paddleå­¦ä¹ ç¬”è®°</title>
      <link href="/2024/03/08/paddle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/03/08/paddle%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>ç‰¹å¾é€‰å–ï¼Œé¿å…è¢«ä¸ç›¸å…³çš„ç‰¹å¾å¹²æ‰°ï¼š</p><div class="tagLink"><a class="link-card" title="æœºå™¨å­¦ä¹ å…¥é—¨è®²è§£ï¼šä»€ä¹ˆæ˜¯ç‰¹å¾ï¼ˆFeatureï¼‰å’Œç‰¹å¾é€‰æ‹©(Feature Selection)?" href="https://zhuanlan.zhihu.com/p/30404850"><span class="link-card-backdrop" style="background-image: url(https://pic1.zhimg.com/70/v2-9f98ca58f649f01f9bf5739ac0ad8239_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://pic1.zhimg.com/70/v2-9f98ca58f649f01f9bf5739ac0ad8239_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/70/v2-9f98ca58f649f01f9bf5739ac0ad8239_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">æœºå™¨å­¦ä¹ å…¥é—¨è®²è§£ï¼šä»€ä¹ˆæ˜¯ç‰¹å¾ï¼ˆFeatureï¼‰å’Œç‰¹å¾é€‰æ‹©(Feature Selection)?</p><p class="url">https://zhuanlan.zhihu.com/p/30404850</p></div></a></div><p>å¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œä¸åŒçš„ç‰¹å¾ï¼Œç»“æœè¿˜æ˜¯å·®åˆ«å¾ˆå¤§çš„ï¼Œå¦‚æœæˆ‘åªç”¨é€‰å–ä¸Šå›¾å‡†ç¡®ç‡æœ€é«˜çš„ä¸€ç±»ç‰¹å¾æ¥è®­ç»ƒæ¨¡å‹ï¼Œ80.32%æµ‹è¯•ç»“æœå°†æ¯”ä½¿ç”¨å…¨éƒ¨ç‰¹å¾ä½œä¸ºè®­ç»ƒæ•°æ®71%å¥½ä¸å°‘ï¼Œè¿™ä¸ªDWT-Approx(4-14Hz) db2,k&#x3D;1 ç‰¹å¾å°±ç›¸å½“äºæˆ‘ä»¬ç¬¬ä¸€ä¸ªä¾‹å­ä¸­æ‰¾æ­£æ–¹ä½“çš„â€˜å½¢çŠ¶â€™ç‰¹å¾ï¼Œå³ä¸»è¦ç‰¹å¾ã€‚é‚£ä¹ˆé’ˆå¯¹æœªæ¥çš„è®­ç»ƒï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æå–è¡¨ç°æœ€å¥½çš„å‡ ä¸ªç‰¹å¾å°±å¥½äº†ï¼›ä¸ºä»€ä¹ˆé€‰æœ€å¥½çš„å‡ ä¸ªç‰¹å¾ï¼Œåªé€‰æœ€å¥½çš„é‚£ä¸€ä¸ªä¸æ˜¯æ›´é«˜å—</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ç‰¹å¾é€‰æ‹©æ—¶ï¼Œé€‰æ‹©å‡ ä¸ªè¡¨ç°æœ€å¥½çš„ç‰¹å¾é€šå¸¸æ¯”åªé€‰ä¸€ä¸ªæœ€å¥½çš„ç‰¹å¾æ›´å¯é å’Œæœ‰æ•ˆã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸå› ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**ä¿¡æ¯ä¸°å¯Œæ€§**</span>ï¼šä½¿ç”¨å¤šä¸ªå¥½çš„ç‰¹å¾å¯ä»¥æä¾›æ›´å¤šå…³äºæ•°æ®é›†çš„ä¿¡æ¯ï¼Œæœ‰åŠ©äºæ›´å¥½åœ°æè¿°æ•°æ®ä¹‹é—´çš„å…³ç³»ã€‚è¿™å¯ä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**å†—ä½™æ€§**</span>ï¼šæœ‰æ—¶å€™ä¸€ä¸ªå•ä¸€æœ€å¥½çš„ç‰¹å¾å¯èƒ½ä¼šåŒ…å«æŸäº›å†—ä½™ä¿¡æ¯ï¼Œè€Œä½¿ç”¨å¤šä¸ªè¡¨ç°è‰¯å¥½ä¸”äº’è¡¥çš„ç‰¹å¾å¯ä»¥å¸®åŠ©æ¶ˆé™¤å†—ä½™æ€§ï¼Œæé«˜æ¨¡å‹çš„é²æ£’æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**æ¨¡å‹ç¨³å®šæ€§**</span>ï¼šè¿‡äºä¾èµ–ä¸€ä¸ªæœ€å¥½çš„ç‰¹å¾å¯èƒ½ä½¿å¾—æ¨¡å‹å¯¹äºå™ªå£°å’Œå¼‚å¸¸æ•°æ®æ›´ä¸ºæ•æ„Ÿã€‚å¤šä¸ªå¥½çš„ç‰¹å¾å¯ä»¥å¢åŠ æ¨¡å‹çš„ç¨³å®šæ€§ï¼Œé™ä½å¯¹å™ªå£°çš„æ•æ„Ÿåº¦ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**ç»¼åˆè€ƒé‡**</span>ï¼šä¸åŒçš„ç‰¹å¾å¯èƒ½ä¼šæ•æ‰åˆ°æ•°æ®ä¸åŒæ–¹é¢çš„ä¿¡æ¯ï¼Œç»¼åˆåˆ©ç”¨å¤šä¸ªè¡¨ç°è‰¯å¥½çš„ç‰¹å¾æœ‰åˆ©äºæ›´å…¨é¢åœ°å­¦ä¹ æ•°æ®çš„è§„å¾‹ï¼Œæé«˜æ¨¡å‹çš„æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé€‰æ‹©æ•°ä¸ªè¡¨ç°è‰¯å¥½ä¸”äº’è¡¥çš„ç‰¹å¾æ¯”å•ä¸ªæœ€å¥½çš„ç‰¹å¾æ›´ä¸ºåˆé€‚ã€‚å½“ç„¶ï¼Œå…·ä½“é€‰æ‹©å¤šå°‘ä¸ªç‰¹å¾å–å†³äºå®é™…åº”ç”¨åœºæ™¯å’Œæ•°æ®é›†çš„ç‰¹ç‚¹ã€‚</span><br></pre></td></tr></table></figure><h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2><div class="tagLink"><a class="link-card" title="æœºå™¨å­¦ä¹ å…¥é—¨ï¼šé‡è¦çš„æ¦‚å¿µ---ä¿¡æ¯ç†µï¼ˆShannonâ€™s Entropy Modelï¼‰" href="https://zhuanlan.zhihu.com/p/30854084"><span class="link-card-backdrop" style="background-image: url(https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">æœºå™¨å­¦ä¹ å…¥é—¨ï¼šé‡è¦çš„æ¦‚å¿µ---ä¿¡æ¯ç†µï¼ˆShannonâ€™s Entropy Modelï¼‰</p><p class="url">https://zhuanlan.zhihu.com/p/30854084</p></div></a></div><h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2><div class="tagLink"><a class="link-card" title="CNN å…¥é—¨è®²è§£ï¼šä»€ä¹ˆæ˜¯å·ç§¯ï¼ˆConvolutionï¼‰?" href="https://zhuanlan.zhihu.com/p/30994790"><span class="link-card-backdrop" style="background-image: url(https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/70/v2-5e7917bb0bf5604630f732379e70c8e3_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">CNN å…¥é—¨è®²è§£ï¼šä»€ä¹ˆæ˜¯å·ç§¯ï¼ˆConvolutionï¼‰?</p><p class="url">https://zhuanlan.zhihu.com/p/30994790</p></div></a></div><h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2><div class="tagLink"><a class="link-card" title="CNNå…¥é—¨è®²è§£ï¼šå¦‚ä½•ç†è§£å·ç§¯ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼ˆStructureï¼‰ï¼Ÿ" href="https://zhuanlan.zhihu.com/p/31249821"><span class="link-card-backdrop" style="background-image: url(https://pica.zhimg.com/70/v2-7a147703c5181ff9737b41afa6ea6bce_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://pica.zhimg.com/70/v2-7a147703c5181ff9737b41afa6ea6bce_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://pica.zhimg.com/70/v2-7a147703c5181ff9737b41afa6ea6bce_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">CNNå…¥é—¨è®²è§£ï¼šå¦‚ä½•ç†è§£å·ç§¯ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼ˆStructureï¼‰ï¼Ÿ</p><p class="url">https://zhuanlan.zhihu.com/p/31249821</p></div></a></div><div class="tagLink"><a class="link-card" title="10åˆ†é’Ÿæ•°æ®é™ç»´å…¥é—¨" href="https://zhuanlan.zhihu.com/p/237718243"><span class="link-card-backdrop" style="background-image: url(https://picx.zhimg.com/70/v2-3679db615987147578a84986d7947580_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://picx.zhimg.com/70/v2-3679db615987147578a84986d7947580_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://picx.zhimg.com/70/v2-3679db615987147578a84986d7947580_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">10åˆ†é’Ÿæ•°æ®é™ç»´å…¥é—¨</p><p class="url">https://zhuanlan.zhihu.com/p/237718243</p></div></a></div><iframe src="//player.bilibili.com/player.html?aid=549558824&bvid=BV1Di4y1o7vX&cid=453635246&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>ç°åœ¨çŸ¥é“ä¹˜å®¢æ¯æ¬¡ä¹˜åå‡ºç§Ÿè½¦çš„å…¬é‡Œæ•°ï¼Œä¹ŸçŸ¥é“ä¹˜å®¢æ¯æ¬¡ä¸‹è½¦çš„æ—¶å€™æ”¯ä»˜ç»™å‡ºç§Ÿè½¦å¸æœºçš„æ€»è´¹ç”¨ã€‚ä½†æ˜¯å¹¶ä¸çŸ¥é“ä¹˜è½¦çš„èµ·æ­¥ä»·ï¼Œä»¥åŠæ¯å…¬é‡Œè¡Œé©¶è´¹ç”¨æ˜¯å¤šå°‘ã€‚å¸Œæœ›è®©æœºå™¨ä»è¿™äº›æ•°æ®å½“ä¸­å­¦ä¹ å‡ºæ¥è®¡ç®—æ€»è´¹ç”¨çš„è§„åˆ™ã€‚</p><p>æ›´å…·ä½“çš„ï¼Œæƒ³è¦è®©æœºå™¨å­¦ä¹ ç¨‹åºé€šè¿‡æ•°æ®å­¦ä¹ å‡ºæ¥ä¸‹é¢çš„å…¬å¼å½“ä¸­çš„å‚æ•° w å’Œå‚æ•° bï¼ˆè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç¤ºä¾‹ï¼Œæ‰€ä»¥wå’Œbéƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œéšç€å¯¹æ·±åº¦å­¦ä¹ äº†è§£çš„æ·±å…¥ï¼Œä½ å°†ä¼šçŸ¥é“wå’Œbé€šå¸¸æƒ…å†µä¸‹ä¼šæ˜¯çŸ©é˜µå’Œå‘é‡ï¼‰ã€‚è¿™æ ·ï¼Œå½“ä¸‹æ¬¡ä¹˜è½¦çš„æ—¶å€™ï¼ŒçŸ¥é“äº†è¡Œé©¶é‡Œç¨‹distance_travelledçš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¼°ç®—å‡ºæ¥ç”¨æˆ·çš„æ€»è´¹ç”¨total_feeäº†ã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">total_fee</span> = w * distance_travelled + b</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæœºå™¨å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œå·²ç»çŸ¥é“äº†ä¹˜å®¢çš„è¡Œé©¶é‡Œç¨‹distance_travelledï¼Œå’Œå¯¹åº”çš„ï¼Œè¿™äº›ä¹˜å®¢çš„æ€»è´¹ç”¨total_feeã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨æœºå™¨å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œåƒdistance_travelledè¿™æ ·çš„è¾“å…¥å€¼ï¼Œä¸€èˆ¬è¢«ç§°ä¸ºxï¼ˆæˆ–è€…ç‰¹å¾featureï¼‰ï¼Œåƒtotal_feeè¿™æ ·çš„è¾“å‡ºå€¼ï¼Œä¸€èˆ¬è¢«ç§°ä¸ºyï¼ˆæˆ–è€…æ ‡ç­¾label)ã€‚</p><p>å¯ä»¥ç”¨paddle.to_tensoræŠŠç¤ºä¾‹æ•°æ®è½¬æ¢ä¸ºpaddleçš„Tensoræ•°æ®ã€‚</p><details open><summary pointer> tensor </summary>              <div class='content'>              <p>é£æ¡¨ä½¿ç”¨å¼ é‡ï¼ˆTensorï¼‰ æ¥è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­ä¼ é€’çš„æ•°æ®ï¼ŒTensor å¯ä»¥ç†è§£ä¸ºå¤šç»´æ•°ç»„ï¼Œç±»ä¼¼äº Numpy æ•°ç»„ï¼ˆndarrayï¼‰ çš„æ¦‚å¿µã€‚ä¸ Numpy æ•°ç»„ç›¸æ¯”ï¼ŒTensor é™¤äº†æ”¯æŒè¿è¡Œåœ¨ CPU ä¸Šï¼Œè¿˜æ”¯æŒè¿è¡Œåœ¨ GPU åŠå„ç§ AI èŠ¯ç‰‡ä¸Šï¼Œä»¥å®ç°è®¡ç®—åŠ é€Ÿï¼›æ­¤å¤–ï¼Œé£æ¡¨åŸºäº Tensorï¼Œå®ç°äº†æ·±åº¦å­¦ä¹ æ‰€å¿…é¡»çš„åå‘ä¼ æ’­åŠŸèƒ½å’Œå¤šç§å¤šæ ·çš„ç»„ç½‘ç®—å­ï¼Œä»è€Œå¯æ›´å¿«æ·åœ°å®ç°æ·±åº¦å­¦ä¹ ç»„ç½‘ä¸è®­ç»ƒç­‰åŠŸèƒ½ã€‚ä¸¤è€…å…·ä½“å¼‚åŒç‚¹å¯å‚è§ä¸‹æ–‡ Tensor ä¸ Numpy æ•°ç»„ç›¸äº’è½¬æ¢ã€‚</p><p>åœ¨é£æ¡¨æ¡†æ¶ä¸­ï¼Œç¥ç»ç½‘ç»œçš„è¾“å…¥ã€è¾“å‡ºæ•°æ®ï¼Œä»¥åŠç½‘ç»œä¸­çš„å‚æ•°å‡é‡‡ç”¨ Tensor æ•°æ®ç»“æ„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>(<span class="params">model</span>):</span><br><span class="line">    <span class="comment"># é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°train(model)ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è¿›è¡Œç¥ç»ç½‘ç»œæ¨¡å‹çš„è®­ç»ƒã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨äº†æ¨¡å‹çš„train()æ–¹æ³•ï¼Œå°†æ¨¡å‹è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼ã€‚</span></span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># è®¾ç½®äº†è®­ç»ƒçš„è½®æ•°epochsä¸º2</span></span><br><span class="line">    epochs = <span class="number">2</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–äº†ä¼˜åŒ–å™¨optimï¼Œä½¿ç”¨äº†Adamä¼˜åŒ–å™¨ï¼Œå­¦ä¹ ç‡ä¸º0.001ï¼Œå¹¶ä¼ å…¥äº†æ¨¡å‹çš„å‚æ•°model.parameters()</span></span><br><span class="line">    <span class="comment"># model.parameters()è¿”å›ä¸€ä¸ªåŒ…å«æ¨¡å‹æ‰€æœ‰å‚æ•°çš„è¿­ä»£å™¨æˆ–åˆ—è¡¨ï¼Œ</span></span><br><span class="line">    <span class="comment"># è¿™äº›å‚æ•°æ˜¯éœ€è¦æ ¹æ®è®­ç»ƒæ•°æ®è¿›è¡Œè°ƒæ•´çš„ã€‚</span></span><br><span class="line">    <span class="comment"># åœ¨ä¼˜åŒ–å™¨ä¸­ï¼Œå¯ä»¥å°†è¿™äº›å‚æ•°ä¼ é€’ç»™ä¼˜åŒ–å™¨ï¼Œä½¿å¾—ä¼˜åŒ–å™¨èƒ½å¤Ÿæ ¹æ®æŸå¤±å‡½æ•°çš„æ¢¯åº¦æ¥æ›´æ–°è¿™äº›å‚æ•°ï¼Œä»è€Œä¸æ–­ä¼˜åŒ–æ¨¡å‹ä»¥å®ç°æ›´å¥½çš„æ€§èƒ½ã€‚</span></span><br><span class="line">    optim = paddle.optimizer.Adam(learning_rate=<span class="number">0.001</span>, parameters=model.parameters())</span><br><span class="line">    <span class="comment"># æ¨¡å‹è®­ç»ƒçš„ä¸¤å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">        <span class="keyword">for</span> batch_id, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader()):</span><br><span class="line">            x_data = data[<span class="number">0</span>]</span><br><span class="line">            y_data = data[<span class="number">1</span>]</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;x_data: &quot;</span>, x_data[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># æ‰“å°ç¥ç»ç½‘ç»œçš„è¾“å…¥ï¼šæ‰¹æ•°æ®ä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            predicts = model(x_data)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;predicts: &quot;</span>, predicts[<span class="number">0</span>]) <span class="comment"># æ‰“å°ç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼šæ‰¹æ•°æ®ä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;weight: &quot;</span>, model.linear1.weight[<span class="number">0</span>][<span class="number">0</span>]) <span class="comment"># æ‰“å°ç¥ç»ç½‘ç»œçš„æƒé‡ï¼šlinear1 å±‚çš„ weight ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">            loss = F.cross_entropy(predicts, y_data)</span><br><span class="line">            acc = paddle.metric.accuracy(predicts, y_data)</span><br><span class="line">            loss.backward()</span><br><span class="line">            optim.step()</span><br><span class="line">            optim.clear_grad()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">model = LeNet()</span><br><span class="line">train(model)</span><br></pre></td></tr></table></figure><details ><summary pointer> model.train() </summary>              <div class='content'>              <p>åœ¨è®­ç»ƒå¼€å§‹ä¹‹å‰å†™ä¸Š model.trian() ï¼Œåœ¨æµ‹è¯•æ—¶å†™ä¸Š model.eval()ã€‚<br>åœ¨ä½¿ç”¨PyTorchæ„å»ºç¥ç»ç½‘ç»œè¿›è¡Œè®­ç»ƒæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä»£ç ä¸­æ·»åŠ model.train()è¿™ä¸€å¥ï¼Œä»¥ç¡®ä¿å¯ç”¨Batch Normalizationï¼ˆBNï¼‰å’ŒDropoutå±‚çš„åŠŸèƒ½ã€‚</p><details ><summary pointer> æ‰¹æ ‡å‡†åŒ– (Batch Normalization) </summary>              <div class='content'>              <pre><code>          &lt;/div&gt;        &lt;/details&gt;</code></pre>              </div>            </details>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> paddlepaddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾åƒå¤„ç†ç¬”è®°</title>
      <link href="/2024/03/05/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/03/05/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<div class="tagLink"><a class="link-card" title="é˜…è¯»åŸæ–‡" href="https://blog.csdn.net/hello15617900040/article/details/127590000"><span class="link-card-backdrop" style="background-image: url(https://tumytime.github.io/picx-images-hosting/image.70a2w3jj5h.webp)"></span><div class="left"><img src="https://tumytime.github.io/picx-images-hosting/image.70a2w3jj5h.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.70a2w3jj5h.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">é˜…è¯»åŸæ–‡</p><p class="url">https://blog.csdn.net/hello15617900040/article/details/127590000</p></div></a></div><h2 id="å›¾åƒç»Ÿè®¡ç‰¹å¾"><a href="#å›¾åƒç»Ÿè®¡ç‰¹å¾" class="headerlink" title="å›¾åƒç»Ÿè®¡ç‰¹å¾"></a>å›¾åƒç»Ÿè®¡ç‰¹å¾</h2><h3 id="ç†µ"><a href="#ç†µ" class="headerlink" title="ç†µ"></a>ç†µ</h3><p>ç”¨äºåº¦é‡å›¾åƒæ‰€å…·æœ‰çš„ä¿¡æ¯é‡ï¼Œå®ƒåæ˜ äº†å›¾åƒä¸­çº¹ç†çš„ç´Šä¹±åº¦æˆ–å¤æ‚ç¨‹åº¦ã€‚ç†µå€¼è¶Šå¤§ï¼Œè¯´æ˜çº¹ç†è¶Šå¤æ‚ï¼›ç†µå€¼è¶Šå°ï¼Œè¯´æ˜çº¹ç†è¶Šå¹³æ»‘ã€‚</p><h3 id="å‡å€¼"><a href="#å‡å€¼" class="headerlink" title="å‡å€¼"></a>å‡å€¼</h3><p>ç°åº¦å‡å€¼æ˜¯å¯¹åŒºåŸŸå†…äº®åº¦çš„ä¸€ä¸ªåº¦é‡ï¼Œå¯ä»¥ç”¨æ¥ååº”å›¾åƒçš„æ˜æš—ç¨‹åº¦ã€‚</p><h3 id="æ–¹å·®"><a href="#æ–¹å·®" class="headerlink" title="æ–¹å·®"></a>æ–¹å·®</h3><p>æ–¹å·®å°±æ˜¯æ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼ˆåç¦»å‡å€¼ï¼‰ã€‚</p><h3 id="å¯¹æ¯”åº¦"><a href="#å¯¹æ¯”åº¦" class="headerlink" title="å¯¹æ¯”åº¦"></a>å¯¹æ¯”åº¦</h3><p>åæ˜ äº†å›¾åƒçš„æ¸…æ™°åº¦å’Œçº¹ç†æ²Ÿçº¹æ·±æµ…çš„ç¨‹åº¦ã€‚çº¹ç†æ²Ÿçº¹è¶Šæ·±ï¼Œå…¶å¯¹æ¯”åº¦è¶Šå¤§ï¼Œè§†è§‰æ•ˆæœè¶Šæ¸…æ™°ï¼›åä¹‹ï¼Œå¯¹æ¯”åº¦å°ï¼Œåˆ™æ²Ÿçº¹æµ…ï¼Œæ•ˆæœæ¨¡ç³Šã€‚</p><h2 id="å…¬å¼"><a href="#å…¬å¼" class="headerlink" title="å…¬å¼"></a>å…¬å¼</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.70a2w3jj5h.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.70a2w3jj5h.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æµ‹è¯•å›¾ç‰‡-ä»å‡å€¼ã€æ–¹å·®åšå¯¹æ¯”</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.231m296ifg.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.231m296ifg.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4qr2clzz71.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4qr2clzz71.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å¯¹äºç¬¬ä¸€ç»„å…­å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡è¶Šè¾†å‡å€¼è¶Šå¤§ï¼Œä½†æ–¹å·®ä¸ä¼šæ”¹å˜ï¼ˆåŒä¸€å¼ å›¾ç‰‡åªæ”¹å˜äº®åº¦ï¼‰<br>å¯¹äºç¬¬äºŒç»„å›¾ç‰‡ï¼Œå¯¹æ¯”åº¦ä¸åšè°ƒèŠ‚ï¼Œåªè°ƒèŠ‚äº®åº¦çš„æƒ…å†µä¸‹ï¼Œåç¦»å‡å€¼çš„ç¦»æ•£åº¦ä¼šå˜å¤§</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.67x7ed4tb5.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.67x7ed4tb5.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="æµ‹è¯•å›¾ç‰‡-ä»å¯¹æ¯”åº¦å‡ºå‘"><a href="#æµ‹è¯•å›¾ç‰‡-ä»å¯¹æ¯”åº¦å‡ºå‘" class="headerlink" title="æµ‹è¯•å›¾ç‰‡-ä»å¯¹æ¯”åº¦å‡ºå‘"></a>æµ‹è¯•å›¾ç‰‡-ä»å¯¹æ¯”åº¦å‡ºå‘</h2><p>å¯¹æ¯”åº¦è¶Šå¤§ è§†è§‰æ•ˆæœè¶Šæ¸…æ™°ï¼›çº¹ç†è¶Šæ·±å¯¹æ¯”åº¦è¶Šå¤§</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.58h4173k6m.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.58h4173k6m.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.ibv2scax2.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.ibv2scax2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="æµ‹è¯•å›¾ç‰‡-ä»ç†µå‡ºå‘"><a href="#æµ‹è¯•å›¾ç‰‡-ä»ç†µå‡ºå‘" class="headerlink" title="æµ‹è¯•å›¾ç‰‡-ä»ç†µå‡ºå‘"></a>æµ‹è¯•å›¾ç‰‡-ä»ç†µå‡ºå‘</h2><p>ç†µå€¼è¶Šå¤§ï¼Œè¯´æ˜çº¹ç†è¶Šå¤æ‚ï¼›ç†µå€¼è¶Šå°ï¼Œè¯´æ˜çº¹ç†è¶Šå¹³æ»‘ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3ye6uvmvwg.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3ye6uvmvwg.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.6bgtc318lv.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.6bgtc318lv.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">img_1</span> = cv2.imread(&#x27;office_1.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_2</span> = cv2.imread(&#x27;office_2.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_3</span> = cv2.imread(&#x27;office_3.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_4</span> = cv2.imread(&#x27;office_4.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_5</span> = cv2.imread(&#x27;office_5.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_6</span> = cv2.imread(&#x27;office_6.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_7</span> = cv2.imread(&#x27;dalishi.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_8</span> = cv2.imread(&#x27;wall.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_9</span> = cv2.imread(&#x27;muwen.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_10</span> = cv2.imread(&#x27;shuiniwen.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_11</span> = cv2.imread(&#x27;<span class="number">400</span>x400_zhi_wenli.jpg&#x27;)</span><br><span class="line"><span class="attribute">img_12</span> = cv2.imread(&#x27;<span class="number">400</span>x400_zhi_zhezhouwenli.jpg&#x27;)</span><br><span class="line"><span class="attribute">imgs</span> =<span class="meta"> [img_1,img_2,img_3,img_4,img_5,img_6]</span></span><br><span class="line"><span class="attribute">titles</span> =<span class="meta"> [&#x27;office_1.jpg&#x27;,&#x27;office_2.jpg&#x27;,&#x27;office_3.jpg&#x27;,&#x27;office_4.jpg&#x27;,&#x27;office_5.jpg&#x27;,&#x27;office_6.jpg&#x27;]</span></span><br><span class="line"><span class="attribute">for</span> m in range(<span class="number">6</span>):</span><br><span class="line">    <span class="attribute">plt</span>.subplot(<span class="number">2</span>,<span class="number">3</span>,m + <span class="number">1</span>)</span><br><span class="line">    <span class="attribute">plt</span>.imshow(imgs[m])</span><br><span class="line">    <span class="attribute">plt</span>.title(titles[m])</span><br><span class="line"><span class="attribute">def</span> rgb2gray(img):</span><br><span class="line">    <span class="attribute">h</span> = img.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="attribute">w</span> = img.shape[<span class="number">1</span>]</span><br><span class="line">    <span class="attribute">gray</span> = np.uint8(np.zeros((h,w)))</span><br><span class="line">    <span class="attribute">for</span> i in range(h):</span><br><span class="line">        <span class="attribute">for</span> j in range(w):</span><br><span class="line">            <span class="attribute">gray</span>[i,j] = <span class="number">0</span>.<span class="number">144</span> * img[i,j,<span class="number">0</span>] + <span class="number">0</span>.<span class="number">587</span> * img[i,j,<span class="number">1</span>] + <span class="number">0</span>.<span class="number">299</span> * img[i,j,<span class="number">2</span>]  # BGR</span><br><span class="line">    <span class="attribute">return</span> gray</span><br><span class="line"><span class="attribute">def</span> average(img):</span><br><span class="line">    <span class="attribute">img1</span> = rgb2gray(img)</span><br><span class="line">    <span class="attribute">height</span>,width = img1.shape</span><br><span class="line">    <span class="attribute">size</span> = img1.size</span><br><span class="line">    <span class="attribute">ave</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">for</span> i in range(height):</span><br><span class="line">        <span class="attribute">for</span> j in range(width):</span><br><span class="line">            <span class="attribute">ave</span> += img1[i][j] / size</span><br><span class="line">    <span class="attribute">return</span> ave</span><br><span class="line"><span class="attribute">def</span> contrast(img):</span><br><span class="line">    <span class="attribute">img1</span> = rgb2gray(img)</span><br><span class="line">    <span class="attribute">m</span>,n = img1.shape</span><br><span class="line">    <span class="comment"># å›¾ç‰‡çŸ©é˜µå‘å¤–æ‰©å±•ä¸€ä¸ªåƒç´ </span></span><br><span class="line">    <span class="attribute">img1_ext</span>=cv2.copyMakeBorder(img1,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,cv2.BORDER_REPLICATE)  # ç”¨è¾¹ç•Œé¢œè‰²å¡«å……</span><br><span class="line">    <span class="attribute">height</span>,width = img1_ext.shape</span><br><span class="line">    <span class="attribute">b</span> = <span class="number">0</span>.<span class="number">0</span></span><br><span class="line">    <span class="attribute">for</span> i in range(<span class="number">1</span>,height - <span class="number">1</span>):</span><br><span class="line">        <span class="attribute">for</span> j in range(<span class="number">1</span>,width - <span class="number">1</span>):</span><br><span class="line">            <span class="attribute">b</span> += (int((img1_ext[i,j]) - int(img1_ext[i,j + <span class="number">1</span>])) ** <span class="number">2</span> + (</span><br><span class="line">                    <span class="attribute">int</span>(img1_ext[i,j]) - int(img1_ext[i,j - <span class="number">1</span>])) ** <span class="number">2</span> + (</span><br><span class="line">                          <span class="attribute">int</span>(img1_ext[i,j]) - int(img1_ext[i + <span class="number">1</span>,j])) ** <span class="number">2</span> + (</span><br><span class="line">                          <span class="attribute">int</span>(img1_ext[i,j]) - int(img1_ext[i - <span class="number">1</span>,j])) ** <span class="number">2</span>)</span><br><span class="line">    <span class="attribute">cg</span> = b / (<span class="number">4</span> * (m - <span class="number">2</span>) * (n - <span class="number">2</span>) + <span class="number">3</span> * (<span class="number">2</span> * (m - <span class="number">2</span>) + <span class="number">2</span> * (n - <span class="number">2</span>)) + <span class="number">2</span> * <span class="number">4</span>)  #</span><br><span class="line">    <span class="attribute">return</span> cg</span><br><span class="line"><span class="attribute">def</span> variance(img):</span><br><span class="line">    <span class="attribute">img1</span> = rgb2gray(img)</span><br><span class="line">    <span class="attribute">height</span>,width = img1.shape</span><br><span class="line">    <span class="attribute">var</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">size</span> = img1.size</span><br><span class="line">    <span class="attribute">average</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">for</span> i in range(height):</span><br><span class="line">        <span class="attribute">for</span> j in range(width):</span><br><span class="line">            <span class="attribute">average</span> += img1[i][j] / size</span><br><span class="line">    <span class="attribute">for</span> i in range(height):</span><br><span class="line">        <span class="attribute">for</span> j in range(width):</span><br><span class="line">            <span class="attribute">var</span> += img1[i,j] * (i - average) ** <span class="number">2</span></span><br><span class="line">    <span class="attribute">return</span> var</span><br><span class="line"><span class="attribute">def</span> Contrast_and_Brightness(alpha,bete,img):  </span><br><span class="line">    <span class="attribute">blank</span> = np.zeros(img.shape,img.dtype)</span><br><span class="line">    <span class="attribute">dst</span> = cv2.addWeighted(img,alpha,blank,<span class="number">1</span> - alpha,bete)</span><br><span class="line">    <span class="attribute">return</span> dst</span><br><span class="line"><span class="attribute">def</span> dec2bin(p):</span><br><span class="line">    <span class="attribute">floatbinstr</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attribute">if</span> p == <span class="number">0</span>:</span><br><span class="line">        <span class="attribute">return</span> floatbinstr</span><br><span class="line">    <span class="attribute">for</span> kk in range(len(str(p)) - <span class="number">2</span>):</span><br><span class="line">        <span class="attribute">p</span> *= <span class="number">2</span></span><br><span class="line">        <span class="attribute">if</span> p &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="attribute">floatbinstr</span> += <span class="string">&quot;1&quot;</span></span><br><span class="line">            <span class="attribute">p</span> = p - int(p)</span><br><span class="line">        <span class="attribute">else</span>:</span><br><span class="line">            <span class="attribute">floatbinstr</span> += <span class="string">&quot;0&quot;</span></span><br><span class="line">        <span class="attribute">if</span> p == <span class="number">0</span>:</span><br><span class="line">            <span class="attribute">break</span></span><br><span class="line">        <span class="attribute">return</span> str(floatbinstr)</span><br><span class="line"><span class="attribute">def</span> total_entropy(img):</span><br><span class="line">    <span class="attribute">n</span> =<span class="meta"> []</span></span><br><span class="line">    <span class="attribute">P</span> =<span class="meta"> []</span></span><br><span class="line">    <span class="attribute">lenavg</span> =<span class="meta"> []</span></span><br><span class="line">    <span class="attribute">avg_sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">grey_lvl</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">k</span> = <span class="number">0</span></span><br><span class="line">    <span class="attribute">res</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment"># test = [[5,4,3,2,1]]</span></span><br><span class="line">    <span class="attribute">weight</span> = img.shape[<span class="number">0</span>]</span><br><span class="line">    <span class="attribute">height</span> = img.shape[<span class="number">1</span>]</span><br><span class="line">    <span class="attribute">total</span> = weight * height</span><br><span class="line">    <span class="attribute">for</span> i in range(<span class="number">256</span>):</span><br><span class="line">        <span class="attribute">n</span>.append(<span class="number">0</span>)</span><br><span class="line">    <span class="attribute">for</span> i in range(weight):</span><br><span class="line">        <span class="attribute">for</span> j in range(height):</span><br><span class="line">            <span class="attribute">grey_lvl</span> = img[i][j]</span><br><span class="line">            <span class="attribute">n</span>[grey_lvl] = float(n[grey_lvl] + <span class="number">1</span>)</span><br><span class="line">            <span class="attribute">k</span> = float(k + <span class="number">1</span>)</span><br><span class="line">    <span class="attribute">for</span> i in range(<span class="number">256</span>):</span><br><span class="line">        <span class="attribute">P</span>.append(<span class="number">0</span>)</span><br><span class="line">    <span class="attribute">P</span> = n</span><br><span class="line">    <span class="attribute">for</span> i in range(len(n)):</span><br><span class="line">        <span class="attribute">P</span>[i] = (n[i] / k)</span><br><span class="line">    <span class="attribute">for</span> i in range(<span class="number">256</span>):</span><br><span class="line">        <span class="attribute">lenavg</span>.append(<span class="number">0</span>)</span><br><span class="line">    <span class="attribute">lenavg</span> = P</span><br><span class="line">    <span class="attribute">for</span> i in range(len(n)):</span><br><span class="line">        <span class="attribute">if</span> P[i] == <span class="number">0</span>.<span class="number">0</span>:</span><br><span class="line">            <span class="attribute">continue</span></span><br><span class="line">        <span class="attribute">lenavg</span>[i] = lenavg[i] * len(dec2bin(lenavg[i]))</span><br><span class="line">        <span class="attribute">avg_sum</span> = lenavg[i] + avg_sum</span><br><span class="line">    <span class="attribute">for</span> i in range(len(n)):</span><br><span class="line">        <span class="attribute">if</span> (P[i] == <span class="number">0</span>):</span><br><span class="line">            <span class="attribute">res</span> = res</span><br><span class="line">        <span class="attribute">else</span>:</span><br><span class="line">            <span class="attribute">res</span> = float(res - P[i] * (math.log(P[i]) / math.log(<span class="number">2</span>.<span class="number">0</span>)))</span><br><span class="line">    <span class="attribute">return</span> res</span><br><span class="line"><span class="attribute">if</span> __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    <span class="attribute">if</span> input(keyboard.wait(&#x27;A&#x27;)):</span><br><span class="line">        <span class="attribute">for</span> i in range(<span class="number">6</span>):</span><br><span class="line">            <span class="attribute">ave_1</span> = average(imgs[i])</span><br><span class="line">            <span class="attribute">ave_1</span> = Decimal(ave_1).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">            <span class="attribute">print</span>(<span class="string">&quot;average_office&quot;</span> + <span class="string">&quot;_&quot;</span> + <span class="string">&quot;123456&quot;</span>[i],ave_1)</span><br><span class="line">            <span class="attribute">with</span> open(&#x27;E:\\untitled12\\image_practice\\entropy.txt&#x27;,&#x27;a&#x27;,encoding=&#x27;utf-<span class="number">8</span>&#x27;) as f:</span><br><span class="line">                <span class="attribute">f</span>.write(&#x27;&#123;:^<span class="number">30</span>&#125;\n&#x27;.format(str(ave_1)))</span><br><span class="line">                <span class="attribute">f</span>.close()</span><br><span class="line">        <span class="attribute">plt</span>.show()</span><br><span class="line">    <span class="attribute">if</span> input(keyboard.wait(&#x27;V&#x27;)):</span><br><span class="line">        <span class="attribute">for</span> i in range(<span class="number">6</span>):</span><br><span class="line">            <span class="attribute">var_1</span> = variance(img_1)</span><br><span class="line">            <span class="attribute">var_1</span> = Decimal(var_1).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">            <span class="attribute">print</span>(<span class="string">&quot;variance_office&quot;</span> + <span class="string">&quot;_&quot;</span> + <span class="string">&quot;123456&quot;</span>[i],var_1)</span><br><span class="line">        <span class="attribute">img_contrast</span> = Contrast_and_Brightness(<span class="number">2</span>.<span class="number">0</span>,<span class="number">0</span>,img_1)</span><br><span class="line">        <span class="attribute">var_orign</span> = variance(img_1)</span><br><span class="line">        <span class="attribute">var_con</span> = variance(img_contrast)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;åŸå›¾ï¼š       &quot;</span>,var_orign)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;åŸå›¾è°ƒèŠ‚å¯¹æ¯”ï¼š&quot;</span>,var_con)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>),plt.imshow(img_1),plt.title(&#x27;img_1&#x27;)   plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>),plt.imshow(img_contrast),plt.title(&#x27;img_contrast&#x27;)</span><br><span class="line">    <span class="attribute">plt</span>.show()</span><br><span class="line">    <span class="attribute">if</span> input(keyboard.wait(&#x27;C&#x27;)):</span><br><span class="line">        <span class="attribute">con_1</span> = contrast(img_1)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>),plt.imshow(img_1),plt.title(&#x27;bangong&#x27;)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">img_GAUSS</span> = cv2.GaussianBlur(img_1,(<span class="number">9</span>,<span class="number">9</span>),<span class="number">0</span>)</span><br><span class="line">        <span class="attribute">con_2</span> = contrast(img_GAUSS)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),plt.imshow(img_GAUSS),plt.title(&#x27;bangong_GUSS&#x27;)</span><br><span class="line">        <span class="attribute">con_3</span> = contrast(img_9)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>),plt.imshow(img_9),plt.title(&#x27;mu_wen&#x27;)</span><br><span class="line">        <span class="attribute">con_4</span> = contrast(img_10)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>),plt.imshow(img_10),plt.title(&#x27;shui_ni_wen&#x27;)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">con_1</span> = Decimal(con_1).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">        <span class="attribute">con_2</span> = Decimal(con_2).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;contrast_office&quot;</span> + <span class="string">&quot;_oringel&quot;</span>,con_1)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;contrast_office&quot;</span> + <span class="string">&quot;_GAUSS  &quot;</span>,con_2)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">con_3</span> = Decimal(con_3).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">        <span class="attribute">con_4</span> = Decimal(con_4).quantize(Decimal(<span class="string">&quot;0.000&quot;</span>))</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;æœ¨çº¹  &quot;</span>,con_3)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;æ°´æ³¥çº¹&quot;</span>,con_4)</span><br><span class="line">    <span class="attribute">plt</span>.show()</span><br><span class="line"></span><br><span class="line">    <span class="attribute">if</span> input(keyboard.wait(&#x27;E&#x27;)):</span><br><span class="line">        <span class="attribute">img_grey</span> = cv2.imread(&#x27;dalishi.jpg&#x27;,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">        <span class="attribute">img_grey1</span> = cv2.imread(&#x27;wall.jpg&#x27;,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">        <span class="attribute">img_grey2</span> = cv2.imread(&#x27;muwen.jpg&#x27;,cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">img_wenli</span> = cv2.imread(&#x27;<span class="number">400</span>x400_zhi_wenli.jpg&#x27;,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">        <span class="attribute">img_wenli1</span> = cv2.imread(&#x27;<span class="number">400</span>x400_zhi_zhezhouwenli.jpg&#x27;,cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ent_dalishi</span> = total_entropy(img_grey)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">1</span>),plt.imshow(img_7)</span><br><span class="line">        <span class="attribute">ent_wall</span> = total_entropy(img_grey1)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>),plt.imshow(img_8)</span><br><span class="line">        <span class="attribute">ent_muwen</span> = total_entropy(img_grey2)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>),plt.imshow(img_9)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ent_wenli</span> = total_entropy(img_wenli)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>),plt.imshow(img_11),plt.title(&#x27;junyun_weli&#x27;)</span><br><span class="line">        <span class="attribute">ent_wenli1</span> = total_entropy(img_wenli1)</span><br><span class="line">        <span class="attribute">plt</span>.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>),plt.imshow(img_12),plt.title(&#x27;not_junrun_wen&#x27;)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;entropy_dalishi&quot;</span>,ent_dalishi)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;entropy_wall   &quot;</span>,ent_wall)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;entrop_muwen   &quot;</span>,ent_muwen)</span><br><span class="line"></span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;E_junrun_wenli:        &quot;</span>,ent_wenli)</span><br><span class="line">        <span class="attribute">print</span>(<span class="string">&quot;E_NOT_junrun_wenli1:   &quot;</span>,ent_wenli1)</span><br><span class="line">    <span class="attribute">plt</span>.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å›¾åƒå¤„ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> å›¾åƒå¤„ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonç¬”è®°</title>
      <link href="/2024/03/05/Python%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/03/05/Python%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7p19dmlpe.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7p19dmlpe.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1lbkdf1q74.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1lbkdf1q74.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3uukwwo6om.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3uukwwo6om.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2a4txfsd0n.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2a4txfsd0n.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="tagLink"><a class="link-card" title="é˜…è¯»åŸæ–‡" href="https://zhuanlan.zhihu.com/p/91461612"><span class="link-card-backdrop" style="background-image: url(https://pic2.zhimg.com/80/v2-be27f2479a3249ad8c4fa17ff9973e2d_720w.webp)"></span><div class="left"><img src="https://pic2.zhimg.com/80/v2-be27f2479a3249ad8c4fa17ff9973e2d_720w.webp" class="lazyload placeholder" data-srcset="https://pic2.zhimg.com/80/v2-be27f2479a3249ad8c4fa17ff9973e2d_720w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">é˜…è¯»åŸæ–‡</p><p class="url">https://zhuanlan.zhihu.com/p/91461612</p></div></a></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1ses8v0ra9.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1ses8v0ra9.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.pf2xz6qp7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.pf2xz6qp7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7p3cfvjxuh.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7p3cfvjxuh.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.60tziov27k.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.60tziov27k.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8vmnohcwpq.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8vmnohcwpq.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.32hpf6r2w7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.32hpf6r2w7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3uukwx9tfw.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3uukwx9tfw.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.6f0f9kbvqh.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.6f0f9kbvqh.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8hg7xmcmik.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8hg7xmcmik.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>åœ¨Pythonä¸­ï¼Œå¯¹è±¡å’Œå±æ€§ä¹‹é—´æœ‰ç€å¯†åˆ‡çš„å…³ç³»ã€‚å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ï¼Œå¯ä»¥åŒ…å«æ•°æ®ï¼ˆå±æ€§ï¼‰å’Œæ–¹æ³•ã€‚å±æ€§æ˜¯ä¸å¯¹è±¡ç›¸å…³è”çš„å˜é‡ï¼Œç”¨äºå­˜å‚¨å¯¹è±¡çš„çŠ¶æ€æˆ–ç‰¹å¾ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¯¹è±¡æ˜¯ç±»çš„å®ä¾‹åŒ–ï¼Œå¯ä»¥è®¿é—®ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚å±æ€§æ˜¯å¯¹è±¡å†…éƒ¨çš„å˜é‡ï¼Œç”¨äºå­˜å‚¨å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ã€‚åœ¨Pythonä¸­ï¼Œå¯ä»¥é€šè¿‡ç‚¹å·<code>.</code>æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ã€‚</p><p>å®šä¹‰ä¸€ä¸ªç±»å¹¶åˆ›å»ºå¯¹è±¡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Hello, my name is <span class="subst">&#123;self.name&#125;</span> and I am <span class="subst">&#123;self.age&#125;</span> years old.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºPersonç±»çš„å®ä¾‹</span></span><br><span class="line">person1 = Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®å¯¹è±¡çš„å±æ€§</span></span><br><span class="line"><span class="built_in">print</span>(person1.name)  <span class="comment"># è¾“å‡ºï¼šAlice</span></span><br><span class="line"><span class="built_in">print</span>(person1.age)   <span class="comment"># è¾“å‡ºï¼š30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">person1.greet()  <span class="comment"># è¾“å‡ºï¼šHello, my name is Alice and I am 30 years old.</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>name</code>å’Œ<code>age</code>å°±æ˜¯å¯¹è±¡<code>person1</code>çš„å±æ€§ï¼Œè€Œ<code>Person</code>ç±»æ˜¯å¯¹è±¡<code>person1</code>çš„æ¨¡æ¿ã€‚é€šè¿‡è®¿é—®å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥æ“ä½œå¯¹è±¡çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§ä»£æ•°</title>
      <link href="/2024/03/02/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"/>
      <url>/2024/03/02/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<iframe src="//player.bilibili.com/player.html?aid=19844108&bvid=BV1sW411775X&cid=32363257&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><iframe src="//player.bilibili.com/player.html?aid=6731067&bvid=BV1ys411472E&cid=10959715&p=5" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2yy3deimon.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2yy3deimon.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.5j3xq1squd.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.5j3xq1squd.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3go51zvwgn.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3go51zvwgn.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.es90rvvkp.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.es90rvvkp.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3nrcyr5i7a.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3nrcyr5i7a.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.73toquhuk4.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.73toquhuk4.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>]]></content>
      
      
      <categories>
          
          <category> çº¿æ€§ä»£æ•° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜ç­‰æ•°å­¦ </tag>
            
            <tag> çº¿æ€§ä»£æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é›¶åŸºç¡€å®è·µæ·±åº¦å­¦ä¹ (ä¸€):æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é—®é¢˜</title>
      <link href="/2024/03/02/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E4%B8%80-%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E9%97%AE%E9%A2%98/"/>
      <url>/2024/03/02/%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AE%9E%E8%B7%B5%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E4%B8%80-%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é—®é¢˜"><a href="#æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é—®é¢˜" class="headerlink" title="æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é—®é¢˜"></a>æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é—®é¢˜</h1><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.67x79lupri.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.67x79lupri.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="çº¿æ€§å›å½’æ¨¡å‹"><a href="#çº¿æ€§å›å½’æ¨¡å‹" class="headerlink" title="çº¿æ€§å›å½’æ¨¡å‹"></a>çº¿æ€§å›å½’æ¨¡å‹</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.45f75utlc.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.45f75utlc.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><h3 id="è¯»å…¥æ•°æ®"><a href="#è¯»å…¥æ•°æ®" class="headerlink" title="è¯»å…¥æ•°æ®"></a>è¯»å…¥æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥éœ€è¦ç”¨åˆ°çš„package</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># è¯»å…¥è®­ç»ƒæ•°æ®</span></span><br><span class="line">datafile = <span class="string">&#x27;./work/housing.data&#x27;</span></span><br><span class="line">data = np.fromfile(datafile, sep=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">data</span><br></pre></td></tr></table></figure><p>ï¼ˆæˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆæœ€åä¸€è¡Œè¦åŠ ä¸€ä¸ªdataï¼‰(å¥½åƒä»–åŠ ä¸€ä¸ªdataå°±ä¸ç”¨printäº†ï¼Ÿ)<br>data &#x3D; np.fromfile(datafile, sep&#x3D;â€™ â€˜):</p><ul><li>ä½¿ç”¨NumPyçš„ <code>fromfile</code> å‡½æ•°æ¥è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚<ul><li><code>datafile</code> å‚æ•°æŒ‡å®šäº†è¦è¯»å–çš„æ•°æ®æ–‡ä»¶çš„è·¯å¾„ã€‚</li><li><code>sep=&#39; &#39;</code> å‚æ•°è¡¨ç¤ºæ•°æ®åœ¨æ–‡ä»¶ä¸­æ˜¯ç”±ç©ºæ ¼åˆ†éš”çš„ã€‚è¿™æ„å‘³ç€æ–‡ä»¶ <code>housing.data</code> ä¸­çš„æ¯ä¸€è¡Œéƒ½åº”è¯¥æ˜¯ç”±ä¸€ç³»åˆ—ç”±ç©ºæ ¼åˆ†éš”çš„æ•°å€¼ã€‚</li><li>è¯»å–çš„æ•°æ®å°†è¢«å­˜å‚¨åœ¨ä¸€ä¸ªNumPyæ•°ç»„ä¸­ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å˜é‡ <code>data</code>ã€‚<br>æœ€ååŠ ä¸Š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>åœ¨anacondaé‡Œè¿è¡Œä¸€ä¸‹ï¼š<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3.9) C:\Users\lxcqm&gt;python &quot;D:\opencv_test\demo\PythonApplication1\PythonApplication1\housing.py&quot;</span><br><span class="line">[6.320e<span class="string">-03</span> 1.800e<span class="string">+01</span> 2.310e<span class="string">+00</span> ... 3.969e<span class="string">+02</span> 7.880e<span class="string">+00</span> 1.190e<span class="string">+01</span>]</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="æ•°æ®å½¢çŠ¶å˜æ¢"><a href="#æ•°æ®å½¢çŠ¶å˜æ¢" class="headerlink" title="æ•°æ®å½¢çŠ¶å˜æ¢"></a>æ•°æ®å½¢çŠ¶å˜æ¢</h3><p>ç”±äºè¯»å…¥çš„åŸå§‹æ•°æ®æ˜¯1ç»´çš„ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¿åœ¨ä¸€èµ·ã€‚å› æ­¤éœ€è¦æˆ‘ä»¬å°†æ•°æ®çš„å½¢çŠ¶è¿›è¡Œå˜æ¢ï¼Œå½¢æˆä¸€ä¸ª2ç»´çš„çŸ©é˜µï¼Œæ¯è¡Œä¸ºä¸€ä¸ªæ•°æ®æ ·æœ¬ï¼ˆ14ä¸ªå€¼ï¼‰ï¼Œæ¯ä¸ªæ•°æ®æ ·æœ¬åŒ…å«13ä¸ªXï¼ˆå½±å“æˆ¿ä»·çš„ç‰¹å¾ï¼‰å’Œä¸€ä¸ªYï¼ˆè¯¥ç±»å‹æˆ¿å±‹çš„å‡ä»·ï¼‰ã€‚</p><ul><li>è¯»å…¥ä¹‹åçš„æ•°æ®è¢«è½¬åŒ–æˆ1ç»´arrayï¼Œå…¶ä¸­arrayçš„ç¬¬0-13é¡¹æ˜¯ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¬¬14-27é¡¹æ˜¯ç¬¬äºŒæ¡æ•°æ®ï¼Œä»¥æ­¤ç±»æ¨â€¦. </li><li>è¿™é‡Œå¯¹åŸå§‹æ•°æ®åšreshapeï¼Œå˜æˆN x 14çš„å½¢å¼<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feature_names = [ <span class="string">&#x27;CRIM&#x27;</span>, <span class="string">&#x27;ZN&#x27;</span>, <span class="string">&#x27;INDUS&#x27;</span>, <span class="string">&#x27;CHAS&#x27;</span>, <span class="string">&#x27;NOX&#x27;</span>, <span class="string">&#x27;RM&#x27;</span>, <span class="string">&#x27;AGE&#x27;</span>,<span class="string">&#x27;DIS&#x27;</span>, </span><br><span class="line">                 <span class="string">&#x27;RAD&#x27;</span>, <span class="string">&#x27;TAX&#x27;</span>, <span class="string">&#x27;PTRATIO&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;LSTAT&#x27;</span>, <span class="string">&#x27;MEDV&#x27;</span> ]</span><br><span class="line">feature_num = <span class="built_in">len</span>(feature_names)</span><br><span class="line">data = data.reshape([data.shape[<span class="number">0</span>] // feature_num, feature_num])</span><br></pre></td></tr></table></figure><strong>data &#x3D; data.reshape([data.shape[0] &#x2F;&#x2F; feature_num, feature_num]):</strong></li></ul><ol><li><p><code>data.shape[0]</code>ï¼šè¿™ä¸ªéƒ¨åˆ†æ˜¯è·å–åŸå§‹æ•°æ®<code>data</code>çš„ç¬¬ä¸€ä¸ªç»´åº¦çš„é•¿åº¦(è·å–è¡Œæ•°)(å½“æˆ‘ä»¬è°ˆåˆ°æ•°æ®é›†çš„é•¿åº¦æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸æŒ‡çš„æ˜¯æ•°æ®é›†ä¸­å„ä¸ªå…ƒç´ çš„æ•°é‡ï¼Œè€Œä¸æ˜¯å­—ç¬¦çš„æ€»æ•°æˆ–å­—ç¬¦å­—æ•°)ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä¸­å…ƒç´ çš„æ€»æ•°ã€‚[data.shape[1] æ˜¯ç”¨æ¥è·å–æ•°æ®é›†ä¸­çš„åˆ—æ•°]å¯¹äºä¸€ç»´æ•°ç»„ï¼ˆä¹Ÿç§°ä¸ºå‘é‡ï¼‰ï¼Œshapeè¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ï¼ŒæŒ‡ç¤ºæ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ã€‚è¿™ä¸ªå€¼å°±æ˜¯ä¸€ç»´æ•°ç»„çš„é•¿åº¦ã€‚</p></li><li><p><code>//</code>ï¼šè¿™æ˜¯æ•´æ•°é™¤æ³•æ“ä½œç¬¦ï¼Œå°†ä¸¤ä¸ªæ•°ç›¸é™¤å¹¶è¿”å›æ•´æ•°éƒ¨åˆ†ï¼Œèˆå¼ƒå°æ•°éƒ¨åˆ†ã€‚æ­¤å¤„æ˜¯å°†æ•°æ®æ€»æ•°é™¤ä»¥ç‰¹å¾æ•°é‡ï¼Œå¾—åˆ°å¯ä»¥åˆ†æˆå¤šå°‘å®Œæ•´çš„æ ·æœ¬é›†åˆã€‚</p></li><li><p><code>feature_num</code>ï¼šè¿™ä¸ªå€¼ä»£è¡¨æ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾æ•°é‡ï¼Œæœ¬ä¾‹ä¸­æ˜¯14ä¸ªã€‚</p></li><li><p><code>[data.shape[0] // feature_num, feature_num]</code>ï¼šè¿™ä¸ªéƒ¨åˆ†å®šä¹‰äº†æ–°çš„å½¢çŠ¶ï¼Œå°†åŸå§‹æ•°æ®<code>data</code>é‡æ–°ç»„ç»‡ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„([è¡Œæ•°ï¼Œåˆ—æ•°])ï¼Œè¡Œæ•°è¡¨ç¤ºå¯ä»¥å®¹çº³å®Œæ•´æ ·æœ¬é›†çš„æ•°é‡ï¼Œåˆ—æ•°è¡¨ç¤ºæ¯ä¸ªæ ·æœ¬å…·æœ‰çš„ç‰¹å¾æ•°é‡ã€‚[] ä¸­æ‹¬å·å†…çš„å†…å®¹ [data.shape[0] &#x2F;&#x2F; feature_num, feature_num] è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„åˆ—è¡¨</p></li><li><p>æœ€ç»ˆï¼Œ<code>data.reshape([data.shape[0] // feature_num, feature_num])</code>é€šè¿‡è¿™è¡Œä»£ç å°†åŸå§‹æ•°æ®<code>data</code>æŒ‰ç…§æ–°çš„å½¢çŠ¶é‡å¡‘ï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªå®Œæ•´çš„14ä¸ªç‰¹å¾çš„æ ·æœ¬æ•°æ®ï¼Œç¡®ä¿äº†æ•°æ®é›†çš„å®Œæ•´æ€§å’Œè§„èŒƒæ€§ã€‚</p></li></ol><p>æŸ¥çœ‹æ•°æ®:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = data[<span class="number">0</span>]     //æ•°æ®é›†çš„ç¬¬ä¸€ä¸ªæ ·æœ¬</span><br><span class="line"><span class="built_in">print</span>(x.shape)  </span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3.9) C:\Users\lxcqm&gt;python &quot;D:\opencv_test\demo\PythonApplication1\PythonApplication1\housing.py&quot;</span><br><span class="line">[6.320e<span class="string">-03</span> 1.800e<span class="string">+01</span> 2.310e<span class="string">+00</span> ... 3.969e<span class="string">+02</span> 7.880e<span class="string">+00</span> 1.190e<span class="string">+01</span>]</span><br><span class="line">(14,)</span><br><span class="line">[6.320e<span class="string">-03</span> 1.800e<span class="string">+01</span> 2.310e<span class="string">+00</span> 0.000e<span class="string">+00</span> 5.380e<span class="string">-01</span> 6.575e<span class="string">+00</span> 6.520e<span class="string">+01</span></span><br><span class="line"> 4.090e<span class="string">+00</span> 1.000e<span class="string">+00</span> 2.960e<span class="string">+02</span> 1.530e<span class="string">+01</span> 3.969e<span class="string">+02</span> 4.980e<span class="string">+00</span> 2.400e<span class="string">+01</span>]</span><br></pre></td></tr></table></figure><p><code>(14,)</code> è¿™æ ·çš„å½¢çŠ¶è¡¨ç¤ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ï¼Œè¯¥å…ƒç´ çš„å€¼ä¸º 14ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå…ƒç»„è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå…¶é•¿åº¦ä¸º 14ã€‚è¿™æ„å‘³ç€æ ·æœ¬æˆ–æ•°ç»„å…·æœ‰ 14 ä¸ªå…ƒç´ æˆ–ç‰¹å¾ã€‚å½¢çŠ¶çš„è¡¨ç¤ºæ–¹å¼æ˜¯æœ€åé¢ä¸€ä¸ªâ€™,â€™å‰é¢çš„æ•°å­—ï¼Œè¡¨æ˜æ•°ç»„çš„ç»´åº¦ã€‚<br>å› æ­¤ï¼Œ<code>(14,)</code> è¡¨ç¤ºæ•°ç»„æ˜¯ä¸€ä¸ªåŒ…å« 14 ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„ã€‚</p><div class="note info"><p><code>(14,)</code> å’Œ <code>(14,1)</code> æ‰€è¡¨ç¤ºçš„å«ä¹‰æœ‰äº›å¾®å¦™çš„åŒºåˆ«ã€‚ - <code>(14,)</code> è¡¨ç¤ºä¸€ä¸ªåŒ…å« 14 ä¸ªå…ƒç´ çš„ä¸€ç»´æ•°ç»„ï¼Œæ­¤æ—¶è¯¥æ•°ç»„æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œç»´åº¦ä¸º 1ã€‚ - <code>(14,1)</code> è¡¨ç¤ºä¸€ä¸ªåŒ…å« 14 è¡Œã€1 åˆ—çš„äºŒç»´æ•°ç»„ï¼Œå› æ­¤è¯¥æ•°ç»„æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç»´åº¦ä¸º 2ï¼Œæ¯è¡Œåªæœ‰ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ•°å­¦è¡¨ç¤ºå’Œç¼–ç¨‹ä¸­ï¼Œç»´åº¦çš„ä¸åŒæœ‰æ—¶ä¼šå½±å“ä¸€äº›è¿ç®—å’Œå¤„ç†ï¼Œå› æ­¤åœ¨å¤„ç†æ•°æ®æ—¶éœ€è¦æ³¨æ„åŒºåˆ†å®ƒä»¬çš„å«ä¹‰ã€‚</p></div><h3 id="æ•°æ®é›†åˆ’åˆ†"><a href="#æ•°æ®é›†åˆ’åˆ†" class="headerlink" title="æ•°æ®é›†åˆ’åˆ†"></a>æ•°æ®é›†åˆ’åˆ†</h3><p>å°†æ•°æ®é›†åˆ’åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå…¶ä¸­è®­ç»ƒé›†ç”¨äºç¡®å®šæ¨¡å‹çš„å‚æ•°ï¼Œæµ‹è¯•é›†ç”¨äºè¯„åˆ¤æ¨¡å‹çš„æ•ˆæœã€‚<br>åœ¨æœ¬æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†80%çš„æ•°æ®ç”¨ä½œè®­ç»ƒé›†ï¼Œ20%ç”¨ä½œæµ‹è¯•é›†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ã€‚é€šè¿‡æ‰“å°è®­ç»ƒé›†çš„å½¢çŠ¶ï¼Œå¯ä»¥å‘ç°å…±æœ‰404ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬å«æœ‰13ä¸ªç‰¹å¾å’Œ1ä¸ªé¢„æµ‹å€¼ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ratio = <span class="number">0.8</span></span><br><span class="line">offset = <span class="built_in">int</span>(data.shape[<span class="number">0</span>] * ratio)</span><br><span class="line">training_data = data[:offset]</span><br><span class="line">training_data.shape</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨int()å‡½æ•°æ˜¯ä¸ºäº†ç¡®ä¿offsetæ˜¯ä¸€ä¸ªæ•´æ•°å€¼<br>data[:offset]:</p><div class="note info"><p>åœ¨Pythonä¸­ï¼Œå†’å·<code>:</code>é€šå¸¸ç”¨äºåˆ‡ç‰‡ï¼ˆsliceï¼‰æ“ä½œï¼Œç”¨æ¥æŒ‡å®šè¦ä»åˆ—è¡¨ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰åºåˆ—ç±»å‹ä¸­æå–çš„éƒ¨åˆ†æ•°æ®èŒƒå›´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>data[:offset]</code>è¡¨ç¤ºä»åºåˆ—<code>data</code>çš„å¼€å¤´å¼€å§‹ä¸€ç›´åˆ‡ç‰‡ç›´åˆ°<code>offset</code>ä¹‹å‰çš„ä½ç½®ï¼ˆä¸åŒ…æ‹¬<code>offset</code>ä½ç½®ï¼‰ï¼Œå³å–å‡ºç´¢å¼•ä»0åˆ°<code>offset-1</code>çš„å…ƒç´ ã€‚è¿™ä¸ªæ“ä½œå¯ä»¥ç”¨æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„å­åºåˆ—ï¼Œå…¶ä¸­åŒ…å«äº†åŸå§‹æ•°æ®åºåˆ—ä¸­ä»0åˆ°<code>offset-1</code>ä½ç½®çš„å…ƒç´ ã€‚</p></div><p>è¿è¡Œç»“æœ:</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3.9) C:\Users\lxcqm&gt;python &quot;D:\opencv_test\demo\PythonApplication1\PythonApplication1\housing.py&quot;</span><br><span class="line">[[6.32000e<span class="string">-03</span> 1.80000e<span class="string">+01</span> 2.31000e<span class="string">+00</span> ... 3.96900e<span class="string">+02</span> 4.98000e<span class="string">+00</span></span><br><span class="line">  2.40000e<span class="string">+01</span>]</span><br><span class="line"> [2.73100e<span class="string">-02</span> 0.00000e<span class="string">+00</span> 7.07000e<span class="string">+00</span> ... 3.96900e<span class="string">+02</span> 9.14000e<span class="string">+00</span></span><br><span class="line">  2.16000e<span class="string">+01</span>]</span><br><span class="line"> [2.72900e<span class="string">-02</span> 0.00000e<span class="string">+00</span> 7.07000e<span class="string">+00</span> ... 3.92830e<span class="string">+02</span> 4.03000e<span class="string">+00</span></span><br><span class="line">  3.47000e<span class="string">+01</span>]</span><br><span class="line"> ...</span><br><span class="line"> [1.42362e<span class="string">+01</span> 0.00000e<span class="string">+00</span> 1.81000e<span class="string">+01</span> ... 3.96900e<span class="string">+02</span> 2.03200e<span class="string">+01</span></span><br><span class="line">  7.20000e<span class="string">+00</span>]</span><br><span class="line"> [9.59571e<span class="string">+00</span> 0.00000e<span class="string">+00</span> 1.81000e<span class="string">+01</span> ... 3.76110e<span class="string">+02</span> 2.03100e<span class="string">+01</span></span><br><span class="line">  1.21000e<span class="string">+01</span>]</span><br><span class="line"> [2.48017e<span class="string">+01</span> 0.00000e<span class="string">+00</span> 1.81000e<span class="string">+01</span> ... 3.96900e<span class="string">+02</span> 1.97700e<span class="string">+01</span></span><br><span class="line">  8.30000e<span class="string">+00</span>]]</span><br><span class="line">(404, 14)</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®å½’ä¸€åŒ–å¤„ç†"><a href="#æ•°æ®å½’ä¸€åŒ–å¤„ç†" class="headerlink" title="æ•°æ®å½’ä¸€åŒ–å¤„ç†"></a>æ•°æ®å½’ä¸€åŒ–å¤„ç†</h3><p>å¯¹æ¯ä¸ªç‰¹å¾è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œä½¿å¾—æ¯ä¸ªç‰¹å¾çš„å–å€¼ç¼©æ”¾åˆ°0~1ä¹‹é—´ã€‚è¿™æ ·åšæœ‰ä¸¤ä¸ªå¥½å¤„ï¼šä¸€æ˜¯æ¨¡å‹è®­ç»ƒæ›´é«˜æ•ˆï¼Œåœ¨æœ¬èŠ‚çš„ååŠéƒ¨åˆ†ä¼šè¯¦ç»†è¯´æ˜ï¼›äºŒæ˜¯ç‰¹å¾å‰çš„æƒé‡å¤§å°å¯ä»¥ä»£è¡¨è¯¥å˜é‡å¯¹é¢„æµ‹ç»“æœçš„è´¡çŒ®åº¦ï¼ˆå› ä¸ºæ¯ä¸ªç‰¹å¾å€¼æœ¬èº«çš„èŒƒå›´ç›¸åŒï¼‰ã€‚</p><div class="note info"><p>æµ‹è¯•æ ·æœ¬å½’ä¸€åŒ–æ—¶ç”¨çš„æ˜¯è®­ç»ƒæ ·æœ¬çš„æœ€å¤§å€¼ã€æœ€å°å€¼</p></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—trainæ•°æ®é›†çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼</span></span><br><span class="line"><span class="comment"># axis=0:åˆ—ï¼ˆåŒç±»æ•°æ®ï¼‰</span></span><br><span class="line">maximums, minimums = \</span><br><span class="line">                     training_data.<span class="built_in">max</span>(axis=<span class="number">0</span>), \   </span><br><span class="line">                     training_data.<span class="built_in">min</span>(axis=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line"><span class="comment"># åƒæ–¹å·®ä¸€æ ·çš„æ€æƒ³ï¼Œéƒ½å¯¹ç­‰åˆ°0-1ä¹‹é—´çš„æ•°ï¼ˆæœ€å¤§å€¼æ˜¯1ï¼Œæœ€å°å€¼æ˜¯0ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(feature_num):</span><br><span class="line">    data[:, i] = (data[:, i] - minimums[i]) / (maximums[i] - minimums[i])</span><br></pre></td></tr></table></figure><details open><summary pointer> \ </summary>              <div class='content'>              <p>åœ¨ä»£ç ç‰‡æ®µä¸­ï¼Œmaximums, minimums &#x3D; training_data.max(axis&#x3D;0), training_data.min(axis&#x3D;0) è¿™è¡Œä»£ç ä½¿ç”¨äº†åæ–œæ  \ ä½œä¸ºæ¢è¡Œç¬¦ä½¿ç”¨ã€‚è¿™ç§æ–¹å¼åœ¨Pythonä¸­è¢«ç§°ä¸ºè¡Œè¿æ¥ç¬¦ï¼Œå®ƒå¯ä»¥å°†ä¸€è¡Œä»£ç åˆ†æˆå¤šè¡Œæ¥æé«˜å¯è¯»æ€§ã€‚<br>åœ¨Pythonä¸­ï¼Œåæ–œæ  \ é€šå¸¸ç”¨äºæŒ‡ç¤ºè¯­å¥åœ¨ä¸‹ä¸€è¡Œç»§ç»­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œmaximums, minimums &#x3D; \ æ˜¯ä»ä¸‹ä¸€è¡Œçš„training_data.max(axis&#x3D;0), \ç»§ç»­çš„å¼€å§‹ã€‚æ•´è¡Œä»£ç è¢«åˆ†ä¸ºä¸¤è¡Œå†™å…¥ï¼Œä½†è§£é‡Šå™¨ä¼šå°†è¿™ä¸¤è¡Œè¿æ¥åœ¨ä¸€èµ·æ‰§è¡Œï¼Œå°±å¥½åƒæ˜¯å•è¡Œä»£ç ä¸€æ ·ã€‚</p><details open><summary pointer> axis </summary>              <div class='content'>              <p>training_data.max(axis&#x3D;0)æ˜¯Pandasåº“ä¸­DataFrameå¯¹è±¡çš„å‡½æ•°è°ƒç”¨æ–¹æ³•ï¼Œç”¨äºè®¡ç®—DataFrameä¸­æ¯åˆ—çš„æœ€å¤§å€¼ã€‚å‚æ•° axis&#x3D;0 æŒ‡å®šäº†æ²¿ç€åˆ—çš„æ–¹å‘è¿›è¡Œæ“ä½œï¼Œä¹Ÿå°±æ˜¯è®¡ç®—æ¯åˆ—çš„æœ€å¤§å€¼ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ¯åˆ—æœ€å¤§å€¼çš„Serieså¯¹è±¡ã€‚<br>å¦‚æœä½¿ç”¨axis&#x3D;1å‚æ•°è°ƒç”¨ training_data.max(axis&#x3D;1)ï¼Œé‚£ä¹ˆæ˜¯åœ¨DataFrameä¸­æ²¿ç€è¡Œçš„æ–¹å‘è®¡ç®—æ¯è¡Œçš„æœ€å¤§å€¼ã€‚è¿™å°†è¿”å›ä¸€ä¸ªåŒ…å«æ¯è¡Œæœ€å¤§å€¼çš„Serieså¯¹è±¡ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥æ‰¾åˆ°æ¯è¡Œæ•°æ®ä¸­çš„æœ€å¤§å€¼ã€‚</p>              </div>            </details>              </div>            </details><details open><summary pointer> pythonä¸­forå¾ªç¯ </summary>              <div class='content'>              <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line"><span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><p>å½“ä»£ç  for i in a: æ‰§è¡Œæ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯åœ¨éå†åˆ—è¡¨ a ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†æ¯ä¸ªå…ƒç´ çš„å€¼ä¾æ¬¡èµ‹ç»™å˜é‡ iï¼Œç„¶åæ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä»£ç </p>              </div>            </details><details open><summary pointer> pythonä¸­range()å‡½æ•° </summary>              <div class='content'>              <ul><li><p>å‡½æ•°ä½œç”¨<br>  range() å‡½æ•°å¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯ä¸­ã€‚</p>  <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure></li><li><p>å‡½æ•°è¯­æ³•<br>  <span class='pbg info'>range(startï¼Œstop[ï¼Œstep])</span> </p><p>  å‚æ•°è¯´æ˜ï¼š</p><ul><li>start: è®¡æ•°ä» start å¼€å§‹ã€‚é»˜è®¤æ˜¯ä» 0 å¼€å§‹ã€‚ä¾‹å¦‚rangeï¼ˆ5ï¼‰ç­‰ä»·äºrangeï¼ˆ0ï¼Œ 5ï¼‰;</li><li>stop: è®¡æ•°åˆ° stop ç»“æŸï¼Œä½†ä¸åŒ…æ‹¬ stopã€‚ä¾‹å¦‚ï¼šrangeï¼ˆ0ï¼Œ 5ï¼‰ æ˜¯[0, 1, 2, 3, 4]æ²¡æœ‰5</li><li>stepï¼šæ­¥é•¿ï¼Œé»˜è®¤ä¸º1ã€‚ä¾‹å¦‚ï¼šrangeï¼ˆ0ï¼Œ 5ï¼‰ ç­‰ä»·äº range(0, 5, 1)</li></ul></li></ul>              </div>            </details><details open><summary pointer> data[:i]å’Œdata[i:]å’Œdata[:ï¼Œi]å’Œdata[iï¼Œ :] </summary>              <div class='content'>              <ul><li><code>data[:i]</code>ï¼šè·å–å‰iè¡Œçš„æ‰€æœ‰æ•°æ®</li><li><code>data[i:]</code>: è·å–ä»iä½ç½®åˆ°æœ«å°¾çš„æ‰€æœ‰æ•°æ®</li><li><code>data[:, i]</code>ï¼šè·å–ç¬¬iåˆ—çš„æ‰€æœ‰æ•°æ®ï¼ˆåˆ—å·ä»ç¬¬0åˆ—å¼€å§‹ï¼‰</li><li><code>data[i, :]</code>ï¼šè·å–ç¬¬iè¡Œçš„æ‰€æœ‰æ•°æ®ï¼ˆè¡Œå·ä»ç¬¬0è¡Œå¼€å§‹ï¼‰<br>data[:i]:ç¬¬0è¡Œåˆ°ç¬¬i-1è¡Œï¼ˆä¸åŒ…æ‹¬ç¬¬iè¡Œï¼‰<br>data[i:]:ç¬¬iè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆåŒ…æ‹¬ç¬¬iè¡Œï¼‰</li></ul>              </div>            </details><h3 id="å°è£…æˆload-dataå‡½æ•°"><a href="#å°è£…æˆload-dataå‡½æ•°" class="headerlink" title="å°è£…æˆload dataå‡½æ•°"></a>å°è£…æˆload dataå‡½æ•°</h3><p>å°†ä¸Šè¿°å‡ ä¸ªæ•°æ®å¤„ç†æ“ä½œå°è£…æˆload dataå‡½æ•°ï¼Œä»¥ä¾¿ä¸‹ä¸€æ­¥æ¨¡å‹çš„è°ƒç”¨</p><details open><summary pointer> pythonä¸­å®šä¹‰å‡½æ•° </summary>              <div class='content'>              <p>ä¸ç”¨å£°æ˜~</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">function_name</span>(<span class="params">arguments</span>):</span><br><span class="line">    <span class="comment"># å‡½æ•°ä½“ï¼ŒåŒ…æ‹¬ä»£ç å—</span></span><br><span class="line">    <span class="comment"># å¯èƒ½åŒ…æ‹¬è¿”å›è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨å‡½æ•°</span></span><br><span class="line">result = function_name(argument_values)</span><br></pre></td></tr></table></figure>              </div>            </details><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_data</span>():</span><br><span class="line">    <span class="comment"># å¯¼å…¥æ•°æ®</span></span><br><span class="line">    datafile = <span class="string">&quot;D:/paddlepaddle/housing/housing.data&quot;</span></span><br><span class="line">    data = np.fromfile(datafile, sep=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯æ¡æ•°æ®åŒ…æ‹¬14é¡¹ï¼Œå…¶ä¸­å‰é¢13é¡¹æ˜¯å½±å“å› ç´ ï¼Œç¬¬14é¡¹æ˜¯ç›¸åº”çš„æˆ¿å±‹ä»·æ ¼ä¸­ä½æ•°</span></span><br><span class="line">    feature_names = [<span class="string">&#x27;CRIM&#x27;</span>, <span class="string">&#x27;ZN&#x27;</span>, <span class="string">&#x27;INDUS&#x27;</span>, <span class="string">&#x27;CHAS&#x27;</span>, <span class="string">&#x27;NOX&#x27;</span>,</span><br><span class="line">                     <span class="string">&#x27;RM&#x27;</span>, <span class="string">&#x27;AGE&#x27;</span>, <span class="string">&#x27;DIS&#x27;</span>, <span class="string">&#x27;RAD&#x27;</span>, <span class="string">&#x27;TAX&#x27;</span>, <span class="string">&#x27;PTRATIO&#x27;</span>,</span><br><span class="line">                     <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;LSTAT&#x27;</span>, <span class="string">&#x27;MEDV&#x27;</span>]</span><br><span class="line">    feature_num = <span class="built_in">len</span>(feature_names)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸå§‹æ•°æ®è¿›è¡ŒReshapeï¼Œå˜æˆ[N, 14]è¿™æ ·çš„å½¢çŠ¶</span></span><br><span class="line">    data = data.reshape([data.shape[<span class="number">0</span>] // feature_num, feature_num])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸå§‹æ•°æ®é›†æ‹†æˆè®­ç»ƒé›†å’Œæ•°æ®é›†</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨80%çš„æ•°æ®åšè®­ç»ƒï¼Œ20%çš„æ•°æ®åšæµ‹è¯•</span></span><br><span class="line">    <span class="comment"># æµ‹è¯•é›†å’Œè®­ç»ƒé›†å¿…é¡»æ˜¯æ²¡æœ‰äº¤é›†çš„</span></span><br><span class="line">    ratio = <span class="number">0.8</span></span><br><span class="line">    offset = <span class="built_in">int</span>(data.shape[<span class="number">0</span>] * ratio)</span><br><span class="line">    training_data = data[:offset]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—è®­ç»ƒé›†æ¯ä¸€åˆ—çš„æœ€å¤§å€¼ã€æœ€å°å€¼</span></span><br><span class="line">    maximums, minimums = training_data.<span class="built_in">max</span>(axis=<span class="number">0</span>), training_data.<span class="built_in">min</span>(axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹æ•°æ®è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(feature_num):</span><br><span class="line">        data[:, i] = (data[:, i] - minimums[i]) / (maximums[i] - minimums[i])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ’åˆ†æ¯”ä¾‹</span></span><br><span class="line">    test_data = data[offset:]</span><br><span class="line">    <span class="keyword">return</span> training_data, test_data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">training_data, test_data = load_data()</span><br><span class="line">x = training_data[:, :-<span class="number">1</span>]</span><br><span class="line">y = training_data[:, -<span class="number">1</span>:]</span><br><span class="line"><span class="built_in">print</span>(x[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(y[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><ol><li><p><code>x = training_data[:, :-1]</code>ï¼š<br>è¿™è¡Œä»£ç ä¼šå°† <code>training_data</code> ä¸­æ‰€æœ‰è¡Œçš„é™¤äº†æœ€åä¸€åˆ—ï¼ˆå³ç‰¹å¾å˜é‡ï¼‰ä¹‹å¤–çš„æ‰€æœ‰åˆ—åˆ‡ç‰‡æå–å‡ºæ¥ï¼Œèµ‹å€¼ç»™å˜é‡ <code>x</code>ã€‚è¿™æ„å‘³ç€ <code>x</code> åŒ…å«äº†æ‰€æœ‰çš„ç‰¹å¾å˜é‡ã€‚</p></li><li><p><code>y = training_data[:, -1:]</code>ï¼š<br>è¿™è¡Œä»£ç ä¼šå°† <code>training_data</code> ä¸­æ‰€æœ‰è¡Œçš„æœ€åä¸€åˆ—ï¼ˆå³ç›®æ ‡å˜é‡ï¼‰æå–å‡ºæ¥ï¼Œèµ‹å€¼ç»™å˜é‡ <code>y</code>ã€‚è¿™æ„å‘³ç€ <code>y</code> åŒ…å«äº†æ‰€æœ‰çš„ç›®æ ‡å˜é‡ã€‚</p></li></ol><p>æ•™ç¨‹å†™äº†ä¸¤étraining_data &#x3D; data[:offset]ï¼Ÿä¸æ‡‚ä¸ºä»€ä¹ˆ<br>è¾“å‡º:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3<span class="number">.9</span>) C:\Users\lxcqm&gt;python <span class="string">&quot;D:\opencv_test\demo\PythonApplication1\PythonApplication1\housing.py&quot;</span></span><br><span class="line">[<span class="number">0.</span>         <span class="number">0.18</span>       <span class="number">0.07344184</span> <span class="number">0.</span>         <span class="number">0.31481481</span> <span class="number">0.57750527</span></span><br><span class="line"> <span class="number">0.64160659</span> <span class="number">0.26920314</span> <span class="number">0.</span>         <span class="number">0.22755741</span> <span class="number">0.28723404</span> <span class="number">1.</span></span><br><span class="line"> <span class="number">0.08967991</span>]</span><br><span class="line">[<span class="number">0.42222222</span>]</span><br></pre></td></tr></table></figure><h2 id="æ¨¡å‹è®¾è®¡"><a href="#æ¨¡å‹è®¾è®¡" class="headerlink" title="æ¨¡å‹è®¾è®¡"></a>æ¨¡å‹è®¾è®¡</h2><p>æ¨¡å‹è®¾è®¡æ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹å…³é”®è¦ç´ ä¹‹ä¸€ï¼Œä¹Ÿç§°ä¸ºç½‘ç»œç»“æ„è®¾è®¡ï¼Œç›¸å½“äºæ¨¡å‹çš„å‡è®¾ç©ºé—´ï¼Œå³å®ç°æ¨¡å‹â€œå‰å‘è®¡ç®—â€ï¼ˆä»è¾“å…¥åˆ°è¾“å‡ºï¼‰çš„è¿‡ç¨‹ã€‚<br>å¦‚æœå°†è¾“å…¥ç‰¹å¾å’Œè¾“å‡ºé¢„æµ‹å€¼å‡ä»¥å‘é‡è¡¨ç¤ºï¼Œè¾“å…¥ç‰¹å¾xæœ‰13ä¸ªåˆ†é‡ï¼Œyæœ‰1ä¸ªåˆ†é‡ï¼Œé‚£ä¹ˆå‚æ•°æƒé‡çš„å½¢çŠ¶(shape)æ˜¯13Ã—1ã€‚å‡è®¾æˆ‘ä»¬ä»¥å¦‚ä¸‹ä»»æ„æ•°å­—èµ‹å€¼å‚æ•°åšåˆå§‹åŒ–ï¼š<br>w&#x3D;[0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,-0.1,-0.2,-0.3,-0.4,0.0]</p><details open><summary pointer> è¯¦ç»†è§£é‡Š </summary>              <div class='content'>              <p>è¿™äº›æ•°å­—è¡¨ç¤ºäº†åˆå§‹åŒ–æ—¶æ¯ä¸ªè¾“å…¥ç‰¹å¾å¯¹åº”çš„æƒé‡å€¼ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªç‰¹å¾çš„æƒé‡æ˜¯0.1ï¼Œç¬¬äºŒä¸ªç‰¹å¾çš„æƒé‡æ˜¯0.2ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€åä¸€ä¸ªæ•°å­—0.0æ˜¯åç½®é¡¹ï¼ˆbiasï¼‰ï¼Œé€šå¸¸ç”¨æ¥è°ƒæ•´æ¨¡å‹å¯¹æ•°æ®çš„æ‹Ÿåˆæƒ…å†µã€‚<br>åœ¨çº¿æ€§å›å½’æ¨¡å‹ä¸­ï¼Œé€šè¿‡å¯¹è¾“å…¥ç‰¹å¾å’Œæƒé‡è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¹¶åŠ ä¸Šåç½®é¡¹ï¼Œæ¥é¢„æµ‹è¾“å‡ºå€¼ã€‚å…·ä½“åœ°ï¼Œå¯¹äºç»™å®šçš„è¾“å…¥ç‰¹å¾å‘é‡xï¼Œè¾“å‡ºå€¼yå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¡ç®—å¾—åˆ°ï¼š<br>y &#x3D; w1x1 + w2x2 + â€¦ + w13*x13 + bias<br>å°†æƒé‡å‚æ•°wä¸è¾“å…¥ç‰¹å¾å‘é‡xçš„å¯¹åº”åˆ†é‡ç›¸ä¹˜å¹¶æ±‚å’Œï¼Œå†åŠ ä¸Šåç½®é¡¹ï¼Œå°±å¯ä»¥å¾—åˆ°æ¨¡å‹çš„é¢„æµ‹è¾“å‡ºå€¼ã€‚</p><details open><summary pointer> åç½®é¡¹(bias) </summary>              <div class='content'>              <p>åç½®é¡¹ï¼ˆbiasï¼‰åœ¨æœºå™¨å­¦ä¹ ä¸­æ˜¯æ¨¡å‹ä¸­çš„ä¸€ä¸ªé‡è¦å‚æ•°ï¼Œé€šå¸¸ç”¨æ¥åœ¨æ¨¡å‹ä¸­å¼•å…¥åç§»é‡ï¼Œå¸®åŠ©æ¨¡å‹æ›´å¥½åœ°æ‹Ÿåˆæ•°æ®ã€‚åç½®é¡¹å¯ä»¥ç†è§£ä¸ºæ¨¡å‹ä¸­çš„æˆªè·ï¼Œç”¨æ¥è°ƒæ•´æ¨¡å‹é¢„æµ‹çš„åŸºå‡†å€¼ï¼Œå³åœ¨æ²¡æœ‰è¾“å…¥ç‰¹å¾æ—¶æ¨¡å‹é¢„æµ‹çš„å€¼ã€‚</p><p>åœ¨çº¿æ€§å›å½’æ¨¡å‹ä¸­ï¼Œåç½®é¡¹å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°æ‹Ÿåˆæ•°æ®çš„æ•´ä½“åç§»ã€‚è€ƒè™‘ä¸€ä¸ªç®€å•çš„äºŒç»´çº¿æ€§å›å½’æ¨¡å‹ï¼Œå‡è®¾æ²¡æœ‰åç½®é¡¹ï¼Œæ¨¡å‹é¢„æµ‹æ˜¯é€šè¿‡è¾“å…¥ç‰¹å¾çš„åŠ æƒå’Œæ¥è®¡ç®—çš„ã€‚å¦‚æœæ•°æ®åœ¨åŸç‚¹é™„è¿‘åˆ†å¸ƒï¼Œæ¨¡å‹å¯èƒ½èƒ½å¤Ÿè¾ƒå¥½åœ°æ‹Ÿåˆæ•°æ®ã€‚ä½†å¦‚æœæ•°æ®å‡ºç°åç§»ï¼ˆå³ä¸å†ç»è¿‡åŸç‚¹ï¼‰ï¼Œæ²¡æœ‰åç½®é¡¹çš„æ¨¡å‹å¯èƒ½æ— æ³•å¾ˆå¥½åœ°æ•æ‰åˆ°è¿™ç§æ•´ä½“åç§»ã€‚</p><p>é€šè¿‡å¼•å…¥åç½®é¡¹ï¼Œæ¨¡å‹è·å¾—äº†ä¸€ä¸ªé¢å¤–çš„å‚æ•°æ¥å¹³ç§»æ•´ä¸ªé¢„æµ‹ç»“æœï¼Œä½¿å…¶æ›´è´´åˆæ•°æ®çš„æ•´ä½“åˆ†å¸ƒæƒ…å†µã€‚åç½®é¡¹å…è®¸æ¨¡å‹åœ¨ä¸ä¾èµ–è¾“å…¥ç‰¹å¾çš„æƒ…å†µä¸‹åšå‡ºä¸€å®šçš„é¢„æµ‹ï¼Œä»è€Œæ›´çµæ´»åœ°é€‚åº”ä¸åŒçš„æ•°æ®é›†ã€‚</p>              </div>            </details>              </div>            </details><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w = [<span class="number">0.1</span>, <span class="number">0.2</span>, <span class="number">0.3</span>, <span class="number">0.4</span>, <span class="number">0.5</span>, <span class="number">0.6</span>, <span class="number">0.7</span>, <span class="number">0.8</span>, -<span class="number">0.1</span>, -<span class="number">0.2</span>, -<span class="number">0.3</span>, -<span class="number">0.4</span>, <span class="number">0.0</span>]</span><br><span class="line">w = np.array(w).reshape([<span class="number">13</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure><details open><summary pointer> np.array(w).reshape([13 </summary>              <div class='content'>              <p>å’Œå¼€å§‹çš„data.reshapeçš„åŒºåˆ«ï¼š</p><ol><li><p><code>data.reshape</code>:</p><ul><li><code>data.reshape</code> æ˜¯å¯¹å·²ç»å­˜åœ¨çš„æ•°ç»„ <code>data</code> è¿›è¡Œå½¢çŠ¶æ”¹å˜çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ŒåŸå§‹æ•°ç»„ <code>data</code> çš„å½¢çŠ¶å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºNumPyæ•°ç»„å¯¹è±¡ã€‚</li><li>ç¤ºä¾‹ï¼š<code>data = data.reshape([num_rows, num_cols])</code></li></ul></li><li><p><code>np.array(w).reshape</code>:</p><ul><li><code>np.array(w).reshape</code> åˆ™æ˜¯å°†ä¸€ä¸ªåˆ—è¡¨æˆ–å…¶ä»–ç±»ä¼¼å¯¹è±¡ <code>w</code> è½¬æ¢ä¸ºNumPyæ•°ç»„ï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œå½¢çŠ¶æ”¹å˜æ“ä½œã€‚è¿™ä¸ªå‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä»…åœ¨è¿”å›æ–°çš„æ•°ç»„æ—¶æ”¹å˜å½¢çŠ¶ã€‚</li><li>ç¤ºä¾‹ï¼š<code>w = np.array(w).reshape([num_rows, num_cols])</code></li></ul></li></ol><p>å¦‚æœå·²ç»æœ‰ä¸€ä¸ªNumPyæ•°ç»„å¯¹è±¡ï¼Œä¸”åªéœ€æ”¹å˜å…¶å½¢çŠ¶è€Œä¸éœ€è¦åˆ›å»ºæ–°æ•°ç»„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>data.reshape</code>ã€‚å¦‚æœæƒ³å°†ä¸€ä¸ªåˆ—è¡¨æˆ–å…¶ä»–ç±»å‹å¯¹è±¡è½¬æ¢ä¸ºNumPyæ•°ç»„å¹¶æ”¹å˜å…¶å½¢çŠ¶ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <code>np.array(w).reshape</code>ã€‚</p>              </div>            </details><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x1 = x[<span class="number">0</span>]</span><br><span class="line">t = np.dot(x1, w)</span><br><span class="line"><span class="built_in">print</span>(x1)</span><br><span class="line"><span class="built_in">print</span>(w)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <code>t = np.dot(x1, w)</code>ï¼š</p><ul><li>è¿™è¡Œä»£ç å°†ä¸¤ä¸ªæ•°ç»„ <code>x1</code> å’Œ <code>w</code> è¿›è¡ŒçŸ©é˜µä¹˜æ³•è¿ç®—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨å˜é‡ <code>t</code> ä¸­ã€‚</li><li><code>np.dot</code> æ˜¯ NumPy æä¾›çš„çŸ©é˜µä¹˜æ³•å‡½æ•°ï¼Œå¯ä»¥ç”¨äºè®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„ç‚¹ç§¯ï¼ˆå†…ç§¯ï¼‰ã€‚<br>è¾“å‡º:<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">[0.         0.18       0.07344184 0.         0.31481481 0.57750527</span></span><br><span class="line"><span class="comment"> 0.64160659 0.26920314 0.         0.22755741 0.28723404 1.</span></span><br><span class="line"><span class="comment"> 0.08967991]</span></span><br><span class="line"><span class="comment">[<span class="comment">[ 0.1]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.2]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.3]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.4]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.5]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.6]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.7]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0.8]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[-0.1]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[-0.2]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[-0.3]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[-0.4]</span></span></span><br><span class="line"><span class="comment"> <span class="comment">[ 0. ]</span>]</span></span><br><span class="line"><span class="comment">[0.69474855]</span></span><br></pre></td></tr></table></figure><details open><summary pointer> è¡Œå‘é‡ä¹˜åˆ—å‘é‡ </summary>              <div class='content'>              <p>è¡Œå‘é‡ä¹˜ä»¥åˆ—å‘é‡æ˜¯ä¸€ç§çŸ©é˜µä¹˜æ³•æ“ä½œã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¡Œå‘é‡ï¼ˆ1 x nï¼‰å’Œä¸€ä¸ªåˆ—å‘é‡ï¼ˆn x 1ï¼‰ï¼Œå®ƒä»¬çš„ç»´æ•°åœ¨çŸ©é˜µä¹˜æ³•ä¸­æ˜¯åŒ¹é…çš„ï¼Œå¯ä»¥è¿›è¡Œç›¸ä¹˜æ“ä½œã€‚ç»“æœå°†ä¼šæ˜¯ä¸€ä¸ªæ ‡é‡ï¼ˆ1 x 1 çŸ©é˜µï¼‰ï¼Œå³ä¸€ä¸ªå•ç‹¬çš„æ•°å€¼ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªè¡Œå‘é‡ a &#x3D; [a1, a2, â€¦, an]ï¼ˆ1 x nï¼‰å’Œä¸€ä¸ªåˆ—å‘é‡ b &#x3D; [b1, b2, â€¦, bn]ï¼ˆn x 1ï¼‰ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¸ºï¼š<br>a * b &#x3D; a1b1 + a2b2 + â€¦ + anbn<br>å› æ­¤ï¼Œè¡Œå‘é‡ä¹˜ä»¥åˆ—å‘é‡çš„ç»“æœæ˜¯è¿™ä¸¤ä¸ªå‘é‡å¯¹åº”ä½ç½®å…ƒç´ çš„ä¹˜ç§¯çš„å’Œã€‚å¸Œæœ›è¿™æ ·çš„è§£é‡Šèƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£çŸ©é˜µä¹˜æ³•çš„æ“ä½œã€‚å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p>              </div>            </details></li></ul><p>å®Œæ•´çš„çº¿æ€§å›å½’å…¬å¼ï¼Œè¿˜éœ€è¦åˆå§‹åŒ–åç§»é‡bï¼ŒåŒæ ·éšæ„èµ‹åˆå€¼-0.2ã€‚é‚£ä¹ˆï¼Œçº¿æ€§å›å½’æ¨¡å‹çš„å®Œæ•´è¾“å‡ºæ˜¯z&#x3D;t+bï¼Œè¿™ä¸ªä»ç‰¹å¾å’Œå‚æ•°è®¡ç®—è¾“å‡ºå€¼çš„è¿‡ç¨‹ç§°ä¸ºâ€œå‰å‘è®¡ç®—â€ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = -<span class="number">0.2</span></span><br><span class="line">z = t + d</span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(z)</span></span></span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[0.49474855]</span></span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°è®¡ç®—é¢„æµ‹è¾“å‡ºçš„è¿‡ç¨‹ä»¥â€œç±»å’Œå¯¹è±¡â€çš„æ–¹å¼æ¥æè¿°ï¼Œç±»æˆå‘˜å˜é‡æœ‰å‚æ•°wå’Œbã€‚é€šè¿‡å†™ä¸€ä¸ªforwardå‡½æ•°ï¼ˆä»£è¡¨â€œå‰å‘è®¡ç®—â€ï¼‰å®Œæˆä¸Šè¿°ä»ç‰¹å¾å’Œå‚æ•°åˆ°è¾“å‡ºé¢„æµ‹å€¼çš„è®¡ç®—è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><details open><summary pointer> ç±»å’Œå¯¹è±¡ </summary>              <div class='content'>              <figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Hello, my name is <span class="subst">&#123;self.name&#125;</span> and I am <span class="subst">&#123;self.age&#125;</span> years old.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¯¹è±¡å®ä¾‹</span></span><br><span class="line">person1 = Person(<span class="string">&quot;Alice&quot;</span>, <span class="number">30</span>)</span><br><span class="line">person2 = Person(<span class="string">&quot;Bob&quot;</span>, <span class="number">25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®å±æ€§å¹¶è°ƒç”¨æ–¹æ³•</span></span><br><span class="line"><span class="built_in">print</span>(person1.name)  <span class="comment"># è¾“å‡º: Alice</span></span><br><span class="line">person2.greet()  <span class="comment"># è¾“å‡º: Hello, my name is Bob and I am 25 years old.</span></span><br></pre></td></tr></table></figure><p>printåçš„f:<br>åœ¨Pythonä¸­ï¼Œf å­—ç¬¦ä¸²ï¼ˆæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼‰æ˜¯åœ¨å­—ç¬¦ä¸²å‰ç¼€åŠ ä¸Šfçš„ä¸€ç§ç‰¹æ®Šæ–¹æ³•ï¼Œç§°ä¸º f-stringã€‚å®ƒå…è®¸åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥è¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨å¤§æ‹¬å· {} å†…éƒ¨ç›´æ¥å¼•ç”¨å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼ã€‚<br>è¾“å‡ºï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3.<span class="number">9</span>) C:\Users\lxcqm&gt;<span class="keyword">python</span> D:\opencv_test\demo\PythonApplication1\PythonApplication1\testtttt.<span class="keyword">py</span></span><br><span class="line">Alice</span><br><span class="line">Hello, my name <span class="keyword">is</span> Bob <span class="built_in">and</span> I <span class="keyword">am</span> <span class="number">25</span> years old.</span><br></pre></td></tr></table></figure><p><span class='pbg info'><strong>init</strong>:</span><br>åœ¨Pythonä¸­ï¼Œ<code>__init__</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œç”¨äºåœ¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ—¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚è¿™ä¸ªæ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºæ„é€ å‡½æ•°ï¼Œè´Ÿè´£åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚åœ¨ç±»çš„å®šä¹‰ä¸­ï¼Œå¦‚æœä½ å®šä¹‰äº† <code>__init__</code> æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å®ä¾‹åŒ–ç±»æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>ä¸‹é¢æ˜¯ <code>__init__</code> æ–¹æ³•çš„è¯¦ç»†è§£é‡Šï¼š</p><ul><li><code>self</code>ï¼š<code>self</code> æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡æœ¬èº«çš„å¼•ç”¨ã€‚åœ¨ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸ä¸º <code>self</code>ï¼Œç”¨äºè¡¨ç¤ºç±»çš„å®ä¾‹ã€‚</li><li><code>name</code> å’Œ <code>age</code>ï¼šè¿™ä¸¤ä¸ªå‚æ•°æ˜¯åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>self.name = name</code>ï¼šè¿™è¡Œä»£ç å°†ä¼ å…¥çš„ <code>name</code> å‚æ•°èµ‹å€¼ç»™å¯¹è±¡çš„ <code>name</code> å±æ€§ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå¯¹è±¡è®¾ç½®ä¸åŒçš„å§“åã€‚</li><li><code>self.age = age</code>ï¼šè¿™è¡Œä»£ç å°†ä¼ å…¥çš„ <code>age</code> å‚æ•°èµ‹å€¼ç»™å¯¹è±¡çš„ <code>age</code> å±æ€§ã€‚åŒæ ·ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå¯¹è±¡è®¾ç½®ä¸åŒçš„å¹´é¾„ã€‚</li></ul><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ <code>__init__</code> æ–¹æ³•è´Ÿè´£åˆå§‹åŒ– <code>Person</code> ç±»çš„å¯¹è±¡çš„ <code>name</code> å’Œ <code>age</code> å±æ€§ã€‚å½“åˆ›å»º <code>Person</code> ç±»çš„å®ä¾‹æ—¶ï¼Œä¼ å…¥çš„ <code>name</code> å’Œ <code>age</code> å‚æ•°ä¼šè¢«ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§å€¼ã€‚ä¾‹å¦‚ï¼Œ<code>person1 = Person(&quot;Alice&quot;, 30)</code> è¿™è¡Œä»£ç å°±åˆ›å»ºäº†ä¸€ä¸ªåä¸º â€œAliceâ€ï¼Œå¹´é¾„ä¸º 30 çš„ <code>Person</code> ç±»çš„å®ä¾‹ã€‚</p>              </div>            </details><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Network</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_of_weights</span>):</span><br><span class="line">        <span class="comment"># éšæœºäº§ç”Ÿwçš„åˆå§‹å€¼</span></span><br><span class="line">        <span class="comment"># ä¸ºäº†ä¿æŒç¨‹åºæ¯æ¬¡è¿è¡Œç»“æœçš„ä¸€è‡´æ€§ï¼Œ</span></span><br><span class="line">        <span class="comment"># æ­¤å¤„è®¾ç½®å›ºå®šçš„éšæœºæ•°ç§å­</span></span><br><span class="line">        np.random.seed(<span class="number">0</span>)</span><br><span class="line">        self.w = np.random.randn(num_of_weights, <span class="number">1</span>)</span><br><span class="line">        self.b = <span class="number">0.</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        z = np.dot(x, self.w) + self.b</span><br><span class="line">        <span class="keyword">return</span> z</span><br></pre></td></tr></table></figure><ol><li><p><code>class Network(object)</code>ï¼šåœ¨ class Network(object): ä¸­ï¼Œobject è¡¨ç¤º Network ç±»ç»§æ‰¿è‡ª object ç±»ï¼Œä½¿å¾— Network ç±»æ˜¯ä¸€ä¸ªæ–°å¼ç±»ã€‚åœ¨ Python 3 ä¸­ï¼Œå¯ä»¥ç®€å†™ä¸º class Network:ï¼Œè¿™æ ·ä¹Ÿä¼šé»˜è®¤ç»§æ‰¿è‡ª object ç±»</p></li><li><p><code>np.random.seed(0)</code>ï¼šè®¾ç½®éšæœºæ•°ç§å­ä¸º0ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡è¿è¡Œç¨‹åºå¾—åˆ°çš„éšæœºæ•°æ˜¯ä¸€æ ·çš„ï¼Œæœ‰åŠ©äºç»“æœçš„å¯é‡ç°æ€§ã€‚</p></li><li><p><code>self.w = np.random.randn(num_of_weights, 1)</code>ï¼šåˆ©ç”¨Numpyçš„<code>randn</code>å‡½æ•°ç”Ÿæˆä¸€ä¸ªæœä»æ ‡å‡†æ­£æ€åˆ†å¸ƒçš„éšæœºæ•°æ•°ç»„ï¼Œå½¢çŠ¶ä¸º<code>(num_of_weights, 1)</code>ï¼Œå…¶ä¸­<code>num_of_weights</code> æ˜¯ä¼ å…¥çš„å‚æ•°ï¼Œä»£è¡¨æƒé‡çš„æ•°é‡ã€‚è¿™äº›éšæœºæ•°å°†ä½œä¸ºç¥ç»ç½‘ç»œçš„æƒé‡å‚æ•°ï¼Œç”¨äºç¥ç»ç½‘ç»œçš„å­¦ä¹ å’Œé¢„æµ‹è¿‡ç¨‹ã€‚</p></li><li><p><code>self.b = 0.</code>ï¼šå°†åç½®å‚æ•°<code>b</code>åˆå§‹åŒ–ä¸º0ï¼Œè¿™ä¸ªå‚æ•°ä¹Ÿå°†åœ¨ç½‘ç»œçš„è¿ç®—ä¸­èµ·ç€é‡è¦çš„ä½œç”¨ï¼Œç”¨äºè°ƒæ•´æ¨¡å‹çš„è¾“å‡ºã€‚</p></li></ol><p>åŸºäºNetworkç±»çš„å®šä¹‰ï¼Œæ¨¡å‹çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">net</span> <span class="operator">=</span> Network(<span class="number">13</span>)</span><br><span class="line"><span class="attribute">x1</span> <span class="operator">=</span> x[<span class="number">0</span>]</span><br><span class="line"><span class="attribute">y1</span> <span class="operator">=</span> y[<span class="number">0</span>]</span><br><span class="line"><span class="attribute">z</span> <span class="operator">=</span> net.forward(x1)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3<span class="number">.9</span>) <span class="name">C</span>:\Users\lxcqm&gt;python <span class="name">D</span>:\opencv_test\demo\PythonApplication1\PythonApplication1\housing.py</span><br><span class="line">[<span class="number">2.39362982</span>]</span><br></pre></td></tr></table></figure><p>ä»ä¸Šè¿°å‰å‘è®¡ç®—çš„è¿‡ç¨‹å¯è§ï¼Œçº¿æ€§å›å½’ä¹Ÿå¯ä»¥è¡¨ç¤ºæˆä¸€ç§ç®€å•çš„ç¥ç»ç½‘ç»œï¼ˆåªæœ‰ä¸€ä¸ªç¥ç»å…ƒï¼Œä¸”æ¿€æ´»å‡½æ•°ä¸ºæ’ç­‰å¼ï¼‰ã€‚è¿™ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ æ¨¡å‹æ™®éä¸ºæ·±åº¦å­¦ä¹ æ¨¡å‹æ›¿ä»£çš„åŸå› ï¼šç”±äºæ·±åº¦å­¦ä¹ ç½‘ç»œå¼ºå¤§çš„è¡¨ç¤ºèƒ½åŠ›ï¼Œå¾ˆå¤šä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ç­‰åŒäºç›¸å¯¹ç®€å•çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</p><h2 id="è®­ç»ƒé…ç½®"><a href="#è®­ç»ƒé…ç½®" class="headerlink" title="è®­ç»ƒé…ç½®"></a>è®­ç»ƒé…ç½®</h2><p>æ¨¡å‹è®¾è®¡å®Œæˆåï¼Œéœ€è¦é€šè¿‡è®­ç»ƒé…ç½®å¯»æ‰¾æ¨¡å‹çš„æœ€ä¼˜å€¼ï¼Œå³é€šè¿‡æŸå¤±å‡½æ•°æ¥è¡¡é‡æ¨¡å‹çš„å¥½åã€‚è®­ç»ƒé…ç½®ä¹Ÿæ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹å…³é”®è¦ç´ ä¹‹ä¸€ã€‚</p><p>é€šè¿‡æ¨¡å‹è®¡ç®—$x_1$è¡¨ç¤ºçš„å½±å“å› ç´ æ‰€å¯¹åº”çš„æˆ¿ä»·åº”è¯¥æ˜¯$z$, ä½†å®é™…æ•°æ®å‘Šè¯‰æˆ‘ä»¬æˆ¿ä»·æ˜¯$y$ã€‚è¿™æ—¶æˆ‘ä»¬éœ€è¦æœ‰æŸç§æŒ‡æ ‡æ¥è¡¡é‡é¢„æµ‹å€¼$z$è·ŸçœŸå®å€¼$y$ä¹‹é—´çš„å·®è·ã€‚å¯¹äºå›å½’é—®é¢˜ï¼Œæœ€å¸¸é‡‡ç”¨çš„è¡¡é‡æ–¹æ³•æ˜¯ä½¿ç”¨å‡æ–¹è¯¯å·®ä½œä¸ºè¯„ä»·æ¨¡å‹å¥½åçš„æŒ‡æ ‡ï¼Œå…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$Loss &#x3D; (y - z)^2 (å…¬å¼3)$$</p><p>ä¸Šå¼ä¸­çš„$Loss$ï¼ˆç®€è®°ä¸º: $L$ï¼‰é€šå¸¸ä¹Ÿè¢«ç§°ä½œæŸå¤±å‡½æ•°ï¼Œå®ƒæ˜¯è¡¡é‡æ¨¡å‹å¥½åçš„æŒ‡æ ‡ã€‚è¯»è€…å¯èƒ½ä¼šå¥‡æ€ªï¼šå¦‚æœè¦è¡¡é‡é¢„æµ‹æˆ¿ä»·å’ŒçœŸå®æˆ¿ä»·ä¹‹é—´çš„å·®è·ï¼Œæ˜¯å¦å°†æ¯ä¸€ä¸ªæ ·æœ¬çš„å·®è·çš„ç»å¯¹å€¼åŠ å’Œå³å¯ï¼Ÿå·®è·ç»å¯¹å€¼åŠ å’Œæ˜¯æ›´åŠ ç›´è§‚å’Œæœ´ç´ çš„æ€è·¯ï¼Œä¸ºä½•è¦å¹³æ–¹åŠ å’Œï¼Ÿ æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸ä»…è¦è€ƒè™‘å‡†ç¡®è¡¡é‡é—®é¢˜çš„â€œåˆç†æ€§â€ï¼Œé€šå¸¸è¿˜è¦è€ƒè™‘â€œæ˜“äºä¼˜åŒ–æ±‚è§£â€ã€‚è‡³äºè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œåœ¨ä»‹ç»å®Œä¼˜åŒ–ç®—æ³•åå†æ­ç¤ºã€‚</p><p>åœ¨å›å½’é—®é¢˜ä¸­ï¼Œå‡æ–¹è¯¯å·®æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„å½¢å¼ï¼Œåˆ†ç±»é—®é¢˜ä¸­é€šå¸¸ä¼šé‡‡ç”¨äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ï¼Œåœ¨åç»­çš„ç« èŠ‚ä¸­ä¼šæ›´è¯¦ç»†çš„ä»‹ç»ã€‚å¯¹ä¸€ä¸ªæ ·æœ¬è®¡ç®—æŸå¤±å‡½æ•°å€¼çš„å®ç°å¦‚ä¸‹ã€‚</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Loss = (<span class="name">y1</span> - z)*(<span class="name">y1</span> - z)</span><br><span class="line">print(<span class="name">Loss</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[3.88644793]</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºè®¡ç®—æŸå¤±å‡½æ•°æ—¶éœ€è¦æŠŠæ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°å€¼éƒ½è€ƒè™‘åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å•ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°è¿›è¡Œæ±‚å’Œï¼Œå¹¶é™¤ä»¥æ ·æœ¬æ€»æ•°$N$ã€‚<br>$$L&#x3D; \frac{1}{N}\sum_{i&#x3D;1}^N{(y_i - z_i)^2} (å…¬å¼4)$$<br>åœ¨Networkç±»ä¸‹é¢æ·»åŠ æŸå¤±å‡½æ•°çš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Network</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_of_weights</span>):</span><br><span class="line">        <span class="comment"># éšæœºäº§ç”Ÿwçš„åˆå§‹å€¼</span></span><br><span class="line">        <span class="comment"># ä¸ºäº†ä¿æŒç¨‹åºæ¯æ¬¡è¿è¡Œç»“æœçš„ä¸€è‡´æ€§ï¼Œæ­¤å¤„è®¾ç½®å›ºå®šçš„éšæœºæ•°ç§å­</span></span><br><span class="line">        np.random.seed(<span class="number">0</span>)</span><br><span class="line">        self.w = np.random.randn(num_of_weights, <span class="number">1</span>)</span><br><span class="line">        self.b = <span class="number">0.</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        z = np.dot(x, self.w) + self.b</span><br><span class="line">        <span class="keyword">return</span> z</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">loss</span>(<span class="params">self, z, y</span>):</span><br><span class="line">        error = z - y</span><br><span class="line">        cost = error * error</span><br><span class="line">        cost = np.mean(cost)</span><br><span class="line">        <span class="keyword">return</span> cost</span><br></pre></td></tr></table></figure><p><strong>cost &#x3D; np.mean(cost):</strong><br>np.mean(cost) ä½¿ç”¨NumPyåº“ä¸­çš„ mean() å‡½æ•°è®¡ç®— cost ä¸­æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ï¼Œç„¶åå°†è¿™ä¸ªå¹³å‡å€¼èµ‹ç»™ cost å˜é‡<br>ä½¿ç”¨å®šä¹‰çš„Networkç±»ï¼Œå¯ä»¥æ–¹ä¾¿çš„è®¡ç®—é¢„æµ‹å€¼å’ŒæŸå¤±å‡½æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»ä¸­çš„å˜é‡x,w,b,zï¼Œerrorç­‰å‡æ˜¯å‘é‡ã€‚ä»¥å˜é‡xä¸ºä¾‹ï¼Œå…±æœ‰ä¸¤ä¸ªç»´åº¦ï¼Œä¸€ä¸ªä»£è¡¨ç‰¹å¾æ•°é‡ï¼ˆå€¼ä¸º13ï¼‰ï¼Œä¸€ä¸ªä»£è¡¨æ ·æœ¬æ•°é‡ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">net = Network(13)</span><br><span class="line"><span class="comment"># æ­¤å¤„å¯ä»¥ä¸€æ¬¡æ€§è®¡ç®—å¤šä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼å’ŒæŸå¤±å‡½æ•°</span></span><br><span class="line">x1 = x[0:3]</span><br><span class="line">y1 = y[0:3]</span><br><span class="line">z = net.forward(x1)</span><br><span class="line"><span class="section">print(&#x27;predict: &#x27;, z)</span></span><br><span class="line">loss = net.loss(z, y1)</span><br><span class="line"><span class="section">print(&#x27;loss:&#x27;, loss)</span></span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">predict:  <span class="string">[[2.39362982]</span></span><br><span class="line"><span class="string"> [2.46752393]</span></span><br><span class="line"><span class="string"> [2.02483479]]</span></span><br><span class="line">loss: <span class="number">3.384496992612791</span></span><br></pre></td></tr></table></figure><h2 id="è®­ç»ƒè¿‡ç¨‹"><a href="#è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="è®­ç»ƒè¿‡ç¨‹"></a>è®­ç»ƒè¿‡ç¨‹</h2><p>ä¸Šè¿°è®¡ç®—è¿‡ç¨‹æè¿°äº†å¦‚ä½•æ„å»ºç¥ç»ç½‘ç»œï¼Œé€šè¿‡ç¥ç»ç½‘ç»œå®Œæˆé¢„æµ‹å€¼å’ŒæŸå¤±å‡½æ•°çš„è®¡ç®—ã€‚æ¥ä¸‹æ¥ä»‹ç»å¦‚ä½•æ±‚è§£å‚æ•°$w$å’Œ$b$çš„æ•°å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¸ºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ã€‚è®­ç»ƒè¿‡ç¨‹æ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å…³é”®è¦ç´ ä¹‹ä¸€ï¼Œå…¶ç›®æ ‡æ˜¯è®©å®šä¹‰çš„æŸå¤±å‡½æ•°$Loss$å°½å¯èƒ½çš„å°ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰¾åˆ°ä¸€ä¸ªå‚æ•°è§£$w$å’Œ$b$ï¼Œä½¿å¾—æŸå¤±å‡½æ•°å–å¾—æå°å€¼ã€‚</p><iframe src="//player.bilibili.com/player.html?aid=19844108&bvid=BV1sW411775X&cid=32363257&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p>æˆ‘ä»¬å…ˆåšä¸€ä¸ªå°æµ‹è¯•ï¼šå¦‚ <strong>å›¾5</strong> æ‰€ç¤ºï¼ŒåŸºäºå¾®ç§¯åˆ†çŸ¥è¯†ï¼Œæ±‚ä¸€æ¡æ›²çº¿åœ¨æŸä¸ªç‚¹çš„æ–œç‡ç­‰äºå‡½æ•°åœ¨è¯¥ç‚¹çš„å¯¼æ•°å€¼ã€‚é‚£ä¹ˆå¤§å®¶æ€è€ƒä¸‹ï¼Œå½“å¤„äºæ›²çº¿çš„æå€¼ç‚¹æ—¶ï¼Œè¯¥ç‚¹çš„æ–œç‡æ˜¯å¤šå°‘ï¼Ÿ</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/94f0437e6a454a0682f3b831c96a62bdaf40898af25145ec9b5b50bc80391f5c" class="lazyload placeholder" data-srcset="https://ai-studio-static-online.cdn.bcebos.com/94f0437e6a454a0682f3b831c96a62bdaf40898af25145ec9b5b50bc80391f5c" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" width="300" hegiht="" ></center><center><br>å›¾5ï¼šæ›²çº¿æ–œç‡ç­‰äºå¯¼æ•°å€¼</br></center><br></br><p>è¿™ä¸ªé—®é¢˜å¹¶ä¸éš¾å›ç­”ï¼Œå¤„äºæ›²çº¿æå€¼ç‚¹æ—¶çš„æ–œç‡ä¸º0ï¼Œå³å‡½æ•°åœ¨æå€¼ç‚¹çš„å¯¼æ•°ä¸º0ã€‚é‚£ä¹ˆï¼Œè®©æŸå¤±å‡½æ•°å–æå°å€¼çš„$w$å’Œ$b$åº”è¯¥æ˜¯ä¸‹è¿°æ–¹ç¨‹ç»„çš„è§£ï¼š<br>$$\frac{\partial{L}}{\partial{\boldsymbol{w}}}&#x3D;0,(å…¬å¼5)$$<br>$$\frac{\partial{L}}{\partial{b}}&#x3D;0,(å…¬å¼6)$$</p><p>å…¶ä¸­$L$è¡¨ç¤ºçš„æ˜¯æŸå¤±å‡½æ•°çš„å€¼ï¼Œ$\boldsymbol{w}$ä¸ºæ¨¡å‹æƒé‡ï¼Œ$b$ä¸ºåç½®é¡¹ã€‚$\boldsymbol{w}$å’Œ$b$å‡ä¸ºè¦å­¦ä¹ çš„æ¨¡å‹å‚æ•°ã€‚</p><p>æŠŠæŸå¤±å‡½æ•°è¡¨ç¤ºæˆçŸ©é˜µçš„å½¢å¼ä¸º</p><p>$$<br>L&#x3D;\frac{1}{N}||\boldsymbol{y}-(\boldsymbol{X}\boldsymbol{w}+\boldsymbol{b})||^2, (å…¬å¼7)<br>$$</p><div class="note info"><p>åœ¨å…¬å¼ä¸­ä½¿ç”¨ä¸¤ä¸ªç«–çº¿ $|| \cdot ||$ è¡¨ç¤ºå‘é‡çš„èŒƒæ•°ï¼ˆnormï¼‰ï¼Œå…·ä½“æ¥è¯´ï¼Œ$||\boldsymbol{v}||$ è¡¨ç¤ºå‘é‡ $\boldsymbol{v}$ çš„èŒƒæ•°ã€‚åœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œå…¬å¼7ä¸­çš„ $||\boldsymbol{y} - (\boldsymbol{X}\boldsymbol{w} + \boldsymbol{b})||^2$ è¡¨ç¤ºå‘é‡ $\boldsymbol{y} - (\boldsymbol{X}\boldsymbol{w} + \boldsymbol{b})$ çš„äºŒèŒƒæ•°çš„å¹³æ–¹(äºŒèŒƒæ•°çš„å¹³æ–¹ç­‰äºå†…ç§¯)ã€‚äºŒèŒƒæ•°çš„è®¡ç®—æ–¹å¼æ˜¯å°†å‘é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹ç›¸åŠ ï¼Œç„¶åå†å¼€å¹³æ–¹ï¼Œè€Œåœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å¯¹æ¯ä¸ªå…ƒç´ å¹³æ–¹ï¼Œå³ $||\boldsymbol{v}||^2 &#x3D; \sum_{i} v_i^2$ã€‚è¿™ä¸ªäºŒèŒƒæ•°çš„å¹³æ–¹åœ¨çº¿æ€§å›å½’ä¸­è¢«ç”¨ä½œæŸå¤±å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥åº¦é‡é¢„æµ‹å€¼å’Œè§‚æµ‹å€¼ä¹‹é—´çš„è¯¯å·®ã€‚</p></div><p>å…¶ä¸­$\boldsymbol{y}$ä¸º$N$ä¸ªæ ·æœ¬çš„æ ‡ç­¾å€¼æ„æˆçš„å‘é‡ï¼Œå½¢çŠ¶ä¸º$N\times 1$ï¼›$\boldsymbol{X}$ä¸º$N$ä¸ªæ ·æœ¬ç‰¹å¾å‘é‡æ„æˆçš„çŸ©é˜µï¼Œå½¢çŠ¶ä¸º$N\times D$ï¼Œ$D$ä¸ºæ•°æ®ç‰¹å¾é•¿åº¦ï¼›$\boldsymbol{w}$ä¸ºæƒé‡å‘é‡ï¼Œå½¢çŠ¶ä¸º$D\times 1$ï¼›$\boldsymbol{b}$ä¸ºæ‰€æœ‰å…ƒç´ éƒ½ä¸º$b$çš„å‘é‡ï¼Œå½¢çŠ¶ä¸º$N\times 1$ã€‚</p><p>è®¡ç®—å…¬å¼7å¯¹å‚æ•°$b$çš„åå¯¼æ•°<br>$$<br>\frac{\partial L}{\partial b} &#x3D; \boldsymbol{1}^T(\boldsymbol{y}-(\boldsymbol{X}\boldsymbol{w}+\boldsymbol{b})), (å…¬å¼8)<br>$$<br>è¯·æ³¨æ„ï¼Œä¸Šè¿°å…¬å¼å¿½ç•¥äº†ç³»æ•°$\frac{2}{N}$ï¼Œå¹¶ä¸å½±å“æœ€åç»“æœã€‚å…¶ä¸­$\boldsymbol{1}$ä¸º$N$ç»´çš„å…¨1å‘é‡ã€‚</p><p>ä»¤å…¬å¼8ç­‰äº0ï¼Œå¾—åˆ°<br>$$<br>b^* &#x3D; \boldsymbol{\bar{x}}^T\boldsymbol{w}-\bar{y}(å…¬å¼9)<br>$$<br>å…¶ä¸­$\bar{y}&#x3D;\frac{1}{N}\boldsymbol{1}^T\boldsymbol{y}$ä¸ºæ‰€æœ‰æ ‡ç­¾çš„å¹³å‡å€¼ï¼Œ$\boldsymbol{\bar{x}}&#x3D;\frac{1}{N}(\boldsymbol{1}^T\boldsymbol{X})^T$ä¸ºæ‰€æœ‰ç‰¹å¾å‘é‡çš„å¹³å‡å€¼ã€‚å°†$b^*$å¸¦å…¥å…¬å¼7ä¸­å¹¶å¯¹å‚æ•°$\boldsymbol{w}$æ±‚åå¯¼å¾—åˆ°</p><p>$$<br>\frac{\partial L}{\partial \boldsymbol{w}} &#x3D; (\boldsymbol{X}-\boldsymbol{\bar{x}}^T)^T((\boldsymbol{y}-\bar{y})-(\boldsymbol{X}-\boldsymbol{\bar{x}}^T)\boldsymbol{w}) (å…¬å¼10)<br>$$</p><p>ä»¤å…¬å¼10ç­‰äº0ï¼Œå¾—åˆ°æœ€ä¼˜å‚æ•°</p><p>$$<br>\boldsymbol{w}^*&#x3D;((\boldsymbol{X}-\boldsymbol{\bar{x}}^T)^T(\boldsymbol{X}-\boldsymbol{\bar{x}}^T))^{-1}(\boldsymbol{X}-\boldsymbol{\bar{x}}^T)^T(\boldsymbol{y}-\bar{y})(å…¬å¼11) \<br>b^* &#x3D; \boldsymbol{\bar{x}}^T\boldsymbol{w}^*-\bar{y}(å…¬å¼12)<br>$$</p><p>å°†æ ·æœ¬æ•°æ®$(x, y)$å¸¦å…¥ä¸Šé¢çš„å…¬å¼11å’Œå…¬å¼12ä¸­å³å¯æ±‚è§£å‡º$w$å’Œ$b$çš„å€¼ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•åªå¯¹çº¿æ€§å›å½’è¿™æ ·ç®€å•çš„ä»»åŠ¡æœ‰æ•ˆã€‚å¦‚æœæ¨¡å‹ä¸­å«æœ‰éçº¿æ€§å˜æ¢ï¼Œæˆ–è€…æŸå¤±å‡½æ•°ä¸æ˜¯å‡æ–¹å·®è¿™ç§ç®€å•çš„å½¢å¼ï¼Œåˆ™å¾ˆéš¾é€šè¿‡ä¸Šå¼æ±‚è§£ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬å°†å¼•å…¥æ›´åŠ æ™®é€‚çš„æ•°å€¼æ±‚è§£æ–¹æ³•ï¼šæ¢¯åº¦ä¸‹é™æ³•ã€‚</p><h3 id="æ¢¯åº¦ä¸‹é™æ³•"><a href="#æ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="æ¢¯åº¦ä¸‹é™æ³•"></a>æ¢¯åº¦ä¸‹é™æ³•</h3><p>åœ¨ç°å®ä¸­å­˜åœ¨å¤§é‡çš„å‡½æ•°æ­£å‘æ±‚è§£å®¹æ˜“ï¼Œä½†åå‘æ±‚è§£è¾ƒéš¾ï¼Œè¢«ç§°ä¸ºå•å‘å‡½æ•°ï¼Œè¿™ç§å‡½æ•°åœ¨å¯†ç å­¦ä¸­æœ‰å¤§é‡çš„åº”ç”¨ã€‚å¯†ç é”çš„ç‰¹ç‚¹æ˜¯å¯ä»¥è¿…é€Ÿåˆ¤æ–­ä¸€ä¸ªå¯†é’¥æ˜¯å¦æ˜¯æ­£ç¡®çš„(å·²çŸ¥$x$ï¼Œæ±‚$y$å¾ˆå®¹æ˜“)ï¼Œä½†æ˜¯å³ä½¿è·å–åˆ°å¯†ç é”ç³»ç»Ÿï¼Œä¹Ÿæ— æ³•ç ´è§£å‡ºæ­£ç¡®å¾—å¯†é’¥ï¼ˆå·²çŸ¥$y$ï¼Œæ±‚$x$å¾ˆéš¾ï¼‰ã€‚</p><p>è¿™ç§æƒ…å†µç‰¹åˆ«ç±»ä¼¼äºä¸€ä½æƒ³ä»å±±å³°èµ°åˆ°å¡è°·çš„ç›²äººï¼Œä»–çœ‹ä¸è§å¡è°·åœ¨å“ªï¼ˆæ— æ³•é€†å‘æ±‚è§£å‡º$Loss$å¯¼æ•°ä¸º0æ—¶çš„å‚æ•°å€¼ï¼‰ï¼Œä½†å¯ä»¥ä¼¸è„šæ¢ç´¢èº«è¾¹çš„å¡åº¦ï¼ˆå½“å‰ç‚¹çš„å¯¼æ•°å€¼ï¼Œä¹Ÿç§°ä¸ºæ¢¯åº¦ï¼‰ã€‚é‚£ä¹ˆï¼Œæ±‚è§£Losså‡½æ•°æœ€å°å€¼å¯ä»¥è¿™æ ·å®ç°ï¼šä»å½“å‰çš„å‚æ•°å–å€¼ï¼Œä¸€æ­¥æ­¥çš„æŒ‰ç…§ä¸‹å¡çš„æ–¹å‘ä¸‹é™ï¼Œç›´åˆ°èµ°åˆ°æœ€ä½ç‚¹ã€‚è¿™ç§æ–¹æ³•ç¬”è€…ç§°å®ƒä¸ºâ€œç›²äººä¸‹å¡æ³•â€ã€‚å“¦ä¸ï¼Œæœ‰ä¸ªæ›´æ­£å¼çš„è¯´æ³•â€œæ¢¯åº¦ä¸‹é™æ³•â€ã€‚</p><p>è®­ç»ƒçš„å…³é”®æ˜¯æ‰¾åˆ°ä¸€ç»„$(w, b)$ï¼Œä½¿å¾—æŸå¤±å‡½æ•°$L$å–æå°å€¼ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æŸå¤±å‡½æ•°$L$åªéšä¸¤ä¸ªå‚æ•°$w_5$ã€$w_9$å˜åŒ–æ—¶çš„ç®€å•æƒ…å½¢ï¼Œå¯å‘ä¸‹å¯»è§£çš„æ€è·¯ã€‚<br>$$L&#x3D;L(w_5, w_9) (å…¬å¼13)$$<br>è¿™é‡Œå°†$w_0, w_1, â€¦, w_{12}$ä¸­é™¤$w_5, w_9$ä¹‹å¤–çš„å‚æ•°å’Œ$b$éƒ½å›ºå®šä¸‹æ¥ï¼Œå¯ä»¥ç”¨å›¾ç”»å‡º$L(w_5, w_9)$çš„å½¢å¼ï¼Œå¹¶åœ¨ä¸‰ç»´ç©ºé—´ä¸­ç”»å‡ºæŸå¤±å‡½æ•°éšå‚æ•°å˜åŒ–çš„æ›²é¢å›¾ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">net = Network(<span class="number">13</span>)</span><br><span class="line">losses = []</span><br><span class="line"><span class="comment"># åªç”»å‡ºå‚æ•°w5å’Œw9åœ¨åŒºé—´[-160, 160]çš„æ›²çº¿éƒ¨åˆ†ï¼Œä»¥åŠåŒ…å«æŸå¤±å‡½æ•°çš„æå€¼</span></span><br><span class="line">w5 = np.arange(-<span class="number">160.0</span>, <span class="number">160.0</span>, <span class="number">1.0</span>)</span><br><span class="line">w9 = np.arange(-<span class="number">160.0</span>, <span class="number">160.0</span>, <span class="number">1.0</span>)</span><br><span class="line">losses = np.zeros([<span class="built_in">len</span>(w5), <span class="built_in">len</span>(w9)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—è®¾å®šåŒºåŸŸå†…æ¯ä¸ªå‚æ•°å–å€¼æ‰€å¯¹åº”çš„Loss</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(w5)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(w9)):</span><br><span class="line">        net.w[<span class="number">5</span>] = w5[i]</span><br><span class="line">        net.w[<span class="number">9</span>] = w9[j]</span><br><span class="line">        z = net.forward(x)</span><br><span class="line">        loss = net.loss(z, y)</span><br><span class="line">        losses[i, j] = loss</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨matplotlibå°†ä¸¤ä¸ªå˜é‡å’Œå¯¹åº”çš„Lossä½œ3Då›¾</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ‚¨ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬çš„matplotlibæ— æ³•å‡ºå›¾ï¼Œå¯ä»¥æ›¿æ¢ä¸ºax = fig.add_axes(Axes3D(fig))</span></span><br><span class="line">ax = fig.add_axes(Axes3D(fig))</span><br><span class="line"></span><br><span class="line">w5, w9 = np.meshgrid(w5, w9)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ‘åŠ çš„ï¼Œå¯ä»¥çœ‹å‡ºå“ªä¸ªè½´å¯¹åº”å“ªä¸ªå˜é‡</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;w5&#x27;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&#x27;w9&#x27;</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">&#x27;Loss&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax.plot_surface(w5, w9, losses, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=<span class="string">&#x27;rainbow&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1e8cfkaufh.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1e8cfkaufh.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä»å›¾ä¸­å¯ä»¥æ˜æ˜¾è§‚å¯Ÿåˆ°æœ‰äº›åŒºåŸŸçš„å‡½æ•°å€¼æ¯”å‘¨å›´çš„ç‚¹å°ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼šä¸ºä»€ä¹ˆé€‰æ‹©$w_5$å’Œ$w_9$æ¥ç”»å›¾å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºé€‰æ‹©è¿™ä¸¤ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå¯æ¯”è¾ƒç›´è§‚çš„ä»æŸå¤±å‡½æ•°çš„æ›²é¢å›¾ä¸Šå‘ç°æå€¼ç‚¹çš„å­˜åœ¨ã€‚å…¶ä»–å‚æ•°ç»„åˆï¼Œä»å›¾å½¢ä¸Šè§‚æµ‹æŸå¤±å‡½æ•°çš„æå€¼ç‚¹ä¸å¤Ÿç›´è§‚ã€‚</p><p>è§‚å¯Ÿä¸Šè¿°æ›²çº¿å‘ˆç°å‡ºâ€œåœ†æ»‘â€çš„å¡åº¦ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬é€‰æ‹©ä»¥å‡æ–¹è¯¯å·®ä½œä¸ºæŸå¤±å‡½æ•°çš„åŸå› ä¹‹ä¸€ã€‚<strong>å›¾6</strong> å‘ˆç°äº†åªæœ‰ä¸€ä¸ªå‚æ•°ç»´åº¦æ—¶ï¼Œå‡æ–¹è¯¯å·®å’Œç»å¯¹å€¼è¯¯å·®ï¼ˆåªå°†æ¯ä¸ªæ ·æœ¬çš„è¯¯å·®ç´¯åŠ ï¼Œä¸åšå¹³æ–¹å¤„ç†ï¼‰çš„æŸå¤±å‡½æ•°æ›²çº¿å›¾ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/99487dca6520441db5073d1c154b5d2fb1174b5cf4d946c29f9d80a209bc2687" class="lazyload placeholder" data-srcset="https://ai-studio-static-online.cdn.bcebos.com/99487dca6520441db5073d1c154b5d2fb1174b5cf4d946c29f9d80a209bc2687" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" width="700" hegiht="40" ></center><center><br>å›¾6ï¼šå‡æ–¹è¯¯å·®å’Œç»å¯¹å€¼è¯¯å·®æŸå¤±å‡½æ•°æ›²çº¿å›¾</br></center><br></br><p>ç”±æ­¤å¯è§ï¼Œå‡æ–¹è¯¯å·®è¡¨ç°çš„â€œåœ†æ»‘â€çš„å¡åº¦æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p><ul><li>æ›²çº¿çš„æœ€ä½ç‚¹æ˜¯å¯å¯¼çš„ã€‚</li><li>è¶Šæ¥è¿‘æœ€ä½ç‚¹ï¼Œæ›²çº¿çš„å¡åº¦é€æ¸æ”¾ç¼“ï¼Œæœ‰åŠ©äºé€šè¿‡å½“å‰çš„æ¢¯åº¦æ¥åˆ¤æ–­æ¥è¿‘æœ€ä½ç‚¹çš„ç¨‹åº¦ï¼ˆæ˜¯å¦é€æ¸å‡å°‘æ­¥é•¿ï¼Œä»¥å…é”™è¿‡æœ€ä½ç‚¹ï¼‰ã€‚</li></ul><p>è€Œç»å¯¹å€¼è¯¯å·®æ˜¯ä¸å…·å¤‡è¿™ä¸¤ä¸ªç‰¹æ€§çš„ï¼Œè¿™ä¹Ÿæ˜¯æŸå¤±å‡½æ•°çš„è®¾è®¡ä¸ä»…ä»…è¦è€ƒè™‘â€œåˆç†æ€§â€ï¼Œè¿˜è¦è¿½æ±‚â€œæ˜“è§£æ€§â€çš„åŸå› ã€‚</p><p>ç°åœ¨æˆ‘ä»¬è¦æ‰¾å‡ºä¸€ç»„$[w_5, w_9]$çš„å€¼ï¼Œä½¿å¾—æŸå¤±å‡½æ•°æœ€å°ï¼Œå®ç°æ¢¯åº¦ä¸‹é™æ³•çš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li>æ­¥éª¤1ï¼šéšæœºçš„é€‰ä¸€ç»„åˆå§‹å€¼ï¼Œä¾‹å¦‚ï¼š$[w_5, w_9] &#x3D; [-100.0, -100.0]$</li><li>æ­¥éª¤2ï¼šé€‰å–ä¸‹ä¸€ä¸ªç‚¹$[w_5^{â€˜} , w_9^{â€˜}]$ï¼Œä½¿å¾—$L(w_5^{â€˜} , w_9^{â€˜}) &lt; L(w_5, w_9)$</li><li>æ­¥éª¤3ï¼šé‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æŸå¤±å‡½æ•°å‡ ä¹ä¸å†ä¸‹é™ã€‚</li></ul><p>å¦‚ä½•é€‰æ‹©$[w_5^{â€˜} , w_9^{â€˜}]$æ˜¯è‡³å…³é‡è¦çš„ï¼Œç¬¬ä¸€è¦ä¿è¯$L$æ˜¯ä¸‹é™çš„ï¼Œç¬¬äºŒè¦ä½¿å¾—ä¸‹é™çš„è¶‹åŠ¿å°½å¯èƒ½çš„å¿«ã€‚å¾®ç§¯åˆ†çš„åŸºç¡€çŸ¥è¯†å‘Šè¯‰æˆ‘ä»¬ï¼šæ²¿ç€æ¢¯åº¦çš„åæ–¹å‘ï¼Œæ˜¯å‡½æ•°å€¼ä¸‹é™æœ€å¿«çš„æ–¹å‘ï¼Œå¦‚ <strong>å›¾7</strong> æ‰€ç¤ºã€‚ç®€å•ç†è§£ï¼Œå‡½æ•°åœ¨æŸä¸€ä¸ªç‚¹çš„æ¢¯åº¦æ–¹å‘æ˜¯æ›²çº¿æ–œç‡æœ€å¤§çš„æ–¹å‘ï¼Œä½†æ¢¯åº¦æ–¹å‘æ˜¯å‘ä¸Šçš„ï¼Œæ‰€ä»¥ä¸‹é™æœ€å¿«çš„æ˜¯æ¢¯åº¦çš„åæ–¹å‘ã€‚</p><center><img src="https://ai-studio-static-online.cdn.bcebos.com/5f8322f6172542dab0f78684b70efe45d819895332af4cabb7c536217ab0bb26" class="lazyload placeholder" data-srcset="https://ai-studio-static-online.cdn.bcebos.com/5f8322f6172542dab0f78684b70efe45d819895332af4cabb7c536217ab0bb26" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" width="400" hegiht="40" ></center><center><br>å›¾7ï¼šæ¢¯åº¦ä¸‹é™æ–¹å‘ç¤ºæ„å›¾</br></center><br></br><h3 id="æ¢¯åº¦è®¡ç®—"><a href="#æ¢¯åº¦è®¡ç®—" class="headerlink" title="æ¢¯åº¦è®¡ç®—"></a>æ¢¯åº¦è®¡ç®—</h3><p>ä¸Šæ–‡å·²ç»ä»‹ç»äº†æŸå¤±å‡½æ•°çš„è®¡ç®—æ–¹æ³•ï¼Œè¿™é‡Œç¨å¾®æ”¹å†™ã€‚ä¸ºäº†ä½¿æ¢¯åº¦è®¡ç®—æ›´åŠ ç®€æ´ï¼Œå¼•å…¥å› å­$\frac{1}{2}$ï¼Œå®šä¹‰æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š</p><p>$$L&#x3D; \frac{1}{2N}\sum_{i&#x3D;1}^N{(y_i - z_i)^2} (å…¬å¼14)$$</p><p>å…¶ä¸­$z_i$æ˜¯ç½‘ç»œå¯¹ç¬¬$i$ä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼ï¼š</p><p>$$z_i &#x3D; \sum_{j&#x3D;0}^{12}{x_i^{j}\cdot w_j} + b (å…¬å¼15)$$</p><p>åœ¨å…¬å¼ä¸­ï¼Œ$(x_i^j)$ ä¸­çš„ $(j)$ è¡¨ç¤ºè¾“å…¥æ ·æœ¬çš„ç‰¹å¾çš„ç´¢å¼•ã€‚å¯¹äºæ¯ä¸ªæ ·æœ¬ $(i)$ï¼Œæœ‰å¤šä¸ªç‰¹å¾ï¼Œå…¶ä¸­ç‰¹å¾ç´¢å¼•ä¸º$(j)$ ä» 0 åˆ° 12ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ ·æœ¬ $(i)$ åŒ…å«äº† 13 ä¸ªç‰¹å¾ï¼Œç”¨æ¥æè¿°æˆ–è¡¨ç¤ºè¯¥æ ·æœ¬çš„å„ä¸ªæ–¹é¢ã€‚å› æ­¤ï¼Œ$(x_i^0, x_i^1, x_i^2, \ldots, x_i^{12})$ åˆ†åˆ«è¡¨ç¤ºç¬¬ $(i)$ ä¸ªæ ·æœ¬çš„è¿™ 13 ä¸ªç‰¹å¾çš„å–å€¼ã€‚åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œè¿™äº›ç‰¹å¾ä¼šä¸æƒé‡ $(w_j)$ ç›¸ä¹˜ï¼Œç„¶åç›¸åŠ èµ·æ¥ï¼Œä»è€Œå¾—åˆ°å¯¹è¯¥æ ·æœ¬çš„é¢„æµ‹å€¼ $(z_i)$</p><p>æ¢¯åº¦çš„å®šä¹‰ï¼š</p><p>$$ğ‘”ğ‘Ÿğ‘ğ‘‘ğ‘–ğ‘’ğ‘›ğ‘¡ &#x3D; (\frac{\partial{L}}{\partial{w_0}},\frac{\partial{L}}{\partial{w_1}}, â€¦ ,\frac{\partial{L}}{\partial{w_{12}}} ,\frac{\partial{L}}{\partial{b}}) (å…¬å¼16)$$</p><p>å¯ä»¥è®¡ç®—å‡º$L$å¯¹$w$å’Œ$b$çš„åå¯¼æ•°ï¼š</p><p>$$\frac{\partial{L}}{\partial{w_j}} &#x3D; \frac{1}{N}\sum_{i&#x3D;1}^N{(z_i - y_i)\frac{\partial{z_i}}{\partial{w_j}}} &#x3D; \frac{1}{N}\sum_{i&#x3D;1}^N{(z_i - y_i)x_i^{j}} (å…¬å¼17)$$</p><p>$$\frac{\partial{L}}{\partial{b}} &#x3D; \frac{1}{N}\sum_{i&#x3D;1}^N{(z_i - y_i)\frac{\partial{z_i}}{\partial{b}}} &#x3D; \frac{1}{N}\sum_{i&#x3D;1}^N{(z_i - y_i)} (å…¬å¼18)$$</p><p>ä»å¯¼æ•°çš„è®¡ç®—è¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œå› å­$\frac{1}{2}$è¢«æ¶ˆæ‰äº†ï¼Œè¿™æ˜¯å› ä¸ºäºŒæ¬¡å‡½æ•°æ±‚å¯¼çš„æ—¶å€™ä¼šäº§ç”Ÿå› å­$2$ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å°†æŸå¤±å‡½æ•°æ”¹å†™çš„åŸå› ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬è€ƒè™‘åªæœ‰ä¸€ä¸ªæ ·æœ¬çš„æƒ…å†µä¸‹ï¼Œè®¡ç®—æ¢¯åº¦ï¼š</p><p>$$L&#x3D; \frac{1}{2}{(y_i - z_i)^2} (å…¬å¼19)$$</p><p>$$z_1 &#x3D; {x_1^{0}\cdot w_0} + {x_1^{1}\cdot w_1} + â€¦  + {x_1^{12}\cdot w_{12}} + b (å…¬å¼20)$$</p><p>å¯ä»¥è®¡ç®—å‡ºï¼š</p><p>$$L&#x3D; \frac{1}{2}{({x_1^{0}\cdot w_0} + {x_1^{1}\cdot w_1} + â€¦  + {x_1^{12}\cdot w_{12}} + b - y_1)^2} (å…¬å¼21)$$</p><p>å¯ä»¥è®¡ç®—å‡º$L$å¯¹$w$å’Œ$b$çš„åå¯¼æ•°ï¼š</p><p>$$\frac{\partial{L}}{\partial{w_0}} &#x3D; ({x_1^{0}\cdot w_0} + {x_1^{1}\cdot w_1} + â€¦  + {x_1^{12}\cdot w_{12}} + b - y_1)\cdot x_1^{0}&#x3D;({z_1} - {y_1})\cdot x_1^{0} (å…¬å¼22)$$</p><p>$$\frac{\partial{L}}{\partial{b}} &#x3D; ({x_1^{0}\cdot w_0} + {x_1^{1}\cdot w_1} + â€¦  + {x_1^{12}\cdot w_{12}} + b - y_1)\cdot 1 &#x3D; ({z_1} - {y_1}) (å…¬å¼23)$$</p><p>å¯ä»¥é€šè¿‡å…·ä½“çš„ç¨‹åºæŸ¥çœ‹æ¯ä¸ªå˜é‡çš„æ•°æ®å’Œç»´åº¦ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x1 = x[<span class="number">0</span>]</span><br><span class="line">y1 = y[<span class="number">0</span>]</span><br><span class="line">z1 = net.forward(x1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;x1 &#123;&#125;, shape &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x1, x1.shape))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y1 &#123;&#125;, shape &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(y1, y1.shape))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;z1 &#123;&#125;, shape &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(z1, z1.shape))</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x1 [<span class="number">0.</span>         <span class="number">0.18</span>       <span class="number">0.07344184</span> <span class="number">0.</span>         <span class="number">0.31481481</span> <span class="number">0.57750527</span></span><br><span class="line"> <span class="number">0.64160659</span> <span class="number">0.26920314</span> <span class="number">0.</span>         <span class="number">0.22755741</span> <span class="number">0.28723404</span> <span class="number">1.</span></span><br><span class="line"> <span class="number">0.08967991</span>], shape (<span class="number">13</span>,)</span><br><span class="line">y1 [<span class="number">0.42222222</span>], shape (<span class="number">1</span>,)</span><br><span class="line">z1 [<span class="number">130.86954441</span>], shape (<span class="number">1</span>,)</span><br></pre></td></tr></table></figure><p>æŒ‰ä¸Šé¢çš„å…¬å¼ï¼Œå½“åªæœ‰ä¸€ä¸ªæ ·æœ¬æ—¶ï¼Œå¯ä»¥è®¡ç®—æŸä¸ª$w_j$ï¼Œæ¯”å¦‚$w_0$çš„æ¢¯åº¦ã€‚</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gradient_w0 = (z1 - y1) * x1[<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;gradient_w0 &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(gradient_w0))</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gradient_w0</span><span class="meta"> [0.]</span></span><br></pre></td></tr></table></figure><p>åŒæ ·æˆ‘ä»¬å¯ä»¥è®¡ç®—$w_1$çš„æ¢¯åº¦ã€‚</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">gradient_w1</span> = (<span class="variable">z1</span> - <span class="variable">y1</span>) * <span class="variable">x1</span>[<span class="number">1</span>]</span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="string">&#x27;gradient_w1 &#123;&#125;&#x27;</span>.format(<span class="variable">gradient_w1</span>))</span></span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradient_w1 [<span class="number">23.48051799</span>]</span><br></pre></td></tr></table></figure><p>ä¾æ¬¡è®¡ç®—$w_2$çš„æ¢¯åº¦ã€‚</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">gradient_w2</span>= (<span class="variable">z1</span> - <span class="variable">y1</span>) * <span class="variable">x1</span>[<span class="number">2</span>]</span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="string">&#x27;gradient_w1 &#123;&#125;&#x27;</span>.format(<span class="variable">gradient_w2</span>))</span></span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradient_w1 <span class="string">[9.58029163]</span></span><br></pre></td></tr></table></figure><p>èªæ˜çš„è¯»è€…å¯èƒ½å·²ç»æƒ³åˆ°ï¼Œå†™ä¸€ä¸ªforå¾ªç¯å³å¯è®¡ç®—ä»$w_0$åˆ°$w_{12}$çš„æ‰€æœ‰æƒé‡çš„æ¢¯åº¦ï¼Œè¯¥æ–¹æ³•è¯»è€…å¯ä»¥è‡ªè¡Œå®ç°ã€‚<br>æˆ‘å†™å“’-&gt;</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">13</span>):</span><br><span class="line">    gradient_wi = (z1 - y1) * x1[i]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;gradient_w&#123;&#125; &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(i, gradient_wi))</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(Paddle_Py3.<span class="number">9</span>) C:\Users\lxcqm&gt;python D:\opencv_test\demo\PythonApplication1\PythonApplication1\housing<span class="selector-class">.py</span></span><br><span class="line">gradient_w0 <span class="selector-attr">[0.]</span></span><br><span class="line">gradient_w1 <span class="selector-attr">[0.35485337]</span></span><br><span class="line">gradient_w2 <span class="selector-attr">[0.14478381]</span></span><br><span class="line">gradient_w3 <span class="selector-attr">[0.]</span></span><br><span class="line">gradient_w4 <span class="selector-attr">[0.62062832]</span></span><br><span class="line">gradient_w5 <span class="selector-attr">[1.13849828]</span></span><br><span class="line">gradient_w6 <span class="selector-attr">[1.26486811]</span></span><br><span class="line">gradient_w7 <span class="selector-attr">[0.53070911]</span></span><br><span class="line">gradient_w8 <span class="selector-attr">[0.]</span></span><br><span class="line">gradient_w9 <span class="selector-attr">[0.44860841]</span></span><br><span class="line">gradient_w10 <span class="selector-attr">[0.56625537]</span></span><br><span class="line">gradient_w11 <span class="selector-attr">[1.9714076]</span></span><br><span class="line">gradient_w12 <span class="selector-attr">[0.17679566]</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Numpyè¿›è¡Œæ¢¯åº¦è®¡ç®—"><a href="#ä½¿ç”¨Numpyè¿›è¡Œæ¢¯åº¦è®¡ç®—" class="headerlink" title="ä½¿ç”¨Numpyè¿›è¡Œæ¢¯åº¦è®¡ç®—"></a>ä½¿ç”¨Numpyè¿›è¡Œæ¢¯åº¦è®¡ç®—</h3><p>åŸºäºNumPyå¹¿æ’­æœºåˆ¶ï¼ˆå¯¹å‘é‡å’ŒçŸ©é˜µè®¡ç®—å¦‚åŒå¯¹1ä¸ªå•ä¸€å˜é‡è®¡ç®—ä¸€æ ·ï¼‰ï¼Œå¯ä»¥æ›´å¿«é€Ÿçš„å®ç°æ¢¯åº¦è®¡ç®—ã€‚è®¡ç®—æ¢¯åº¦çš„ä»£ç ä¸­ç›´æ¥ç”¨$(z_1 - y_1) \cdot x_1$ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ª13ç»´çš„å‘é‡ï¼Œæ¯ä¸ªåˆ†é‡åˆ†åˆ«ä»£è¡¨è¯¥ç»´åº¦çš„æ¢¯åº¦ã€‚</p><details open><summary pointer> NumPyå¹¿æ’­æœºåˆ¶ </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7ljqfs5pd7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7ljqfs5pd7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4uao7pjyfb.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4uao7pjyfb.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> æ·±åº¦å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> paddlepaddle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°(å››)ï¼šLCDæ¶²æ™¶å±æ˜¾ç¤º</title>
      <link href="/2024/02/29/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%9B-%EF%BC%9ALCD%E6%B6%B2%E6%99%B6%E5%B1%8F%E6%98%BE%E7%A4%BA/"/>
      <url>/2024/02/29/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9B%9B-%EF%BC%9ALCD%E6%B6%B2%E6%99%B6%E5%B1%8F%E6%98%BE%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>å¼€å‘æ¿èŠ¯ç‰‡ï¼šSTM32G431RBT6;HALåº“å¼€å‘</p></div><span class='pbg info'>æ¯”èµ›çš„æ—¶å€™èµ„æ–™åŒ…é‡Œä¼šæœ‰LCDé©±åŠ¨ä¾‹ç¨‹ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»–çš„MXæ–‡ä»¶é‡Œé…ç½®ï¼Œæ³¨æ„æŠŠæ—¶é’Ÿæ ‘é‡Œæ”¹ä¸ºå¤–éƒ¨æ—¶é’Ÿï¼ˆä¾‹ç¨‹é‡Œæ˜¯å†…éƒ¨æ—¶é’Ÿï¼‰</span> <!--æˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹å®˜æ–¹LCDä¾‹ç¨‹å§~<details open><summary pointer> main.c </summary>              <div class='content'>              <details ><summary pointer> æºç (ç‚¹å‡»æ‰“å¼€) </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN Header */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  * @file           : main.c</span></span><br><span class="line"><span class="comment">  * @brief          : Main program body</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  * @attention</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &lt;h2&gt;&lt;center&gt;&amp;copy; Copyright (c) 2021 STMicroelectronics.</span></span><br><span class="line"><span class="comment">  * All rights reserved.&lt;/center&gt;&lt;/h2&gt;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This software component is licensed by ST under BSD 3-Clause license,</span></span><br><span class="line"><span class="comment">  * the &quot;License&quot;; You may not use this file except in compliance with the</span></span><br><span class="line"><span class="comment">  * License. You may obtain a copy of the License at:</span></span><br><span class="line"><span class="comment">  *                        opensource.org/licenses/BSD-3-Clause</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">/* USER CODE END Header */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Includes ------------------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private includes ----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN Includes */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END Includes */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private typedef -----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PTD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PTD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private define ------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PD */</span></span><br><span class="line"><span class="comment">/* USER CODE END PD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private macro -------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private variables ---------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private function prototypes -----------------------------------------------*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">MX_GPIO_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="comment">/* USER CODE BEGIN PFP */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PFP */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private user code ---------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  The application entry point.</span></span><br><span class="line"><span class="comment">  * @retval int</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 1 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END 1 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* MCU Configuration--------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Reset of all peripherals, Initializes the Flash interface and the Systick. */</span></span><br><span class="line">    HAL_Init();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN Init */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END Init */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Configure the system clock */</span></span><br><span class="line">    SystemClock_Config();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN SysInit */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END SysInit */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Initialize all configured peripherals */</span></span><br><span class="line">    MX_GPIO_Init();</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line"></span><br><span class="line">    LCD_Init();</span><br><span class="line">    <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Infinite loop */</span></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line"></span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line">    LCD_SetBackColor(Blue);</span><br><span class="line">    LCD_SetTextColor(White);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    LCD_DrawLine(<span class="number">120</span>, <span class="number">0</span>, <span class="number">320</span>, Horizontal);</span><br><span class="line">    LCD_DrawLine(<span class="number">0</span>, <span class="number">160</span>, <span class="number">240</span>, Vertical);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line"></span><br><span class="line">    LCD_DrawRect(<span class="number">70</span>, <span class="number">210</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line"></span><br><span class="line">    LCD_DrawCircle(<span class="number">120</span>, <span class="number">160</span>, <span class="number">50</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line">    LCD_DisplayStringLine(Line4, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;    Hello,world.   &quot;</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    LCD_SetBackColor(White);</span><br><span class="line">    LCD_DisplayStringLine(Line0, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Black);</span><br><span class="line">    LCD_DisplayStringLine(Line1, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Grey);</span><br><span class="line">    LCD_DisplayStringLine(Line2, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Blue);</span><br><span class="line">    LCD_DisplayStringLine(Line3, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Blue2);</span><br><span class="line">    LCD_DisplayStringLine(Line4, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Red);</span><br><span class="line">    LCD_DisplayStringLine(Line5, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Magenta);</span><br><span class="line">    LCD_DisplayStringLine(Line6, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Green);</span><br><span class="line">    LCD_DisplayStringLine(Line7, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Cyan);</span><br><span class="line">    LCD_DisplayStringLine(Line8, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Yellow);</span><br><span class="line">    LCD_DisplayStringLine(Line9, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* USER CODE END 3 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief System Clock Configuration</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    RCC_OscInitTypeDef RCC_OscInitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    RCC_ClkInitTypeDef RCC_ClkInitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Configure the main internal regulator output voltage</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1);</span><br><span class="line">    <span class="comment">/** Initializes the CPU, AHB and APB busses clocks</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;</span><br><span class="line">    RCC_OscInitStruct.HSIState = RCC_HSI_ON;</span><br><span class="line">    RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLM = RCC_PLLM_DIV2;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLN = <span class="number">20</span>;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLQ = RCC_PLLQ_DIV2;</span><br><span class="line">    RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV2;</span><br><span class="line">    <span class="keyword">if</span> (HAL_RCC_OscConfig(&amp;RCC_OscInitStruct) != HAL_OK)</span><br><span class="line">    &#123;</span><br><span class="line">        Error_Handler();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Initializes the CPU, AHB and APB busses clocks</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK</span><br><span class="line">                                  | RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;</span><br><span class="line">    RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;</span><br><span class="line">    RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;</span><br><span class="line">    RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;</span><br><span class="line">    RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (HAL_RCC_ClockConfig(&amp;RCC_ClkInitStruct, FLASH_LATENCY_3) != HAL_OK)</span><br><span class="line">    &#123;</span><br><span class="line">        Error_Handler();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief GPIO Initialization Function</span></span><br><span class="line"><span class="comment">  * @param None</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">MX_GPIO_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* GPIO Ports Clock Enable */</span></span><br><span class="line">    __HAL_RCC_GPIOC_CLK_ENABLE();</span><br><span class="line">    __HAL_RCC_GPIOF_CLK_ENABLE();</span><br><span class="line">    __HAL_RCC_GPIOA_CLK_ENABLE();</span><br><span class="line">    __HAL_RCC_GPIOB_CLK_ENABLE();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pin Output Level */</span></span><br><span class="line">    HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13 | GPIO_PIN_14 | GPIO_PIN_15 | GPIO_PIN_0</span><br><span class="line">                      | GPIO_PIN_1 | GPIO_PIN_2 | GPIO_PIN_3 | GPIO_PIN_4</span><br><span class="line">                      | GPIO_PIN_5 | GPIO_PIN_6 | GPIO_PIN_7 | GPIO_PIN_8</span><br><span class="line">                      | GPIO_PIN_9 | GPIO_PIN_10 | GPIO_PIN_11 | GPIO_PIN_12, GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pin Output Level */</span></span><br><span class="line">    HAL_GPIO_WritePin(GPIOA, GPIO_PIN_8, GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pin Output Level */</span></span><br><span class="line">    HAL_GPIO_WritePin(GPIOB, GPIO_PIN_5 | GPIO_PIN_8 | GPIO_PIN_9, GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pins : PC13 PC14 PC15 PC0</span></span><br><span class="line"><span class="comment">                             PC1 PC2 PC3 PC4</span></span><br><span class="line"><span class="comment">                             PC5 PC6 PC7 PC8</span></span><br><span class="line"><span class="comment">                             PC9 PC10 PC11 PC12 */</span></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_13 | GPIO_PIN_14 | GPIO_PIN_15 | GPIO_PIN_0</span><br><span class="line">                          | GPIO_PIN_1 | GPIO_PIN_2 | GPIO_PIN_3 | GPIO_PIN_4</span><br><span class="line">                          | GPIO_PIN_5 | GPIO_PIN_6 | GPIO_PIN_7 | GPIO_PIN_8</span><br><span class="line">                          | GPIO_PIN_9 | GPIO_PIN_10 | GPIO_PIN_11 | GPIO_PIN_12;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;</span><br><span class="line">    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pin : PA8 */</span></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_8;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;</span><br><span class="line">    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Configure GPIO pins : PB5 PB8 PB9 */</span></span><br><span class="line">    GPIO_InitStruct.Pin = GPIO_PIN_5 | GPIO_PIN_8 | GPIO_PIN_9;</span><br><span class="line">    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;</span><br><span class="line">    GPIO_InitStruct.Pull = GPIO_NOPULL;</span><br><span class="line">    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;</span><br><span class="line">    HAL_GPIO_Init(GPIOB, &amp;GPIO_InitStruct);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 4 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END 4 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  This function is executed in case of error occurrence.</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Error_Handler</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN Error_Handler_Debug */</span></span><br><span class="line">    <span class="comment">/* User can add his own implementation to report the HAL error return state */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END Error_Handler_Debug */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span>  USE_FULL_ASSERT</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  Reports the name of the source file and the source line number</span></span><br><span class="line"><span class="comment">  *         where the assert_param error has occurred.</span></span><br><span class="line"><span class="comment">  * @param  file: pointer to the source file name</span></span><br><span class="line"><span class="comment">  * @param  line: assert_param error line source number</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">assert_failed</span><span class="params">(<span class="type">uint8_t</span> *file, <span class="type">uint32_t</span> line)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 6 */</span></span><br><span class="line">    <span class="comment">/* User can add his own implementation to report the file name and line number,</span></span><br><span class="line"><span class="comment">       tex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */</span></span><br><span class="line">    <span class="comment">/* USER CODE END 6 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* USE_FULL_ASSERT */</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">MX_GPIO_Init</span><span class="params">(<span class="type">void</span>)</span>;</span><br></pre></td></tr></table></figure><p>å£°æ˜åˆå§‹åŒ–ç³»ç»Ÿæ—¶é’Ÿï¼Œåˆå§‹åŒ–GPIO(åœ¨CubeMXé‡Œé…ç½®çš„)å‡½æ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">HAL_Init();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN Init */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END Init */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure the system clock */</span></span><br><span class="line">SystemClock_Config();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN SysInit */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END SysInit */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Initialize all configured peripherals */</span></span><br><span class="line">MX_GPIO_Init();</span><br><span class="line"><span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line"></span><br><span class="line">LCD_Init();</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç‰‡æ®µå±•ç¤ºäº†ä¸€æ®µåˆå§‹åŒ–ä»£ç ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p><code>HAL_Init();</code>ï¼šè¿›è¡ŒHALåº“çš„åˆå§‹åŒ–ã€‚HALï¼ˆHardware Abstraction Layerï¼Œç¡¬ä»¶æŠ½è±¡å±‚ï¼‰æ˜¯ä¸€ç§æŠ½è±¡å±‚ï¼Œç”¨äºå°è£…åº•å±‚ç¡¬ä»¶æ“ä½œï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ä¾›ä¸Šå±‚åº”ç”¨ä½¿ç”¨ã€‚</p></li><li><p><code>SystemClock_Config();</code>ï¼šè°ƒç”¨äº†ä¹‹å‰æåˆ°çš„<code>SystemClock_Config()</code>å‡½æ•°ï¼Œç”¨äºé…ç½®ç³»ç»Ÿæ—¶é’Ÿã€‚</p></li><li><p><code>MX_GPIO_Init();</code>ï¼šåˆå§‹åŒ–GPIOæ¨¡å—ï¼Œè°ƒç”¨äº†ä¹‹å‰æåˆ°çš„<code>MX_GPIO_Init()</code>å‡½æ•°ã€‚</p></li><li><p><code>LCD_Init();</code>ï¼šåˆå§‹åŒ–æ¶²æ™¶æ˜¾ç¤ºå±ã€‚</p></li></ol><details open><summary pointer> LCD_Init() </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">HAL_StatusTypeDef <span class="title function_">HAL_Init</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    HAL_StatusTypeDef  status = HAL_OK;</span><br><span class="line">    <span class="comment">/* Configure Flash prefetch, Instruction cache, Data cache */</span></span><br><span class="line">    <span class="comment">/* Default configuration at reset is:                      */</span></span><br><span class="line">    <span class="comment">/* - Prefetch disabled                                     */</span></span><br><span class="line">    <span class="comment">/* - Instruction cache enabled                             */</span></span><br><span class="line">    <span class="comment">/* - Data cache enabled                                    */</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (INSTRUCTION_CACHE_ENABLE == 0U)</span></span><br><span class="line">    __HAL_FLASH_INSTRUCTION_CACHE_DISABLE();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* INSTRUCTION_CACHE_ENABLE */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (DATA_CACHE_ENABLE == 0U)</span></span><br><span class="line">    __HAL_FLASH_DATA_CACHE_DISABLE();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* DATA_CACHE_ENABLE */</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (PREFETCH_ENABLE != 0U)</span></span><br><span class="line">    __HAL_FLASH_PREFETCH_BUFFER_ENABLE();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* PREFETCH_ENABLE */</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Set Interrupt Group Priority */</span></span><br><span class="line">    HAL_NVIC_SetPriorityGrouping(NVIC_PRIORITYGROUP_4);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Use SysTick as time base source and configure 1ms tick (default clock after Reset is HSI) */</span></span><br><span class="line">    <span class="keyword">if</span> (HAL_InitTick(TICK_INT_PRIORITY) != HAL_OK)</span><br><span class="line">    &#123;</span><br><span class="line">        status = HAL_ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* Init the low level hardware */</span></span><br><span class="line">        HAL_MspInit();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Return function status */</span></span><br><span class="line">    <span class="keyword">return</span> status;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LCD_Clear(Blue);</span><br><span class="line">LCD_SetBackColor(Blue);</span><br><span class="line">LCD_SetTextColor(White);</span><br></pre></td></tr></table></figure><ol><li><p><code>LCD_Clear(Blue);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯æ¸…é™¤LCDå±å¹•ä¸Šçš„å†…å®¹ï¼Œå¹¶å°†æ•´ä¸ªå±å¹•å¡«å……ä¸ºè“è‰²ï¼ˆBlueï¼‰ã€‚</li></ul></li><li><p><code>LCD_SetBackColor(Blue);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯è®¾ç½®LCDå±å¹•çš„èƒŒæ™¯é¢œè‰²ä¸ºè“è‰²ï¼ˆBlueï¼‰ã€‚</li></ul></li><li><p><code>LCD_SetTextColor(White);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯è®¾ç½®LCDå±å¹•ä¸Šæ–‡æœ¬çš„é¢œè‰²ä¸ºç™½è‰²ï¼ˆWhiteï¼‰ã€‚</li></ul></li></ol>              </div>            </details>    --><h2 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h2><h3 id="é…ç½®å¼•è„š"><a href="#é…ç½®å¼•è„š" class="headerlink" title="é…ç½®å¼•è„š"></a>é…ç½®å¼•è„š</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.77db74j2r0.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.77db74j2r0.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æŠŠå›¾ç‰‡ä¸­çš„å¼•è„šé…ç½®ä¸º<code>GPIO_Output</code>æ¨¡å¼</p><h3 id="å¤åˆ¶å®˜æ–¹å¤´æ–‡ä»¶"><a href="#å¤åˆ¶å®˜æ–¹å¤´æ–‡ä»¶" class="headerlink" title="å¤åˆ¶å®˜æ–¹å¤´æ–‡ä»¶"></a>å¤åˆ¶å®˜æ–¹å¤´æ–‡ä»¶</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.45frim9vd.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.45frim9vd.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><ol><li>å¤åˆ¶å®˜æ–¹é¡¹ç›®<code>Inc</code>æ–‡ä»¶å¤¹ä¸­çš„<code>fonts.h</code>å’Œ<code>lcd.h</code>åˆ°è‡ªå·±æ ¹ç›®å½•çš„bspæ–‡ä»¶å¤¹</li><li>å¤åˆ¶<code>Src</code>æ–‡ä»¶å¤¹ä¸­çš„<code>lcd.c</code>æ–‡ä»¶åˆ°bspæ–‡ä»¶å¤¹ä¸­</li></ol><h3 id="æ·»åŠ lcd-c"><a href="#æ·»åŠ lcd-c" class="headerlink" title="æ·»åŠ lcd.c"></a>æ·»åŠ lcd.c</h3><p>æ·»åŠ lcd.cåˆ°å·¥ç¨‹bspæ–‡ä»¶å¤¹é‡Œ</p><h3 id="æ·»åŠ å¤´æ–‡ä»¶"><a href="#æ·»åŠ å¤´æ–‡ä»¶" class="headerlink" title="æ·»åŠ å¤´æ–‡ä»¶"></a>æ·»åŠ å¤´æ–‡ä»¶</h3><p>åœ¨<code>main.c</code>ä¸­æ·»åŠ <code>#include &quot;lcd.h&quot;</code>å’Œ<code>#include &quot;stdio.h&quot;</code></p><h3 id="æŸ¥çœ‹å®˜æ–¹main-c"><a href="#æŸ¥çœ‹å®˜æ–¹main-c" class="headerlink" title="æŸ¥çœ‹å®˜æ–¹main.c"></a>æŸ¥çœ‹å®˜æ–¹main.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 1 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END 1 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* MCU Configuration--------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Reset of all peripherals, Initializes the Flash interface and the Systick. */</span></span><br><span class="line">    HAL_Init();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN Init */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END Init */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Configure the system clock */</span></span><br><span class="line">    SystemClock_Config();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN SysInit */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE END SysInit */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Initialize all configured peripherals */</span></span><br><span class="line">    MX_GPIO_Init();</span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line"></span><br><span class="line">    LCD_Init();</span><br><span class="line">    <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Infinite loop */</span></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line"></span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line">    LCD_SetBackColor(Blue);</span><br><span class="line">    LCD_SetTextColor(White);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    LCD_DrawLine(<span class="number">120</span>, <span class="number">0</span>, <span class="number">320</span>, Horizontal);</span><br><span class="line">    LCD_DrawLine(<span class="number">0</span>, <span class="number">160</span>, <span class="number">240</span>, Vertical);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line"></span><br><span class="line">    LCD_DrawRect(<span class="number">70</span>, <span class="number">210</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line"></span><br><span class="line">    LCD_DrawCircle(<span class="number">120</span>, <span class="number">160</span>, <span class="number">50</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    LCD_Clear(Blue);</span><br><span class="line">    LCD_DisplayStringLine(Line4, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;    Hello,world.   &quot;</span>);</span><br><span class="line">    HAL_Delay(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    LCD_SetBackColor(White);</span><br><span class="line">    LCD_DisplayStringLine(Line0, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Black);</span><br><span class="line">    LCD_DisplayStringLine(Line1, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Grey);</span><br><span class="line">    LCD_DisplayStringLine(Line2, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Blue);</span><br><span class="line">    LCD_DisplayStringLine(Line3, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Blue2);</span><br><span class="line">    LCD_DisplayStringLine(Line4, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Red);</span><br><span class="line">    LCD_DisplayStringLine(Line5, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Magenta);</span><br><span class="line">    LCD_DisplayStringLine(Line6, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Green);</span><br><span class="line">    LCD_DisplayStringLine(Line7, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Cyan);</span><br><span class="line">    LCD_DisplayStringLine(Line8, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line">    LCD_SetBackColor(Yellow);</span><br><span class="line">    LCD_DisplayStringLine(Line9, (<span class="type">unsigned</span> <span class="type">char</span> *)<span class="string">&quot;                    &quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* USER CODE END 3 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤åˆ¶<code>LCD_Init();</code>å’Œåé¢çš„lcdæ˜¾ç¤ºä»£ç åˆ°è‡ªå·±çš„<code>main.c</code>ä¸­</p><h2 id="è®¾ç½®å±å¹•é¢œè‰²"><a href="#è®¾ç½®å±å¹•é¢œè‰²" class="headerlink" title="è®¾ç½®å±å¹•é¢œè‰²"></a>è®¾ç½®å±å¹•é¢œè‰²</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LCD_Clear(Blue);</span><br><span class="line">LCD_SetBackColor(Blue);</span><br><span class="line">LCD_SetTextColor(White);</span><br></pre></td></tr></table></figure><ol><li><p><code>LCD_Clear(Blue);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯æ¸…é™¤LCDå±å¹•ä¸Šçš„å†…å®¹ï¼Œå¹¶å°†æ•´ä¸ªå±å¹•å¡«å……ä¸ºè“è‰²ï¼ˆBlueï¼‰ã€‚</li></ul></li><li><p><code>LCD_SetBackColor(Blue);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯è®¾ç½®LCDå±å¹•çš„èƒŒæ™¯é¢œè‰²ä¸ºè“è‰²ï¼ˆBlueï¼‰ã€‚</li></ul></li><li><p><code>LCD_SetTextColor(White);</code></p><ul><li>è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯è®¾ç½®LCDå±å¹•ä¸Šæ–‡æœ¬çš„é¢œè‰²ä¸ºç™½è‰²ï¼ˆWhiteï¼‰ã€‚</li></ul></li></ol><h2 id="åœ¨å±å¹•ä¸Šæ‰“å°"><a href="#åœ¨å±å¹•ä¸Šæ‰“å°" class="headerlink" title="åœ¨å±å¹•ä¸Šæ‰“å°"></a>åœ¨å±å¹•ä¸Šæ‰“å°</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> text[<span class="number">30</span>];</span><br><span class="line">uint i=<span class="number">5</span>;</span><br><span class="line"><span class="built_in">sprintf</span>(text,<span class="string">&quot;  CNBR:%d      &quot;</span>,i);</span><br><span class="line">LCD_DisplayStringLine(Line9, (<span class="type">uint8_t</span> *)text);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonæ·±åº¦å­¦ä¹ åŠæ™ºèƒ½è½¦ç«èµ›å®è·µ(ä¸€):Python åŸºç¡€çŸ¥è¯†ä½“ç³»</title>
      <link href="/2024/02/28/Python%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%8F%8A%E6%99%BA%E8%83%BD%E8%BD%A6%E7%AB%9E%E8%B5%9B%E5%AE%9E%E8%B7%B5-%E4%B8%80-Python%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E4%BE%8B/"/>
      <url>/2024/02/28/Python%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%8F%8A%E6%99%BA%E8%83%BD%E8%BD%A6%E7%AB%9E%E8%B5%9B%E5%AE%9E%E8%B7%B5-%E4%B8%80-Python%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<!-- # ç¬¬1ç« â€ƒç»ªè®º ## 1.1â€ƒäººå·¥æ™ºèƒ½çš„å‘å±•åŠåŸºæœ¬æ¦‚å¿µ### 1.1.1â€ƒäººå·¥æ™ºèƒ½çš„èµ·æºä¸å‘å±• ### 1.1.2â€ƒä¸­å›½äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å‘å±•### 1.1.3â€ƒäººå·¥æ™ºèƒ½çš„åŸºæœ¬æ¦‚å¿µ## 1.2â€ƒæ™ºèƒ½æ±½è½¦åŠå…¨å›½å¤§å­¦ç”Ÿæ™ºèƒ½æ±½è½¦ç«èµ›### 1.2.1â€ƒæ™ºèƒ½æ±½è½¦æŠ€æœ¯æ¦‚è¿°### 1.2.2â€ƒå…¨å›½å¤§å­¦ç”Ÿæ™ºèƒ½æ±½è½¦ç«èµ›ç®€ä»‹## 1.3â€ƒç¨‹åºè®¾è®¡è¯­è¨€åŠPythonè¯­è¨€ç®€ä»‹### 1.3.1â€ƒä½çº§è¯­è¨€å’Œé«˜çº§è¯­è¨€ ### 1.3.2â€ƒç»“æ„åŒ–è¯­è¨€å’Œé¢å‘å¯¹è±¡è¯­è¨€### 1.3.3â€ƒPythonè¯­è¨€ç‰¹ç‚¹### 1.3.4â€ƒPythonå¼€å‘ç¯å¢ƒåŠå°å®ä¾‹# ç¬¬2ç« â€ƒPythonåŸºæœ¬è¯­æ³•å…ƒç´ åŠæ•°æ®ç±»å‹ --><h2 id="æ±‚å¹³æ–¹"><a href="#æ±‚å¹³æ–¹" class="headerlink" title="æ±‚å¹³æ–¹"></a>æ±‚å¹³æ–¹</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">squard_numbers = [num**<span class="number">2</span> <span class="keyword">for</span> num <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(squard_numbers)</span><br></pre></td></tr></table></figure><h2 id="ç»˜åˆ¶åŒå¿ƒåœ†"><a href="#ç»˜åˆ¶åŒå¿ƒåœ†" class="headerlink" title="ç»˜åˆ¶åŒå¿ƒåœ†"></a>ç»˜åˆ¶åŒå¿ƒåœ†</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">50</span>)   <span class="comment">#ç”»ä¸€ä¸ªåœ†</span></span><br><span class="line">turtle.penup()  <span class="comment">#ç”»ç¬”æ‚¬ç©º</span></span><br><span class="line">turtle.goto(<span class="number">0</span>, -<span class="number">50</span>) <span class="comment">#ç”»ç¬”ç§»åŠ¨ï¼ˆç”±äºæ‚¬ç©ºï¼Œæ²¡æœ‰ç§»åŠ¨ç—•è¿¹ï¼‰</span></span><br><span class="line">turtle.pendown()    <span class="comment">#ç”»ç¬”æ”¾ä¸‹</span></span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">100</span>)</span><br><span class="line">turtle.penup()</span><br><span class="line">turtle.goto(<span class="number">0</span>, -<span class="number">100</span>)</span><br><span class="line">turtle.pendown()</span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">150</span>)</span><br></pre></td></tr></table></figure><p>åªç”»ä¸€ä¸ªåœ†æ—¶ï¼Œä¸éœ€è¦</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">turtle.penup()</span><br><span class="line">turtle.goto(<span class="number">0</span>, -<span class="number">50</span>)</span><br><span class="line">turtle.pendown()</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å®ç°åŒå¿ƒåœ†ï¼Œéœ€è¦åŠ ä¸Šã€‚<br>** ä¸åŠ åæœ **</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">50</span>)</span><br><span class="line"><span class="comment"># turtle.penup()</span></span><br><span class="line"><span class="comment"># turtle.goto(0, -50)</span></span><br><span class="line"><span class="comment"># turtle.pendown()</span></span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">100</span>)</span><br><span class="line">turtle.penup()</span><br><span class="line">turtle.goto(<span class="number">0</span>, -<span class="number">100</span>)</span><br><span class="line">turtle.pendown()</span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">150</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7zq6f14hkr.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7zq6f14hkr.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">50</span>)</span><br><span class="line"><span class="comment"># turtle.penup()</span></span><br><span class="line"><span class="comment"># turtle.goto(0, -50)</span></span><br><span class="line"><span class="comment"># turtle.pendown()</span></span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">100</span>)</span><br><span class="line"><span class="comment"># turtle.penup()</span></span><br><span class="line"><span class="comment"># turtle.goto(0, -100)</span></span><br><span class="line"><span class="comment"># turtle.pendown()</span></span><br><span class="line"></span><br><span class="line">turtle.circle(<span class="number">150</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3d4jec7wzp.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3d4jec7wzp.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½è½¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
            <tag> æ™ºèƒ½è½¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32è€ƒæ ¸ä½œä¸š</title>
      <link href="/2024/02/28/STM32%E8%80%83%E6%A0%B8%E4%BD%9C%E4%B8%9A/"/>
      <url>/2024/02/28/STM32%E8%80%83%E6%A0%B8%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>å¼€å‘æ¿èŠ¯ç‰‡ï¼šstm32g4rbt6;HALåº“å¼€å‘</p></div><details open><summary pointer> é¢˜ç›® </summary>              <div class='content'>              <ol><li>   å®šä¹‰ä¸€ä¸ªæŒ‰é”®1ï¼Œåˆ‡æ¢å±å¹•æ˜¾ç¤ºæ¨¡å¼ï¼Œå±å¹•æœ‰ä¸‰ç§æ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ˜¾ç¤ºå½“å‰å‘¼å¸ç¯çš„å ç©ºæ¯”çš„å€¼ï¼Œç¬¬äºŒä¸ªæ˜¾ç¤ºç”¨ç”µä½å™¨R37è°ƒèŠ‚è¾“å‡ºä¿¡å·å ç©ºæ¯”çš„å€¼ï¼Œç¬¬ä¸‰ä¸ªæ˜¯è®°å½•çŠ¶æ€ï¼šæ˜¾ç¤ºå‘¼å¸ç¯å’Œç”µä½å™¨è®°å½•æ—¶çš„pwmå€¼ï¼Œå¤„äºè®°å½•çŠ¶æ€æ—¶ï¼Œç”µä½å™¨çš„è¾“å‡ºä¿¡å·ä¸ä¼šè¢«æ”¹å˜</li><li>   åˆ‡æ¢ledæ¨¡å¼ï¼Œ<ol><li>LD1:å¤„äºå‘¼å¸ç¯pwmç•Œé¢ï¼ŒæŒ‡ç¤ºç¯LD1ç‚¹äº®ï¼Œå¦åˆ™ç†„ç­ã€‚</li><li>LD2: å¤„äºç”µä½å™¨pwmç•Œé¢ï¼ŒæŒ‡ç¤ºç¯LD2ä»¥0.5ç§’ä¸ºé—´éš”åˆ‡æ¢äº®ã€ç­çŠ¶æ€ã€‚</li><li>LD3:å¤„äºè®°å½•çŠ¶æ€æ—¶ï¼ŒæŒ‡ç¤ºç¯LD3ç‚¹äº®ï¼Œå¦åˆ™ç†„ç­ã€‚</li><li>LD4-LD8æŒ‡ç¤ºç¯å§‹ç»ˆå¤„äºç†„ç­çŠ¶æ€ã€‚</li></ol></li><li>   å®šä¹‰ä¸€ä¸ªæŒ‰é”®2ï¼Œå¯ä»¥è®°å½•å½“å‰pwmå€¼ï¼Œè®°å½•å½“å‰æ—¶é—´çš„å‘¼å¸ç¯å’Œç”µä½å™¨çš„å€¼ï¼Œåœ¨è®°å½•çŠ¶æ€æ—¶ä¼šå°†è®°å½•çš„å€¼æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li><li>   æ¥é€šç”µæºåå‘¼å¸ç¯äº®ç­å¾ªç¯ä¸‰ä¸ªæ¬¡ï¼Œä»¥åå‘¼å¸ç¯ä¸éœ€è¦äº®ï¼Œä½†æ˜¯è¦å¯ä»¥æ­£å¸¸è¯»åˆ°å‘¼å¸ç¯çš„pwmå€¼</li></ol>              </div>            </details><div class="video"><video controls preload><source src='/video/6FE627A7523A362DFBDAFF2659AAA047.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div><details open><summary pointer> æˆ‘çš„è§£ç­”ï¼ˆåæ­£éƒ½å®ç°äº†ï¼‰ </summary>              <div class='content'>              <p>ç›®å½•</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.92pvbkg3ve.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.92pvbkg3ve.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><details open><summary pointer> main.c </summary>              <div class='content'>              <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* USER CODE BEGIN Header */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  * @file           : main.c</span></span><br><span class="line"><span class="comment">  * @brief          : Main program body</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  * @attention</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Copyright (c) 2023 STMicroelectronics.</span></span><br><span class="line"><span class="comment">  * All rights reserved.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This software is licensed under terms that can be found in the LICENSE file</span></span><br><span class="line"><span class="comment">  * in the root directory of this software component.</span></span><br><span class="line"><span class="comment">  * If no LICENSE file comes with this software, it is provided AS-IS.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  ******************************************************************************</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">/* USER CODE END Header */</span></span><br><span class="line"><span class="comment">/* Includes ------------------------------------------------------------------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;adc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;tim.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;gpio.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private includes ----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN Includes */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;lcd.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;led.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;interrupt.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;aadc.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;string.h&quot;</span></span></span><br><span class="line"><span class="comment">/* USER CODE END Includes */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private typedef -----------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PTD */</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">struct</span> <span class="title class_">keys</span> key[];</span><br><span class="line"><span class="comment">//extern unsigned int ccrl_val1,ccrl_val2,frq1, frq2;</span></span><br><span class="line"><span class="type">int</span> DutyCycle2,DutyCycle3;</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span>  view=<span class="number">0</span>;</span><br><span class="line"><span class="type">uint32_t</span>tempCnt=<span class="number">0</span>;</span><br><span class="line"><span class="comment">/* USER CODE END PTD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private define ------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PD */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private macro -------------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PM */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private variables ---------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END PV */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private function prototypes -----------------------------------------------*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="comment">/* USER CODE BEGIN PFP */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">key_proc</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">disp_proc</span><span class="params">(<span class="type">uint32_t</span> i)</span></span>;</span><br><span class="line"><span class="comment">/* USER CODE END PFP */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Private user code ---------------------------------------------------------*/</span></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END 0 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  The application entry point.</span></span><br><span class="line"><span class="comment">  * @retval int</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 1 */</span></span><br><span class="line"><span class="type">uint32_t</span> temp_pwm,i;</span><br><span class="line"><span class="comment">//uint32_ttempCnt=0;</span></span><br><span class="line">  <span class="comment">/* USER CODE END 1 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* MCU Configuration--------------------------------------------------------*/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Reset of all peripherals, Initializes the Flash interface and the Systick. */</span></span><br><span class="line">  <span class="built_in">HAL_Init</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN Init */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE END Init */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Configure the system clock */</span></span><br><span class="line">  <span class="built_in">SystemClock_Config</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN SysInit */</span></span><br><span class="line"><span class="built_in">HAL_SYSTICK_Config</span>(<span class="number">80000000</span>/<span class="number">1000</span>);</span><br><span class="line">  <span class="comment">/* USER CODE END SysInit */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Initialize all configured peripherals */</span></span><br><span class="line">  <span class="built_in">MX_GPIO_Init</span>();</span><br><span class="line">  <span class="built_in">MX_TIM3_Init</span>();</span><br><span class="line">  <span class="built_in">MX_TIM4_Init</span>();</span><br><span class="line">  <span class="built_in">MX_ADC2_Init</span>();</span><br><span class="line">  <span class="built_in">MX_TIM16_Init</span>();</span><br><span class="line">  <span class="built_in">MX_TIM8_Init</span>();</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 2 */</span></span><br><span class="line"><span class="comment">/**********åˆå§‹åŒ–**********/</span></span><br><span class="line"><span class="comment">//LED_Disp(0x00);//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//LCD_Init();//LCDå±çš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">/**********åˆå§‹åŒ–**********/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********LEDé¢œè‰²**********/</span></span><br><span class="line"><span class="built_in">LCD_SetBackColor</span>(Black );</span><br><span class="line"><span class="built_in">LCD_SetTextColor</span>(White);</span><br><span class="line"><span class="comment">/**********LEDé¢œè‰²**********/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">HAL_TIM_PWM_Start_IT</span>(&amp;htim3,TIM_CHANNEL_3);</span><br><span class="line"><span class="built_in">HAL_TIM_PWM_Start_IT</span>(&amp;htim16,TIM_CHANNEL_1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//HAL_TIM_Base_Start_IT(&amp;htim3 );</span></span><br><span class="line"><span class="built_in">HAL_TIM_Base_Start_IT</span>(&amp;htim4 );</span><br><span class="line"></span><br><span class="line"><span class="built_in">HAL_TIM_IC_Start_IT</span> (&amp;htim3,TIM_CHANNEL_1);</span><br><span class="line"><span class="built_in">HAL_TIM_IC_Start_IT</span> (&amp;htim8,TIM_CHANNEL_1);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> w;</span><br><span class="line"><span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* USER CODE END 2 */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Infinite loop */</span></span><br><span class="line">  <span class="comment">/* USER CODE BEGIN WHILE */</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">/* USER CODE END WHILE */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* USER CODE BEGIN 3 */</span></span><br><span class="line"><span class="comment">//LED_Disp(0x00);//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">count++;</span><br><span class="line"><span class="keyword">if</span>(count==<span class="number">4</span>) &#123;</span><br><span class="line"><span class="built_in">LCD_Init</span>();<span class="comment">//LCDå±çš„åˆå§‹åŒ–</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(w=<span class="number">0</span>; w&lt;<span class="number">1000</span>; w+=<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">TIM3-&gt;CCR3 = w;</span><br><span class="line"><span class="built_in">key_proc</span>();</span><br><span class="line"><span class="comment">//if(key[2].single_flag==0) &#123;</span></span><br><span class="line"><span class="built_in">disp_proc</span>(w);</span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="built_in">HAL_Delay</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (w=<span class="number">1000</span>; w&gt;<span class="number">0</span>; w-=<span class="number">1</span>) &#123;</span><br><span class="line">TIM3-&gt;CCR3 = w;</span><br><span class="line"><span class="built_in">key_proc</span>();</span><br><span class="line"><span class="comment">//if(key[2].single_flag==0) &#123;</span></span><br><span class="line"><span class="built_in">disp_proc</span>(w);</span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="built_in">HAL_Delay</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* USER CODE END 3 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief System Clock Configuration</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">SystemClock_Config</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  RCC_OscInitTypeDef RCC_OscInitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">  RCC_ClkInitTypeDef RCC_ClkInitStruct = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Configure the main internal regulator output voltage</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="built_in">HAL_PWREx_ControlVoltageScaling</span>(PWR_REGULATOR_VOLTAGE_SCALE1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Initializes the RCC Oscillators according to the specified parameters</span></span><br><span class="line"><span class="comment">  * in the RCC_OscInitTypeDef structure.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;</span><br><span class="line">  RCC_OscInitStruct.HSEState = RCC_HSE_ON;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLM = RCC_PLLM_DIV3;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLN = <span class="number">20</span>;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLQ = RCC_PLLQ_DIV2;</span><br><span class="line">  RCC_OscInitStruct.PLL.PLLR = RCC_PLLR_DIV2;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">HAL_RCC_OscConfig</span>(&amp;RCC_OscInitStruct) != HAL_OK)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">Error_Handler</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Initializes the CPU, AHB and APB buses clocks</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK</span><br><span class="line">                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;</span><br><span class="line">  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;</span><br><span class="line">  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;</span><br><span class="line">  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;</span><br><span class="line">  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">HAL_RCC_ClockConfig</span>(&amp;RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">Error_Handler</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE BEGIN 4 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********æŒ‰é”®1åˆ‡æ¢å±å¹•æ˜¾ç¤ºæ¨¡å¼**********/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">key_proc</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">0</span>].single_flag==<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">3</span>) &#123;</span><br><span class="line">view=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">view++;</span><br><span class="line"><span class="built_in">LCD_Init</span>();<span class="comment">//LCDå±çš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">LCD_Clear</span>(Black );</span><br><span class="line"></span><br><span class="line">key[<span class="number">0</span>].single_flag=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(key[<span class="number">1</span>].single_flag==<span class="number">1</span>) &#123;</span><br><span class="line">DutyCycle2 = (TIM3-&gt;CCR3+<span class="number">1</span>)/(TIM3-&gt;CCR4 + <span class="number">1</span>)<span class="number">-1</span>;</span><br><span class="line">DutyCycle3 = (TIM16-&gt;CCR1+<span class="number">1</span>)/(TIM16-&gt;CCR2 + <span class="number">1</span>)<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">key[<span class="number">1</span>].single_flag=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">disp_proc</span><span class="params">(<span class="type">uint32_t</span> i)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//LCD_Init();//LCDå±çš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//LED_Disp(0x00);//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//LCD_Clear(Black);</span></span><br><span class="line"><span class="built_in">led</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">led</span>(<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> DutyCycle = (TIM3-&gt;CCR3+<span class="number">1</span>)/(TIM3-&gt;CCR4 + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> m=i/<span class="number">10</span>;</span><br><span class="line"><span class="type">char</span> text1[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(text1,<span class="number">30</span>,<span class="string">&quot;       Breath       &quot;</span>);</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line1,(<span class="type">uint8_t</span> *)text1);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> texta[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(texta,<span class="number">30</span>,<span class="string">&quot;   Duty_ratio:%d%%   &quot;</span>,DutyCycle/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line5,(<span class="type">uint8_t</span> *)texta);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">2</span>) &#123;</span><br><span class="line"><span class="comment">//LED_Disp(0x00);//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">//HAL_StatusTypeDef HAL_TIM_PWM_Stop_IT(&amp;htim3,TIM_CHANNEL_3);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//LCD_Clear(Black);</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> text2[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(text2,<span class="number">30</span>,<span class="string">&quot;         R37        &quot;</span>);</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line1,(<span class="type">uint8_t</span> *)text2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n=<span class="number">100</span>*(<span class="number">1</span>-(<span class="built_in">getADC</span> (&amp;hadc2)/<span class="number">3.25</span>));</span><br><span class="line">TIM16-&gt;CCR1 = n;</span><br><span class="line"><span class="type">int</span> DutyCycle = (TIM16-&gt;CCR1+<span class="number">1</span>)/(TIM16-&gt;CCR2 + <span class="number">1</span>)<span class="number">-1</span>;</span><br><span class="line"><span class="type">char</span> textb[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(textb,<span class="number">30</span>,<span class="string">&quot;   Duty_ratio:%d%%  &quot;</span>,DutyCycle);</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line5,(<span class="type">uint8_t</span> *)textb);</span><br><span class="line"><span class="comment">/**********ledé—ªçƒ**********/</span></span><br><span class="line"><span class="built_in">led</span>(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">HAL_GetTick</span>()-tempCnt&gt;<span class="number">500</span>) &#123;</span><br><span class="line"><span class="built_in">HAL_GPIO_TogglePin</span> (GPIOC,GPIO_PIN_9);</span><br><span class="line">tempCnt =<span class="built_in">HAL_GetTick</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**********ledé—ªçƒ**********/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(view==<span class="number">3</span>) &#123;</span><br><span class="line"><span class="comment">//LED_Disp(0x00);//LEDçš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="built_in">led</span>(<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">led</span>(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> text2[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(text2,<span class="number">30</span>,<span class="string">&quot;       Record       &quot;</span>);</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span> (Line1,(<span class="type">uint8_t</span> *)text2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//int DutyCycle1 = (TIM16-&gt;CCR1+1)/(TIM16-&gt;CCR2 + 1)-1;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//int m=i/10;</span></span><br><span class="line"><span class="comment">//LCD_Clear(Black);</span></span><br><span class="line"><span class="type">char</span> textb[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(textb,<span class="number">30</span>,<span class="string">&quot;      Breath:%d%%     &quot;</span>,DutyCycle2/<span class="number">10</span> );</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line4,(<span class="type">uint8_t</span> *)textb);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> textc[<span class="number">30</span>];</span><br><span class="line"><span class="built_in">snprintf</span>(textc,<span class="number">30</span>,<span class="string">&quot;       R37:%d%%       &quot;</span>,DutyCycle3 );</span><br><span class="line"><span class="built_in">LCD_DisplayStringLine</span>(Line6,(<span class="type">uint8_t</span> *)textc);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* USER CODE END 4 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  This function is executed in case of error occurrence.</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Error_Handler</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN Error_Handler_Debug */</span></span><br><span class="line"><span class="comment">/* User can add his own implementation to report the HAL error return state */</span></span><br><span class="line">__disable_irq();</span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* USER CODE END Error_Handler_Debug */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span>  USE_FULL_ASSERT</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @brief  Reports the name of the source file and the source line number</span></span><br><span class="line"><span class="comment">  *         where the assert_param error has occurred.</span></span><br><span class="line"><span class="comment">  * @param  file: pointer to the source file name</span></span><br><span class="line"><span class="comment">  * @param  line: assert_param error line source number</span></span><br><span class="line"><span class="comment">  * @retval None</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">assert_failed</span><span class="params">(<span class="type">uint8_t</span> *file, <span class="type">uint32_t</span> line)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">/* USER CODE BEGIN 6 */</span></span><br><span class="line"><span class="comment">/* User can add his own implementation to report the file name and line number,</span></span><br><span class="line"><span class="comment">   ex: printf(&quot;Wrong parameters value: file %s on line %d\r\n&quot;, file, line) */</span></span><br><span class="line">  <span class="comment">/* USER CODE END 6 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">/* USE_FULL_ASSERT */</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><details open><summary pointer> led </summary>              <div class='content'>              <details open><summary pointer> led.h </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _LED_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _LED_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">led</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> a)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LED_Disp</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> dsLED)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>              </div>            </details><details open><summary pointer> led.c </summary>              <div class='content'>              <figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#include</span> &quot;led<span class="selector-class">.h</span>&quot;</span><br><span class="line"></span><br><span class="line">void <span class="built_in">led</span>(int x,int a)</span><br><span class="line">&#123;</span><br><span class="line">int pin;</span><br><span class="line"><span class="built_in">switch</span>(x)</span><br><span class="line">&#123;</span><br><span class="line">case <span class="number">1</span>:pin=GPIO_PIN_8;break;</span><br><span class="line">case <span class="number">2</span>:pin=GPIO_PIN_9;break;</span><br><span class="line">case <span class="number">3</span>:pin=GPIO_PIN_10;break;</span><br><span class="line">case <span class="number">4</span>:pin=GPIO_PIN_11;break;</span><br><span class="line">case <span class="number">5</span>:pin=GPIO_PIN_12;break;</span><br><span class="line">case <span class="number">6</span>:pin=GPIO_PIN_13;break;</span><br><span class="line">case <span class="number">7</span>:pin=GPIO_PIN_14;break;</span><br><span class="line">case <span class="number">8</span>:pin=GPIO_PIN_15;break;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">if</span>(a==<span class="number">0</span>)<span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,pin,GPIO_PIN_SET);</span><br><span class="line"><span class="built_in">if</span>(a==<span class="number">1</span>)<span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,pin,GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOD,GPIO_PIN_2,GPIO_PIN_SET);</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">void <span class="built_in">LED_Disp</span>(unsigned char dsLED)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_8,GPIO_PIN_SET );</span><br><span class="line">  <span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_9,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_10,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_11,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_12,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_13,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_14,GPIO_PIN_SET );</span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,GPIO_PIN_15,GPIO_PIN_SET );</span><br><span class="line"></span><br><span class="line"><span class="built_in">HAL_GPIO_WritePin</span>(GPIOC,dsLED&lt;&lt;<span class="number">8</span>,GPIO_PIN_RESET );</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  led(2,0);</span></span><br><span class="line"><span class="comment">//led(3,0);</span></span><br><span class="line"><span class="comment">//led(4,0);</span></span><br><span class="line"><span class="comment">//led(5,0);</span></span><br><span class="line"><span class="comment">//  led(6,0);</span></span><br><span class="line"><span class="comment">//led(7,0);</span></span><br><span class="line"><span class="comment">//led(8,0);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET );</span></span><br><span class="line"><span class="comment">//HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_SET );</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details>              </div>            </details><details open><summary pointer> lcd </summary>              <div class='content'>              <p>æ¯”èµ›èµ„æºåŒ…é‡Œè‡ªå¸¦</p>              </div>            </details><details open><summary pointer> interrupt </summary>              <div class='content'>              <details open><summary pointer> interrupt.h </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _INTERRUPT_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _INTERRUPT_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stdbool.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">HAL_TIM_PeriodElapsedCallback</span><span class="params">(TIM_HandleTypeDef *htim)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">keys</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> judge_sta;</span><br><span class="line"><span class="type">bool</span> key_sta;</span><br><span class="line"><span class="type">bool</span>  single_flag;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>              </div>            </details><details open><summary pointer> interrupt.c </summary>              <div class='content'>              <figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#include <span class="string">&quot;interrupt.h&quot;</span></span><br><span class="line"></span><br><span class="line">struct keys <span class="built_in">key</span>[<span class="number">4</span>] = &#123;&#123;<span class="number">0</span>, <span class="literal">false</span>,<span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="literal">false</span>, <span class="number">0</span>&#125;,&#123;<span class="number">0</span>, <span class="literal">false</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="literal">false</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line"><span class="comment">//case0åˆ¤æ–­æŒ‰é’®æœ‰æ²¡æœ‰æŒ‰ä¸‹ï¼Œcase1æ¶ˆæŠ–åŠŸèƒ½ï¼Œcase2åˆ¤æ–­æŒ‰é’®å·²ç»æ¾å¼€</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">HAL_TIM_PeriodElapsedCallback</span>(TIM_HandleTypeDef *htim)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(htim-&gt;Instance==TIM4)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">key</span>[<span class="number">0</span>].<span class="property">key_sta</span>=<span class="title function_">HAL_GPIO_ReadPin</span> (GPIOB,GPIO_PIN_0 );</span><br><span class="line"><span class="built_in">key</span>[<span class="number">1</span>].<span class="property">key_sta</span>=<span class="title function_">HAL_GPIO_ReadPin</span> (GPIOB,GPIO_PIN_1 );</span><br><span class="line"><span class="built_in">key</span>[<span class="number">2</span>].<span class="property">key_sta</span>=<span class="title function_">HAL_GPIO_ReadPin</span> (GPIOB,GPIO_PIN_2 );</span><br><span class="line"><span class="built_in">key</span>[<span class="number">3</span>].<span class="property">key_sta</span>=<span class="title function_">HAL_GPIO_ReadPin</span> (GPIOB,GPIO_PIN_3 );</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="title function_">switch</span> (<span class="built_in">key</span>[i].<span class="property">judge_sta</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">key</span>[i].<span class="property">key_sta</span>==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">key</span>[i].<span class="property">judge_sta</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">key</span>[i].<span class="property">key_sta</span>==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">key</span>[i].<span class="property">judge_sta</span>=<span class="number">2</span>;</span><br><span class="line"><span class="built_in">key</span>[i].<span class="property">single_flag</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="built_in">key</span>[i].<span class="property">judge_sta</span>=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">key</span>[i].<span class="property">key_sta</span>==<span class="number">1</span>)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">key</span>[i].<span class="property">judge_sta</span>=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details>              </div>            </details><details open><summary pointer> ADC </summary>              <div class='content'>              <details open><summary pointer> aadc.h </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">getADC</span><span class="params">(ADC_HandleTypeDef *pin)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><details open><summary pointer> aadc.c </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;aadc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">getADC</span><span class="params">(ADC_HandleTypeDef *pin)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> adc;</span><br><span class="line"><span class="built_in">HAL_ADC_Start</span>(pin);</span><br><span class="line">adc=<span class="built_in">HAL_ADC_GetValue</span>(pin);</span><br><span class="line"><span class="keyword">return</span> adc*<span class="number">3.3</span>/<span class="number">4096</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details>              </div>            </details>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°(ä¸‰):ç‚¹äº®LED</title>
      <link href="/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%89-%E7%82%B9%E4%BA%AELED/"/>
      <url>/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%89-%E7%82%B9%E4%BA%AELED/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>å¼€å‘æ¿èŠ¯ç‰‡ï¼šstm32g4rbt6;HALåº“å¼€å‘</p></div><p>æ¥ç€ç”¨(äºŒ)ä¸­é…ç½®å¥½çš„å·¥ç¨‹æ¨¡æ¿</p><h1 id="LED"><a href="#LED" class="headerlink" title="LED"></a>LED</h1><span class='pbg info'>LEDç”µè·¯</span><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7zq60sv69o.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7zq60sv69o.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>LEDå¼•è„š:<code>PC8-PC15</code><br><code>PD2</code>:é”å­˜å™¨çš„æ§åˆ¶ç«¯å£</p><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><h3 id="ä½¿èƒ½éœ€è¦çš„ç«¯å£"><a href="#ä½¿èƒ½éœ€è¦çš„ç«¯å£" class="headerlink" title="ä½¿èƒ½éœ€è¦çš„ç«¯å£"></a>ä½¿èƒ½éœ€è¦çš„ç«¯å£</h3><p>ä¾æ¬¡ä½¿èƒ½<code>PC8-PC15</code>ä¸º<code>GPIO_Output</code></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4ckmdaj16i.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4ckmdaj16i.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä½¿èƒ½<code>PD2</code>ä¸º<code>GPIO_Output</code></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1lbk57zxpl.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1lbk57zxpl.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="é…ç½®åˆå§‹å¼•è„šç”µå¹³"><a href="#é…ç½®åˆå§‹å¼•è„šç”µå¹³" class="headerlink" title="é…ç½®åˆå§‹å¼•è„šç”µå¹³"></a>é…ç½®åˆå§‹å¼•è„šç”µå¹³</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.9dcp4v1p14.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.9dcp4v1p14.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æŠŠ<code>PC8-PC15</code>çš„<code>GPIO output level</code>è®¾ç½®ä¸º<code>High</code></p><details open><summary pointer> WHY </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvgt2uwod.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvgt2uwod.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>å·¦è¾¹æ˜¯æ‹‰é«˜çš„ï¼ˆé«˜ç”µå¹³ï¼‰ï¼ˆï¼ˆä¸€ï¼‰ä¸­æœ‰VDDçš„ä»‹ç»ï¼‰æ‰€ä»¥å½“å³è¾¹æ˜¯ä½ç”µå¹³æ—¶ï¼Œæœ‰ç”µæµé€šè¿‡ï¼ŒLEDè¢«ç‚¹äº®ã€‚ä¸ºäº†åˆå§‹æ—¶æ˜¯LEDæ˜¯ç†„ç­çŠ¶æ€ï¼Œæˆ‘ä»¬è¿™é‡ŒæŠŠå¼•è„šè®¾ç½®æˆé«˜ç”µå¹³ï¼ˆHighï¼‰              </div>            </details><span class='pbg info'>PD2:é«˜ç”µå¹³ä½¿èƒ½ï¼Œä½ç”µå¹³å…³é—­</span><details open><summary pointer> é€‰é¡¹è§£é‡Š </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.8s31jlgtbg.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.8s31jlgtbg.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><ul><li>Pin Nameï¼ˆå¼•è„šåç§°ï¼‰: å¼•è„šçš„æ ‡è¯†ç¬¦ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„ GPIO å¼•è„šã€‚</li><li>Signal on Pinï¼ˆå¼•è„šçš„ä¿¡å·ï¼‰: æè¿°è¯¥å¼•è„šçš„ä¿¡å·çŠ¶æ€ï¼Œå¦‚é«˜ç”µå¹³æˆ–ä½ç”µå¹³ã€‚</li><li>GPIO output levelï¼ˆGPIO è¾“å‡ºç”µå¹³ï¼‰: GPIO å¼•è„šçš„è¾“å‡ºç”µå¹³ï¼Œå³å¼•è„šè¾“å‡ºçš„ä¿¡å·çŠ¶æ€ã€‚</li><li>GPIO modeï¼ˆGPIO æ¨¡å¼ï¼‰: GPIO å¼•è„šçš„æ¨¡å¼æè¿°ï¼Œå¦‚è¾“å…¥æ¨¡å¼æˆ–è¾“å‡ºæ¨¡å¼ã€‚</li><li>GPIO Pull-up&#x2F;Pull-downï¼ˆGPIO ä¸Šæ‹‰&#x2F;ä¸‹æ‹‰ï¼‰: æè¿°æ˜¯å¦å¯ç”¨äº†å¼•è„šçš„ä¸Šæ‹‰æˆ–ä¸‹æ‹‰ç”µé˜»ã€‚</li><li>Maximum output speedï¼ˆæœ€å¤§è¾“å‡ºé€Ÿåº¦ï¼‰: GPIO å¼•è„šçš„æœ€å¤§è¾“å‡ºé€Ÿåº¦ã€‚</li><li>Fast Modeï¼ˆå¿«é€Ÿæ¨¡å¼ï¼‰: æ˜¯å¦å¯ç”¨äº† GPIO çš„å¿«é€Ÿæ¨¡å¼ã€‚</li><li>User Labelï¼ˆç”¨æˆ·æ ‡ç­¾ï¼‰: ç”¨æˆ·è‡ªå®šä¹‰çš„å¼•è„šæ ‡ç­¾ã€‚</li><li>Modifiedï¼ˆä¿®æ”¹ï¼‰: æè¿°å¼•è„šæ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚</li></ul>              </div>            </details><h3 id="ç”Ÿæˆå·¥ç¨‹"><a href="#ç”Ÿæˆå·¥ç¨‹" class="headerlink" title="ç”Ÿæˆå·¥ç¨‹"></a>ç”Ÿæˆå·¥ç¨‹</h3><p><strong>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</strong></p><h3 id="æ–°å»ºæ–‡ä»¶"><a href="#æ–°å»ºæ–‡ä»¶" class="headerlink" title="æ–°å»ºæ–‡ä»¶"></a>æ–°å»ºæ–‡ä»¶</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.5tqrg3tfdf.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.5tqrg3tfdf.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><strong>æ–°å»ºä¸¤ä¸ªæ–‡ä»¶</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.73tomfdt6w.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.73tomfdt6w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¿å­˜ä¸º<code>led.c</code>å’Œ<code>led.h</code>åˆ°æ ¹ç›®å½•<code>bsp</code>æ–‡ä»¶å¤¹ä¸­</p><h3 id="æ·»åŠ led-cåˆ°é¡¹ç›®bspæ–‡ä»¶å¤¹ä¸­"><a href="#æ·»åŠ led-cåˆ°é¡¹ç›®bspæ–‡ä»¶å¤¹ä¸­" class="headerlink" title="æ·»åŠ led.cåˆ°é¡¹ç›®bspæ–‡ä»¶å¤¹ä¸­"></a>æ·»åŠ led.cåˆ°é¡¹ç›®bspæ–‡ä»¶å¤¹ä¸­</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7i04daq5g5.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7i04daq5g5.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="æ·»åŠ led-håˆ°Include-Pathsä¸­"><a href="#æ·»åŠ led-håˆ°Include-Pathsä¸­" class="headerlink" title="æ·»åŠ led.håˆ°Include Pathsä¸­"></a>æ·»åŠ led.håˆ°Include Pathsä¸­</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvgt7me5l.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvgt7me5l.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="åœ¨main-hé‡Œå®šä¹‰ç±»å‹ç®€å†™"><a href="#åœ¨main-hé‡Œå®šä¹‰ç±»å‹ç®€å†™" class="headerlink" title="åœ¨main.hé‡Œå®šä¹‰ç±»å‹ç®€å†™"></a>åœ¨main.hé‡Œå®šä¹‰ç±»å‹ç®€å†™</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7smy6kj9gd.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7smy6kj9gd.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="LEDé©±åŠ¨ä»£ç "><a href="#LEDé©±åŠ¨ä»£ç " class="headerlink" title="LEDé©±åŠ¨ä»£ç "></a>LEDé©±åŠ¨ä»£ç </h2><h3 id="led-h"><a href="#led-h" class="headerlink" title="led.h"></a>led.h</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _LED_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _LED_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Disp</span><span class="params">(uchar dsLED)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><details open><summary pointer> è¯¦ç»†è§£é‡Š </summary>              <div class='content'>              <p>è¿™æ®µä»£ç æ˜¯ C&#x2F;C++ ä¸­çš„é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼Œç”¨äºæ¡ä»¶ç¼–è¯‘ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼š</p><ul><li><code>#ifndef _LED_H</code>_ è¡¨ç¤ºå¦‚æœ <code>_LED_H_</code> è¿™ä¸ªå®æœªå®šä¹‰ï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚åœ¨è¿™é‡Œï¼Œé€šå¸¸ç”¨æ¥é˜²æ­¢å¤´æ–‡ä»¶çš„é‡å¤åŒ…å«ï¼Œç¡®ä¿å¤´æ–‡ä»¶åªè¢«åŒ…å«ä¸€æ¬¡ã€‚</li><li><code>#define _LED_H_</code> å®šä¹‰äº†å® <code>_LED_H_</code>ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ªå¤´æ–‡ä»¶å·²ç»è¢«åŒ…å«ã€‚</li><li><code>#endif</code> è¡¨ç¤ºæ¡ä»¶ç¼–è¯‘çš„ç»“æŸã€‚<br>ä¸‹åˆ’çº¿ï¼ˆ<code>_</code>ï¼‰åœ¨ C&#x2F;C++ ä¸­è¡¨ç¤ºå‰ç¼€ä¿ç•™ç»™ç¼–è¯‘å™¨å’Œæ ‡å‡†åº“æ¥ä½¿ç”¨çš„æ ‡è¯†ç¬¦ã€‚åœ¨è¿™é‡Œçš„ <code>_LED_H_</code> ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªå¤´æ–‡ä»¶çš„å®å®šä¹‰ï¼Œä»¥é¿å…å¯èƒ½çš„å‘½åå†²çªã€‚</li></ul><p>å…·ä½“æ¥è®²ï¼Œå½“ç¬¬ä¸€æ¬¡åŒ…å«å¤´æ–‡ä»¶æ—¶ï¼Œè¯¥å®ä¼šè¢«å®šä¹‰ï¼Œé˜²æ­¢å†æ¬¡åŒ…å«ï¼›åç»­å†æ¬¡å°è¯•åŒ…å«åŒä¸€å¤´æ–‡ä»¶æ—¶ï¼Œåœ¨æ–‡ä»¶ä¸€å¼€å§‹æ£€æŸ¥è¯¥å®æ˜¯å¦å·²ç»å®šä¹‰ï¼Œå¦‚æœå·²ç»å®šä¹‰äº†ï¼Œå°±ä¸å†è¿›è¡Œå®é™…çš„ä»£ç åŒ…å«ï¼Œä»è€Œé¿å…äº†å¤´æ–‡ä»¶çš„é‡å¤å®šä¹‰å’Œå¼•ç”¨ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„é˜²æ­¢å¤´æ–‡ä»¶é‡å¤åŒ…å«çš„åšæ³•ï¼Œé€šå¸¸ç§°ä¸ºâ€œå¤´æ–‡ä»¶ä¿æŠ¤â€ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å½¢å¼çš„å®æ ‡è¯†æ¥å®ç°åŒæ ·çš„æ•ˆæœã€‚</p>              </div>            </details><h3 id="led-c"><a href="#led-c" class="headerlink" title="led.c"></a>led.c</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;led.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">LED_Disp</span><span class="params">(uchar dsLED)</span></span><br><span class="line">&#123;</span><br><span class="line">HAL_GPIO_WritePin(GPIOC,GPIO_PIN_All,GPIO_PIN_SET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOC,dsLED&lt;&lt;<span class="number">8</span>,GPIO_PIN_RESET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_SET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details open><summary pointer> HAL_GPIO_WritePin </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.67x774nyem.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.67x774nyem.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><ul><li><details open><summary pointer> â‘ GPIO_TypeDef </summary>            <div class='content'>            <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.51dvyj4mt8.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.51dvyj4mt8.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><span class='pbg info'>ç±»å‹å®šä¹‰ç»“æ„ä½“ï¼Œå®šä¹‰äº†ä¸€äº›å¯„å­˜å™¨çš„åç§°</span><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.45f4pqkpy.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.45f4pqkpy.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>è¿™æ®µä»£ç ä½¿ç”¨äº†å®å®šä¹‰æ¥å®šä¹‰äº†ä¸€ç³»åˆ—çš„GPIOç«¯å£ï¼Œå°†å®ƒä»¬æ˜ å°„åˆ°å¯¹åº”çš„åŸºåœ°å€ä¸Šï¼Œå¹¶å°†å…¶ç±»å‹è½¬æ¢ä¸ºGPIO_TypeDef*ç±»å‹ã€‚<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">WHYè½¬æ¢ä¸ºGPIO_TypeDef*ç±»å‹:</span></span><br><span class="line">æ¯ä¸ªGPIOç«¯å£åœ¨å¾®æ§åˆ¶å™¨ä¸­éƒ½æœ‰ä¸ä¹‹ç›¸å…³è”çš„å¯„å­˜å™¨ã€‚è¿™äº›å¯„å­˜å™¨é€šå¸¸ç”¨äº</span><br><span class="line">é…ç½®å’Œæ§åˆ¶å¯¹åº”çš„GPIOç«¯å£ï¼ŒåŒ…æ‹¬è®¾ç½®å¼•è„šçš„è¾“å…¥/è¾“å‡ºçŠ¶æ€ã€è®¾ç½®å¼•è„šçš„</span><br><span class="line">ç”µå¹³çŠ¶æ€ã€é…ç½®å¼•è„šçš„ä¸­æ–­ç­‰åŠŸèƒ½ã€‚</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.45hej3wglg.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.45hej3wglg.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><span class='pbg info'>AHBå’ŒAPB</span><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">AHB(Advanced High-performance <span class="keyword">Bus), </span>é«˜é€Ÿæ€»çº¿ï¼Œç”¨æ¥æ¥é«˜é€Ÿå¤–è®¾çš„ã€‚</span><br><span class="line">APB (Advanced Peripheral <span class="keyword">Bus) </span>ä½é€Ÿæ€»çº¿ï¼Œç”¨æ¥æ¥ä½é€Ÿå¤–è®¾çš„ã€‚</span><br><span class="line">æ€»çº¿ï¼ˆ<span class="keyword">Busï¼‰ </span></span><br><span class="line">æ˜¯è®¡ç®—æœºå„ç§åŠŸèƒ½éƒ¨ä»¶ä¹‹é—´ä¼ é€ä¿¡æ¯çš„ å…¬å…±é€šä¿¡å¹²çº¿</span><br><span class="line">å¦‚æœè¯´ ä¸»æ¿ï¼ˆMother <span class="keyword">Boardï¼‰æ˜¯ä¸€åº§åŸå¸‚ï¼Œé‚£ä¹ˆ </span>æ€»çº¿ </span><br><span class="line">å°±åƒæ˜¯åŸå¸‚é‡Œçš„å…¬å…±æ±½è½¦ï¼ˆ<span class="keyword">busï¼‰ï¼Œ</span></span><br><span class="line"><span class="keyword"></span>èƒ½æŒ‰ç…§å›ºå®šè¡Œè½¦è·¯çº¿ï¼Œä¼ è¾“æ¥å›ä¸åœè¿ä½œçš„æ¯”ç‰¹ï¼ˆ<span class="keyword">bitï¼‰</span></span><br><span class="line"><span class="keyword"></span>æŒ‰ç…§è®¡ç®—æœºæ‰€ä¼ è¾“çš„ ä¿¡æ¯ç§ç±»ï¼Œè®¡ç®—æœºçš„æ€»çº¿</span><br><span class="line">å¯ä»¥åˆ’åˆ†ä¸º æ•°æ®æ€»çº¿ã€åœ°å€æ€»çº¿ å’Œ æ§åˆ¶æ€»çº¿ï¼Œ</span><br><span class="line">åˆ†åˆ«ç”¨æ¥ä¼ è¾“æ•°æ®ã€æ•°æ®åœ°å€å’Œæ§åˆ¶ä¿¡å·</span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lttrcyxg.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lttrcyxg.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>                </div>          </details></li></ul><ul><li><details open><summary pointer> uint16_t </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1aoqdb3yi7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1aoqdb3yi7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>æ— ç¬¦å·çŸ­æ•´å‹ï¼Œå ç”¨16ä½ï¼ˆå³2ä¸ªå­—èŠ‚ï¼‰çš„å†…å­˜ç©ºé—´ã€‚åœ¨Cå’ŒC++ä¸­ï¼Œuint16_té€šå¸¸ç”¨æ¥è¡¨ç¤ºæ— ç¬¦å·çš„16ä½æ•´æ•°ã€‚è¿™æ ·å®šä¹‰ä¾¿äºä»£ç çš„å¯è¯»æ€§å’Œç§»æ¤æ€§ï¼Œå› ä¸ºä¸åŒå¹³å°ä¸‹è¿™æ ·çš„æ•°æ®ç±»å‹å¤§å°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿uint16_tå§‹ç»ˆè¡¨ç¤ºä¸€ä¸ª16ä½çš„æ— ç¬¦å·æ•´æ•°ã€‚              </div>            </details></li><li><details open><summary pointer> â‘¢ GPIO_PinState </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* @brief  GPIO Bit SET and Bit RESET enumeration</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">GPIO_PIN_RESET = <span class="number">0U</span>,</span><br><span class="line">GPIO_PIN_SET</span><br><span class="line">&#125; GPIO_PinState;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªæšä¸¾ç±»å‹<code>GPIO_PinState</code>ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªæšä¸¾å¸¸é‡<code>GPIO_PIN_RESET</code>å’Œ<code>GPIO_PIN_SET</code>ã€‚åœ¨è¿™ä¸ªæšä¸¾ç±»å‹ä¸­ï¼Œ<code>GPIO_PIN_RESET</code>è¢«èµ‹å€¼ä¸º0ï¼Œè€Œ<code>GPIO_PIN_SET</code>æœªè¢«æ˜¾å¼èµ‹å€¼ï¼Œå®ƒå°†è‡ªåŠ¨è¢«èµ‹å€¼ä¸ºä¸Šä¸€ä¸ªæšä¸¾å¸¸é‡çš„å€¼åŠ 1ï¼Œå³ä¸º1ã€‚è¿™ç§ç®€å•çš„æšä¸¾ç±»å‹é€šå¸¸ç”¨äºè¡¨ç¤ºå¼€å…³çŠ¶æ€ã€ä¼ æ„Ÿå™¨çŠ¶æ€ç­‰å…·æœ‰ä¸¤ç§çŠ¶æ€çš„æƒ…å†µã€‚<code>GPIO_PIN_RESET</code>è¡¨ç¤ºGPIOå¼•è„šå¤ä½çŠ¶æ€ï¼Œ<code>GPIO_PIN_SET</code>è¡¨ç¤ºGPIOå¼•è„šè®¾ç½®çŠ¶æ€ã€‚</p>              </div>            </details></li><li><details open><summary pointer> â‘£ assert_param(IS_GPIO_PIN(GPIO_Pin)); </summary>              <div class='content'>              <p><strong>IS_GPIO_PIN()</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> IS_GPIO_PIN(__PIN__)        ((((uint32_t)(__PIN__) &amp; GPIO_PIN_MASK) != 0x00U) &amp;&amp;\</span></span><br><span class="line"><span class="meta">                             (((uint32_t)(__PIN__) &amp; ~GPIO_PIN_MASK) == 0x00U))</span></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç‰‡æ®µæ˜¯ç”¨äºå®šä¹‰ä¸€ä¸ªå®ï¼ˆmacroï¼‰ï¼Œç”¨äºéªŒè¯ç»™å®šçš„GPIOå¼•è„š<br>æ˜¯å¦æœ‰æ•ˆã€‚è®©æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„å«ä¹‰ï¼š</p><ol><li><code>#define IS_GPIO_PIN(__PIN__)</code>ï¼šè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸º<br><code>IS_GPIO_PIN</code>çš„å®ï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„GPIOå¼•è„šæ˜¯å¦æœ‰æ•ˆã€‚</li><li><code>((((uint32_t)(__PIN__) &amp; GPIO_PIN_MASK) != 0x00U)</code>ï¼š<br>è¿™éƒ¨åˆ†ä»£ç æ˜¯å¯¹ç»™å®šå¼•è„šè¿›è¡Œä½è¿ç®—ï¼Œé€šè¿‡ANDæ“ä½œç¬¦<code>&amp;</code>ä¸<br><code>GPIO_PIN_MASK</code>è¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤æ–­æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªä½ä¸æ“ä½œç»“æœä¸ä¸º0ã€‚</li><li><code>&amp;&amp;</code>ï¼šè¿™é‡Œä½¿ç”¨é€»è¾‘ä¸è¿ç®—ç¬¦ï¼Œç¡®ä¿ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ã€‚</li><li><code>(((uint32_t)(__PIN__) &amp; ~GPIO_PIN_MASK) == 0x00U))</code>ï¼š<br>è¿™éƒ¨åˆ†ä»£ç å°†ç»™å®šçš„å¼•è„šä¸å–åçš„<code>GPIO_PIN_MASK</code>è¿›è¡ŒANDæ“ä½œï¼Œ<br>åˆ¤æ–­æ˜¯å¦æ‰€æœ‰ä½å‡ä¸º0ã€‚<br><strong>assert_param()</strong><br> ç®€å•åœ°è®²ï¼Œæ–­è¨€å°±æ˜¯å¯¹æŸç§å‡è®¾æ¡ä»¶è¿›è¡Œæ£€æŸ¥ã€‚ åœ¨ C è¯­è¨€ä¸­ï¼Œæ–­è¨€è¢«å®šä¹‰<br>ä¸ºå®çš„å½¢å¼ï¼ˆassert(expression)ï¼‰ï¼Œè€Œä¸æ˜¯å‡½æ•°ï¼Œå…¶åŸå‹å®šä¹‰åœ¨<br>&lt;assert.h&gt; æ–‡ä»¶ä¸­ã€‚å…¶ä¸­ï¼Œassert å°†é€šè¿‡æ£€æŸ¥è¡¨è¾¾å¼ expression<br>çš„å€¼æ¥å†³å®šæ˜¯å¦éœ€è¦ç»ˆæ­¢æ‰§è¡Œç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¡¨è¾¾å¼ expression<br>çš„å€¼ä¸ºå‡ï¼ˆå³ä¸º 0ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†é¦–å…ˆå‘æ ‡å‡†é”™è¯¯æµ stderræ‰“å°ä¸€æ¡<br>å‡ºé”™ä¿¡æ¯ï¼Œç„¶åå†é€šè¿‡è°ƒç”¨ abort å‡½æ•°ç»ˆæ­¢ç¨‹åºè¿è¡Œï¼›å¦åˆ™ï¼Œassert<br>æ— ä»»ä½•ä½œç”¨ã€‚<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.60tzbrj4hl.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.60tzbrj4hl.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ol>              </div>            </details></li><li><details open><summary pointer> â‘¤ GPIO_PIN_RESET </summary>              <div class='content'>              <p>GPIO_PinStateé‡Œçš„ä¸€ä¸ªæšä¸¾å¸¸é‡ï¼šGPIO_PIN_RESETè¢«èµ‹å€¼ä¸º0ï¼Œè¡¨ç¤ºGPIOå¼•è„šå¤ä½çŠ¶æ€</p>              </div>            </details></li><li><details open><summary pointer> â‘¥ GPIOx->BSRR </summary>              <div class='content'>              <blockquote><p>ç‚¹è¿ç®—ç¬¦( . )çš„å·¦è¾¹æ“ä½œæ•°æ˜¯ä¸€ä¸ªç»“æœä¸ºç»“æ„çš„è¡¨è¾¾å¼;ç®­å¤´è¿ç®—ç¬¦( -&gt; )çš„å·¦è¾¹çš„æ“ä½œæ•°æ˜¯ä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆã€‚<br>ORD,BSRR,BRRå¯„å­˜å™¨çš„ä½œç”¨æ˜¯å¯¹å·²ç»åˆå§‹åŒ–åçš„ IO å£è¾“å‡ºé«˜ã€ä½ç”µå¹³ã€‚</p></blockquote><p>ODRå¯„å­˜å™¨å¯è¯»å¯å†™ï¼Œ32ä½ï¼Œæ—¢èƒ½æ§åˆ¶ç®¡è„šä¸ºé«˜ç”µå¹³ï¼Œä¹Ÿèƒ½æ§åˆ¶ç®¡è„šä¸ºä½ç”µå¹³ã€‚GPIOç®¡è„šå¯¹äºä½å†™1ä¸ºé«˜ç”µå¹³ï¼Œå†™ 0 ä¸ºä½ç”µå¹³ã€‚ï¼ˆä½ 16 ä½ç”¨äºè®¾ç½® GPIO å£å¯¹åº”ä½è¾“å‡ºé«˜&#x2F;ä½ç”µå¹³ã€‚é«˜ 16 ä½ä¿ç•™åœ°å€ï¼Œè¯»å†™æ— æ•ˆã€‚ï¼‰</p><p>BSRRå¯„å­˜å™¨ ç§°ä¸ºç«¯å£ä½è®¾ç½®&#x2F;æ¸…é™¤å¯„å­˜å™¨ï¼Œåªå†™å¯„å­˜å™¨ï¼Œ32ä½,æ—¢èƒ½æ§åˆ¶ç®¡è„šä¸ºé«˜ç”µå¹³ï¼Œä¹Ÿèƒ½æ§åˆ¶ç®¡è„šä¸ºä½ç”µå¹³ ï¼Œå¯¹å¯„å­˜å™¨é«˜ 16ä½ å†™1 å¯¹åº”ç®¡è„šä¸ºä½ç”µå¹³ï¼Œå¯¹å¯„å­˜å™¨ä½16ä½å†™1å¯¹åº”ç®¡è„šä¸ºé«˜ç”µå¹³ã€‚å†™ 0 ,æ— åŠ¨ä½œ</p><p>BRRå¯„å­˜å™¨ç§°ä¸ºç«¯å£ä½æ¸…é™¤å¯„å­˜å™¨ï¼Œåªå†™å¯„å­˜å™¨ï¼Œ32ä½,åªèƒ½æ”¹å˜ç®¡è„šçŠ¶æ€ä¸ºä½ç”µå¹³ ï¼Œå¯„å­˜å™¨ç®¡è„šå¯¹åº”ä½å†™ 1 ç›¸åº”ç®¡è„šä¼šå˜ä¸ºä½ç”µå¹³ã€‚å†™ 0 æ— åŠ¨ä½œã€‚ï¼ˆBRRä½ 16 ä½ç”¨äºè®¾ç½® GPIO å£å¯¹åº”ä½è¾“å‡ºä½ç”µå¹³ã€‚é«˜ 16 ä½ä¿ç•™åœ°å€ï¼Œè¯»å†™æ— æ•ˆã€‚ï¼‰</p><p>æ‰€ä»¥ç†è®ºä¸Šæ¥è®²ï¼ŒBRR å¯„å­˜å™¨çš„åŠŸèƒ½ï¼ˆä½16ä½ï¼‰å’Œ BSRR å¯„å­˜å™¨é«˜ 16 ä½çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ã€‚<br>(æœªå®Œå¾…ç»­)ç­‰è¿™äº›å¼„å®Œäº†ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹stm32g431çš„å¯„å­˜å™¨ä»€ä¹ˆçš„</p>              </div>            </details></li><li><details open><summary pointer> â‘¦ GPIO_PIN_RESET </summary>              <div class='content'>              <p>è¿™æ®µä»£ç ç‰‡æ®µçœ‹èµ·æ¥æ˜¯åœ¨STM32çš„åµŒå…¥å¼ç¨‹åºä¸­ç”¨æ¥æ§åˆ¶GPIOå¼•è„šè¾“å‡ºçŠ¶æ€çš„ã€‚è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„åŠŸèƒ½ï¼š</p><p>PinState !&#x3D; GPIO_PIN_RESET: è¿™ä¸ªæ¡ä»¶åˆ¤æ–­è¯­å¥æ£€æŸ¥äº†ä¸€ä¸ªåä¸ºPinStateçš„å˜é‡æ˜¯å¦ä¸ç­‰äºGPIO_PIN_RESETã€‚è¿™é‡Œé¢„æœŸPinStateæ˜¯ä¸€ä¸ªè¡¨ç¤º GPIO å¼•è„šçŠ¶æ€ï¼ˆé«˜ç”µå¹³æˆ–ä½ç”µå¹³ï¼‰çš„å˜é‡ã€‚</p><p>å¦‚æœPinStateä¸ç­‰äºGPIO_PIN_RESETï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„ä»£ç å—ï¼š<br>GPIOx-&gt;BSRR &#x3D; (uint32_t)GPIO_Pin;ï¼šè¿™è¡Œä»£ç æ˜¯åœ¨å°†æŒ‡å®šçš„GPIOå¼•è„šç½®é«˜ã€‚ BSRRï¼ˆBit Set Reset Registerï¼‰æ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé€šè¿‡å†™å…¥ç›¸åº”çš„å¼•è„šä½æ¥å°†æŒ‡å®šçš„å¼•è„šç½®é«˜ã€‚</p><p>å¦‚æœPinStateç­‰äºGPIO_PIN_RESETï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„ä»£ç å—ï¼š<br>GPIOx-&gt;BRR &#x3D; (uint32_t)GPIO_Pin;ï¼šè¿™è¡Œä»£ç æ˜¯åœ¨å°†æŒ‡å®šçš„GPIOå¼•è„šç½®ä½ã€‚BRRï¼ˆBit Reset Registerï¼‰æ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé€šè¿‡å†™å…¥ç›¸åº”çš„å¼•è„šä½æ¥å°†æŒ‡å®šçš„å¼•è„šç½®ä½ã€‚</p>              </div>            </details></li></ul>              </div>            </details><p>BTW,ä¸Šé¢é‚£ä¸ªled.cä»£ç æ˜¯è¯¾é‡Œå†™çš„ï¼Œæˆ‘ä¸å¤ªå–œæ¬¢ç”¨ï¼Œæ„Ÿè§‰ä¸å¤ªå¥½ç”¨ï¼Œæˆ‘å°±ç”¨æˆ‘å­¦51çš„æ—¶å€™ç”¨çš„ledå‡½æ•°æ€æƒ³å†™äº†ä¸€ä¸ªï¼ˆæˆ‘è€ƒæ ¸çš„æ—¶å€™å°±ç”¨çš„è‡ªå·±çš„ï¼Œå¾ˆç›´è§‚ï¼Œè€Œä¸”æ²¡å‡ºä»€ä¹ˆé—®é¢˜ï¼‰</p><details open><summary pointer> led.c </summary>              <div class='content'>              <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">led</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> a)</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> pin;</span><br><span class="line">HAL_GPIO_WritePin(GPIOC,GPIO_PIN_All,GPIO_PIN_SET);</span><br><span class="line"><span class="keyword">switch</span>(x)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:pin=GPIO_PIN_8;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:pin=GPIO_PIN_9;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:pin=GPIO_PIN_10;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:pin=GPIO_PIN_11;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:pin=GPIO_PIN_12;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:pin=GPIO_PIN_13;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:pin=GPIO_PIN_14;<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">8</span>:pin=GPIO_PIN_15;<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(a==<span class="number">0</span>)HAL_GPIO_WritePin(GPIOC,pin,GPIO_PIN_SET);</span><br><span class="line"><span class="keyword">if</span>(a==<span class="number">1</span>)HAL_GPIO_WritePin(GPIOC,pin,GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_SET);</span><br><span class="line">HAL_GPIO_WritePin(GPIOD,GPIO_PIN_2,GPIO_PIN_RESET);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯å…«ä¸ªledï¼Œç¬¬ä¸€ä¸ªå‚æ˜¯ledä»£å·ï¼ˆ1-8ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å¼€æˆ–å…³ï¼ˆ0å…³ï¼Œ1å¼€ï¼‰;<br>æœ€åä¸¤è¡Œè¦å¼€å…³å¯„å­˜å™¨ï¼Œå¼€äº†ä¹‹åä¸€ç¬é—´å°±è¿‡å»äº†ï¼Œç„¶åå…³ä¸Šå°±è¡Œäº†ï¼ˆä¸ç»†è¯´äº†ï¼Œæ²¡æ—¶é—´äº†ï¼‰</p>              </div>            </details><p><strong>ledé—ªçƒ(å¼•è„šçŠ¶æ€åè½¬)ï¼š</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(HAL_GetTick()-tempCnt&gt;<span class="number">500</span>) &#123;</span><br><span class="line">HAL_GPIO_TogglePin (GPIOC,GPIO_PIN_9);</span><br><span class="line">tempCnt =HAL_GetTick();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°(äºŒ):å·¥ç¨‹æ¨¡æ¿å»ºç«‹</title>
      <link href="/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/"/>
      <url>/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/</url>
      
        <content type="html"><![CDATA[<div class="note info"><p>å¼€å‘æ¿èŠ¯ç‰‡ï¼šstm32g4rbt6;HALåº“å¼€å‘</p></div><div class="timeline"><div class="timenode"><div class="meta"><p><p>ç¬¬ä¸€æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">æ–°å»ºå·¥ç¨‹</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3ye6m3fcyj.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3ye6m3fcyj.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬äºŒæ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">é€‰æ‹©èŠ¯ç‰‡</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7w6k2rzwfo.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7w6k2rzwfo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>ç„¶åå³ä¸Šè§’"Start Project"</div></div><div class="timenode"><div class="meta"><p><p>ç¬¬ä¸‰æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">æ‰“å¼€é«˜é€Ÿå¤–éƒ¨æ—¶é’Ÿ</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2krni340qq.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2krni340qq.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><details open><summary pointer> è¯¦ç»†ä»‹ç» </summary>              <div class='content'>              <details ><summary pointer> System Core </summary>              <div class='content'>              <p>â€œSystem Coreâ€ï¼ˆç³»ç»Ÿæ ¸å¿ƒï¼‰æ˜¯æŒ‡è®¡ç®—æœºç³»ç»Ÿæˆ–åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ä¸»è¦æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£æ‰§è¡Œç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½å’Œæ§åˆ¶æ•´ä½“ç³»ç»Ÿçš„è¿è¡Œã€‚åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒSystem Coreé€šå¸¸æ˜¯æŒ‡ä¸»æ§åˆ¶å™¨æˆ–ä¸»å¤„ç†å™¨ï¼ˆMCU&#x2F;Microcontrollerã€CPUï¼‰ä»¥åŠä¸ä¹‹ç›¸å…³çš„å…³é”®åŠŸèƒ½æ¨¡å—ï¼Œå¦‚æ—¶é’Ÿç³»ç»Ÿã€å­˜å‚¨å™¨ç®¡ç†ã€ä¸­æ–­æ§åˆ¶ã€é€šä¿¡æ¥å£ç­‰ã€‚</p><ol><li><p><strong>DMA (Direct Memory Access)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šDMAæ˜¯ä¸€ç§æ•°æ®ä¼ è¾“æŠ€æœ¯ï¼Œå…è®¸å¤–è®¾åœ¨ä¸å¹²æ‰°CPUçš„æƒ…å†µä¸‹ç›´æ¥è®¿é—®ç³»ç»Ÿå†…å­˜ã€‚</li></ul></li><li><p><strong>GPIO (General Purpose Input&#x2F;Output)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šGPIOæ˜¯é€šç”¨è¾“å…¥è¾“å‡ºï¼Œç”¨äºè¿æ¥å’Œæ§åˆ¶å¤–éƒ¨è®¾å¤‡ï¼Œä¾‹å¦‚ä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨ç­‰ã€‚</li></ul></li><li><p><strong>IWDG (Independent Watchdog)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šIWDGæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„çœ‹é—¨ç‹—å®šæ—¶å™¨ï¼Œç”¨äºç›‘æ§ç³»ç»Ÿå´©æºƒæˆ–å¡æ­»çš„æƒ…å†µï¼Œå¹¶åœ¨æ£€æµ‹åˆ°é—®é¢˜æ—¶é‡‡å–ç›¸åº”çš„æªæ–½ã€‚</li></ul></li><li><p><strong>NVIC (Nested Vector Interrupt Controller)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šNVICæ˜¯ç”¨äºç®¡ç†ä¸­æ–­è¯·æ±‚åŠä¼˜å…ˆçº§çš„æ§åˆ¶å™¨ï¼Œè´Ÿè´£å¤„ç†ç³»ç»Ÿä¸­çš„å„ç§ä¸­æ–­äº‹ä»¶ã€‚</li></ul></li><li><p><strong>RCC (Reset and Clock Control)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šRCCç”¨äºæ§åˆ¶ç³»ç»Ÿçš„å¤ä½å’Œ<span class='pbg info'>æ—¶é’Ÿè®¾ç½®</span>ï¼ŒåŒ…æ‹¬é…ç½®å¤„ç†å™¨çš„å·¥ä½œé¢‘ç‡å’Œå¤–è®¾æ—¶é’Ÿç­‰ã€‚</li></ul></li><li><p><strong>SYSï¼ˆSystemï¼‰</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šç³»ç»Ÿæ ¸å¿ƒï¼Œé€šå¸¸æŒ‡åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ—¶é’Ÿã€å¤ä½ã€ä¸­æ–­æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</li></ul></li><li><p><strong>WWDG (Window Watchdog)</strong>:</p><ul><li><strong>ä½œç”¨</strong>ï¼šWWDGæ˜¯ä¸€ç§çœ‹é—¨ç‹—å®šæ—¶å™¨ï¼Œä¸“ç”¨äºç›‘æµ‹ç‰¹å®šæ—¶é—´èŒƒå›´å†…çš„ç³»ç»Ÿæ“ä½œï¼Œç¡®ä¿ç³»ç»Ÿåœ¨è§„å®šçš„æ—¶é—´å†…æ­£å¸¸è¿è¡Œã€‚</li></ul></li></ol><p>RCCå’ŒSYSé‡Œéƒ½æœ‰æ—¶é’Ÿï¼Œä»–ä»¬çš„åŒºåˆ«ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒRCCï¼ˆReset and Clock Controlï¼‰å’ŒSYSï¼ˆSystemï¼‰è¿™</span><br><span class="line">ä¸¤ä¸ªæ¨¡å—é€šå¸¸è´Ÿè´£ç³»ç»Ÿçš„æ—¶é’Ÿæ§åˆ¶å’Œæ ¸å¿ƒåŠŸèƒ½ç®¡ç†ï¼Œå®ƒä»¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨</span><br><span class="line">äºåŠŸèƒ½å’ŒèŒè´£ä¸Šçš„ä¸åŒï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> RCCï¼ˆReset and Clock Controlï¼‰ï¼š</span><br><span class="line"><span class="bullet">   -</span> RCCæ¨¡å—ä¸»è¦è´Ÿè´£ç³»ç»Ÿçš„æ—¶é’Ÿæ§åˆ¶å’Œç®¡ç†ï¼ŒåŒ…æ‹¬é…ç½®å„ç§æ—¶é’Ÿæºã€è®¾ç½®</span><br><span class="line">   æ—¶é’Ÿåˆ†é¢‘å™¨ã€é€‰æ‹©ç³»ç»Ÿæ—¶é’Ÿæºã€æ§åˆ¶æ—¶é’Ÿè¾“å‡ºç­‰åŠŸèƒ½ã€‚</span><br><span class="line"><span class="bullet">   -</span> RCCæ¨¡å—çš„é‡ç‚¹åœ¨äºå¤„ç†ç³»ç»Ÿçš„æ—¶é’Ÿä¿¡å·ï¼Œç¡®ä¿ç³»ç»Ÿå„ä¸ªéƒ¨åˆ†æŒ‰æ—¶é’Ÿä¿¡</span><br><span class="line">   å·åŒæ­¥å·¥ä½œï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</span><br><span class="line"><span class="bullet">   -</span> RCCé€šå¸¸ç”¨äºå¯¹ç³»ç»Ÿçš„æ—¶é’Ÿè¿›è¡Œé…ç½®å’Œç®¡ç†ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿå„ä¸ªæ¨¡å—èƒ½å¤Ÿ</span><br><span class="line">   æŒ‰ç…§æ­£ç¡®çš„æ—¶é’Ÿä¿¡å·å·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> SYSï¼ˆSystemï¼‰ï¼š</span><br><span class="line"><span class="bullet">   -</span> SYSæ¨¡å—é€šå¸¸æ˜¯æŒ‡åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½ã€</span><br><span class="line">   å¤ä½æ§åˆ¶ã€ä¸­æ–­å¤„ç†ã€æ—¶é’Ÿåˆå§‹åŒ–ç­‰ã€‚</span><br><span class="line"><span class="bullet">   -</span> SYSæ¨¡å—çš„èŒè´£æ›´å¤šæ˜¯ç³»ç»Ÿçš„æ•´ä½“ç®¡ç†å’Œæ§åˆ¶ï¼ŒåŒ…æ‹¬å¤„ç†ç³»ç»Ÿçº§çš„å¤ä½</span><br><span class="line">   è¯·æ±‚ã€é…ç½®ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€ç®¡ç†ä¸­æ–­æ§åˆ¶å™¨ç­‰ã€‚</span><br><span class="line"><span class="bullet">   -</span> SYSæ¨¡å—é€šå¸¸è´Ÿè´£ç³»ç»Ÿçš„åˆå§‹åŒ–å’Œç®¡ç†å·¥ä½œï¼Œç¡®ä¿ç³»ç»Ÿå„ä¸ªæ¨¡å—æ­£å¸¸å·¥</span><br><span class="line">   ä½œï¼Œå®ç°ç³»ç»Ÿçš„æ•´ä½“åŠŸèƒ½ã€‚</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼ŒRCCï¼ˆæ—¶é’Ÿæ§åˆ¶ï¼‰ä¸»è¦å¤„ç†ç³»ç»Ÿçš„æ—¶é’Ÿä¿¡å·ï¼Œè€ŒSYSï¼ˆç³»ç»Ÿï¼‰åˆ™æ›´</span><br><span class="line">å¤šæ¶‰åŠç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½å’Œæ•´ä½“ç®¡ç†ã€‚åœ¨ç³»ç»Ÿè®¾è®¡å’Œå¼€å‘ä¸­ï¼Œè¿™ä¸¤ä¸ªæ¨¡å—é€šå¸¸</span><br><span class="line">éœ€è¦ååŒå·¥ä½œï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„æ—¶é’Ÿæ­£å¸¸è¿è¡Œå¹¶ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚</span><br></pre></td></tr></table></figure>              </div>            </details><details ><summary pointer> æ—¶é’Ÿé€‰æ‹©åŸå›  </summary>              <div class='content'>              <p>é«˜é€Ÿæ—¶é’Ÿ(HSEå’ŒHSI)æä¾›ç»™èŠ¯ç‰‡ä¸»ä½“çš„ä¸»æ—¶é’Ÿ.ä½é€Ÿæ—¶é’Ÿ(LSEå’ŒLSI)åªæ˜¯æä¾›ç»™èŠ¯ç‰‡ä¸­çš„RTC(å®æ—¶æ—¶é’Ÿ)åŠç‹¬ç«‹çœ‹é—¨ç‹—ä½¿ç”¨</p><ul><li><p>é€‰æ‹©High Speed Clock (HSE) ä½œä¸ºå•ç‰‡æœºçš„æ—¶é’Ÿæºæœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸è§åŸå› ï¼š</p><ol><li><p>é«˜æ€§èƒ½ï¼šHigh Speed Clock (HSE) å…·æœ‰è¾ƒé«˜çš„æ—¶é’Ÿé¢‘ç‡ï¼Œé€‚ç”¨äºéœ€è¦é«˜æ€§èƒ½å¤„ç†çš„åº”ç”¨ï¼Œä¾‹å¦‚é«˜é€Ÿæ•°æ®å¤„ç†ã€é«˜é€Ÿé€šä¿¡ç­‰ã€‚é«˜é€Ÿæ—¶é’Ÿå¯ä»¥æé«˜ç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦å’Œå“åº”èƒ½åŠ›ã€‚</p></li><li><p>çµæ´»æ€§ï¼šHSE å¯ä»¥æä¾›å¤šç§å¯é€‰æ‹©çš„æ—¶é’Ÿé¢‘ç‡ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…åº”ç”¨çš„éœ€è¦è¿›è¡Œçµæ´»é…ç½®ã€‚é€šè¿‡é€‰æ‹©é€‚åˆçš„æ—¶é’Ÿé¢‘ç‡ï¼Œå¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ã€‚</p></li><li><p>é«˜ç²¾åº¦ï¼šHSE é€šå¸¸å…·æœ‰è¾ƒé«˜çš„æ—¶é’Ÿç²¾åº¦å’Œç¨³å®šæ€§ï¼Œé€‚ç”¨äºå¯¹æ—¶é’Ÿè¦æ±‚ä¸¥æ ¼çš„åº”ç”¨ï¼Œä¾‹å¦‚éœ€è¦é«˜ç²¾åº¦æµ‹é‡æˆ–åŒæ­¥çš„ç³»ç»Ÿã€‚</p></li><li><p>å¤–è®¾å…¼å®¹æ€§ï¼šä¸€äº›å¤–éƒ¨è®¾å¤‡æˆ–æ¨¡å—å¯èƒ½è¦æ±‚ä½¿ç”¨é«˜é€Ÿæ—¶é’Ÿï¼Œå› æ­¤é€‰æ‹©HSE å¯ä»¥æ›´å¥½åœ°ä¸è¿™äº›å¤–è®¾å…¼å®¹ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚</p></li><li><p>é«˜é€Ÿé€šä¿¡ï¼šåœ¨éœ€è¦è¿›è¡Œé«˜é€Ÿæ•°æ®ä¼ è¾“æˆ–é€šä¿¡çš„åœºæ™¯ä¸­ï¼Œé€‰æ‹©HSE å¯ä»¥æ›´å¥½åœ°æ»¡è¶³é€šä¿¡çš„éœ€æ±‚ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„ç¨³å®šæ€§å’Œé€Ÿåº¦ã€‚</p></li></ol></li><li><p>é€‰æ‹©Crystal&#x2F;Ceramic Resonatorçš„åŸå› ï¼š</p><ol><li><p>ç¨³å®šæ€§ï¼šCrystal&#x2F;Ceramic Resonator æä¾›äº†æ¯”æ™®é€šæ™¶ä½“æŒ¯è¡å™¨æ›´é«˜çš„ç¨³å®šæ€§å’Œç²¾åº¦ã€‚è¿™å¯¹äºéœ€è¦ç²¾ç¡®æ—¶é’Ÿçš„åº”ç”¨éå¸¸é‡è¦ï¼Œå¦‚é€šè®¯ç³»ç»Ÿã€ç²¾å¯†æµ‹é‡ä»ªå™¨ç­‰ã€‚</p></li><li><p>æŠ—å¹²æ‰°æ€§ï¼šCrystal&#x2F;Ceramic Resonator åœ¨æ™¶ä½“æŒ¯è¡å™¨ä¸­åŒ…è£¹äº†é™¶ç“·å°è£…ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æŠµæŠ—å¤–éƒ¨å¹²æ‰°å’ŒæŒ¯è¡å™¨çš„æ¸©åº¦å˜åŒ–ã€‚è¿™ä½¿å¾—å®ƒåœ¨å·¥ä½œæ—¶æ›´åŠ ç¨³å®šå¯é ã€‚</p></li><li><p>é¢‘ç‡ç²¾åº¦ï¼šCrystal&#x2F;Ceramic Resonator å¯ä»¥æä¾›éå¸¸ç²¾ç¡®çš„é¢‘ç‡è¾“å‡ºï¼Œé€šå¸¸å…·æœ‰å¾ˆå°çš„é¢‘ç‡è¯¯å·®ï¼Œæ»¡è¶³ä¸€äº›å¯¹æ—¶é’Ÿé¢‘ç‡è¦æ±‚éå¸¸é«˜çš„åº”ç”¨ã€‚</p></li><li><p>é€‚ç”¨èŒƒå›´å¹¿ï¼šCrystal&#x2F;Ceramic Resonator å¯ä»¥æ»¡è¶³å¤šç§æ—¶é’Ÿé¢‘ç‡çš„éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒçš„æ™¶æŒ¯é¢‘ç‡æ¥é€‚åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</p></li></ol></li></ul>              </div>            </details><details ><summary pointer> é…ç½®å®Œåå³è¾¹ä¸¤ä¸ªå¼•è„šè‡ªåŠ¨ä½¿èƒ½ </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7p10w38yw.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7p10w38yw.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>åœ¨è¿™é‡Œï¼ŒRCC_OSC_IN å’Œ RCC_OSC_OUT æ˜¯æŒ‡å•ç‰‡æœºï¼ˆé€šå¸¸æ˜¯æŒ‡çš„STM32ç³»åˆ—å•ç‰‡æœºï¼‰çš„æ—¶é’Ÿæºè¾“å…¥å’Œè¾“å‡ºå¼•è„šã€‚è¿™ä¸¤ä¸ªå¼•è„šé€šå¸¸ç”¨äºè¿æ¥å¤–éƒ¨æ™¶æŒ¯æˆ–è€…å¤–éƒ¨æ—¶é’Ÿæºï¼Œä»¥æä¾›ç³»ç»Ÿçš„æ—¶é’Ÿã€‚</p><ul><li><p>RCC_OSC_IN æ˜¯æŒ‡å•ç‰‡æœºçš„å¤–éƒ¨æ—¶é’Ÿæºè¾“å…¥å¼•è„šï¼Œç”¨äºè¿æ¥å¤–éƒ¨æ™¶æŒ¯æˆ–è€…å¤–éƒ¨æ—¶é’Ÿæºã€‚è¿™ä¸ªå¼•è„šæ¥æ”¶å¤–éƒ¨æ—¶é’Ÿä¿¡å·ï¼Œå°†å…¶ä¼ é€’ç»™å•ç‰‡æœºçš„æ—¶é’Ÿæ¨¡å—ï¼Œç”¨ä½œç³»ç»Ÿæ—¶é’Ÿæºã€‚</p></li><li><p>RCC_OSC_OUT æ˜¯æŒ‡å•ç‰‡æœºçš„å¤–éƒ¨æ—¶é’Ÿæºè¾“å‡ºå¼•è„šï¼Œé€šå¸¸åœ¨ä½¿ç”¨å¤–éƒ¨æ™¶æŒ¯æ—¶ï¼Œæ­¤å¼•è„šä¸ºæ™¶æŒ¯è¾“å‡ºå¼•è„šã€‚é€šè¿‡æ­¤å¼•è„šå¯ä»¥è¾“å‡ºæ™¶æŒ¯çš„æ—¶é’Ÿä¿¡å·ï¼Œè¿æ¥åˆ°å…¶ä»–å¤–éƒ¨è®¾å¤‡æˆ–è€…æ¨¡å—ä¸­ã€‚</p></li></ul><p>â€œOSCâ€é€šå¸¸æ˜¯â€œoscillatorï¼ˆæŒ¯è¡å™¨ï¼‰â€çš„ç¼©å†™ã€‚åœ¨ç”µå­é¢†åŸŸï¼ŒæŒ¯è¡å™¨æ˜¯ä¸€ç§ç”µè·¯æˆ–è®¾å¤‡ï¼Œç”¨äºåœ¨æ²¡æœ‰å¤–éƒ¨æ¿€åŠ±çš„æƒ…å†µä¸‹äº§ç”Ÿå‘¨æœŸæ€§çš„ä¿¡å·æˆ–æ³¢å½¢ã€‚è¿™ç§å‘¨æœŸæ€§çš„ä¿¡å·é€šå¸¸ç”¨äºé©±åŠ¨å…¶ä»–ç”µè·¯æˆ–è®¾å¤‡ï¼Œä¾‹å¦‚ç”¨ä½œæ—¶é’Ÿä¿¡å·æˆ–è€…åŒæ­¥ä¿¡å·ã€‚</p><p>æŒ¯è¡å™¨åœ¨ç”µå­è®¾å¤‡ä¸­èµ·åˆ°éå¸¸é‡è¦çš„ä½œç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°å­—ç³»ç»Ÿä¸­ï¼ŒæŒ¯è¡å™¨é€šå¸¸ç”¨æ¥æä¾›ç³»ç»Ÿæ—¶é’Ÿã€‚ä¸€äº›å¸¸è§çš„æŒ¯è¡å™¨ç±»å‹åŒ…æ‹¬æ™¶ä½“æŒ¯è¡å™¨ï¼ˆCrystal oscillatorï¼‰ã€é™¶ç“·è°æŒ¯å™¨ï¼ˆCeramic resonatorï¼‰ã€RCæŒ¯è¡å™¨ï¼ˆRC oscillatorï¼‰ç­‰ã€‚</p><p>æ™¶ä½“æŒ¯è¡å™¨æ˜¯æœ€å¸¸è§çš„ä¸€ç§æŒ¯è¡å™¨ï¼Œä½¿ç”¨æ™¶ä½“ä½œä¸ºæŒ¯è¡å…ƒä»¶ï¼Œæä¾›é«˜ç²¾åº¦å’Œç¨³å®šçš„æ—¶é’Ÿä¿¡å·ã€‚é™¶ç“·è°æŒ¯å™¨é€šå¸¸æ¯”æ™¶ä½“æŒ¯è¡å™¨ä¾¿å®œï¼Œä½†ç²¾åº¦å’Œç¨³å®šæ€§å¯èƒ½æ²¡æœ‰æ™¶ä½“æŒ¯è¡å™¨å¥½ã€‚è€ŒRCæŒ¯è¡å™¨åˆ™ä½¿ç”¨ç”µé˜»å’Œç”µå®¹æ„æˆç®€å•çš„æŒ¯è¡ç”µè·¯ï¼Œé€‚ç”¨äºä¸€äº›ä½è¦æ±‚çš„åº”ç”¨ã€‚</p><p>å› æ­¤ï¼Œå½“æåˆ°â€œOSCâ€æ—¶ï¼Œé€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªæŒ¯è¡å™¨æˆ–è€…ç›¸å…³çš„æŒ¯è¡å™¨ç”µè·¯ã€‚</p>              </div>            </details>              </div>            </details></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬å››æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">é…ç½®æ—¶é’Ÿæ ‘</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1754e4p6ge.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1754e4p6ge.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>ç¬¬â‘£æ­¥å†™å…¥80åæŒ‰å›è½¦é”®ï¼Œå…¶ä»–é¡¹è‡ªåŠ¨é…ç½®<details open><summary pointer> è¯¦ç»†ä»‹ç» </summary>              <div class='content'>              <div class="tagLink"><a class="link-card" title="STM32çš„5ä¸ªæ—¶é’ŸæºçŸ¥è¯†" href="https://zhuanlan.zhihu.com/p/138661512"><span class="link-card-backdrop" style="background-image: url(https://pic1.zhimg.com/80/v2-0ba05516dcec7c23fc5365e31015a938_720w.webp)"></span><div class="left"><img src="https://pic1.zhimg.com/80/v2-0ba05516dcec7c23fc5365e31015a938_720w.webp" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/80/v2-0ba05516dcec7c23fc5365e31015a938_720w.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">STM32çš„5ä¸ªæ—¶é’ŸæºçŸ¥è¯†</p><p class="url">https://zhuanlan.zhihu.com/p/138661512</p></div></a></div>ä¼—æ‰€å‘¨çŸ¥STM32æœ‰5ä¸ªæ—¶é’ŸæºHSIã€HSEã€LSIã€LSEã€PLLï¼Œå…¶å®ä»–åªæœ‰å››ä¸ªï¼Œå› ä¸ºä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°PLLéƒ½æ˜¯ç”±HSIæˆ–HSEæä¾›çš„ã€‚<p>ã€€ã€€å…¶ä¸­ï¼Œé«˜é€Ÿæ—¶é’Ÿ(HSEå’ŒHSI)æä¾›ç»™èŠ¯ç‰‡ä¸»ä½“çš„ä¸»æ—¶é’Ÿ.ä½é€Ÿæ—¶é’Ÿ(LSEå’ŒLSI)åªæ˜¯æä¾›ç»™èŠ¯ç‰‡ä¸­çš„RTC(å®æ—¶æ—¶é’Ÿ)åŠç‹¬ç«‹çœ‹é—¨ç‹—ä½¿ç”¨ï¼Œå›¾ä¸­å¯ä»¥çœ‹å‡ºé«˜é€Ÿæ—¶é’Ÿä¹Ÿå¯ä»¥æä¾›ç»™RTCã€‚</p><p>ã€€ã€€å†…éƒ¨æ—¶é’Ÿæ˜¯åœ¨èŠ¯ç‰‡å†…éƒ¨RCæŒ¯è¡å™¨äº§ç”Ÿçš„ï¼Œèµ·æŒ¯è¾ƒå¿«ï¼Œæ‰€ä»¥æ—¶é’Ÿåœ¨èŠ¯ç‰‡åˆšä¸Šç”µçš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨å†…éƒ¨é«˜é€Ÿæ—¶é’Ÿã€‚è€Œå¤–éƒ¨æ—¶é’Ÿä¿¡å·æ˜¯ç”±å¤–éƒ¨çš„æ™¶æŒ¯è¾“å…¥çš„ï¼Œåœ¨ç²¾åº¦å’Œç¨³å®šæ€§ä¸Šéƒ½æœ‰å¾ˆå¤§ä¼˜åŠ¿ï¼Œæ‰€ä»¥ä¸Šç”µä¹‹åæˆ‘ä»¬å†é€šè¿‡è½¯ä»¶é…ç½®ï¼Œè½¬è€Œé‡‡ç”¨å¤–éƒ¨æ—¶é’Ÿä¿¡å·.</p><details ><summary pointer> â‘  Input frequency </summary>              <div class='content'>              <p><span class='pbg info'>å°±æ˜¯ï¼ˆä¸€ï¼‰ä¸­å†™åˆ°çš„æ™¶æŒ¯é¢‘ç‡ï¼ˆ24MHzï¼‰</span><br>åœ¨å•ç‰‡æœºæˆ–å¾®æ§åˆ¶å™¨çš„æ—¶é’Ÿæ ‘ä¸­ï¼Œinput frequencyæŒ‡çš„æ˜¯ä½œä¸ºæ—¶é’Ÿæºè¾“å…¥åˆ°å¾®æ§åˆ¶å™¨çš„æ—¶é’Ÿä¿¡å·çš„é¢‘ç‡ã€‚è¿™ä¸ªè¾“å…¥é¢‘ç‡é€šå¸¸æ˜¯å¤–éƒ¨æä¾›çš„ï¼Œå¹¶ä¸”å¯ä»¥æ˜¯ä¸€ä¸ªç¨³å®šçš„æŒ¯è¡å™¨è¾“å‡ºï¼Œæ¯”å¦‚æ™¶ä½“æŒ¯è¡å™¨æˆ–è€…é™¶ç“·è°æŒ¯å™¨è¾“å‡ºçš„é¢‘ç‡ã€‚</p><p>æ—¶é’Ÿä¿¡å·çš„é¢‘ç‡å¯¹äºå•ç‰‡æœºçš„æ­£å¸¸è¿è¡Œéå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬ç”¨æ¥æ§åˆ¶å•ç‰‡æœºå†…éƒ¨å„ä¸ªæ¨¡å—çš„æ“ä½œå’Œæ—¶åºã€‚å•ç‰‡æœºçš„å†…éƒ¨æ—¶é’Ÿç³»ç»Ÿä¼šé€šè¿‡æ—¶é’Ÿæ ‘å°†å¤–éƒ¨è¾“å…¥çš„æ—¶é’Ÿä¿¡å·è¿›è¡Œåˆ†é¢‘ã€å€é¢‘ç­‰å¤„ç†ï¼Œä»¥äº§ç”Ÿç”¨äºä¸åŒæ¨¡å—çš„æ—¶é’Ÿä¿¡å·ã€‚</p><p>åœ¨è®¾è®¡å•ç‰‡æœºç³»ç»Ÿæ—¶ï¼Œéœ€è¦æ ¹æ®å•ç‰‡æœºå™¨ä»¶è§„æ ¼ä¹¦æä¾›çš„è¦æ±‚æ¥é€‰æ‹©é€‚åˆçš„input frequencyã€‚ä¸åŒçš„å•ç‰‡æœºå¯èƒ½å¯¹æ—¶é’Ÿä¿¡å·çš„è¾“å…¥é¢‘ç‡æœ‰ä¸åŒçš„è¦æ±‚ï¼Œä¸€èˆ¬ä¼šæœ‰æœ€å°å’Œæœ€å¤§çš„è¾“å…¥é¢‘ç‡èŒƒå›´ã€‚é€‰æ‹©æ°å½“çš„è¾“å…¥é¢‘ç‡å¯ä»¥ç¡®ä¿å•ç‰‡æœºæ­£å¸¸è¿è¡Œå¹¶è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p>              </div>            </details><details ><summary pointer> â‘¡ PLL Source Mux </summary>              <div class='content'>              <ul><li>PLL source Muxæ˜¯æŒ‡åœ¨ä¸€äº›å¸¦æœ‰PLLï¼ˆPhase-Locked Loopï¼Œç›¸ä½é”å®šç¯ï¼‰çš„èŠ¯ç‰‡ä¸­çš„ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ã€‚PLL source Muxé€šå¸¸æ˜¯ä¸€ä¸ªç”¨äºé€‰æ‹©PLLè¾“å…¥æºçš„å¤šè·¯å¤ç”¨å™¨ï¼ˆMuxï¼ŒMultiplexerï¼‰ï¼Œå…è®¸ç”¨æˆ·ä»å¤šä¸ªä¸åŒçš„æ—¶é’Ÿæºä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºPLLçš„è¾“å…¥æºã€‚</li></ul><p>åœ¨æ•°å­—ç”µè·¯è®¾è®¡ä¸­ï¼ŒPLLè¢«ç”¨æ¥äº§ç”Ÿä¸€ä¸ªç¨³å®šçš„ã€ç²¾ç¡®çš„æ—¶é’Ÿä¿¡å·ã€‚é€šè¿‡è°ƒèŠ‚PLLçš„åé¦ˆå›è·¯ï¼Œå¯ä»¥ä½¿å¾—PLLçš„è¾“å‡ºæ—¶é’Ÿé¢‘ç‡ä¸è¾“å…¥æ—¶é’Ÿé¢‘ç‡ä¿æŒç²¾ç¡®çš„æ•´æ•°å€å…³ç³»ã€‚PLL source Muxçš„ä½œç”¨æ˜¯å…è®¸ç”¨æˆ·é€‰æ‹©ä¸åŒçš„è¾“å…¥æ—¶é’Ÿæºï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸åŒçš„å·¥ä½œæ¨¡å¼ä¸‹é€‰æ‹©æœ€é€‚åˆçš„æ—¶é’Ÿæºï¼Œä»è€Œè°ƒæ•´PLLçš„å·¥ä½œé¢‘ç‡æˆ–è€…å…¶ä»–å‚æ•°ã€‚</p><p>é€šè¿‡PLL source Muxï¼Œç”¨æˆ·å¯ä»¥çµæ´»åœ°é€‰æ‹©å¤–éƒ¨æ—¶é’Ÿæºã€å†…éƒ¨æ—¶é’Ÿæºæˆ–è€…å…¶ä»–ä¿¡å·æºä½œä¸ºPLLçš„è¾“å…¥ä¿¡å·ï¼Œä»¥æ»¡è¶³ä¸åŒçš„åº”ç”¨éœ€æ±‚ã€‚è¿™æ ·å°±å®ç°äº†åœ¨åŒä¸€èŠ¯ç‰‡å†…éƒ¨å¯¹æ—¶é’Ÿè¾“å…¥æºè¿›è¡Œåˆ‡æ¢å’Œé€‰æ‹©çš„åŠŸèƒ½ã€‚</p><ul><li>HSIæŒ¯è¡å™¨ä¸HSEçš„åŒºåˆ«å°±åœ¨äºä¸€ä¸ªæ˜¯å†…éƒ¨çš„æ—¶é’Ÿæºï¼Œä¸€ä¸ªæ˜¯å¤–éƒ¨çš„æ—¶é’Ÿæºï¼ŒInsideä¸Externalã€‚</li></ul>              </div>            </details><details ><summary pointer> â‘¢ System Clock Mux </summary>              <div class='content'>              <p>åœ¨é€‰æ‹©æ—¶é’Ÿæºæ—¶éœ€è¦è€ƒè™‘ç³»ç»Ÿçš„æ€§èƒ½éœ€æ±‚å’ŒåŠŸè€—ä¼˜åŒ–ç­‰å› ç´ ã€‚åœ¨HSIï¼ˆHigh-Speed Internalï¼‰ï¼ŒHSEï¼ˆHigh-Speed Externalï¼‰ï¼Œå’ŒPLLCLKï¼ˆPhase-Locked Loop Clockï¼‰è¿™ä¸‰ä¸ªé€‰é¡¹ä¸­é€‰æ‹©PLLCLKçš„åŸå› å¯ä»¥åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><p>é«˜æ€§èƒ½ï¼šPLLCLKé€šè¿‡é”ç›¸ç¯æŠ€æœ¯å¯ä»¥ç”Ÿæˆé«˜é¢‘ç‡çš„ç¨³å®šæ—¶é’Ÿä¿¡å·ï¼Œé€šå¸¸å¯ä»¥æä¾›æ¯”HSIå’ŒHSEæ›´é«˜çš„æ—¶é’Ÿé¢‘ç‡ã€‚è¿™åœ¨ä¸€äº›é«˜æ€§èƒ½éœ€æ±‚çš„ç³»ç»Ÿä¸­æ˜¯éå¸¸é‡è¦çš„ã€‚</p></li><li><p>çµæ´»æ€§ï¼šé€‰æ‹©PLLCLKä½œä¸ºç³»ç»Ÿæ—¶é’Ÿæºå¯ä»¥æä¾›æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®PLLçš„åˆ†é¢‘å™¨å’Œå€é¢‘å™¨æ¥æ»¡è¶³ç³»ç»Ÿå¯¹æ—¶é’Ÿé¢‘ç‡çš„ç‰¹å®šéœ€æ±‚ï¼Œä»è€Œåœ¨ä¸åŒåœºæ™¯ä¸‹çµæ´»è°ƒæ•´ç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡ã€‚</p></li><li><p>å®¹é”™æ€§ï¼šPLLCLKå¯ä»¥é€šè¿‡å¤–éƒ¨æ—¶é’Ÿæºï¼ˆå¦‚æ™¶æŒ¯ï¼‰æä¾›æ›´å¥½çš„æŠ—å¹²æ‰°æ€§èƒ½ï¼Œå› æ­¤åœ¨ä¸€äº›å¯¹ç³»ç»Ÿç¨³å®šæ€§æœ‰è¦æ±‚çš„åœºåˆï¼Œé€‰æ‹©PLLCLKä½œä¸ºæ—¶é’Ÿæºå¯èƒ½æ›´ä¸ºåˆé€‚ã€‚</p></li></ol>              </div>            </details><details ><summary pointer> â‘£ HCLK </summary>              <div class='content'>              <p><span class='pbg info'>èŒƒå›´å†…éƒ½å¯ä»¥ï¼Œä½†æ˜¯è“æ¡¥æ¯å®˜æ–¹ä¾‹ç¨‹ä¸­ä¸€èˆ¬è®¾ä¸º80</span><br>HCLKæ˜¯åµŒå…¥å¼ç³»ç»Ÿä¸­å¸¸è§çš„ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯ä¸»ç³»ç»Ÿæ—¶é’Ÿï¼ˆMaster Clockï¼‰ï¼Œä¹Ÿç§°ä¸ºä¸»æ€»çº¿æ—¶é’Ÿï¼ˆMaster Bus Clockï¼‰ã€‚HCLKæ˜¯å¤„ç†å™¨æ ¸å¿ƒå’Œå¤§å¤šæ•°ç³»ç»Ÿæ€»çº¿å’Œå¤–è®¾çš„ä¸»è¦å·¥ä½œæ—¶é’Ÿï¼Œæ§åˆ¶ç³»ç»Ÿä¸­å¤§å¤šæ•°éƒ¨ä»¶çš„æ“ä½œï¼Œç”¨äºåŒæ­¥å„ä¸ªéƒ¨ä»¶çš„å·¥ä½œã€‚åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼ŒHCLKçš„é¢‘ç‡é€šå¸¸æ˜¯å…¶ä»–å¤–è®¾æ—¶é’Ÿé¢‘ç‡çš„å€æ•°ã€‚</p>              </div>            </details>              </div>            </details></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬äº”æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">è°ƒè¯•æ¥å£é€‰æ‹©</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lvgru965c.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lvgru965c.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><details open><summary pointer> è¯¦ç»†ä»‹ç» </summary>              <div class='content'>              <p>åœ¨å•ç‰‡æœºçš„ç³»ç»Ÿé…ç½®ä¸­ï¼Œé€‰æ‹©ä½¿ç”¨Serial Wireï¼ˆä¸²è¡Œçº¿ï¼‰è¿›è¡Œè°ƒè¯•æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦åŸå› ï¼š</p><ol><li><p><strong>ç®€åŒ–è¿æ¥</strong>: Serial Wire Debugï¼ˆSWDï¼‰æ˜¯ä¸€ç§åªéœ€ä½¿ç”¨ä¸¤æ ¹çº¿ï¼ˆSWDIOå’ŒSWCLKï¼‰å³å¯è¿›è¡Œè°ƒè¯•çš„æ¥å£ï¼Œç›¸æ¯”äºJTAGæ¥å£éœ€è¦æ›´å¤šçš„å¼•è„šå’Œè¿æ¥çº¿ï¼Œä½¿ç”¨Serial Wireå¯ä»¥å‡å°‘è¿æ¥å¸ƒçº¿çš„å¤æ‚æ€§ã€‚</p></li><li><p><strong>æ€§èƒ½ä¼˜åŠ¿</strong>: ç”±äºJTAGæ¥å£éœ€è¦æ›´å¤šçš„å¼•è„šå’Œæ•°æ®çº¿ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸€äº›æ€§èƒ½ç“¶é¢ˆã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSerial Wireæ¥å£æ›´ä¸ºç®€å•ï¼Œå¯ä»¥æä¾›æ›´é«˜çš„æ€§èƒ½ã€‚</p></li><li><p><strong>ä½åŠŸè€—</strong>: Serial Wireæ¥å£é€šå¸¸æ¯”JTAGæ¥å£æ¶ˆè€—æ›´å°‘çš„åŠŸè€—ï¼Œè¿™å¯¹äºåµŒå…¥å¼ç³»ç»Ÿä¸­å¯¹åŠŸè€—è¦æ±‚è¾ƒé«˜çš„åœºæ™¯éå¸¸é‡è¦ã€‚</p></li><li><p><strong>å ç”¨èµ„æºå°‘</strong>: Serial Wireæ¥å£å ç”¨çš„èµ„æºè¾ƒå°‘ï¼Œå¯¹äºä¸€äº›èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡è¦è€ƒè™‘å› ç´ ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œé€‰æ‹©åœ¨å•ç‰‡æœºç³»ç»Ÿé…ç½®ä¸­ä½¿ç”¨Serial Wireæ¥å£è¿›è¡Œè°ƒè¯•ï¼Œå¯ä»¥æä¾›æ›´ç®€å•ã€é«˜æ•ˆã€ä½åŠŸè€—çš„è°ƒè¯•æ–¹æ¡ˆï¼ŒåŒæ—¶é¿å…äº†ä¸€äº›æ½œåœ¨çš„é—®é¢˜å’Œé™åˆ¶ã€‚</p>              </div>            </details></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬å…­æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">ä¿å­˜å·¥ç¨‹</a></p></p></div><div class="body"><ul><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7egieb8qmz.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7egieb8qmz.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.92pvbi2i5d.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.92pvbi2i5d.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬ä¸ƒæ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">ç”Ÿæˆå·¥ç¨‹</a></p></p></div><div class="body"><p>ç‚¹å‡»å³ä¸Šè§’â€GENERATE CODEâ€,ç”Ÿæˆå·¥ç¨‹</p></div></div></div><p>æ‰“å¼€æ–‡ä»¶ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.7zq60mkhq1.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.7zq60mkhq1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="timeline"><div class="timenode"><div class="meta"><p><p>ç¬¬ä¸€æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">ç¼–è¯‘æ–‡ä»¶</a></p></p></div><div class="body"><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3uukois684.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3uukois684.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="note warning"><p>ä½ çš„ä»£ç ä¸€å®šè¦å†™åœ¨â€beginâ€å’Œâ€endâ€ä¹‹é—´ï¼Œä¸ç„¶ä¸‹ä¸€æ¬¡ç”Ÿæˆå·¥ç¨‹ä¼šè¢«è¦†ç›–æ‰</p></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1zhzvwjff4.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1zhzvwjff4.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬äºŒæ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">é€‰æ‹©è°ƒè¯•å™¨</a></p></p></div><div class="body"><p>é€‰æ‹©çš„å°±æ˜¯æ¿è½½è°ƒè¯•å™¨</p><ul><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.ibuu5mnx2.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.ibuu5mnx2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.2vehbd3ej7.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.2vehbd3ej7.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬ä¸‰æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">æ ¹ç›®å½•æ–°å»ºbspæ–‡ä»¶å¤¹</a></p></p></div><div class="body"><p>æ”¾è‡ªå·±å†™çš„æ–‡ä»¶(bsp:æ¿è½½æ”¯æŒåŒ…ï¼Œä»£ç åœ¨è¿™å—æ¿å­ä½¿ç”¨)</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.32hp6st6bo.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.32hp6st6bo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></div></div><div class="timenode"><div class="meta"><p><p>ç¬¬å››æ­¥ <a href="https://tumytime.space/2024/02/28/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%BA%8C-%E5%B7%A5%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%BB%BA%E7%AB%8B/">å·¥ç¨‹ç›®å½•æ–°å»ºbspæ–‡ä»¶å¤¹</a></p></p></div><div class="body"><ul><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.1ses0hevyf.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.1ses0hevyf.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li><li><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3rayqtnetn.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3rayqtnetn.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div></li></ul></div></div></div><p>å®Œç»“æ’’èŠ±~</p>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è“æ¡¥æ¯stm32å­¦ä¹ ç¬”è®°(ä¸€)ï¼šç›¸å…³å…ƒä»¶/é…ç½®</title>
      <link href="/2024/02/27/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/02/27/%E8%93%9D%E6%A1%A5%E6%9D%AFstm32%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<details ><summary pointer> ç¢ç¢å¿µ </summary>              <div class='content'>              <p>ç¦»è“æ¡¥æ¯è¿˜æœ‰45å¤©ï¼Œæˆ‘çš„32æ€»å…±æ‰å­¦äº†å››äº”å¤©&#x2F;(ã„’oã„’)&#x2F;~~<br>è™½ç„¶è€ƒæ ¸ä½œä¸šåšå®Œäº†ä½†æ˜¯éƒ½æ˜¯ç°å­¦ç°å¼„çš„ï¼Œä¸èƒ½åšåˆ°ç‹¬ç«‹ç³»ç»Ÿåœ°å®Œæˆ<br>æœ€è¿‘äº‹æƒ…å¥½å¤šï¼Œè¿™å‡ å¤©èµ¶ç´§å…ˆå­¦ä¸€é<br>2.27-3.1</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.4n7g52t9ay.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.4n7g52t9ay.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>              </div>            </details><div class="note info"><p>å¼€å‘æ¿èŠ¯ç‰‡ï¼šstm32g4rbt6;HALåº“å¼€å‘</p></div><h1 id="äº§å“æ‰‹å†Œ"><a href="#äº§å“æ‰‹å†Œ" class="headerlink" title="äº§å“æ‰‹å†Œ"></a>äº§å“æ‰‹å†Œ</h1><details open><summary pointer> äº§å“æ‰‹å†Œ </summary>              <div class='content'>              <p>è¿™ä¸ªç”µå­ä¹¦æœ‰bugã€‚ã€‚ã€‚å¦‚æœæœ‰äººæƒ³çœ‹çš„è¯ç›´æ¥ç‚¹ä¸€ä¸‹è¿™ä¸ªå°é¢ã€‚æˆ–è€…å¾€ä¸‹ç¿»ä¸€ç‚¹ï¼Œæœ‰ä¸€ä¸ªä¹±è·‘çš„ç°è‰²å’Œè“è‰²çš„ä¹¦ç±å›¾æ ‡ï¼Œç‚¹å¼€æ˜¯ç”µå­ä¹¦<br><input type="hidden" id="input_pop_1709042415128" value='<iframe id="iframe_pop_1709042415128"  src="https://book.baige.me/view/cwU" style="width:100%;height:100%;background:#eee" frameborder=0 seamless="seamless"  allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>'><a href="#" style="position: relative;display:inline-block;"  onclick="document.querySelector('body').style.overflow='hidden';document.querySelector('#pop_1709042415128').style.display='block';var value=document.getElementById('input_pop_1709042415128').value; var div = document.createElement('div'); div.innerHTML=value;div.setAttribute('style','width:100%;height:100%');document.querySelector('#pop_1709042415128').appendChild(div)" title="CT117E-M4äº§å“æ‰‹å†Œ"><img style='width: 100%;height:100%;object-fit:contain;padding: 80px;' src='https://book-png-1251142715.cos.ap-shanghai.myqcloud.com/427c4137-291d-40fc-b5ae-d816aeca6931/cover.jpg' style='height: 100%;width: 100%;object-fit: contain;' /><div onmouseout='this.style.background="rgba(85, 134, 224 ,.8)"' onmouseover='this.style.background="rgba(46, 109, 224, .8)"' style='position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(85, 134 ,224, .8)'><svg xmlns='https://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' t='1632813159349' class='icon' viewBox='0 0 1024 1024' version='1.1' p-id='2458' width='200' height='200'><path d='M924.2624 142.1824h-255.42656c-48.4096 0-93.9008 17.88416-128.19456 50.47808-11.6736 11.06944-20.79744 23.83872-28.70272 37.0944-7.9104-13.25568-17.02912-25.9072-28.8256-37.0944-34.304-32.59392-79.79008-50.47296-128.19968-50.47296H99.7376c-13.49632 0-24.44288 10.33216-24.44288 23.22944V807.3728c0 12.89216 10.94656 23.22944 24.448 23.22944h229.75488c9.61024 0 19.34336 0.73216 29.07136 2.54976 9.85088 1.83296 19.21536 4.38272 28.09344 7.79264l116.4032 43.05408c0.24064 0.11776 0.4864 0 0.72704 0.11776 2.67776 0.85504 5.35552 1.4592 8.15104 1.4592 2.80064 0 5.46816-0.48128 8.15104-1.4592 0.11776-0.11776 0.4864-0.11776 0.60928-0.11776l111.77472-41.35424a203.5456 203.5456 0 0 1 32.96256-9.00096 197.7344 197.7344 0 0 1 34.048-3.04128h224.77312c13.50656 0 24.45312-10.46016 24.45312-23.22944V165.29408c0-12.7744-10.94656-23.10656-24.45312-23.10656zM367.4368 787.43552a220.9792 220.9792 0 0 0-37.94944-3.28704H124.06272V188.5184h230.97344c35.38944 0 68.72064 13.13792 93.7728 37.09952 25.05728 23.83872 38.92224 55.45984 38.92224 89.27744v513.39776l-83.31776-30.77632a232.15616 232.15616 0 0 0-36.97152-10.09152z m532.49536-3.28704h-200.33024c-14.592 0-29.18912 1.21344-43.04896 3.77344-14.11072 2.67264-28.22144 6.44096-41.6 11.43296l-78.57152 28.94848V314.7776c0-33.6896 13.74208-65.4336 38.79936-89.27744 25.05216-23.83872 58.38336-37.0944 93.7728-37.0944h231.09632v595.7376h-0.11776z' p-id='2459' fill='#dbdbdb'></path></svg></div></a><div id="pop_1709042415128" style="display: none; position: fixed;width: 100%; height: 100%; padding: 20px; background: rgba(0, 0, 0, 0.6);box-sizing: border-box; top: 0; left: 0; z-index: 99999; "><a href="#" title="å…³é—­" onclick="document.querySelector('body').style.overflow='auto';document.querySelector('#pop_1709042415128').style.display='none';var rm=document.getElementById('iframe_pop_1709042415128');rm.parentNode.parentNode.parentNode.removeChild(rm.parentNode);" style="top:0;right:0;position:absolute;width:32px;height:32px;"><span style="position: absolute;cursor: pointer; background-color: #000;border: 2px solid #fff;width: 24px;height: 24px;border-radius: 12px;top: 5px;padding-bottom:4px;right: 5px;color:white;line-height:24px;box-shadow: 0 0 3px #000;text-align: center;display: flex;justify-content: center;align-items: center;">x</span></a></div></p>              </div>            </details><h2 id="æ™¶æŒ¯"><a href="#æ™¶æŒ¯" class="headerlink" title="æ™¶æŒ¯"></a>æ™¶æŒ¯</h2><details open><summary pointer> æ™¶æŒ¯ </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.lt4che7r.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.lt4che7r.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>è¿™ä¸ªå•ç‰‡æœºå†…éƒ¨æ™¶æŒ¯æ˜¯24MHz<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">æ™¶æŒ¯ï¼ˆCrystal Oscillatorï¼‰åœ¨å•ç‰‡æœºï¼ˆMicrocontrollerï¼‰ä¸­èµ·ç€éå¸¸é‡è¦çš„ä½œç”¨ï¼Œ</span><br><span class="line">ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**æä¾›æ—¶é’Ÿä¿¡å·**</span>ï¼šæ™¶æŒ¯åœ¨å•ç‰‡æœºä¸­ä½œä¸ºä¸€ä¸ªæ—¶é’Ÿæºï¼Œä¸ºå¾®å¤„ç†å™¨æä¾›ç¨³å®šçš„æ—¶é’Ÿä¿¡</span><br><span class="line">å·ï¼Œæ§åˆ¶ç€å•ç‰‡æœºå†…éƒ¨å„ä¸ªæ¨¡å—çš„è¿è¡ŒèŠ‚å¥ã€‚æ—¶é’Ÿä¿¡å·çš„é¢‘ç‡å†³å®šäº†å•ç‰‡æœºçš„è¿è¡Œé€Ÿåº¦å’Œ</span><br><span class="line">æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**ä¿æŒç²¾ç¡®çš„æ—¶é’Ÿé€Ÿç‡**</span>ï¼šæ™¶æŒ¯çš„æŒ¯è¡é¢‘ç‡ååˆ†ç¨³å®šï¼Œå¹¶å…·æœ‰è¾ƒé«˜çš„å‡†ç¡®æ€§ï¼Œå¯æä¾›</span><br><span class="line">å¾®å¤„ç†å™¨æ‰€éœ€çš„ç²¾ç¡®æ—¶é’Ÿé€Ÿç‡ï¼Œç¡®ä¿ç¨‹åºè¿è¡Œçš„ç¨³å®šæ€§å’Œå‡†ç¡®æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**åŒæ­¥å¤–éƒ¨è®¾å¤‡**</span>ï¼šé€šè¿‡æ™¶æŒ¯æä¾›çš„æ—¶é’Ÿä¿¡å·ï¼Œå•ç‰‡æœºå¯ä»¥ä¸å¤–éƒ¨è®¾å¤‡è¿›è¡Œæ•°æ®äº¤æ¢</span><br><span class="line">å’Œé€šä¿¡ï¼Œä¿è¯æ•°æ®ä¼ è¾“çš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**å®ç°å®šæ—¶ä¸è®¡æ•°**</span>ï¼šæ™¶æŒ¯å¯ä»¥ç”¨äºå®ç°å®šæ—¶å™¨å’Œè®¡æ•°å™¨åŠŸèƒ½ï¼Œä¾‹å¦‚åœ¨å•ç‰‡æœºä¸­å®ç°</span><br><span class="line">å»¶æ—¶æ§åˆ¶ã€PWMè¾“å‡ºç­‰åŠŸèƒ½ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> <span class="strong">**ååŠ©å®ç°ä¸²è¡Œé€šä¿¡**</span>ï¼šæ™¶æŒ¯é€šå¸¸ä¸ä¸²è¡Œé€šä¿¡æ¨¡å—ï¼ˆå¦‚UARTã€SPIã€I2Cï¼‰ç»“åˆä½¿ç”¨ï¼Œ</span><br><span class="line">æä¾›å‡†ç¡®çš„æ—¶é’Ÿä¿¡å·æ¥åŒæ­¥æ•°æ®ä¼ è¾“ã€‚</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼Œæ™¶æŒ¯åœ¨å•ç‰‡æœºä¸­æ‰®æ¼”ç€æä¾›ç¨³å®šæ—¶é’Ÿä¿¡å·ã€ç¡®ä¿ç¨‹åºç¨³å®šæ€§å’Œå‡†ç¡®æ€§ã€å®ç°è®¡</span><br><span class="line">æ—¶è®¡æ•°ç­‰å…³é”®ä½œç”¨ã€‚åœ¨å•ç‰‡æœºè®¾è®¡å’Œåº”ç”¨ä¸­ï¼Œé€‰æ‹©é€‚åˆçš„æ™¶æŒ¯é¢‘ç‡å’Œç±»å‹æ˜¯éå¸¸é‡è¦</span><br></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">æ™¶æŒ¯åœ¨å•ç‰‡æœºä¸­é€šå¸¸è¢«ç”¨ä½œå¤–éƒ¨æ—¶é’Ÿï¼ˆ<span class="keyword">External </span><span class="keyword">Clockï¼‰ã€‚å¤–éƒ¨æ—¶é’Ÿæ˜¯ç”±å¤–éƒ¨æ™¶æŒ¯æä¾›</span></span><br><span class="line"><span class="keyword"></span>çš„æ—¶é’Ÿä¿¡å·ï¼Œé€šè¿‡å•ç‰‡æœºå¼•è„šè¿æ¥åˆ°æ™¶æŒ¯çš„è¾“å…¥ç«¯ã€‚å•ç‰‡æœºæ ¹æ®å¤–éƒ¨æ™¶æŒ¯æä¾›çš„ä¿¡å·æ¥åŒ</span><br><span class="line">æ­¥å…¶å†…éƒ¨çš„æ“ä½œï¼Œç¡®ä¿å„ä¸ªéƒ¨ä»¶æŒ‰ç…§è§„å®šçš„é¢‘ç‡å’Œæ—¶åºè¿›è¡Œå·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">ç›¸æ¯”ä¹‹ä¸‹ï¼Œå†…éƒ¨æ—¶é’Ÿï¼ˆInternal <span class="keyword">Clockï¼‰æ˜¯ç”±å•ç‰‡æœºå†…éƒ¨çš„æ—¶é’Ÿå‘ç”Ÿå™¨äº§ç”Ÿçš„æ—¶é’Ÿä¿¡å·ã€‚</span></span><br><span class="line"><span class="keyword"></span>åœ¨ä¸€äº›å•ç‰‡æœºä¸­ï¼Œå†…éƒ¨æ—¶é’Ÿå¯ä»¥è¢«é€‰æ‹©ä¸ºç³»ç»Ÿæ—¶é’Ÿï¼Œä½†é€šå¸¸å¤–éƒ¨æ™¶æŒ¯æ›´å¸¸ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†</span><br><span class="line">æ›´é«˜çš„æ—¶é’Ÿç¨³å®šæ€§å’Œç²¾åº¦ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œæ™¶æŒ¯åœ¨å•ç‰‡æœºä¸­é€šå¸¸æ˜¯ä½œä¸ºå¤–éƒ¨æ—¶é’Ÿä½¿ç”¨çš„ï¼Œç”¨æ¥æä¾›ç¨³å®šçš„æ—¶é’Ÿä¿¡å·ä»¥åŒæ­¥å•ç‰‡æœº</span><br><span class="line">çš„å„ä¸ªéƒ¨ä»¶ã€‚</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="ä¿¡å·å‘ç”Ÿå™¨"><a href="#ä¿¡å·å‘ç”Ÿå™¨" class="headerlink" title="ä¿¡å·å‘ç”Ÿå™¨"></a>ä¿¡å·å‘ç”Ÿå™¨</h2><details open><summary pointer> ä¿¡å·å‘ç”Ÿå™¨ </summary>              <div class='content'>              <p>é‡Œé¢æœ‰555å®šæ—¶å™¨</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¿¡å·å‘ç”Ÿå™¨å¯ä»¥é€šè¿‡å®ƒçš„è¾“å‡ºå¼•è„šæ¥äº§ç”Ÿå„ç§ç±»å‹çš„ä¿¡å·ã€‚è¿™äº›ä¿¡å·å¯ä»¥æ˜¯æ­£å¼¦æ³¢ã€æ–¹æ³¢ã€</span><br><span class="line">è„‰å†²æ³¢ç­‰ä¸åŒæ³¢å½¢çš„ä¿¡å·ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·æœ‰ä¸åŒå¹…åº¦ã€é¢‘ç‡å’Œç›¸ä½çš„ä¿¡å·ã€‚é€šè¿‡è°ƒèŠ‚ä¿¡å·å‘ç”Ÿ</span><br><span class="line">å™¨çš„è®¾ç½®ï¼Œå¯ä»¥æ§åˆ¶æ‰€è¾“å‡ºä¿¡å·çš„ç‰¹æ€§ï¼Œå°†å…¶æ¥å…¥ç”µè·¯çš„è¾“å…¥ç«¯ï¼Œä»è€Œæµ‹è¯•ã€æ ¡å‡†ç”µè·¯çš„æ€§</span><br><span class="line">èƒ½æˆ–è¿›è¡Œå„ç§å®éªŒã€‚å› æ­¤ï¼Œä¿¡å·å‘ç”Ÿå™¨åœ¨å®é™…å·¥ç¨‹ä¸­å¸¸è¢«ç”¨æ¥é©±åŠ¨ç”µè·¯ã€æ¨¡æ‹Ÿä¸åŒä¿¡å·æ¡ä»¶</span><br><span class="line">ä¸‹çš„å·¥ä½œçŠ¶æ€ï¼Œå¹¶å¯¹ç”µè·¯è¿›è¡Œæ€§èƒ½è¯„ä¼°å’Œç¡®è®¤ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ç”µè·¯è®¾è®¡å’Œæµ‹è¯•ä¸­ï¼Œä¿¡å·å‘ç”Ÿå™¨æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼Œå…¶ä½œç”¨åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ä¸ªæ–¹</span><br><span class="line">é¢ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**ä¿¡å·æºæµ‹è¯•ä¸æ ¡å‡†**</span>ï¼šç”¨ä¿¡å·å‘ç”Ÿå™¨æ¥æµ‹è¯•ç”µè·¯çš„è¾“å…¥å’Œè¾“å‡ºå“åº”ï¼Œä»¥éªŒè¯ç”µè·¯çš„æ€§</span><br><span class="line">èƒ½å’Œæ­£ç¡®æ€§ã€‚ä¿¡å·å‘ç”Ÿå™¨å¯ä»¥æä¾›å„ç§ç±»å‹çš„æ ‡å‡†ä¿¡å·ï¼Œç”¨äºä¸å¾…æµ‹è¯•çš„ç”µè·¯è¿›è¡Œæ¯”è¾ƒï¼Œç¡®</span><br><span class="line">ä¿ç”µè·¯æ­£å¸¸å·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**é¢‘ç‡å“åº”æµ‹è¯•**</span>ï¼šä¿¡å·å‘ç”Ÿå™¨å¯ä»¥ç”Ÿæˆä¸åŒé¢‘ç‡çš„ä¿¡å·ï¼Œç”¨äºæµ‹è¯•ç”µè·¯çš„é¢‘ç‡å“åº”ç‰¹</span><br><span class="line">æ€§ã€‚é€šè¿‡æ”¹å˜ä¿¡å·å‘ç”Ÿå™¨çš„é¢‘ç‡ï¼Œå¯ä»¥æ£€éªŒç”µè·¯åœ¨ä¸åŒé¢‘ç‡ä¸‹çš„è¡¨ç°ï¼Œæ‰¾å‡ºé¢‘ç‡å“åº”èŒƒå›´å’Œ</span><br><span class="line">ç‰¹æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**å¹…åº¦æµ‹é‡**</span>ï¼šé€šè¿‡è°ƒèŠ‚ä¿¡å·å‘ç”Ÿå™¨çš„è¾“å‡ºå¹…åº¦ï¼Œå¯ä»¥æ¨¡æ‹Ÿä¸åŒå¹…åº¦çš„è¾“å…¥ä¿¡å·ï¼Œä»¥æµ‹</span><br><span class="line">è¯•ç”µè·¯åœ¨ä¸åŒè¾“å…¥å¹…åº¦ä¸‹çš„å“åº”ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**ç›¸ä½æµ‹è¯•**</span>ï¼šä¿¡å·å‘ç”Ÿå™¨å¯ä»¥ç”Ÿæˆå…·æœ‰å¯è°ƒèŠ‚ç›¸ä½çš„ä¿¡å·ï¼Œç”¨äºæµ‹è¯•ç”µè·¯çš„ç›¸ä½ç‰¹æ€§ã€‚</span><br><span class="line">ç›¸ä½æµ‹è¯•å¯¹äºæ—¶åºè¦æ±‚ä¸¥æ ¼çš„ç”µè·¯è®¾è®¡éå¸¸é‡è¦ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> <span class="strong">**è„‰å†²æµ‹è¯•**</span>ï¼šä¿¡å·å‘ç”Ÿå™¨å¯ä»¥ç”Ÿæˆè„‰å†²ä¿¡å·ï¼Œç”¨äºæµ‹è¯•ç”µè·¯å¯¹è„‰å†²ä¿¡å·çš„å“åº”é€Ÿåº¦å’Œ</span><br><span class="line">ç¨³å®šæ€§ï¼ŒéªŒè¯ç”µè·¯åœ¨è„‰å†²ä¿¡å·æ¡ä»¶ä¸‹çš„å·¥ä½œçŠ¶æ€ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> <span class="strong">**è°ƒåˆ¶å’Œè§£è°ƒ**</span>ï¼šä¿¡å·å‘ç”Ÿå™¨å¯ä»¥ç”Ÿæˆå„ç§è°ƒåˆ¶ä¿¡å·ï¼ˆå¦‚è°ƒå¹…ã€è°ƒé¢‘ã€è°ƒç›¸ä¿¡å·ï¼‰ï¼Œç”¨</span><br><span class="line">äºæµ‹è¯•å’ŒéªŒè¯è°ƒåˆ¶è§£è°ƒå™¨ç­‰é€šè®¯è®¾å¤‡çš„æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">æ€»çš„æ¥è¯´ï¼Œä¿¡å·å‘ç”Ÿå™¨åœ¨ç”µè·¯ä¸­çš„ä½œç”¨æ˜¯æä¾›æ ‡å‡†åŒ–çš„å„ç§ç±»å‹ä¿¡å·ï¼Œå¸®åŠ©å·¥ç¨‹å¸ˆè¿›è¡Œç”µè·¯</span><br><span class="line">è®¾è®¡ã€æµ‹è¯•å’Œè°ƒè¯•å·¥ä½œï¼Œç¡®ä¿ç”µè·¯æ­£å¸¸å·¥ä½œå¹¶ç¬¦åˆè®¾è®¡è¦æ±‚ã€‚ä¿¡å·å‘ç”Ÿå™¨æ˜¯ç”µå­å·¥ç¨‹å¸ˆå’ŒæŠ€</span><br><span class="line">æœ¯äººå‘˜åœ¨å®éªŒå®¤å’Œå·¥ç¨‹ç°åœºä¸­å¿…ä¸å¯å°‘çš„å·¥å…·ä¹‹ä¸€ã€‚</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="æ¨¡æ‹Ÿè¾“å‡º"><a href="#æ¨¡æ‹Ÿè¾“å‡º" class="headerlink" title="æ¨¡æ‹Ÿè¾“å‡º"></a>æ¨¡æ‹Ÿè¾“å‡º</h2><details open><summary pointer> æ¨¡æ‹Ÿè¾“å‡º </summary>              <div class='content'>              <p>æ¿å­ä¸Šçš„ä¸¤ä¸ªå¯è°ƒç”µé˜»ï¼ˆR37å’ŒR38ï¼‰<br><span class='pbg info'>å¦å¤–ä¸¤ä¸ªå¯è°ƒç”µé˜»å‘¢ï¼Ÿ</span></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">å•ç‰‡æœºçš„æ¨¡æ‹Ÿè¾“å‡ºé€šå¸¸æ˜¯é€šè¿‡æ•°å­—åˆ°æ¨¡æ‹Ÿè½¬æ¢å™¨ï¼ˆDACï¼ŒDigital-to-Analog Converterï¼‰</span><br><span class="line">å®ç°çš„ã€‚DACå°†å•ç‰‡æœºå†…éƒ¨çš„æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œä»è€Œå¯ä»¥æ§åˆ¶å¤–éƒ¨æ¨¡æ‹Ÿè®¾å¤‡æˆ–ä¼ æ„Ÿå™¨ã€‚</span><br><span class="line"></span><br><span class="line">ä¸€èˆ¬æ¥è¯´ï¼Œå•ç‰‡æœºçš„æ¨¡æ‹Ÿè¾“å‡ºå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> <span class="strong">**ç²¾åº¦å’Œåˆ†è¾¨ç‡**</span>ï¼šDACçš„ç²¾åº¦å’Œåˆ†è¾¨ç‡å†³å®šæ¨¡æ‹Ÿè¾“å‡ºä¿¡å·çš„è´¨é‡å’Œç²¾åº¦ã€‚é«˜ç²¾åº¦çš„DAC</span><br><span class="line">èƒ½å¤Ÿè¾“å‡ºæ›´å‡†ç¡®çš„æ¨¡æ‹Ÿä¿¡å·ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="strong">**è¾“å‡ºèŒƒå›´**</span>ï¼šDACçš„è¾“å‡ºèŒƒå›´å†³å®šäº†æ¨¡æ‹Ÿä¿¡å·å¯ä»¥è¾¾åˆ°çš„æœ€å¤§å’Œæœ€å°ç”µå‹å€¼ã€‚ä¸€äº›DAC</span><br><span class="line">å…·æœ‰å¯ç¼–ç¨‹çš„è¾“å‡ºèŒƒå›´ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿçµæ´»æ§åˆ¶è¾“å‡ºä¿¡å·çš„èŒƒå›´ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="strong">**è¾“å‡ºç¨³å®šæ€§**</span>ï¼šDACçš„è¾“å‡ºåº”å…·æœ‰ç¨³å®šæ€§ï¼Œä»¥ç¡®ä¿æ¨¡æ‹Ÿä¿¡å·çš„ç¨³å®šæ€§å’Œå‡†ç¡®æ€§ã€‚å› æ­¤ï¼Œ</span><br><span class="line">DACåº”å…·æœ‰è‰¯å¥½çš„æ¸©åº¦ç¨³å®šæ€§å’Œä¾›ç”µç¨³å®šæ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="strong">**è¾“å‡ºé©±åŠ¨èƒ½åŠ›**</span>ï¼šDACçš„è¾“å‡ºé©±åŠ¨èƒ½åŠ›å†³å®šäº†å…¶èƒ½å¤Ÿé©±åŠ¨çš„è´Ÿè½½çš„å¤§å°ã€‚è¾ƒé«˜çš„è¾“å‡ºé©±</span><br><span class="line">åŠ¨èƒ½åŠ›æ„å‘³ç€DACå¯ä»¥è¿æ¥åˆ°è¾ƒå¤§ç”µé˜»æˆ–å®¹æ€§è´Ÿè½½è€Œä¸å½±å“è¾“å‡ºä¿¡å·çš„è´¨é‡ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨å•ç‰‡æœºåº”ç”¨ä¸­ï¼Œæ¨¡æ‹Ÿè¾“å‡ºé€šå¸¸ç”¨äºæ§åˆ¶ç”µå‹æˆ–ç”µæµï¼Œä»¥è¾“å‡ºéœ€è¦çš„æ¨¡æ‹Ÿä¿¡å·ã€‚é€šè¿‡DACè½¬æ¢</span><br><span class="line">æ•°å­—ä¿¡å·ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œå•ç‰‡æœºå¯ä»¥ä¸æ¨¡æ‹Ÿç”µè·¯æˆ–ä¼ æ„Ÿå™¨è¿›è¡Œæœ‰æ•ˆçš„é€šä¿¡å’Œæ§åˆ¶ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å•ç‰‡æœºçš„æ¨¡æ‹Ÿè¾“å‡ºé€šå¸¸æ˜¯é€šè¿‡æ•°å­—åˆ°æ¨¡æ‹Ÿè½¬æ¢å™¨ï¼ˆDACï¼ŒDigital-<span class="keyword">to</span>-Analog Converterï¼‰</span><br><span class="line">å®ç°çš„ã€‚DACå°†å•ç‰‡æœºå†…éƒ¨çš„æ•°å­—ä¿¡å·è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œä»è€Œå¯ä»¥æ§åˆ¶å¤–éƒ¨æ¨¡æ‹Ÿè®¾å¤‡æˆ–ä¼ æ„Ÿå™¨ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å¼€å‘æ¿ä¸Šé€šå¸¸ä¼šé…å¤‡å¯è°ƒç”µé˜»ï¼ˆä¹Ÿç§°ä¸ºç”µä½å™¨ï¼‰ï¼Œç”¨äºè°ƒèŠ‚æ¨¡æ‹Ÿè¾“å‡ºä¿¡å·çš„ç”µå‹æ°´å¹³ã€‚ç»“</span><br><span class="line">åˆå¯è°ƒç”µé˜»ï¼Œå•ç‰‡æœºçš„æ¨¡æ‹Ÿè¾“å‡ºå¯ä»¥æ›´åŠ çµæ´»åœ°è¿›è¡Œè°ƒèŠ‚å’Œæ§åˆ¶ï¼Œä»¥é€‚åº”ä¸åŒçš„åº”ç”¨éœ€æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡è°ƒèŠ‚å¯è°ƒç”µé˜»çš„é˜»å€¼ï¼Œå¯ä»¥æ”¹å˜æ¨¡æ‹Ÿè¾“å‡ºç”µè·¯ä¸­çš„ç”µé˜»å€¼ï¼Œä»è€Œå½±å“æ¨¡æ‹Ÿè¾“å‡ºä¿¡å·çš„ç”µ</span><br><span class="line">å‹æ°´å¹³ã€‚è¿™ç§æ–¹å¼å¯ä»¥å®ç°å¯¹æ¨¡æ‹Ÿè¾“å‡ºä¿¡å·çš„ç²¾ç»†è°ƒèŠ‚ï¼Œä½¿å¾—å•ç‰‡æœºå¯ä»¥è¾“å‡ºå„ç§ä¸åŒèŒƒå›´</span><br><span class="line">å’Œç²¾åº¦çš„æ¨¡æ‹Ÿä¿¡å·ã€‚</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="LEDæŒ‡ç¤ºç¯"><a href="#LEDæŒ‡ç¤ºç¯" class="headerlink" title="LEDæŒ‡ç¤ºç¯"></a>LEDæŒ‡ç¤ºç¯</h2><details open><summary pointer> LEDæŒ‡ç¤ºç¯ </summary>              <div class='content'>              <p><span class='pbg info'>ledå¼•è„šå’Œlcdå±ä¸€äº›å¼•è„šå…±ç”¨ï¼ˆPC8-15ï¼‰ï¼Œæ‰€ä»¥åŠ äº†é”å­˜å™¨</span></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">å½“LEDå¼•è„šå’ŒLCDå±å¼•è„šå…±ç”¨åŒä¸€ä¸ªå¼•è„šæ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä¿¡å·å†²çªçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ</span><br><span class="line">å¯ä»¥ä½¿ç”¨é”å­˜å™¨ï¼ˆLatchï¼‰æ¥è¿›è¡Œä¿¡å·åˆ‡æ¢å’Œæ—¶åºæ§åˆ¶ã€‚é”å­˜å™¨æ˜¯ä¸€ç§é€»è¾‘ç”µè·¯å…ƒä»¶ï¼Œå¯ä»¥å­˜</span><br><span class="line">å‚¨è¾“å…¥ä¿¡å·çš„çŠ¶æ€ï¼Œå¹¶åœ¨æ—¶é’Ÿä¿¡å·ä¸‹å°†å…¶è¾“å‡ºã€‚</span><br><span class="line"></span><br><span class="line">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒLEDå¼•è„šå’ŒLCDå¼•è„šå¯ä»¥é€šè¿‡é”å­˜å™¨åˆ†æ—¶å…±äº«åŒä¸€ä¸ªå¼•è„šã€‚å½“éœ€è¦æ§åˆ¶LEDæ—¶ï¼Œ</span><br><span class="line">å°†LEDä¿¡å·è¾“å…¥é”å­˜å™¨å¹¶é”å®šçŠ¶æ€ï¼Œæ­¤æ—¶é”å­˜å™¨ä¼šå°†LEDä¿¡å·ä¿æŒåœ¨è¾“å‡ºç«¯å£ã€‚å½“éœ€è¦æ§åˆ¶LCD</span><br><span class="line">å±æ—¶ï¼Œå°†LCDä¿¡å·è¾“å…¥é”å­˜å™¨å¹¶é”å®šçŠ¶æ€ï¼Œé”å­˜å™¨ä¼šå°†LCDä¿¡å·ä¿æŒåœ¨è¾“å‡ºç«¯å£ã€‚è¿™æ ·å°±å®ç°äº†</span><br><span class="line">LEDå¼•è„šå’ŒLCDå¼•è„šåœ¨åŒä¸€ä¸ªå¼•è„šä¸Šçš„åˆ†æ—¶å…±äº«ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡å¼•å…¥é”å­˜å™¨ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶LEDå’ŒLCDä¿¡å·çš„è¾“å‡ºæ—¶åºï¼Œé¿å…ä¿¡å·å†²çªå’Œå¹²æ‰°ã€‚è¿™ç§è®¾è®¡</span><br><span class="line">èƒ½å¤Ÿæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œçµæ´»æ€§ï¼ŒåŒæ—¶å‡å°‘ç¡¬ä»¶è®¾è®¡çš„å¤æ‚åº¦ã€‚åœ¨å®é™…ç”µè·¯è®¾è®¡ä¸­ï¼Œé”å­˜å™¨é€š</span><br><span class="line">å¸¸è¢«ç”¨äºæ§åˆ¶ä¿¡å·çš„æ—¶åºå’Œåˆ‡æ¢ï¼Œç¡®ä¿ä¸åŒä¿¡å·ä¹‹é—´çš„æ­£å¸¸ä¼ è¾“å’Œå¤„ç†ã€‚</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="æŒ‰é”®"><a href="#æŒ‰é”®" class="headerlink" title="æŒ‰é”®"></a>æŒ‰é”®</h2><details open><summary pointer> æŒ‰é”® </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.45f32xi2l.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.45f32xi2l.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p><span class='pbg info'>æŒ‰å‰é«˜ç”µå¹³ï¼ŒæŒ‰åæ¥åœ°-&gt;ä½ç”µå¹³</span></p>              </div>            </details><h3 id="VCCå’ŒVDD"><a href="#VCCå’ŒVDD" class="headerlink" title="VCCå’ŒVDD"></a>VCCå’ŒVDD</h3><details open><summary pointer> VCCå’ŒVDD </summary>              <div class='content'>              <p>åœ¨å•ç‰‡æœºä¸­ï¼ŒVDDå’ŒVCCéƒ½æ˜¯æŒ‡ä¾›ç”µç”µå‹ï¼Œä½†åœ¨ä¸åŒçš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬æœ‰ç€ä¸åŒçš„å«ä¹‰å’Œåº”ç”¨ã€‚</p><p>ä¸€ã€VCC<br>VCCï¼ˆVoltage at the Common Collectorï¼‰æ˜¯æŒ‡èŠ¯ç‰‡çš„ç”µæºç”µå‹ï¼Œé€šå¸¸æ˜¯5Væˆ–3.3Vï¼Œ<br>ç”¨äºä¸ºèŠ¯ç‰‡æä¾›å·¥ä½œç”µå‹ã€‚</p><p>è¿™é‡Œæœ‰å¿…è¦å…ˆå¼ºè°ƒä¸‹ç”µæºç”µå‹ã€‚</p><p>ç”µæºç”µå‹æ˜¯æŒ‡ç”µæºè¾“å‡ºçš„ç”µå‹ï¼Œå®ƒæ˜¯ä¸ºç”µè·¯ä¸­çš„å„ä¸ªå…ƒå™¨ä»¶å’Œå­ç³»ç»Ÿ(æ¯”å¦‚å•ç‰‡æœº)æä¾›<br>ä¾›ç”µç”µå‹çš„ç”µæºç”µå‹ã€‚</p><p>ç”µæºç”µå‹é€šå¸¸ç”±ç”µæºæ¨¡å—æä¾›ï¼Œå®ƒå¯ä»¥æ˜¯äº¤æµç”µã€ç›´æµç”µæˆ–è€…å…¶ä»–å½¢å¼çš„ç”µæºä¿¡å·ã€‚</p><p>æ¯”å¦‚è¯´è¿™ä¸ªBUCKç”µæºç”µè·¯ï¼Œè¾“å‡ºçš„VCC 3.3Vå°±å±äºç”µæºç”µå‹ã€‚</p><p>VCCé€šå¸¸è¿æ¥åˆ°èŠ¯ç‰‡çš„æ­£æç”µæºï¼Œä¹Ÿå°±æ˜¯èŠ¯ç‰‡çš„ç”µæºè¾“å…¥ç«¯ã€‚</p><p>äºŒã€VDD<br>VDDï¼ˆVoltage Drain-to-Drainï¼‰æ˜¯æŒ‡MOSFETåœºæ•ˆåº”ç®¡çš„æ¼æç”µå‹ï¼Œä¹Ÿæˆä¸ºä¾›ç”µç”µå‹ã€‚</p><p>ä¾›ç”µç”µå‹é€šå¸¸æ˜¯ç”±ç”µæºç”µå‹æä¾›ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç”µè·¯ä¸­æŸä¸ªå…ƒå™¨ä»¶æˆ–å­ç³»ç»Ÿæ‰€éœ€è¦çš„ç”µå‹ï¼Œå®ƒ<br>æ˜¯è¯¥å…ƒå™¨ä»¶æˆ–å­ç³»ç»Ÿæ­£å¸¸å·¥ä½œæ‰€å¿…éœ€çš„ç”µå‹ã€‚</p><p>æ¯”å¦‚è¯´å•ç‰‡æœºé‡Œé¢æœ‰å¾ˆå¤šæ¨¡å—ï¼Œæ¯”å¦‚GPIOã€å®šæ—¶å™¨ã€USARTã€ADCç­‰ç­‰ï¼Œè¿™äº›æ¨¡å—éƒ½æ˜¯å±<br>äºå•ç‰‡æœºçš„å­ç³»ç»Ÿã€‚</p><p>VDDé€šå¸¸è¿æ¥åˆ°èŠ¯ç‰‡çš„ç”µæºå¼•è„šï¼Œç„¶åç»™å†…éƒ¨å„ä¸ªæ¨¡å—ä¾›ç”µï¼Œå®ƒæ˜¯å•ç‰‡æœºç”µæºç”µå‹çš„ä¸€ç§<br>å®šä¹‰æ–¹å¼ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬å•ç‰‡æœºçš„ä¾›ç”µç”µå‹å¼•è„šå°±æ˜¯ç”¨VDDè¡¨ç¤ºã€‚</p><p>è¿™ä¸ªVDDæ˜¯å¯ä»¥ç›´æ¥æ¥åˆ°ç”µæºç”µå‹VCC 3.3Vçš„ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒVCCå’ŒVDDéƒ½æ˜¯å•ç‰‡æœºä¸­çš„ç”µæºç”µå‹ï¼Œä¸€èˆ¬æ¥è¯´ä¸ç”¨å¤ªåˆ»æ„å»åŒºåˆ†ï¼Œä¸€èˆ¬è®¾è®¡ç¡¬<br>ä»¶çš„æ—¶å€™ä¹Ÿæ²¡è¿™ä¹ˆè®²ç©¶ã€‚</p><p>æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨è®¾è®¡å•ç‰‡æœºç”µè·¯æ—¶ï¼Œéœ€è¦ä»”ç»†ç†è§£èŠ¯ç‰‡æ‰‹å†Œä¸­å¯¹ä¾›ç”µç”µå‹çš„éœ€æ±‚è¯´æ˜ï¼Œä»¥ä¿<br>è¯æ­£ç¡®çš„ä¾›ç”µå’Œå·¥ä½œã€‚</p>              </div>            </details><h2 id="I2Cæ€»çº¿"><a href="#I2Cæ€»çº¿" class="headerlink" title="I2Cæ€»çº¿"></a>I2Cæ€»çº¿</h2><details open><summary pointer> I2Cæ€»çº¿ </summary>              <div class='content'>              <div class="tagLink"><a class="link-card" title="é˜…è¯»åŸæ–‡" href="https://zhuanlan.zhihu.com/p/282949543"><span class="link-card-backdrop" style="background-image: url(https://pic1.zhimg.com/70/v2-cebf666f5a59f3a5ce835dbf63ebe934_1440w.avis?source=172ae18b&biz_tag=Post)"></span><div class="left"><img src="https://pic1.zhimg.com/70/v2-cebf666f5a59f3a5ce835dbf63ebe934_1440w.avis?source=172ae18b&biz_tag=Post" class="lazyload placeholder" data-srcset="https://pic1.zhimg.com/70/v2-cebf666f5a59f3a5ce835dbf63ebe934_1440w.avis?source=172ae18b&biz_tag=Post" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">é˜…è¯»åŸæ–‡</p><p class="url">https://zhuanlan.zhihu.com/p/282949543</p></div></a></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/image.3nrcswwn45.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/image.3nrcswwn45.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><details open><summary pointer> U2(EEPROM) </summary>              <div class='content'>              <p>EEPROMæ˜¯å¯æ“¦é™¤å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨ï¼ˆElectrically Erasable Programmable Read-Only Memoryï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç”¨äºå­˜å‚¨æ•°æ®çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨ã€‚åœ¨å•ç‰‡æœºä¸­ï¼ŒEEPROMé€šå¸¸è¢«ç”¨æ¥å­˜å‚¨éœ€è¦é•¿æœŸä¿ç•™çš„æ•°æ®ï¼Œä¾‹å¦‚é…ç½®å‚æ•°ã€æ ¡å‡†æ•°æ®ã€ç”¨æˆ·è®¾ç½®ç­‰ã€‚ä»¥ä¸‹æ˜¯å…³äºEEPROMçš„ä¸€äº›è¯¦ç»†è§£é‡Šï¼š</p><ol><li><p><strong>å¯æ“¦é™¤æ€§</strong>ï¼šEEPROMå¯ä»¥é€šè¿‡ç”µæ°”æ–¹å¼è¿›è¡Œæ“¦é™¤ï¼Œè€Œæ— éœ€é¢å¤–çš„è®¾å¤‡æˆ–å…‰æºã€‚è¿™æ„å‘³ç€å­˜å‚¨åœ¨EEPROMä¸­çš„æ•°æ®å¯ä»¥è¢«æ“¦é™¤å¹¶é‡æ–°å†™å…¥ï¼Œè€Œä¸ä¼šæŸåèŠ¯ç‰‡ã€‚</p></li><li><p><strong>å¯ç¼–ç¨‹æ€§</strong>ï¼šEEPROMå…è®¸å°†æ•°æ®å†™å…¥å…¶ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å•ç‰‡æœºæˆ–å…¶ä»–è®¾å¤‡æ¥ç¼–ç¨‹ã€‚è¿™ä½¿å¾—ç”¨æˆ·å¯ä»¥éšæ—¶æ›´æ–°æˆ–æ›´æ”¹å­˜å‚¨åœ¨EEPROMä¸­çš„æ•°æ®ã€‚</p></li><li><p><strong>åªè¯»ç‰¹æ€§</strong>ï¼šå°½ç®¡EEPROMæ˜¯å¯ç¼–ç¨‹å­˜å‚¨å™¨ï¼Œä½†åœ¨æ­£å¸¸æ“ä½œæœŸé—´ï¼Œå­˜å‚¨åœ¨å…¶ä¸­çš„æ•°æ®æ˜¯åªè¯»çš„ï¼Œå³åœ¨ä¸ç»è¿‡æ˜ç¡®çš„æ“¦é™¤å’Œç¼–ç¨‹æ“ä½œæ—¶ï¼Œæ•°æ®æ˜¯æŒä¹…çš„ã€‚</p></li><li><p><strong>éæ˜“å¤±æ€§</strong>ï¼šä¸éšæœºå­˜å‚¨å™¨ï¼ˆRAMï¼‰ä¸åŒï¼ŒEEPROMæ˜¯éæ˜“å¤±æ€§å­˜å‚¨å™¨ï¼Œè¿™æ„å‘³ç€å³ä½¿åœ¨æ–­ç”µæƒ…å†µä¸‹ï¼Œæ•°æ®ä¹Ÿä¼šè¢«ä¿ç•™ã€‚å› æ­¤ï¼ŒEEPROMå¸¸è¢«ç”¨æ¥ä¿å­˜éœ€è¦é•¿æœŸå­˜å‚¨çš„å…³é”®æ•°æ®ã€‚</p></li><li><p><strong>å¯¿å‘½</strong>ï¼šEEPROMå­˜å‚¨å™¨å¯ä»¥è¢«æ“¦é™¤å’Œå†™å…¥çš„æ¬¡æ•°é€šå¸¸å—é™ï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒçš„æ“¦é™¤å’Œå†™å…¥æ¬¡æ•°æœ‰ä¸€å®šçš„å¯¿å‘½ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨EEPROMæ—¶éœ€è¦æ³¨æ„é¿å…é¢‘ç¹æ“¦é™¤å’Œå†™å…¥æ“ä½œï¼Œä»¥å»¶é•¿å…¶ä½¿ç”¨å¯¿å‘½ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒEEPROMåœ¨å•ç‰‡æœºå’Œå…¶ä»–åµŒå…¥å¼ç³»ç»Ÿä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œç”¨äºä¿å­˜éœ€è¦é•¿æœŸä¿ç•™çš„æ•°æ®ã€‚å®ƒæä¾›äº†ä¸€ç§é«˜åº¦å¯é ã€è€ç”¨ä¸”éæ˜“å¤±çš„æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚å¸Œæœ›è¿™äº›è§£é‡Šå¯¹æ‚¨æœ‰å¸®åŠ©ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚</p>              </div>            </details><details open><summary pointer> U3(æ•°å­—ç”µä½å™¨) </summary>              <div class='content'>              <ol><li><p><strong>æ•°å­—ç”µä½å™¨</strong>ï¼š</p><ul><li>æ•°å­—ç”µä½å™¨æ˜¯ä¸€ç§ç”µé˜»å™¨ï¼Œå®ƒé€šè¿‡æ•°å­—ä¿¡å·æ¥æ§åˆ¶ç”µé˜»å€¼ï¼Œå®ç°å¯¹ç”µè·¯ä¸­æŸäº›å…ƒä»¶çš„è°ƒèŠ‚å’Œæ§åˆ¶ã€‚</li><li>æ•°å­—ç”µä½å™¨é€šå¸¸ç”±å¤šä¸ªç”µé˜»å•å…ƒç»„æˆï¼Œé€šè¿‡åˆ‡æ¢è¿™äº›ç”µé˜»å•å…ƒï¼Œå¯ä»¥è°ƒèŠ‚æ•´ä½“çš„ç”µé˜»å€¼ã€‚</li><li>å•ç‰‡æœºå¯ä»¥ä½¿ç”¨æ•°å­—ç”µä½å™¨æ¥æ¨¡æ‹Ÿå¯å˜ç”µé˜»çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç”¨äºè°ƒèŠ‚æ¨¡æ‹Ÿä¿¡å·çš„å¢ç›Šã€äº®åº¦æ§åˆ¶ã€éŸ³é‡æ§åˆ¶ç­‰ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨I2Cæ€»çº¿æ§åˆ¶æ•°å­—ç”µä½å™¨</strong>ï¼š</p><ul><li>åœ¨å•ç‰‡æœºç³»ç»Ÿä¸­ï¼Œå¯ä»¥é€šè¿‡I2Cæ€»çº¿æ¥ä¸æ•°å­—ç”µä½å™¨é€šä¿¡ï¼Œå‘é€ç›¸åº”çš„å‘½ä»¤ä»¥è°ƒèŠ‚ç”µä½å™¨çš„ç”µé˜»å€¼ã€‚</li><li>é€šè¿‡å‘æ•°å­—ç”µä½å™¨å‘é€æ§åˆ¶å‘½ä»¤ï¼Œå•ç‰‡æœºå¯ä»¥å®ç°å¯¹ç”µè·¯ä¸­æ•°å­—ç”µä½å™¨çš„è¿œç¨‹æ§åˆ¶ã€‚</li><li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå•ç‰‡æœºå¯ä»¥å®ç°å¯¹ç”µè·¯ä¸­å„ç§å‚æ•°çš„åŠ¨æ€è°ƒèŠ‚ï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»å’Œæ™ºèƒ½åŒ–ã€‚</li></ul></li></ol>              </div>            </details>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> åµŒå…¥å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åµŒå…¥å¼ </tag>
            
            <tag> stm32 </tag>
            
            <tag> è“æ¡¥æ¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè·¯æ¸¸æˆï¼šTuring Complete</title>
      <link href="/2024/02/11/%E7%94%B5%E8%B7%AF%E6%B8%B8%E6%88%8F%EF%BC%9ATuring-Complete/"/>
      <url>/2024/02/11/%E7%94%B5%E8%B7%AF%E6%B8%B8%E6%88%8F%EF%BC%9ATuring-Complete/</url>
      
        <content type="html"><![CDATA[<p>éå¸¸å¥½æ¸¸æˆï¼Œè¿™ä½¿æˆ‘çš„å¤§è„‘è¿åŠ¨</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯1.3rtcfnar8b80.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯1.3rtcfnar8b80.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=" å¾·Â·æ‘©æ ¹å®šå¾‹"/></div><span class="image-caption"> å¾·Â·æ‘©æ ¹å®šå¾‹</span></div><details open><summary pointer> è¢œå­é…å¯¹ </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯2.2sqqoyj7pvc0.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯2.2sqqoyj7pvc0.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯3.6gayi9ytjw00.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯3.6gayi9ytjw00.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯4.63k46pi5wb80.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯4.63k46pi5wb80.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=" æˆ‘çš„è§£ç­”"/></div><span class="image-caption"> æˆ‘çš„è§£ç­”</span></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯5.2twsa5gbl340.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯5.2twsa5gbl340.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=" å®˜æ–¹è§£ç­”ï¼Œå¥½æ¼‚äº®çš„æ’çº¿"/></div><span class="image-caption"> å®˜æ–¹è§£ç­”ï¼Œå¥½æ¼‚äº®çš„æ’çº¿</span></div>              </div>            </details><details open><summary pointer> å¥‡æ•°ä¸ªä¿¡å· </summary>              <div class='content'>              <div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯6.65srarkamuw0.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯6.65srarkamuw0.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯7.2bjw874mwg74.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240211/ç”µè·¯7.2bjw874mwg74.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>              </div>            </details>]]></content>
      
      
      <categories>
          
          <category> ç”µè·¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸¸æˆ </tag>
            
            <tag> Turing Complete </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»™ç½‘ç«™åŠ ä¸€ä¸ªå€’æ•°æ—¥å¡ç‰‡~ï¼ˆæˆåŠŸå•¦~ï¼‰</title>
      <link href="/2024/02/07/%E7%BB%99%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%80%92%E6%95%B0%E6%97%A5%E5%8D%A1%E7%89%87/"/>
      <url>/2024/02/07/%E7%BB%99%E7%BD%91%E7%AB%99%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%80%92%E6%95%B0%E6%97%A5%E5%8D%A1%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p>æƒ³ç»™ç½‘ç«™åŠ ä¸€ä¸ªå€’æ•°æ—¥å¡ç‰‡<br>ä½†æ˜¯ä¸»é¢˜é‡Œæ²¡æœ‰ç›¸å…³é…ç½®<br>å› ä¸ºå¯¹ç½‘ç«™ä¹‹ç±»çš„å®Œå…¨é›¶åŸºç¡€ï¼Œçœ‹äº†ä¸€åœˆæ„Ÿè§‰è‡ªå·±æƒ³è¦çš„æ•ˆæœè·Ÿç½‘ç«™ä¸Šå·²æœ‰çš„â€åº§å³é“­â€å¡ç‰‡çš„å®ç°å¾ˆåƒ<br>å‡†å¤‡å­¦ä¹ å€Ÿç”¨ä¸€ä¸‹~</p><details open><summary pointer> motto.ejsï¼ˆåº§å³é“­å¡ç‰‡ï¼‰ </summary>              <div class='content'>              <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;% if (theme.motto.on &amp;&amp; page.current === 1) &#123; %&gt;</span></span><br><span class="line">  <span class="section">&lt;div class=<span class="string">&quot;motto&quot;</span>&gt;</span></span><br><span class="line">      <span class="section">&lt;h3 class=<span class="string">&quot;motto-title&quot;</span>&gt;</span><span class="section">&lt;%= theme.motto.title %&gt;</span><span class="section">&lt;/h3&gt;</span></span><br><span class="line">      <span class="section">&lt;div class=<span class="string">&quot;motto-content&quot;</span>&gt;</span></span><br><span class="line">        <span class="section">&lt;p&gt;</span></span><br><span class="line">          <span class="section">&lt;%= theme.motto.content %&gt;</span>  </span><br><span class="line">        <span class="section">&lt;/p&gt;</span> </span><br><span class="line">      <span class="section">&lt;/div&gt;</span></span><br><span class="line">  <span class="section">&lt;/div&gt;</span></span><br><span class="line"><span class="section">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><span class='pbg info'>theme.motto.on</span>ï¼Ÿæ„Ÿè§‰å¥½åƒæ‡‚äº†ä»€ä¹ˆ<details open><summary pointer> ä¸»é¢˜é…ç½®æ–‡ä»¶æ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é¦–é¡µå€’æ•°æ—¥</span></span><br><span class="line"><span class="attr">countdown:</span></span><br><span class="line">  <span class="attr">on:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>åˆšåˆšè¿˜åœ¨æƒ³å¡ç‰‡çš„æ ·å¼æ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ï¼Œç„¶åæƒ³èµ·æ¥è¿˜æœ‰ccs</p><details open><summary pointer> motto.styl </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.motto</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">20px</span> -<span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">convert</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;motto.background&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.motto-title</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.motto-content</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#34495e</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">551px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.motto</span> &#123;</span><br><span class="line">    <span class="selector-class">.motto-content</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">10%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>æ„Ÿè§‰è®¾ç½®å¤šä¸ªå¹³è¡Œå†…å®¹è·Ÿå…¬å‘Šæœ‰ç‚¹åƒï¼Œçœ‹çœ‹å»</p><details open><summary pointer> ä¸»é¢˜é…ç½®æ–‡ä»¶ </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list: # listç›¸å½“äºæ•°ç»„å¯¹è±¡ï¼Œ[&#123;title:<span class="string">&#x27;xx&#x27;</span>,date: <span class="string">&#x27;xx&#x27;</span>, url: <span class="string">&#x27;xxx&#x27;</span>, color: <span class="string">&#x27;red&#x27;</span>&#125;]æ ¹æ®è‡ªå·±å®é™…æƒ…å†µï¼Œå¢åŠ æˆ–è€…åˆ é™¤</span><br></pre></td></tr></table></figure>              </div>            </details><p>æˆ‘ä¹Ÿå‚¨å­˜ä¸€ä¸‹</p><details open><summary pointer> countdown.ejsæ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> listData = [</span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">];</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><details open><summary pointer> countdown.ejsæ–°å¢å€’æ•°æ—¥å‡½æ•°ï¼š </summary>              <div class='content'>              <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate, callback</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å°†ç›®æ ‡æ—¥æœŸå’Œå½“å‰æ—¥æœŸè½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> remainingTime = targetTime - currentTime;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å°†å‰©ä½™æ—¶é—´è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span><br><span class="line"><span class="language-javascript">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span><br><span class="line"><span class="language-javascript">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>)</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// è¿”å›å‰©ä½™æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>ç°åœ¨countdown.ejsæ˜¯è¿™æ ·çš„ï¼š</p><details open><summary pointer> countdown.ejs </summary>              <div class='content'>              <figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-vbscript">&lt;%<span class="keyword">if</span> (theme.countdown.<span class="keyword">on</span> &amp;&amp; page.current === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-vbscript"> listData.forEach(<span class="keyword">function</span>(item) &#123; %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice&quot;</span> <span class="attr">id</span>=<span class="string">&quot;appIndexNotice&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-bullhorn index-notice-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="language-vbscript">&lt;%= item.title %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span><span class="language-vbscript">&lt;% item.listData.forEach(<span class="keyword">function</span>(data) &#123; %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><span class="language-vbscript">&lt;%= data.title %&gt;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›®æ ‡æ—¥æœŸ: </span><span class="language-vbscript">&lt;%= data.targetDate %&gt;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‰©ä½™æ—¶é—´: </span><span class="language-vbscript">&lt;%= countdown(data.targetDate) %&gt;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span><span class="language-vbscript">&lt;% &#125;); %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="language-vbscript">&lt;% &#125;); &#125;%&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†ç›®æ ‡æ—¥æœŸå’Œå½“å‰æ—¥æœŸè½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> remainingTime = targetTime - currentTime;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†å‰©ä½™æ—¶é—´è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è¿”å›å‰©ä½™æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> listData = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>              </div>            </details><p>ç°åœ¨æ–°å»ºcountdown.styl<br>ï¼ˆæˆ‘ç°åœ¨è¿˜ä¸å¤ªæ¸…æ¥šè¦ä¸è¦å®šä¹‰å¡ç‰‡æ”¾åœ¨é¡µé¢å“ªä¸ªä½ç½®ï¼Œåˆ°æœ€åå†è¯´å§ï¼‰</p><p>æ‰¾åˆ°ä¸€ä¸ªä¸œè¥¿ï¼š</p><details open><summary pointer> motto.ejsï¼š </summary>              <div class='content'>              <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">551px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.motto</span> &#123;</span><br><span class="line">    <span class="selector-class">.motto-content</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">10%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>æ„Ÿè§‰æ˜¯å¡ç‰‡æ’åˆ—çš„åº•å±‚é€»è¾‘ï¼Œç”±äºè¿™é‡Œæ˜¯å±å¹•å®½åº¦å°äºç­‰äº 551px æ—¶ï¼Œäºæ˜¯è¦æ‰¾ä¸€ä¸ªæ€»çš„é»˜è®¤çš„.stylæ–‡ä»¶çœ‹ä¸€çœ‹<br>æ‰¾åˆ°ä¸€ä¸ªæ„Ÿè§‰å¾ˆåƒçš„ï¼š</p><details open><summary pointer> home.stylï¼š </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  <span class="selector-class">.widget</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">20px</span> -<span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.content</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">16px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1200px</span>) &#123;</span><br><span class="line">  &amp; &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">  &amp; &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">992px</span>) &#123;</span><br><span class="line">  &amp; &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.l_content</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>åˆšåˆšå‘ç°.stylæ–‡ä»¶é‡Œè¿˜è¦ä¸€ä¸ªè¿™ä¸ªå±æ€§</p><details open><summary pointer> motto.stylï¼š </summary>              <div class='content'>              <figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">position: relative</span><br></pre></td></tr></table></figure>              </div>            </details><p>æ€»ä¹‹æ€»ä¹‹å¡ç‰‡&#x2F;ç»„ä»¶ä½ç½®åº”è¯¥ä¸ç”¨æˆ‘å‡†ç¡®å®šä¹‰äº†</p><details open><summary pointer> ä¸»é¢˜é…ç½®æ–‡ä»¶æ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># é¦–é¡µå€’æ•°æ—¥</span></span><br><span class="line"><span class="symbol">countdown:</span></span><br><span class="line"><span class="symbol">  on:</span> true</span><br><span class="line"><span class="symbol">  background:</span> blue<span class="comment">//æ–°å¢</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>æœ€åçš„countdown.stylï¼ˆå¤ªæ™šäº†ï¼Œå…·ä½“çš„æ²¡ç»†æ”¹ï¼Œä¸»æ‰“çš„ä¸€ä¸ªå‡ºç°äº†å°±æ˜¯æœ€å¥½çš„ï¼ï¼‰</p><details open><summary pointer> countdown.stylï¼š </summary>              <div class='content'>              <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.index-notice</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">20px</span> -<span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">convert</span>(<span class="built_in">hexo-config</span>(<span class="string">&#x27;countdown.background&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.index-notice-icon</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.index-notice-content</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.countdown-card</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#34495e</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">551px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.motto</span> &#123;</span><br><span class="line">    <span class="selector-class">.motto-content</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">10%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>countdown.ejså’Œcountdown.styléƒ½å¤‡ä»½å¥½äº†ï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡æµ‹è¯•~</p><p>å‘ç°æ²¡æˆåŠŸï¼Œä½†æ˜¯æˆ‘åˆå‘ç°äº†ä¸€ä¸ªéœ€è¦é…ç½®çš„æ–‡ä»¶ï¼š</p><details open><summary pointer> index.ejsï¼š </summary>              <div class='content'>              <figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby"> <span class="keyword">if</span>(theme.swiper.on ) &#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- é¦–é¡µè½®æ’­ --&gt;</span></span></span><br><span class="line"><span class="language-xml">  &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/swiper&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby"> &#125; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;l_main&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;l_content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- è‡ªå®šä¹‰çš„å†…å®¹ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/home_widget&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µåº§å³é“­ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/motto&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µå…¬å‘Š --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/notice&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µæ–‡ç« ç½®é¡¶ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/topArticle&#x27;</span>, &#123;<span class="symbol">page:</span> page&#125;) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-floor&quot;</span> <span class="attr">id</span>=<span class="string">&quot;home-bg-floor&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -2;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- æ¯ä¸€ç¯‡æ–‡ç« å¡ç‰‡ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/card/post&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- ç¿»é¡µ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/paginator&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/side&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- èŠ±ç“£å’Œé›ªèŠ±é£˜è½ --&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/scripts/falling&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- ç¯ç¬¼ --&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/lantern&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br></pre></td></tr></table></figure>              </div>            </details><p>ç„¶åç…§è‘«èŠ¦ç”»ç“¢ï¼š</p><details open><summary pointer> index.ejsæ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby"> <span class="keyword">if</span>(theme.swiper.on ) &#123; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- é¦–é¡µè½®æ’­ --&gt;</span></span></span><br><span class="line"><span class="language-xml">  &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/swiper&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">&lt;%</span><span class="language-ruby"> &#125; </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;l_main&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;l_content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- è‡ªå®šä¹‰çš„å†…å®¹ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/home_widget&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µå€’æ•°æ—¥ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/countdown&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µåº§å³é“­ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/motto&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µå…¬å‘Š --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/notice&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- é¦–é¡µæ–‡ç« ç½®é¡¶ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/topArticle&#x27;</span>, &#123;<span class="symbol">page:</span> page&#125;) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-floor&quot;</span> <span class="attr">id</span>=<span class="string">&quot;home-bg-floor&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;width: 100%;height: 100%;z-index: -2;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- æ¯ä¸€ç¯‡æ–‡ç« å¡ç‰‡ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/card/post&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- ç¿»é¡µ --&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/paginator&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  &lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/side&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- èŠ±ç“£å’Œé›ªèŠ±é£˜è½ --&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/scripts/falling&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- ç¯ç¬¼ --&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;%-</span><span class="language-ruby"> partial(<span class="string">&#x27;_partial/lantern&#x27;</span>) </span><span class="language-xml">%&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>ç¬¬äºŒæ¬¡æµ‹è¯•~<br>ç§å¯†é©¬èµ›ï¼ŒæŠ¥bugäº†ï¼š</p><details open><summary pointer> bugï¼š </summary>              <div class='content'>              <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">D:\github_code\blog\themes\hexo-theme-bamboo\layout\_partial\countdown.ejs:<span class="number">1</span></span><br><span class="line"> &gt;&gt; <span class="number">1</span>| &lt;%<span class="keyword">if</span> (theme.countdown.<span class="keyword">on</span> &amp;&amp; page.current === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="number">2</span>|  listData.forEach(function(<span class="built_in">item</span>) &#123; %&gt;</span><br><span class="line">    <span class="number">3</span>|   &lt;<span class="keyword">div</span> <span class="built_in">class</span>=<span class="string">&quot;index-notice&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;appIndexNotice&quot;</span>&gt;</span><br><span class="line">    <span class="number">4</span>|     &lt;h3&gt;</span><br><span class="line"></span><br><span class="line">listData <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure>              </div>            </details><p>ä¿®æ”¹äº†ä¸€ä¸‹countdown.ejs:</p><details open><summary pointer> index.ejsæ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="keyword">if</span> (theme.<span class="property">countdown</span>.<span class="property">on</span> &amp;&amp; page.<span class="property">current</span> === <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> listData = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span><br><span class="line">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span><br><span class="line">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"> listData.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123; %&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice&quot;</span> <span class="attr">id</span>=<span class="string">&quot;appIndexNotice&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-bullhorn index-notice-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&lt;%= item.title %&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;% item.listData.forEach(function(data) &#123; %&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&lt;%= data.title %&gt;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›®æ ‡æ—¥æœŸ: &lt;%= data.targetDate %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‰©ä½™æ—¶é—´: &lt;%= countdown(data.targetDate) %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;% &#125;); %&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;% &#125;); &#125;%&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> listData = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†ç›®æ ‡æ—¥æœŸå’Œå½“å‰æ—¥æœŸè½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> remainingTime = targetTime - currentTime;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†å‰©ä½™æ—¶é—´è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è¿”å›å‰©ä½™æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><p>å˜é‡åé”™äº†&#x2F;(ã„’oã„’)&#x2F;~~å†æ”¹ä¸€ä¸‹ï¼š</p><details open><summary pointer> countdown.ejsæ–°å¢ï¼š </summary>              <div class='content'>              <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="keyword">if</span> (theme.<span class="property">countdown</span>.<span class="property">on</span> &amp;&amp; page.<span class="property">current</span> === <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> listData = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span><br><span class="line">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span><br><span class="line">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"> listData.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">item</span>) &#123; %&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice&quot;</span> <span class="attr">id</span>=<span class="string">&quot;appIndexNotice&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-bullhorn index-notice-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&lt;%= item.title %&gt;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&lt;%= item.title %&gt;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›®æ ‡æ—¥æœŸ: &lt;%= item.targetDate %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‰©ä½™æ—¶é—´: &lt;%= countdown(item.targetDate) %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;% &#125;); &#125;%&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> listData = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†ç›®æ ‡æ—¥æœŸå’Œå½“å‰æ—¥æœŸè½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> remainingTime = targetTime - currentTime;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// å°†å‰©ä½™æ—¶é—´è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="comment">// è¿”å›å‰©ä½™æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><p>åˆæŠ¥é”™å•¦<del>è¢«è‡ªå·±è ¢ç¬‘å•¦</del></p><details open><summary pointer> countdown.ejsï¼š </summary>              <div class='content'>              <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="keyword">if</span> (theme.<span class="property">countdown</span>.<span class="property">on</span> &amp;&amp; page.<span class="property">current</span> === <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> listData = [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span><br><span class="line">      <span class="attr">targetDate</span>: <span class="string">&quot;2024-03-23&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span><br><span class="line">      <span class="attr">targetDate</span>: <span class="string">&quot;2024-04-13&quot;</span>, <span class="comment">// ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate</span>) &#123;</span><br><span class="line">    <span class="comment">// å°†ç›®æ ‡æ—¥æœŸå’Œå½“å‰æ—¥æœŸè½¬æ¢ä¸ºæ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span><br><span class="line">    <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> remainingTime = targetTime - currentTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å‰©ä½™æ—¶é—´è½¬æ¢ä¸ºå¤©ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’</span></span><br><span class="line">    <span class="keyword">const</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span><br><span class="line">    <span class="keyword">const</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span><br><span class="line">      (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">const</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(</span><br><span class="line">      (remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">const</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›å‰©ä½™æ—¶é—´çš„å­—ç¬¦ä¸²æ ¼å¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  listData.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123; %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice&quot;</span> <span class="attr">id</span>=<span class="string">&quot;appIndexNotice&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-bullhorn index-notice-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>&lt;%= item.title %&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h4</span>&gt;</span>&lt;%= item.title %&gt;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›®æ ‡æ—¥æœŸ: &lt;%= item.targetDate %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‰©ä½™æ—¶é—´: &lt;%= countdown(item.targetDate) %&gt;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;% &#125;); &#125;%&gt;</span><br></pre></td></tr></table></figure>              </div>            </details><p>ç¬¬ä¸‰æ¬¡æµ‹è¯•~(ç»™ä»£ç ç£•ä¸ªå¤´&#x2F;(ã„’oã„’)&#x2F;~~)<br>æˆåŠŸäº†ï¼ï¼ï¼ï¼ï¼ï¼</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="https://tumytime.github.io/picx-images-hosting/20240206/countdown.47klh3scjmy0.webp" class="lazyload placeholder" data-srcset="https://tumytime.github.io/picx-images-hosting/20240206/countdown.47klh3scjmy0.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ"/></div><span class="image-caption">å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</span></div><p>ç­‰ä¼šã€‚ã€‚ã€‚ã€‚&#x2F;(ã„’oã„’)&#x2F;~~<br>ä¸¤ä¸ªbugï¼š<br>1.çœ‹èµ·æ¥ç”¨çš„ä¸æ˜¯æˆ‘ç°åœ¨çš„æ—¶é—´å‘€ï¼Œåƒæ˜¯æˆ‘ä¸Šä¼ çš„æ—¶é—´ï¼Œå› ä¸ºæ€ä¹ˆæ ·ä»–éƒ½ä¸å˜<br>2.æˆ‘å…¬å‘Šæ æ€ä¹ˆä¸æ»šåŠ¨äº†ï¼Ÿï¼Ÿï¼Ÿï¼ŸOrz</p><p>ç¬¬ä¸€ä¸ªbugï¼Œçªç„¶æƒ³èµ·æ¥è¿™ä¸ªç½‘ç«™æ˜¯é™æ€ï¼Œè¯·æ•™äº†GPTè€å¸ˆï¼š</p><details open><summary pointer> GPTè€å¸ˆ </summary>              <div class='content'>              <p>æ˜¯çš„ï¼Œè¿™æ®µä»£ç è·å–çš„æ˜¯å®¢æˆ·ç«¯çš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨çš„æ—¥æœŸå’Œæ—¶é—´ã€‚å¦‚æœä½ çš„ç½‘ç«™æ˜¯é™æ€çš„ï¼Œå³æ²¡æœ‰ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’æ›´æ–°é¡µé¢å†…å®¹çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆ <code>new Date().getTime()</code> è·å–çš„æ—¶é—´å°†å§‹ç»ˆæ˜¯ç”¨æˆ·æ‰“å¼€ç½‘é¡µæ—¶çš„æ—¶é—´ï¼Œä¸ä¼šå®æ—¶æ›´æ–°ã€‚</p><p>å¦‚æœä½ æƒ³è¦åœ¨é™æ€ç½‘ç«™ä¸­å®ç°å®æ—¶å€’è®¡æ—¶åŠŸèƒ½ï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ JavaScript é…åˆå®¢æˆ·ç«¯çš„æ—¶åŒºåç§»æ¥è·å–å½“å‰æ—¶é—´ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getCurrentTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">var</span> offset = date.<span class="title function_">getTimezoneOffset</span>() * <span class="number">60</span> * <span class="number">1000</span>; <span class="comment">// è·å–å®¢æˆ·ç«¯æ—¶åŒºåç§»ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰</span></span><br><span class="line">  <span class="keyword">var</span> currentTime = date.<span class="title function_">getTime</span>() - offset; <span class="comment">// å½“å‰æ—¶é—´å‡å»æ—¶åŒºåç§»å¾—åˆ°å®¢æˆ·ç«¯æ—¶é—´</span></span><br><span class="line">  <span class="keyword">return</span> currentTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span><br><span class="line"><span class="keyword">var</span> currentTime = <span class="title function_">getCurrentTime</span>();</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>getCurrentTime</code> å‡½æ•°é€šè¿‡è·å–å®¢æˆ·ç«¯çš„æ—¶åŒºåç§»ï¼Œå°†å®¢æˆ·ç«¯æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´è¿›è¡ŒåŒæ­¥ã€‚è¿™æ ·å°±èƒ½åœ¨é™æ€ç½‘ç«™ä¸­å®ç°å®æ—¶çš„å€’è®¡æ—¶åŠŸèƒ½ã€‚è¯·æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä»ç„¶ä¾èµ–äºå®¢æˆ·ç«¯çš„æ—¶é—´ï¼Œå› æ­¤å¯èƒ½ä¼šå—åˆ°ç”¨æˆ·è®¾å¤‡æ—¶é—´ä¸å‡†ç¡®æˆ–ç¯¡æ”¹çš„å½±å“ã€‚</p>              </div>            </details><p>ç„¶ååˆåŠ äº†å®æ—¶æ»šåŠ¨åŠŸèƒ½ï¼š</p><details ><summary pointer> countdown.ejs </summary>              <div class='content'>              <figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>å®æ—¶å€’è®¡æ—¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.countdown-card</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">      <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;countdown-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="language-vbscript">&lt;% <span class="keyword">let</span> listData = [</span></span><br><span class="line"><span class="language-vbscript">        &#123;</span></span><br><span class="line"><span class="language-vbscript">          title: <span class="string">&quot;è®¡ç®—æœºäºŒçº§&quot;</span>,</span></span><br><span class="line"><span class="language-vbscript">          targetDate: <span class="string">&quot;2024-03-23&quot;</span>, // ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line"><span class="language-vbscript">        &#125;,</span></span><br><span class="line"><span class="language-vbscript">        &#123;</span></span><br><span class="line"><span class="language-vbscript">          title: <span class="string">&quot;è“æ¡¥æ¯çœèµ›&quot;</span>,</span></span><br><span class="line"><span class="language-vbscript">          targetDate: <span class="string">&quot;2024-04-13&quot;</span>, // ç›®æ ‡æ—¥æœŸ</span></span><br><span class="line"><span class="language-vbscript">        &#125;</span></span><br><span class="line"><span class="language-vbscript">      ];</span></span><br><span class="line"><span class="language-vbscript"></span></span><br><span class="line"><span class="language-vbscript">      listData.forEach(<span class="keyword">function</span>(item) &#123; %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-bullhorn index-notice-icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> </span><span class="language-vbscript">&lt;%= item.title %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;index-notice-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">h4</span>&gt;</span></span><span class="language-vbscript">&lt;%= item.title %&gt;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç›®æ ‡æ—¥æœŸ: </span><span class="language-vbscript">&lt;%= item.targetDate %&gt;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">p</span>&gt;</span>å‰©ä½™æ—¶é—´: <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;countdown-</span></span></span><span class="language-vbscript">&lt;%= item.title %&gt;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      </span><span class="language-vbscript">&lt;% &#125;) %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">getCurrentTime</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> offset = date.<span class="title function_">getTimezoneOffset</span>() * <span class="number">60</span> * <span class="number">1000</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> currentTime = date.<span class="title function_">getTime</span>() - offset;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> currentTime;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">updateCountdown</span>(<span class="params">id, remainingTime</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> obj = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> days = <span class="title class_">Math</span>.<span class="title function_">floor</span>(remainingTime / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> hours = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> minutes = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> seconds = <span class="title class_">Math</span>.<span class="title function_">floor</span>((remainingTime % (<span class="number">1000</span> * <span class="number">60</span>)) / <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      obj.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;days&#125;</span>å¤© <span class="subst">$&#123;hours&#125;</span>å°æ—¶ <span class="subst">$&#123;minutes&#125;</span>åˆ†é’Ÿ <span class="subst">$&#123;seconds&#125;</span>ç§’`</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">clearInterval</span>(timer);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        obj.<span class="property">textContent</span> = <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">countdown</span>(<span class="params">targetDate, id</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> targetTime = <span class="keyword">new</span> <span class="title class_">Date</span>(targetDate).<span class="title function_">getTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> currentTime = <span class="title function_">getCurrentTime</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> remainingTime = targetTime - currentTime;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (remainingTime &lt;= <span class="number">0</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id).<span class="property">textContent</span> = <span class="string">&#x27;å€’è®¡æ—¶ç»“æŸ&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        remainingTime -= <span class="number">1000</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">updateCountdown</span>(id, remainingTime);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;, <span class="number">1000</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      </span></span><span class="language-vbscript">&lt;% listData.forEach(<span class="keyword">function</span>(item) &#123; %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        countdown(&quot;</span><span class="language-vbscript">&lt;%= item.targetDate %&gt;</span><span class="language-xml">&quot;, &#x27;countdown-</span><span class="language-vbscript">&lt;%= item.title %&gt;</span><span class="language-xml">&#x27;);</span></span><br><span class="line"><span class="language-xml">      </span><span class="language-vbscript">&lt;% &#125;) %&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    &#125;);</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>              </div>            </details><p>02ï¼š37äº†ã€‚æˆ‘å»ç¡è§‰äº†~ï¼ˆç¬¬äºŒä¸ªbugè‡ªå·±å¥½äº†ã€‚ã€‚ã€‚ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»é¢˜é…ç½® </tag>
            
            <tag> å€’æ•°æ—¥å¡ç‰‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/2024/02/04/test/"/>
      <url>/2024/02/04/test/</url>
      
        <content type="html"><![CDATA[<details ><summary pointer> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayHello</span>();</span><br></pre></td></tr></table></figure>              </div>            </details><div class="link-group"><div class="tagLink"><a class="link-card" no-pjax target="_blank" title="ç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€.pdf" href="/pdf/ç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€.pdf"><span class="link-card-backdrop" style="background-image: url(https://cdn.pixabay.com/photo/2018/12/05/13/41/panda-3857754__340.jpg)"></span><div class="left"><img src="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" class="lazyload placeholder" data-srcset="https://img.51miz.com/Element/00/37/79/59/10df0417_E377959_b7bb9dfa.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div><div class="right"><p class="text">ç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€.pdf</p><p class="url">/pdf/ç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€.pdf</p></div></a></div></div><p><input type="hidden" id="input_pop_1708758433861" value='<iframe id="iframe_pop_1708758433861"  src="https://book.baige.me/view/cvx" style="width:100%;height:100%;background:#eee" frameborder=0 seamless="seamless"  allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" ></iframe>'><a href="#" style="position: relative;display:inline-block;"  onclick="document.querySelector('body').style.overflow='hidden';document.querySelector('#pop_1708758433861').style.display='block';var value=document.getElementById('input_pop_1708758433861').value; var div = document.createElement('div'); div.innerHTML=value;div.setAttribute('style','width:100%;height:100%');document.querySelector('#pop_1708758433861').appendChild(div)" title="ç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€ï¼ˆä¸Šï¼‰"><img style='width: 100%;height:100%;object-fit:contain;padding: 80px;' src='https://book-png-1251142715.cos.ap-shanghai.myqcloud.com/840e47ec-c673-4ccf-955a-02a3ad12ec4a/cover.jpg' style='height: 100%;width: 100%;object-fit: contain;' /><div onmouseout='this.style.background="rgba(85, 134, 224 ,.8)"' onmouseover='this.style.background="rgba(46, 109, 224, .8)"' style='position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(85, 134 ,224, .8)'><svg xmlns='https://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' t='1632813159349' class='icon' viewBox='0 0 1024 1024' version='1.1' p-id='2458' width='200' height='200'><path d='M924.2624 142.1824h-255.42656c-48.4096 0-93.9008 17.88416-128.19456 50.47808-11.6736 11.06944-20.79744 23.83872-28.70272 37.0944-7.9104-13.25568-17.02912-25.9072-28.8256-37.0944-34.304-32.59392-79.79008-50.47296-128.19968-50.47296H99.7376c-13.49632 0-24.44288 10.33216-24.44288 23.22944V807.3728c0 12.89216 10.94656 23.22944 24.448 23.22944h229.75488c9.61024 0 19.34336 0.73216 29.07136 2.54976 9.85088 1.83296 19.21536 4.38272 28.09344 7.79264l116.4032 43.05408c0.24064 0.11776 0.4864 0 0.72704 0.11776 2.67776 0.85504 5.35552 1.4592 8.15104 1.4592 2.80064 0 5.46816-0.48128 8.15104-1.4592 0.11776-0.11776 0.4864-0.11776 0.60928-0.11776l111.77472-41.35424a203.5456 203.5456 0 0 1 32.96256-9.00096 197.7344 197.7344 0 0 1 34.048-3.04128h224.77312c13.50656 0 24.45312-10.46016 24.45312-23.22944V165.29408c0-12.7744-10.94656-23.10656-24.45312-23.10656zM367.4368 787.43552a220.9792 220.9792 0 0 0-37.94944-3.28704H124.06272V188.5184h230.97344c35.38944 0 68.72064 13.13792 93.7728 37.09952 25.05728 23.83872 38.92224 55.45984 38.92224 89.27744v513.39776l-83.31776-30.77632a232.15616 232.15616 0 0 0-36.97152-10.09152z m532.49536-3.28704h-200.33024c-14.592 0-29.18912 1.21344-43.04896 3.77344-14.11072 2.67264-28.22144 6.44096-41.6 11.43296l-78.57152 28.94848V314.7776c0-33.6896 13.74208-65.4336 38.79936-89.27744 25.05216-23.83872 58.38336-37.0944 93.7728-37.0944h231.09632v595.7376h-0.11776z' p-id='2459' fill='#dbdbdb'></path></svg></div></a><div id="pop_1708758433861" style="display: none; position: fixed;width: 100%; height: 100%; padding: 20px; background: rgba(0, 0, 0, 0.6);box-sizing: border-box; top: 0; left: 0; z-index: 99999; "><a href="#" title="å…³é—­" onclick="document.querySelector('body').style.overflow='auto';document.querySelector('#pop_1708758433861').style.display='none';var rm=document.getElementById('iframe_pop_1708758433861');rm.parentNode.parentNode.parentNode.removeChild(rm.parentNode);" style="top:0;right:0;position:absolute;width:32px;height:32px;"><span style="position: absolute;cursor: pointer; background-color: #000;border: 2px solid #fff;width: 24px;height: 24px;border-radius: 12px;top: 5px;padding-bottom:4px;right: 5px;color:white;line-height:24px;box-shadow: 0 0 3px #000;text-align: center;display: flex;justify-content: center;align-items: center;">x</span></a></div></p><span class='btn center large round solid'><a class="button" href='https://baidu.com' title='å¼€å§‹ä½¿ç”¨'><i class='fa fa-download'></i>å¼€å§‹ä½¿ç”¨</a></span><p>testestest</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">sayHello</span>();</span><br></pre></td></tr></table></figure><pre><code class="language-javascript">function sayHello() &#123;console.log("Hello, World!");&#125;sayHello();</code></pre><details ><summary pointer> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <pre><code class="language-javascript">function sayHello() &#123;console.log("Hello, World!");&#125;sayHello();</code></pre>              </div>            </details><div class="video"><video controls preload><source src='/video/conan.mp4' type='video/mp4'>Your browser does not support the video tag.</video></div>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/2024/02/01/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/"/>
      <url>/2024/02/01/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼ç»ˆäºæŠŠç½‘ç«™å»ºå¥½äº†ï¼å¼€å¿ƒå¼€å¿ƒ</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç¢ç¢å¿µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/02/01/hello-world/"/>
      <url>/2024/02/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> hello </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
